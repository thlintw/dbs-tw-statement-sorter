var Kn=Object.defineProperty;var Jn=(t,e,s)=>e in t?Kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Jt=(t,e,s)=>(Jn(t,typeof e!="symbol"?e+"":e,s),s),Me=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(Me(t,e,"read from private field"),s?s.call(t):e.get(t)),K=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},yt=(t,e,s,n)=>(Me(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var ue=(t,e,s,n)=>({set _(i){yt(t,e,i,s)},get _(){return r(t,e,n)}}),ht=(t,e,s)=>(Me(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function makeMap(t,e){const s=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return e?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>isObject(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let s=0;s<t.length;s++)t[s](e)},def=(t,e,s)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e},toNumber=t=>{const e=isString(t)?Number(t):NaN;return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const l in i)e[l]=i[l]}return e}else{if(isString(t))return t;if(isObject(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e;let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function getCurrentScope(){return activeEffectScope}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let s=0;for(let n=0;n<e.length;n++){const i=e[n];wasTracked(i)&&!newTracked(i)?i.delete(t):e[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}e.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,s=null,n){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,s=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,s){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||n.set(s,i=createDep()),trackEffects(i)}}function trackEffects(t,e){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,s=!wasTracked(t)):s=!t.has(activeEffect),s&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,s,n,i,l){const c=targetMap.get(t);if(!c)return;let L=[];if(e==="clear")L=[...c.values()];else if(s==="length"&&isArray(t)){const g=Number(n);c.forEach((m,u)=>{(u==="length"||u>=g)&&L.push(m)})}else switch(s!==void 0&&L.push(c.get(s)),e){case"add":isArray(t)?isIntegerKey(s)&&L.push(c.get("length")):(L.push(c.get(ITERATE_KEY)),isMap(t)&&L.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(t)||(L.push(c.get(ITERATE_KEY)),isMap(t)&&L.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&L.push(c.get(ITERATE_KEY));break}if(L.length===1)L[0]&&triggerEffects(L[0]);else{const g=[];for(const m of L)m&&g.push(...m);triggerEffects(createDep(g))}}function triggerEffects(t,e){const s=isArray(t)?t:[...t];for(const n of s)n.computed&&triggerEffect(n);for(const n of s)n.computed||triggerEffect(n)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const n=toRaw(this);for(let l=0,c=this.length;l<c;l++)track(n,"get",l+"");const i=n[e](...s);return i===-1||i===!1?n[e](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){pauseTracking();const n=toRaw(this)[e].apply(this,s);return resetTracking(),n}}),t}function hasOwnProperty(t){const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}function createGetter(t=!1,e=!1){return function(n,i,l){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&l===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(n))return n;const c=isArray(n);if(!t){if(c&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,l);if(i==="hasOwnProperty")return hasOwnProperty}const L=Reflect.get(n,i,l);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(t||track(n,"get",i),e)?L:isRef(L)?c&&isIntegerKey(i)?L:L.value:isObject(L)?t?readonly(L):reactive(L):L}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(s,n,i,l){let c=s[n];if(isReadonly(c)&&isRef(c)&&!isRef(i))return!1;if(!t&&(!isShallow(i)&&!isReadonly(i)&&(c=toRaw(c),i=toRaw(i)),!isArray(s)&&isRef(c)&&!isRef(i)))return c.value=i,!0;const L=isArray(s)&&isIntegerKey(n)?Number(n)<s.length:hasOwn(s,n),g=Reflect.set(s,n,i,l);return s===toRaw(l)&&(L?hasChanged(i,c)&&trigger(s,"set",n,i):trigger(s,"add",n,i)),g}}function deleteProperty(t,e){const s=hasOwn(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&trigger(t,"delete",e,void 0),n}function has$1(t,e){const s=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),s}function ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get(t,e,s=!1,n=!1){t=t.__v_raw;const i=toRaw(t),l=toRaw(e);s||(e!==l&&track(i,"get",e),track(i,"get",l));const{has:c}=getProto(i),L=n?toShallow:s?toReadonly:toReactive;if(c.call(i,e))return L(t.get(e));if(c.call(i,l))return L(t.get(l));t!==i&&t.get(e)}function has(t,e=!1){const s=this.__v_raw,n=toRaw(s),i=toRaw(t);return e||(t!==i&&track(n,"has",t),track(n,"has",i)),t===i?s.has(t):s.has(t)||s.has(i)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set(t,e){e=toRaw(e);const s=toRaw(this),{has:n,get:i}=getProto(s);let l=n.call(s,t);l||(t=toRaw(t),l=n.call(s,t));const c=i.call(s,t);return s.set(t,e),l?hasChanged(e,c)&&trigger(s,"set",t,e):trigger(s,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:s,get:n}=getProto(e);let i=s.call(e,t);i||(t=toRaw(t),i=s.call(e,t)),n&&n.call(e,t);const l=e.delete(t);return i&&trigger(e,"delete",t,void 0),l}function clear(){const t=toRaw(this),e=t.size!==0,s=t.clear();return e&&trigger(t,"clear",void 0,void 0),s}function createForEach(t,e){return function(n,i){const l=this,c=l.__v_raw,L=toRaw(c),g=e?toShallow:t?toReadonly:toReactive;return!t&&track(L,"iterate",ITERATE_KEY),c.forEach((m,u)=>n.call(i,g(m),g(u),l))}}function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,l=toRaw(i),c=isMap(l),L=t==="entries"||t===Symbol.iterator&&c,g=t==="keys"&&c,m=i[t](...n),u=s?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",g?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:F,done:O}=m.next();return O?{value:F,done:O}:{value:L?[u(F[0]),u(F[1])]:u(F),done:O}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(l){return get(this,l)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(l){return get(this,l,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(l){return get(this,l,!0)},get size(){return size(this,!0)},has(l){return has.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(l){return get(this,l,!0,!0)},get size(){return size(this,!0)},has(l){return has.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=createIterableMethod(l,!1,!1),s[l]=createIterableMethod(l,!0,!1),e[l]=createIterableMethod(l,!1,!0),n[l]=createIterableMethod(l,!0,!0)}),[t,s,e,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const s=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,i,l)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=i.get(t);if(l)return l;const c=getTargetType(t);if(c===0)return t;const L=new Proxy(t,c===2?n:s);return i.set(t,L),L}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t);const s=t.dep;s&&triggerEffects(s)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=s?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(t,e,s=!1){let n,i;const l=isFunction(t);return l?(n=t,i=NOOP):(n=t.get,i=t.set),new ComputedRefImpl(n,i,l||!i,s)}function warn(t,...e){}function callWithErrorHandling(t,e,s,n){let i;try{i=n?t(...n):t()}catch(l){handleError(l,e,s)}return i}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction(t)){const l=callWithErrorHandling(t,e,s,n);return l&&isPromise(l)&&l.catch(c=>{handleError(c,e,s)}),l}const i=[];for(let l=0;l<t.length;l++)i.push(callWithAsyncErrorHandling(t[l],e,s,n));return i}function handleError(t,e,s,n=!0){const i=e?e.vnode:null;if(e){let l=e.parent;const c=e.proxy,L=s;for(;l;){const m=l.ec;if(m){for(let u=0;u<m.length;u++)if(m[u](t,c,L)===!1)return}l=l.parent}const g=e.appContext.config.errorHandler;if(g){callWithErrorHandling(g,null,10,[t,c,L]);return}}logError(t,s,i,n)}function logError(t,e,s,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1;getId(queue[n])<t?e=n+1:s=n}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const s=queue[e];s&&s.pre&&(queue.splice(e,1),e--,s())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((s,n)=>getId(s)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const s=getId(t)-getId(e);if(s===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return s};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const l=e.startsWith("update:"),c=l&&e.slice(7);if(c&&c in n){const u=`${c==="modelValue"?"model":c}Modifiers`,{number:F,trim:O}=n[u]||EMPTY_OBJ;O&&(i=s.map(P=>isString(P)?P.trim():P)),F&&(i=s.map(looseToNumber))}let L,g=n[L=toHandlerKey(e)]||n[L=toHandlerKey(camelize(e))];!g&&l&&(g=n[L=toHandlerKey(hyphenate(e))]),g&&callWithAsyncErrorHandling(g,t,6,i);const m=n[L+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[L])return;t.emitted[L]=!0,callWithAsyncErrorHandling(m,t,6,i)}}function normalizeEmitsOptions(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const l=t.emits;let c={},L=!1;if(!isFunction(t)){const g=m=>{const u=normalizeEmitsOptions(m,e,!0);u&&(L=!0,extend(c,u))};!s&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}return!l&&!L?(isObject(t)&&n.set(t,null),null):(isArray(l)?l.forEach(g=>c[g]=null):extend(c,l),isObject(t)&&n.set(t,c),c)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let c;try{c=t(...i)}finally{setCurrentRenderingInstance(l),n._d&&setBlockTracking(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,props:l,propsOptions:[c],slots:L,attrs:g,emit:m,render:u,renderCache:F,data:O,setupState:P,ctx:M,inheritAttrs:C}=t;let _,T;const x=setCurrentRenderingInstance(t);try{if(s.shapeFlag&4){const E=i||n;_=normalizeVNode(u.call(E,E,F,l,P,O,M)),T=g}else{const E=e;_=normalizeVNode(E.length>1?E(l,{attrs:g,slots:L,emit:m}):E(l,null)),T=e.props?g:getFunctionalFallthrough(g)}}catch(E){blockStack.length=0,handleError(E,t,1),_=createVNode(Comment)}let B=_;if(T&&C!==!1){const E=Object.keys(T),{shapeFlag:f}=B;E.length&&f&7&&(c&&E.some(isModelListener)&&(T=filterModelListeners(T,c)),B=cloneVNode(B,T))}return s.dirs&&(B=cloneVNode(B),B.dirs=B.dirs?B.dirs.concat(s.dirs):s.dirs),s.transition&&(B.transition=s.transition),_=B,setCurrentRenderingInstance(x),_}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:l}=t,{props:c,children:L,patchFlag:g}=e,m=l.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&g>=0){if(g&1024)return!0;if(g&16)return n?hasPropsChanged(n,c,m):!!c;if(g&8){const u=e.dynamicProps;for(let F=0;F<u.length;F++){const O=u[F];if(c[O]!==n[O]&&!isEmitListener(m,O))return!0}}}else return(i||L)&&(!L||!L.$stable)?!0:n===c?!1:n?c?hasPropsChanged(n,c,m):!0:!!c;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const l=n[i];if(e[l]!==t[l]&&!isEmitListener(s,l))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e&&e.subTree===t;)(t=e.vnode).el=s,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const INITIAL_WATCHER_VALUE={};function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,{immediate:s,deep:n,flush:i,onTrack:l,onTrigger:c}=EMPTY_OBJ){var L;const g=getCurrentScope()===((L=currentInstance)==null?void 0:L.scope)?currentInstance:null;let m,u=!1,F=!1;if(isRef(t)?(m=()=>t.value,u=isShallow(t)):isReactive(t)?(m=()=>t,n=!0):isArray(t)?(F=!0,u=t.some(E=>isReactive(E)||isShallow(E)),m=()=>t.map(E=>{if(isRef(E))return E.value;if(isReactive(E))return traverse(E);if(isFunction(E))return callWithErrorHandling(E,g,2)})):isFunction(t)?e?m=()=>callWithErrorHandling(t,g,2):m=()=>{if(!(g&&g.isUnmounted))return O&&O(),callWithAsyncErrorHandling(t,g,3,[P])}:m=NOOP,e&&n){const E=m;m=()=>traverse(E())}let O,P=E=>{O=x.onStop=()=>{callWithErrorHandling(E,g,4)}},M;if(isInSSRComponentSetup)if(P=NOOP,e?s&&callWithAsyncErrorHandling(e,g,3,[m(),F?[]:void 0,P]):m(),i==="sync"){const E=useSSRContext();M=E.__watcherHandles||(E.__watcherHandles=[])}else return NOOP;let C=F?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const _=()=>{if(x.active)if(e){const E=x.run();(n||u||(F?E.some((f,b)=>hasChanged(f,C[b])):hasChanged(E,C)))&&(O&&O(),callWithAsyncErrorHandling(e,g,3,[E,C===INITIAL_WATCHER_VALUE?void 0:F&&C[0]===INITIAL_WATCHER_VALUE?[]:C,P]),C=E)}else x.run()};_.allowRecurse=!!e;let T;i==="sync"?T=_:i==="post"?T=()=>queuePostRenderEffect(_,g&&g.suspense):(_.pre=!0,g&&(_.id=g.uid),T=()=>queueJob(_));const x=new ReactiveEffect(m,T);e?s?_():C=x.run():i==="post"?queuePostRenderEffect(x.run.bind(x),g&&g.suspense):x.run();const B=()=>{x.stop(),g&&g.scope&&remove(g.scope.effects,x)};return M&&M.push(B),B}function instanceWatch(t,e,s){const n=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let l;isFunction(e)?l=e:(l=e.handler,s=e);const c=currentInstance;setCurrentInstance(this);const L=doWatch(i,l.bind(n),s);return c?setCurrentInstance(c):unsetCurrentInstance(),L}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function traverse(t,e){if(!isObject(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray(t))for(let s=0;s<t.length;s++)traverse(t[s],e);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e)});else if(isPlainObject(t))for(const s in t)traverse(t[s],e);return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,l=e&&e.dirs;for(let c=0;c<i.length;c++){const L=i[c];l&&(L.oldValue=l[c].value);let g=L.dir[n];g&&(pauseTracking(),callWithAsyncErrorHandling(g,s,8,[t.el,L,t,e]),resetTracking())}}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:e}){const s=getCurrentInstance(),n=useTransitionState();let i;return()=>{const l=e.default&&getTransitionRawChildren(e.default(),!0);if(!l||!l.length)return;let c=l[0];if(l.length>1){for(const C of l)if(C.type!==Comment){c=C;break}}const L=toRaw(t),{mode:g}=L;if(n.isLeaving)return emptyPlaceholder(c);const m=getKeepAliveChild(c);if(!m)return emptyPlaceholder(c);const u=resolveTransitionHooks(m,L,n,s);setTransitionHooks(m,u);const F=s.subTree,O=F&&getKeepAliveChild(F);let P=!1;const{getTransitionKey:M}=m.type;if(M){const C=M();i===void 0?i=C:C!==i&&(i=C,P=!0)}if(O&&O.type!==Comment&&(!isSameVNodeType(m,O)||P)){const C=resolveTransitionHooks(O,L,n,s);if(setTransitionHooks(O,C),g==="out-in")return n.isLeaving=!0,C.afterLeave=()=>{n.isLeaving=!1,s.update.active!==!1&&s.update()},emptyPlaceholder(c);g==="in-out"&&m.type!==Comment&&(C.delayLeave=(_,T,x)=>{const B=getLeavingNodesForType(n,O);B[String(O.key)]=O,_._leaveCb=()=>{T(),_._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=x})}return c}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function resolveTransitionHooks(t,e,s,n){const{appear:i,mode:l,persisted:c=!1,onBeforeEnter:L,onEnter:g,onAfterEnter:m,onEnterCancelled:u,onBeforeLeave:F,onLeave:O,onAfterLeave:P,onLeaveCancelled:M,onBeforeAppear:C,onAppear:_,onAfterAppear:T,onAppearCancelled:x}=e,B=String(t.key),E=getLeavingNodesForType(s,t),f=(v,d)=>{v&&callWithAsyncErrorHandling(v,n,9,d)},b=(v,d)=>{const j=d[1];f(v,d),isArray(v)?v.every(k=>k.length<=1)&&j():v.length<=1&&j()},N={mode:l,persisted:c,beforeEnter(v){let d=L;if(!s.isMounted)if(i)d=C||L;else return;v._leaveCb&&v._leaveCb(!0);const j=E[B];j&&isSameVNodeType(t,j)&&j.el._leaveCb&&j.el._leaveCb(),f(d,[v])},enter(v){let d=g,j=m,k=u;if(!s.isMounted)if(i)d=_||g,j=T||m,k=x||u;else return;let $=!1;const nt=v._enterCb=H=>{$||($=!0,H?f(k,[v]):f(j,[v]),N.delayedLeave&&N.delayedLeave(),v._enterCb=void 0)};d?b(d,[v,nt]):nt()},leave(v,d){const j=String(t.key);if(v._enterCb&&v._enterCb(!0),s.isUnmounting)return d();f(F,[v]);let k=!1;const $=v._leaveCb=nt=>{k||(k=!0,d(),nt?f(M,[v]):f(P,[v]),v._leaveCb=void 0,E[j]===t&&delete E[j])};E[j]=t,O?b(O,[v,$]):$()},clone(v){return resolveTransitionHooks(v,e,s,n)}};return N}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,s){let n=[],i=0;for(let l=0;l<t.length;l++){let c=t[l];const L=s==null?c.key:String(s)+String(c.key!=null?c.key:l);c.type===Fragment?(c.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(c.children,e,L))):(e||c.type!==Comment)&&n.push(L!=null?cloneVNode(c,{key:L}):c)}if(i>1)for(let l=0;l<n.length;l++)n[l].patchFlag=-2;return n}function defineComponent(t,e){return isFunction(t)?(()=>extend({name:t.name},e,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),l=e.__weh||(e.__weh=(...c)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const L=callWithAsyncErrorHandling(e,s,t,c);return unsetCurrentInstance(),resetTracking(),L});return n?i.unshift(l):i.push(l),l}}const createHook=t=>(e,s=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const l=s&&s[n];if(isArray(t)||isString(t)){i=new Array(t.length);for(let c=0,L=t.length;c<L;c++)i[c]=e(t[c],c,void 0,l&&l[c])}else if(typeof t=="number"){i=new Array(t);for(let c=0;c<t;c++)i[c]=e(c+1,c,void 0,l&&l[c])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(c,L)=>e(c,L,void 0,l&&l[L]));else{const c=Object.keys(t);i=new Array(c.length);for(let L=0,g=c.length;L<g;L++){const m=c[L];i[L]=e(t[m],m,L,l&&l[L])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:s,setupState:n,data:i,props:l,accessCache:c,type:L,appContext:g}=t;let m;if(e[0]!=="$"){const P=c[e];if(P!==void 0)switch(P){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return l[e]}else{if(hasSetupBinding(n,e))return c[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return c[e]=2,i[e];if((m=t.propsOptions[0])&&hasOwn(m,e))return c[e]=3,l[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return c[e]=4,s[e];shouldCacheAccess&&(c[e]=0)}}const u=publicPropertiesMap[e];let F,O;if(u)return e==="$attrs"&&track(t,"get",e),u(t);if((F=L.__cssModules)&&(F=F[e]))return F;if(s!==EMPTY_OBJ&&hasOwn(s,e))return c[e]=4,s[e];if(O=g.config.globalProperties,hasOwn(O,e))return O[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:l}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:l}},c){let L;return!!s[c]||t!==EMPTY_OBJ&&hasOwn(t,c)||hasSetupBinding(e,c)||(L=l[0])&&hasOwn(L,c)||hasOwn(n,c)||hasOwn(publicPropertiesMap,c)||hasOwn(i.config.globalProperties,c)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,t,"bc");const{data:i,computed:l,methods:c,watch:L,provide:g,inject:m,created:u,beforeMount:F,mounted:O,beforeUpdate:P,updated:M,activated:C,deactivated:_,beforeDestroy:T,beforeUnmount:x,destroyed:B,unmounted:E,render:f,renderTracked:b,renderTriggered:N,errorCaptured:v,serverPrefetch:d,expose:j,inheritAttrs:k,components:$,directives:nt,filters:H}=e;if(m&&resolveInjections(m,n,null),c)for(const _t in c){const S=c[_t];isFunction(S)&&(n[_t]=S.bind(s))}if(i){const _t=i.call(s,s);isObject(_t)&&(t.data=reactive(_t))}if(shouldCacheAccess=!0,l)for(const _t in l){const S=l[_t],X=isFunction(S)?S.bind(s,s):isFunction(S.get)?S.get.bind(s,s):NOOP,at=!isFunction(S)&&isFunction(S.set)?S.set.bind(s):NOOP,At=computed({get:X,set:at});Object.defineProperty(n,_t,{enumerable:!0,configurable:!0,get:()=>At.value,set:wt=>At.value=wt})}if(L)for(const _t in L)createWatcher(L[_t],n,s,_t);if(g){const _t=isFunction(g)?g.call(s):g;Reflect.ownKeys(_t).forEach(S=>{provide(S,_t[S])})}u&&callHook$1(u,t,"c");function ut(_t,S){isArray(S)?S.forEach(X=>_t(X.bind(s))):S&&_t(S.bind(s))}if(ut(onBeforeMount,F),ut(onMounted,O),ut(onBeforeUpdate,P),ut(onUpdated,M),ut(onActivated,C),ut(onDeactivated,_),ut(onErrorCaptured,v),ut(onRenderTracked,b),ut(onRenderTriggered,N),ut(onBeforeUnmount,x),ut(onUnmounted,E),ut(onServerPrefetch,d),isArray(j))if(j.length){const _t=t.exposed||(t.exposed={});j.forEach(S=>{Object.defineProperty(_t,S,{get:()=>s[S],set:X=>s[S]=X})})}else t.exposed||(t.exposed={});f&&t.render===NOOP&&(t.render=f),k!=null&&(t.inheritAttrs=k),$&&(t.components=$),nt&&(t.directives=nt)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let l;isObject(i)?"default"in i?l=inject(i.from||n,i.default,!0):l=inject(i.from||n):l=inject(i),isRef(l)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[n]=l}}function callHook$1(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){const i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(t)){const l=e[t];isFunction(l)&&watch(i,l)}else if(isFunction(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(l=>createWatcher(l,e,s,n));else{const l=isFunction(t.handler)?t.handler.bind(s):e[t.handler];isFunction(l)&&watch(i,l,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:l,config:{optionMergeStrategies:c}}=t.appContext,L=l.get(e);let g;return L?g=L:!i.length&&!s&&!n?g=e:(g={},i.length&&i.forEach(m=>mergeOptions(g,m,c,!0)),mergeOptions(g,e,c)),isObject(e)&&l.set(e,g),g}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:l}=e;l&&mergeOptions(t,l,s,!0),i&&i.forEach(c=>mergeOptions(t,c,s,!0));for(const c in e)if(!(n&&c==="expose")){const L=internalOptionMergeStrats[c]||s&&s[c];t[c]=L?L(t[c],e[c]):e[c]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const l=createAppContext(),c=new Set;let L=!1;const g=l.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:l,_instance:null,version,get config(){return l.config},set config(m){},use(m,...u){return c.has(m)||(m&&isFunction(m.install)?(c.add(m),m.install(g,...u)):isFunction(m)&&(c.add(m),m(g,...u))),g},mixin(m){return l.mixins.includes(m)||l.mixins.push(m),g},component(m,u){return u?(l.components[m]=u,g):l.components[m]},directive(m,u){return u?(l.directives[m]=u,g):l.directives[m]},mount(m,u,F){if(!L){const O=createVNode(n,i);return O.appContext=l,u&&e?e(O,m):t(O,m,F),L=!0,g._container=m,m.__vue_app__=g,getExposeProxy(O.component)||O.component.proxy}},unmount(){L&&(t(null,g._container),delete g._container.__vue_app__)},provide(m,u){return l.provides[m]=u,g},runWithContext(m){currentApp=g;try{return m()}finally{currentApp=null}}};return g}}let currentApp=null;function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction(e)?e.call(n&&n.proxy):e}}function initProps(t,e,s,n=!1){const i={},l={};def(l,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,i,l);for(const c in t.propsOptions[0])c in i||(i[c]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=l,t.attrs=l}function updateProps(t,e,s,n){const{props:i,attrs:l,vnode:{patchFlag:c}}=t,L=toRaw(i),[g]=t.propsOptions;let m=!1;if((n||c>0)&&!(c&16)){if(c&8){const u=t.vnode.dynamicProps;for(let F=0;F<u.length;F++){let O=u[F];if(isEmitListener(t.emitsOptions,O))continue;const P=e[O];if(g)if(hasOwn(l,O))P!==l[O]&&(l[O]=P,m=!0);else{const M=camelize(O);i[M]=resolvePropValue(g,L,M,P,t,!1)}else P!==l[O]&&(l[O]=P,m=!0)}}}else{setFullProps(t,e,i,l)&&(m=!0);let u;for(const F in L)(!e||!hasOwn(e,F)&&((u=hyphenate(F))===F||!hasOwn(e,u)))&&(g?s&&(s[F]!==void 0||s[u]!==void 0)&&(i[F]=resolvePropValue(g,L,F,void 0,t,!0)):delete i[F]);if(l!==L)for(const F in l)(!e||!hasOwn(e,F))&&(delete l[F],m=!0)}m&&trigger(t,"set","$attrs")}function setFullProps(t,e,s,n){const[i,l]=t.propsOptions;let c=!1,L;if(e)for(let g in e){if(isReservedProp(g))continue;const m=e[g];let u;i&&hasOwn(i,u=camelize(g))?!l||!l.includes(u)?s[u]=m:(L||(L={}))[u]=m:isEmitListener(t.emitsOptions,g)||(!(g in n)||m!==n[g])&&(n[g]=m,c=!0)}if(l){const g=toRaw(s),m=L||EMPTY_OBJ;for(let u=0;u<l.length;u++){const F=l[u];s[F]=resolvePropValue(i,g,F,m[F],t,!hasOwn(m,F))}}return c}function resolvePropValue(t,e,s,n,i,l){const c=t[s];if(c!=null){const L=hasOwn(c,"default");if(L&&n===void 0){const g=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction(g)){const{propsDefaults:m}=i;s in m?n=m[s]:(setCurrentInstance(i),n=m[s]=g.call(null,e),unsetCurrentInstance())}else n=g}c[0]&&(l&&!L?n=!1:c[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}function normalizePropsOptions(t,e,s=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const l=t.props,c={},L=[];let g=!1;if(!isFunction(t)){const u=F=>{g=!0;const[O,P]=normalizePropsOptions(F,e,!0);extend(c,O),P&&L.push(...P)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!l&&!g)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(l))for(let u=0;u<l.length;u++){const F=camelize(l[u]);validatePropName(F)&&(c[F]=EMPTY_OBJ)}else if(l)for(const u in l){const F=camelize(u);if(validatePropName(F)){const O=l[u],P=c[F]=isArray(O)||isFunction(O)?{type:O}:extend({},O);if(P){const M=getTypeIndex(Boolean,P.type),C=getTypeIndex(String,P.type);P[0]=M>-1,P[1]=C<0||M<C,(M>-1||hasOwn(P,"default"))&&L.push(F)}}}const m=[c,L];return isObject(t)&&n.set(t,m),m}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray(e)?e.findIndex(s=>isSameType(s,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const l=t[i];if(isFunction(l))e[i]=normalizeSlot(i,l,n);else if(l!=null){const c=normalizeSlotValue(l);e[i]=()=>c}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const s=e._;s?(t.slots=toRaw(e),def(e,"_",s)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let l=!0,c=EMPTY_OBJ;if(n.shapeFlag&32){const L=e._;L?s&&L===1?l=!1:(extend(i,e),!s&&L===1&&delete i._):(l=!e.$stable,normalizeObjectSlots(e,i)),c=e}else e&&(normalizeVNodeSlots(t,e),c={default:1});if(l)for(const L in i)!isInternalKey(L)&&!(L in c)&&delete i[L]};function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((O,P)=>setRef(O,e&&(isArray(e)?e[P]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i)return;const l=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,c=i?null:l,{i:L,r:g}=t,m=e&&e.r,u=L.refs===EMPTY_OBJ?L.refs={}:L.refs,F=L.setupState;if(m!=null&&m!==g&&(isString(m)?(u[m]=null,hasOwn(F,m)&&(F[m]=null)):isRef(m)&&(m.value=null)),isFunction(g))callWithErrorHandling(g,L,12,[c,u]);else{const O=isString(g),P=isRef(g);if(O||P){const M=()=>{if(t.f){const C=O?hasOwn(F,g)?F[g]:u[g]:g.value;i?isArray(C)&&remove(C,l):isArray(C)?C.includes(l)||C.push(l):O?(u[g]=[l],hasOwn(F,g)&&(F[g]=u[g])):(g.value=[l],t.k&&(u[t.k]=g.value))}else O?(u[g]=c,hasOwn(F,g)&&(F[g]=c)):P&&(g.value=c,t.k&&(u[t.k]=c))};c?(M.id=-1,queuePostRenderEffect(M,s)):M()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:l,createElement:c,createText:L,createComment:g,setText:m,setElementText:u,parentNode:F,nextSibling:O,setScopeId:P=NOOP,insertStaticContent:M}=t,C=(w,I,G,J=null,lt=null,dt=null,Ct=!1,Et=null,mt=!!I.dynamicChildren)=>{if(w===I)return;w&&!isSameVNodeType(w,I)&&(J=V(w),wt(w,lt,dt,!0),w=null),I.patchFlag===-2&&(mt=!1,I.dynamicChildren=null);const{type:St,ref:vt,shapeFlag:tt}=I;switch(St){case Text:_(w,I,G,J);break;case Comment:T(w,I,G,J);break;case Static:w==null&&x(I,G,J,Ct);break;case Fragment:$(w,I,G,J,lt,dt,Ct,Et,mt);break;default:tt&1?f(w,I,G,J,lt,dt,Ct,Et,mt):tt&6?nt(w,I,G,J,lt,dt,Ct,Et,mt):(tt&64||tt&128)&&St.process(w,I,G,J,lt,dt,Ct,Et,mt,Y)}vt!=null&&lt&&setRef(vt,w&&w.ref,dt,I||w,!I)},_=(w,I,G,J)=>{if(w==null)n(I.el=L(I.children),G,J);else{const lt=I.el=w.el;I.children!==w.children&&m(lt,I.children)}},T=(w,I,G,J)=>{w==null?n(I.el=g(I.children||""),G,J):I.el=w.el},x=(w,I,G,J)=>{[w.el,w.anchor]=M(w.children,I,G,J,w.el,w.anchor)},B=({el:w,anchor:I},G,J)=>{let lt;for(;w&&w!==I;)lt=O(w),n(w,G,J),w=lt;n(I,G,J)},E=({el:w,anchor:I})=>{let G;for(;w&&w!==I;)G=O(w),i(w),w=G;i(I)},f=(w,I,G,J,lt,dt,Ct,Et,mt)=>{Ct=Ct||I.type==="svg",w==null?b(I,G,J,lt,dt,Ct,Et,mt):d(w,I,lt,dt,Ct,Et,mt)},b=(w,I,G,J,lt,dt,Ct,Et)=>{let mt,St;const{type:vt,props:tt,shapeFlag:et,transition:pt,dirs:Pt}=w;if(mt=w.el=c(w.type,dt,tt&&tt.is,tt),et&8?u(mt,w.children):et&16&&v(w.children,mt,null,J,lt,dt&&vt!=="foreignObject",Ct,Et),Pt&&invokeDirectiveHook(w,null,J,"created"),N(mt,w,w.scopeId,Ct,J),tt){for(const Bt in tt)Bt!=="value"&&!isReservedProp(Bt)&&l(mt,Bt,null,tt[Bt],dt,w.children,J,lt,y);"value"in tt&&l(mt,"value",null,tt.value),(St=tt.onVnodeBeforeMount)&&invokeVNodeHook(St,J,w)}Pt&&invokeDirectiveHook(w,null,J,"beforeMount");const Mt=(!lt||lt&&!lt.pendingBranch)&&pt&&!pt.persisted;Mt&&pt.beforeEnter(mt),n(mt,I,G),((St=tt&&tt.onVnodeMounted)||Mt||Pt)&&queuePostRenderEffect(()=>{St&&invokeVNodeHook(St,J,w),Mt&&pt.enter(mt),Pt&&invokeDirectiveHook(w,null,J,"mounted")},lt)},N=(w,I,G,J,lt)=>{if(G&&P(w,G),J)for(let dt=0;dt<J.length;dt++)P(w,J[dt]);if(lt){let dt=lt.subTree;if(I===dt){const Ct=lt.vnode;N(w,Ct,Ct.scopeId,Ct.slotScopeIds,lt.parent)}}},v=(w,I,G,J,lt,dt,Ct,Et,mt=0)=>{for(let St=mt;St<w.length;St++){const vt=w[St]=Et?cloneIfMounted(w[St]):normalizeVNode(w[St]);C(null,vt,I,G,J,lt,dt,Ct,Et)}},d=(w,I,G,J,lt,dt,Ct)=>{const Et=I.el=w.el;let{patchFlag:mt,dynamicChildren:St,dirs:vt}=I;mt|=w.patchFlag&16;const tt=w.props||EMPTY_OBJ,et=I.props||EMPTY_OBJ;let pt;G&&toggleRecurse(G,!1),(pt=et.onVnodeBeforeUpdate)&&invokeVNodeHook(pt,G,I,w),vt&&invokeDirectiveHook(I,w,G,"beforeUpdate"),G&&toggleRecurse(G,!0);const Pt=lt&&I.type!=="foreignObject";if(St?j(w.dynamicChildren,St,Et,G,J,Pt,dt):Ct||S(w,I,Et,null,G,J,Pt,dt,!1),mt>0){if(mt&16)k(Et,I,tt,et,G,J,lt);else if(mt&2&&tt.class!==et.class&&l(Et,"class",null,et.class,lt),mt&4&&l(Et,"style",tt.style,et.style,lt),mt&8){const Mt=I.dynamicProps;for(let Bt=0;Bt<Mt.length;Bt++){const Ut=Mt[Bt],Lt=tt[Ut],jt=et[Ut];(jt!==Lt||Ut==="value")&&l(Et,Ut,Lt,jt,lt,w.children,G,J,y)}}mt&1&&w.children!==I.children&&u(Et,I.children)}else!Ct&&St==null&&k(Et,I,tt,et,G,J,lt);((pt=et.onVnodeUpdated)||vt)&&queuePostRenderEffect(()=>{pt&&invokeVNodeHook(pt,G,I,w),vt&&invokeDirectiveHook(I,w,G,"updated")},J)},j=(w,I,G,J,lt,dt,Ct)=>{for(let Et=0;Et<I.length;Et++){const mt=w[Et],St=I[Et],vt=mt.el&&(mt.type===Fragment||!isSameVNodeType(mt,St)||mt.shapeFlag&70)?F(mt.el):G;C(mt,St,vt,null,J,lt,dt,Ct,!0)}},k=(w,I,G,J,lt,dt,Ct)=>{if(G!==J){if(G!==EMPTY_OBJ)for(const Et in G)!isReservedProp(Et)&&!(Et in J)&&l(w,Et,G[Et],null,Ct,I.children,lt,dt,y);for(const Et in J){if(isReservedProp(Et))continue;const mt=J[Et],St=G[Et];mt!==St&&Et!=="value"&&l(w,Et,St,mt,Ct,I.children,lt,dt,y)}"value"in J&&l(w,"value",G.value,J.value)}},$=(w,I,G,J,lt,dt,Ct,Et,mt)=>{const St=I.el=w?w.el:L(""),vt=I.anchor=w?w.anchor:L("");let{patchFlag:tt,dynamicChildren:et,slotScopeIds:pt}=I;pt&&(Et=Et?Et.concat(pt):pt),w==null?(n(St,G,J),n(vt,G,J),v(I.children,G,vt,lt,dt,Ct,Et,mt)):tt>0&&tt&64&&et&&w.dynamicChildren?(j(w.dynamicChildren,et,G,lt,dt,Ct,Et),(I.key!=null||lt&&I===lt.subTree)&&traverseStaticChildren(w,I,!0)):S(w,I,G,vt,lt,dt,Ct,Et,mt)},nt=(w,I,G,J,lt,dt,Ct,Et,mt)=>{I.slotScopeIds=Et,w==null?I.shapeFlag&512?lt.ctx.activate(I,G,J,Ct,mt):H(I,G,J,lt,dt,Ct,mt):it(w,I,mt)},H=(w,I,G,J,lt,dt,Ct)=>{const Et=w.component=createComponentInstance(w,J,lt);if(isKeepAlive(w)&&(Et.ctx.renderer=Y),setupComponent(Et),Et.asyncDep){if(lt&&lt.registerDep(Et,ut),!w.el){const mt=Et.subTree=createVNode(Comment);T(null,mt,I,G)}return}ut(Et,w,I,G,lt,dt,Ct)},it=(w,I,G)=>{const J=I.component=w.component;if(shouldUpdateComponent(w,I,G))if(J.asyncDep&&!J.asyncResolved){_t(J,I,G);return}else J.next=I,invalidateJob(J.update),J.update();else I.el=w.el,J.vnode=I},ut=(w,I,G,J,lt,dt,Ct)=>{const Et=()=>{if(w.isMounted){let{next:vt,bu:tt,u:et,parent:pt,vnode:Pt}=w,Mt=vt,Bt;toggleRecurse(w,!1),vt?(vt.el=Pt.el,_t(w,vt,Ct)):vt=Pt,tt&&invokeArrayFns(tt),(Bt=vt.props&&vt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Bt,pt,vt,Pt),toggleRecurse(w,!0);const Ut=renderComponentRoot(w),Lt=w.subTree;w.subTree=Ut,C(Lt,Ut,F(Lt.el),V(Lt),w,lt,dt),vt.el=Ut.el,Mt===null&&updateHOCHostEl(w,Ut.el),et&&queuePostRenderEffect(et,lt),(Bt=vt.props&&vt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Bt,pt,vt,Pt),lt)}else{let vt;const{el:tt,props:et}=I,{bm:pt,m:Pt,parent:Mt}=w,Bt=isAsyncWrapper(I);if(toggleRecurse(w,!1),pt&&invokeArrayFns(pt),!Bt&&(vt=et&&et.onVnodeBeforeMount)&&invokeVNodeHook(vt,Mt,I),toggleRecurse(w,!0),tt&&ot){const Ut=()=>{w.subTree=renderComponentRoot(w),ot(tt,w.subTree,w,lt,null)};Bt?I.type.__asyncLoader().then(()=>!w.isUnmounted&&Ut()):Ut()}else{const Ut=w.subTree=renderComponentRoot(w);C(null,Ut,G,J,w,lt,dt),I.el=Ut.el}if(Pt&&queuePostRenderEffect(Pt,lt),!Bt&&(vt=et&&et.onVnodeMounted)){const Ut=I;queuePostRenderEffect(()=>invokeVNodeHook(vt,Mt,Ut),lt)}(I.shapeFlag&256||Mt&&isAsyncWrapper(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&w.a&&queuePostRenderEffect(w.a,lt),w.isMounted=!0,I=G=J=null}},mt=w.effect=new ReactiveEffect(Et,()=>queueJob(St),w.scope),St=w.update=()=>mt.run();St.id=w.uid,toggleRecurse(w,!0),St()},_t=(w,I,G)=>{I.component=w;const J=w.vnode.props;w.vnode=I,w.next=null,updateProps(w,I.props,J,G),updateSlots(w,I.children,G),pauseTracking(),flushPreFlushCbs(),resetTracking()},S=(w,I,G,J,lt,dt,Ct,Et,mt=!1)=>{const St=w&&w.children,vt=w?w.shapeFlag:0,tt=I.children,{patchFlag:et,shapeFlag:pt}=I;if(et>0){if(et&128){at(St,tt,G,J,lt,dt,Ct,Et,mt);return}else if(et&256){X(St,tt,G,J,lt,dt,Ct,Et,mt);return}}pt&8?(vt&16&&y(St,lt,dt),tt!==St&&u(G,tt)):vt&16?pt&16?at(St,tt,G,J,lt,dt,Ct,Et,mt):y(St,lt,dt,!0):(vt&8&&u(G,""),pt&16&&v(tt,G,J,lt,dt,Ct,Et,mt))},X=(w,I,G,J,lt,dt,Ct,Et,mt)=>{w=w||EMPTY_ARR,I=I||EMPTY_ARR;const St=w.length,vt=I.length,tt=Math.min(St,vt);let et;for(et=0;et<tt;et++){const pt=I[et]=mt?cloneIfMounted(I[et]):normalizeVNode(I[et]);C(w[et],pt,G,null,lt,dt,Ct,Et,mt)}St>vt?y(w,lt,dt,!0,!1,tt):v(I,G,J,lt,dt,Ct,Et,mt,tt)},at=(w,I,G,J,lt,dt,Ct,Et,mt)=>{let St=0;const vt=I.length;let tt=w.length-1,et=vt-1;for(;St<=tt&&St<=et;){const pt=w[St],Pt=I[St]=mt?cloneIfMounted(I[St]):normalizeVNode(I[St]);if(isSameVNodeType(pt,Pt))C(pt,Pt,G,null,lt,dt,Ct,Et,mt);else break;St++}for(;St<=tt&&St<=et;){const pt=w[tt],Pt=I[et]=mt?cloneIfMounted(I[et]):normalizeVNode(I[et]);if(isSameVNodeType(pt,Pt))C(pt,Pt,G,null,lt,dt,Ct,Et,mt);else break;tt--,et--}if(St>tt){if(St<=et){const pt=et+1,Pt=pt<vt?I[pt].el:J;for(;St<=et;)C(null,I[St]=mt?cloneIfMounted(I[St]):normalizeVNode(I[St]),G,Pt,lt,dt,Ct,Et,mt),St++}}else if(St>et)for(;St<=tt;)wt(w[St],lt,dt,!0),St++;else{const pt=St,Pt=St,Mt=new Map;for(St=Pt;St<=et;St++){const st=I[St]=mt?cloneIfMounted(I[St]):normalizeVNode(I[St]);st.key!=null&&Mt.set(st.key,St)}let Bt,Ut=0;const Lt=et-Pt+1;let jt=!1,$t=0;const zt=new Array(Lt);for(St=0;St<Lt;St++)zt[St]=0;for(St=pt;St<=tt;St++){const st=w[St];if(Ut>=Lt){wt(st,lt,dt,!0);continue}let ct;if(st.key!=null)ct=Mt.get(st.key);else for(Bt=Pt;Bt<=et;Bt++)if(zt[Bt-Pt]===0&&isSameVNodeType(st,I[Bt])){ct=Bt;break}ct===void 0?wt(st,lt,dt,!0):(zt[ct-Pt]=St+1,ct>=$t?$t=ct:jt=!0,C(st,I[ct],G,null,lt,dt,Ct,Et,mt),Ut++)}const Tt=jt?getSequence(zt):EMPTY_ARR;for(Bt=Tt.length-1,St=Lt-1;St>=0;St--){const st=Pt+St,ct=I[st],Dt=st+1<vt?I[st+1].el:J;zt[St]===0?C(null,ct,G,Dt,lt,dt,Ct,Et,mt):jt&&(Bt<0||St!==Tt[Bt]?At(ct,G,Dt,2):Bt--)}}},At=(w,I,G,J,lt=null)=>{const{el:dt,type:Ct,transition:Et,children:mt,shapeFlag:St}=w;if(St&6){At(w.component.subTree,I,G,J);return}if(St&128){w.suspense.move(I,G,J);return}if(St&64){Ct.move(w,I,G,Y);return}if(Ct===Fragment){n(dt,I,G);for(let tt=0;tt<mt.length;tt++)At(mt[tt],I,G,J);n(w.anchor,I,G);return}if(Ct===Static){B(w,I,G);return}if(J!==2&&St&1&&Et)if(J===0)Et.beforeEnter(dt),n(dt,I,G),queuePostRenderEffect(()=>Et.enter(dt),lt);else{const{leave:tt,delayLeave:et,afterLeave:pt}=Et,Pt=()=>n(dt,I,G),Mt=()=>{tt(dt,()=>{Pt(),pt&&pt()})};et?et(dt,Pt,Mt):Mt()}else n(dt,I,G)},wt=(w,I,G,J=!1,lt=!1)=>{const{type:dt,props:Ct,ref:Et,children:mt,dynamicChildren:St,shapeFlag:vt,patchFlag:tt,dirs:et}=w;if(Et!=null&&setRef(Et,null,G,w,!0),vt&256){I.ctx.deactivate(w);return}const pt=vt&1&&et,Pt=!isAsyncWrapper(w);let Mt;if(Pt&&(Mt=Ct&&Ct.onVnodeBeforeUnmount)&&invokeVNodeHook(Mt,I,w),vt&6)o(w.component,G,J);else{if(vt&128){w.suspense.unmount(G,J);return}pt&&invokeDirectiveHook(w,null,I,"beforeUnmount"),vt&64?w.type.remove(w,I,G,lt,Y,J):St&&(dt!==Fragment||tt>0&&tt&64)?y(St,I,G,!1,!0):(dt===Fragment&&tt&384||!lt&&vt&16)&&y(mt,I,G),J&&R(w)}(Pt&&(Mt=Ct&&Ct.onVnodeUnmounted)||pt)&&queuePostRenderEffect(()=>{Mt&&invokeVNodeHook(Mt,I,w),pt&&invokeDirectiveHook(w,null,I,"unmounted")},G)},R=w=>{const{type:I,el:G,anchor:J,transition:lt}=w;if(I===Fragment){a(G,J);return}if(I===Static){E(w);return}const dt=()=>{i(G),lt&&!lt.persisted&&lt.afterLeave&&lt.afterLeave()};if(w.shapeFlag&1&&lt&&!lt.persisted){const{leave:Ct,delayLeave:Et}=lt,mt=()=>Ct(G,dt);Et?Et(w.el,dt,mt):mt()}else dt()},a=(w,I)=>{let G;for(;w!==I;)G=O(w),i(w),w=G;i(I)},o=(w,I,G)=>{const{bum:J,scope:lt,update:dt,subTree:Ct,um:Et}=w;J&&invokeArrayFns(J),lt.stop(),dt&&(dt.active=!1,wt(Ct,w,I,G)),Et&&queuePostRenderEffect(Et,I),queuePostRenderEffect(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},y=(w,I,G,J=!1,lt=!1,dt=0)=>{for(let Ct=dt;Ct<w.length;Ct++)wt(w[Ct],I,G,J,lt)},V=w=>w.shapeFlag&6?V(w.component.subTree):w.shapeFlag&128?w.suspense.next():O(w.anchor||w.el),U=(w,I,G)=>{w==null?I._vnode&&wt(I._vnode,null,null,!0):C(I._vnode||null,w,I,null,null,null,G),flushPreFlushCbs(),flushPostFlushCbs(),I._vnode=w},Y={p:C,um:wt,m:At,r:R,mt:H,mc:v,pc:S,pbc:j,n:V,o:t};let Q,ot;return e&&([Q,ot]=e(Y)),{render:U,hydrate:Q,createApp:createAppAPI(U,Q)}}function toggleRecurse({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let l=0;l<n.length;l++){const c=n[l];let L=i[l];L.shapeFlag&1&&!L.dynamicChildren&&((L.patchFlag<=0||L.patchFlag===32)&&(L=i[l]=cloneIfMounted(i[l]),L.el=c.el),s||traverseStaticChildren(c,L)),L.type===Text&&(L.el=c.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,l,c,L;const g=t.length;for(n=0;n<g;n++){const m=t[n];if(m!==0){if(i=s[s.length-1],t[i]<m){e[n]=i,s.push(n);continue}for(l=0,c=s.length-1;l<c;)L=l+c>>1,t[s[L]]<m?l=L+1:c=L;m<t[s[l]]&&(l>0&&(e[n]=s[l-1]),s[l]=n)}}for(l=s.length,c=s[l-1];l-- >0;)s[l]=c,c=e[c];return s}const isTeleport=t=>t.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,l){return setupBlock(createBaseVNode(t,e,s,n,i,l,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,l=t===Fragment?0:1,c=!1,L=!1){const g={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return L?(normalizeChildren(g,s),l&128&&t.normalize(g)):s&&(g.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(g.patchFlag>0||l&6)&&g.patchFlag!==32&&currentBlock.push(g),g}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,l=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const L=cloneVNode(t,e,!0);return s&&normalizeChildren(L,s),isBlockTreeEnabled>0&&!l&&currentBlock&&(L.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=L:currentBlock.push(L)),L.patchFlag|=-2,L}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:L,style:g}=e;L&&!isString(L)&&(e.class=normalizeClass(L)),isObject(g)&&(isProxy(g)&&!isArray(g)&&(g=extend({},g)),e.style=normalizeStyle(g))}const c=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,s,n,i,c,l,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,s=!1){const{props:n,ref:i,patchFlag:l,children:c}=t,L=e?mergeProps(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:L,key:L&&normalizeKey(L),ref:e&&e.ref?s&&i?isArray(i)?i.concat(normalizeRef(e)):[i,normalizeRef(e)]:normalizeRef(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const l=e[i],c=n[i];c&&l!==c&&!(isArray(l)&&l.includes(c))&&(e[i]=l?[].concat(l,c):c)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,l={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=emit.bind(null,l),t.ce&&t.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(t=>currentInstance=t),internalSetCurrentInstance=t=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(e=>e(t)):globalCurrentInstanceSetters[0](t)};const setCurrentInstance=t=>{internalSetCurrentInstance(t),t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:s,children:n}=t.vnode,i=isStatefulComponent(t);initProps(t,s,i,e),initSlots(t,n);const l=i?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,l}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=s;if(n){const i=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const l=callWithErrorHandling(n,t,0,[t.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(l)){if(l.then(unsetCurrentInstance,unsetCurrentInstance),e)return l.then(c=>{handleSetupResult(t,c,e)}).catch(c=>{handleError(c,t,0)});t.asyncDep=l}else handleSetupResult(t,l,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:l,compilerOptions:c}=t.appContext.config,{delimiters:L,compilerOptions:g}=n,m=extend(extend({isCustomElement:l,delimiters:L},c),g);n.render=compile(i,m)}}t.render=n.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,s){return track(t,"get","$attrs"),e[s]}}))}function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}}))}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,s){const n=arguments.length;return n===2?isObject(e)&&!isArray(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&isVNode(s)&&(s=[s]),createVNode(t,e,s))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e?doc.createElementNS(svgNS,t):doc.createElement(t,s?{is:s}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,l){const c=s?s.previousSibling:e.lastChild;if(i&&(i===l||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===l||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const L=templateContainer.content;if(n){const g=L.firstChild;for(;g.firstChild;)L.appendChild(g.firstChild);L.removeChild(g)}e.insertBefore(L,s)}return[c?c.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}};function patchClass(t,e,s){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,s){const n=t.style,i=isString(s);if(s&&!i){if(e&&!isString(e))for(const l in e)s[l]==null&&setStyle(n,l,"");for(const l in s)setStyle(n,l,s[l])}else{const l=n.display;i?e!==s&&(n.cssText=s):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=l)}}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const l=prefixes[i]+n;if(l in t)return prefixCache[e]=l}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i){if(n&&e.startsWith("xlink:"))s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s);else{const l=isSpecialBooleanAttr(e);s==null||l&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,l?"":s)}}function patchDOMProp(t,e,s,n,i,l,c){if(e==="innerHTML"||e==="textContent"){n&&c(n,i,l),t[e]=s??"";return}const L=t.tagName;if(e==="value"&&L!=="PROGRESS"&&!L.includes("-")){t._value=s;const m=L==="OPTION"?t.getAttribute("value"):t.value,u=s??"";m!==u&&(t.value=u),s==null&&t.removeAttribute(e);return}let g=!1;if(s===""||s==null){const m=typeof t[e];m==="boolean"?s=includeBooleanAttr(s):s==null&&m==="string"?(s="",g=!0):m==="number"&&(s=0,g=!0)}try{t[e]=s}catch{}g&&t.removeAttribute(e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}function patchEvent(t,e,s,n,i=null){const l=t._vei||(t._vei={}),c=l[e];if(n&&c)c.value=n;else{const[L,g]=parseName(e);if(n){const m=l[e]=createInvoker(n,i);addEventListener(t,L,m,g)}else c&&(removeEventListener(t,L,c,g),l[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,s,n,i=!1,l,c,L,g)=>{e==="class"?patchClass(t,n,i):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,i))?patchDOMProp(t,e,n,l,c,L,g):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,i))};function shouldSetAsProp(t,e,s,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(s)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(s)?!1:e in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:e})=>h(BaseTransition,resolveTransitionProps(t),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(t,e=[])=>{isArray(t)?t.forEach(s=>s(...e)):t&&t(...e)},hasExplicitCallback=t=>t?isArray(t)?t.some(e=>e.length>1):t.length>1:!1;function resolveTransitionProps(t){const e={};for(const $ in t)$ in DOMTransitionPropsValidators||(e[$]=t[$]);if(t.css===!1)return e;const{name:s="v",type:n,duration:i,enterFromClass:l=`${s}-enter-from`,enterActiveClass:c=`${s}-enter-active`,enterToClass:L=`${s}-enter-to`,appearFromClass:g=l,appearActiveClass:m=c,appearToClass:u=L,leaveFromClass:F=`${s}-leave-from`,leaveActiveClass:O=`${s}-leave-active`,leaveToClass:P=`${s}-leave-to`}=t,M=normalizeDuration(i),C=M&&M[0],_=M&&M[1],{onBeforeEnter:T,onEnter:x,onEnterCancelled:B,onLeave:E,onLeaveCancelled:f,onBeforeAppear:b=T,onAppear:N=x,onAppearCancelled:v=B}=e,d=($,nt,H)=>{removeTransitionClass($,nt?u:L),removeTransitionClass($,nt?m:c),H&&H()},j=($,nt)=>{$._isLeaving=!1,removeTransitionClass($,F),removeTransitionClass($,P),removeTransitionClass($,O),nt&&nt()},k=$=>(nt,H)=>{const it=$?N:x,ut=()=>d(nt,$,H);callHook(it,[nt,ut]),nextFrame(()=>{removeTransitionClass(nt,$?g:l),addTransitionClass(nt,$?u:L),hasExplicitCallback(it)||whenTransitionEnds(nt,n,C,ut)})};return extend(e,{onBeforeEnter($){callHook(T,[$]),addTransitionClass($,l),addTransitionClass($,c)},onBeforeAppear($){callHook(b,[$]),addTransitionClass($,g),addTransitionClass($,m)},onEnter:k(!1),onAppear:k(!0),onLeave($,nt){$._isLeaving=!0;const H=()=>j($,nt);addTransitionClass($,F),forceReflow(),addTransitionClass($,O),nextFrame(()=>{$._isLeaving&&(removeTransitionClass($,F),addTransitionClass($,P),hasExplicitCallback(E)||whenTransitionEnds($,n,_,H))}),callHook(E,[$,H])},onEnterCancelled($){d($,!1),callHook(B,[$])},onAppearCancelled($){d($,!0),callHook(v,[$])},onLeaveCancelled($){j($),callHook(f,[$])}})}function normalizeDuration(t){if(t==null)return null;if(isObject(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const e=NumberOf(t);return[e,e]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t._vtc||(t._vtc=new Set)).add(e)}function removeTransitionClass(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:s}=t;s&&(s.delete(e),s.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,e,s,n){const i=t._endId=++endId,l=()=>{i===t._endId&&n()};if(s)return setTimeout(l,s);const{type:c,timeout:L,propCount:g}=getTransitionInfo(t,e);if(!c)return n();const m=c+"end";let u=0;const F=()=>{t.removeEventListener(m,O),l()},O=P=>{P.target===t&&++u>=g&&F()};setTimeout(()=>{u<g&&F()},L+1),t.addEventListener(m,O)}function getTransitionInfo(t,e){const s=window.getComputedStyle(t),n=M=>(s[M]||"").split(", "),i=n(`${TRANSITION}Delay`),l=n(`${TRANSITION}Duration`),c=getTimeout(i,l),L=n(`${ANIMATION}Delay`),g=n(`${ANIMATION}Duration`),m=getTimeout(L,g);let u=null,F=0,O=0;e===TRANSITION?c>0&&(u=TRANSITION,F=c,O=l.length):e===ANIMATION?m>0&&(u=ANIMATION,F=m,O=g.length):(F=Math.max(c,m),u=F>0?c>m?TRANSITION:ANIMATION:null,O=u?u===TRANSITION?l.length:g.length:0);const P=u===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:u,timeout:F,propCount:O,hasTransform:P}}function getTimeout(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>toMs(s)+toMs(t[n])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const l=e._component;!isFunction(l)&&!l.render&&!l.template&&(l.template=i.innerHTML),i.innerHTML="";const c=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),c},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}const style="";function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var zt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=X,e.bytesToString=ot,e.createValidAbsoluteUrl=At,e.getModificationDate=Mt,e.getUuid=$t,e.getVerbosityLevel=it,e.info=ut,e.isArrayBuffer=pt,e.isArrayEqual=Pt,e.isNodeJS=void 0,e.normalizeUnicode=jt,e.objectFromMap=J,e.objectSize=G,e.setVerbosityLevel=H,e.shadow=wt,e.string32=I,e.stringToBytes=w,e.stringToPDFString=vt,e.stringToUTF8String=tt,e.unreachable=S,e.utf8StringToString=et,e.warn=_t;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const l=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=l;const c=1.35;e.LINE_FACTOR=c;const L=.35;e.LINE_DESCENT_FACTOR=L;const g=L/c;e.BASELINE_FACTOR=g;const m={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=m;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=u;const F="pdfjs_internal_editor_";e.AnnotationEditorPrefix=F;const O={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=O;const P={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=P;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=M;const C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=C;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=_;const T={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=T;const x={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=x;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=B;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=E;const f={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=f;const b={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=b;const N={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=N;const v={O:"PageOpen",C:"PageClose"};e.PageActionEventType=v;const d={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=d;const j={NONE:0,BINARY:1};e.CMapCompressionType=j;const k={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=k;const $={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=$;let nt=d.WARNINGS;function H(Tt){Number.isInteger(Tt)&&(nt=Tt)}function it(){return nt}function ut(Tt){nt>=d.INFOS&&console.log(`Info: ${Tt}`)}function _t(Tt){nt>=d.WARNINGS&&console.log(`Warning: ${Tt}`)}function S(Tt){throw new Error(Tt)}function X(Tt,st){Tt||S(st)}function at(Tt){switch(Tt==null?void 0:Tt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function At(Tt,st=null,ct=null){if(!Tt)return null;try{if(ct&&typeof Tt=="string"){if(ct.addDefaultProtocol&&Tt.startsWith("www.")){const qt=Tt.match(/\./g);(qt==null?void 0:qt.length)>=2&&(Tt=`http://${Tt}`)}if(ct.tryConvertEncoding)try{Tt=tt(Tt)}catch{}}const Dt=st?new URL(Tt,st):new URL(Tt);if(at(Dt))return Dt}catch{}return null}function wt(Tt,st,ct,Dt=!1){return Object.defineProperty(Tt,st,{value:ct,enumerable:!Dt,configurable:!0,writable:!1}),ct}const R=function(){function st(ct,Dt){this.constructor===st&&S("Cannot initialize BaseException."),this.message=ct,this.name=Dt}return st.prototype=new Error,st.constructor=st,st}();e.BaseException=R;class a extends R{constructor(st,ct){super(st,"PasswordException"),this.code=ct}}e.PasswordException=a;class o extends R{constructor(st,ct){super(st,"UnknownErrorException"),this.details=ct}}e.UnknownErrorException=o;class y extends R{constructor(st){super(st,"InvalidPDFException")}}e.InvalidPDFException=y;class V extends R{constructor(st){super(st,"MissingPDFException")}}e.MissingPDFException=V;class U extends R{constructor(st,ct){super(st,"UnexpectedResponseException"),this.status=ct}}e.UnexpectedResponseException=U;class Y extends R{constructor(st){super(st,"FormatError")}}e.FormatError=Y;class Q extends R{constructor(st){super(st,"AbortException")}}e.AbortException=Q;function ot(Tt){(typeof Tt!="object"||(Tt==null?void 0:Tt.length)===void 0)&&S("Invalid argument for bytesToString");const st=Tt.length,ct=8192;if(st<ct)return String.fromCharCode.apply(null,Tt);const Dt=[];for(let qt=0;qt<st;qt+=ct){const Vt=Math.min(qt+ct,st),Kt=Tt.subarray(qt,Vt);Dt.push(String.fromCharCode.apply(null,Kt))}return Dt.join("")}function w(Tt){typeof Tt!="string"&&S("Invalid argument for stringToBytes");const st=Tt.length,ct=new Uint8Array(st);for(let Dt=0;Dt<st;++Dt)ct[Dt]=Tt.charCodeAt(Dt)&255;return ct}function I(Tt){return String.fromCharCode(Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255)}function G(Tt){return Object.keys(Tt).length}function J(Tt){const st=Object.create(null);for(const[ct,Dt]of Tt)st[ct]=Dt;return st}function lt(){const Tt=new Uint8Array(4);return Tt[0]=1,new Uint32Array(Tt.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return wt(this,"isLittleEndian",lt())}static get isEvalSupported(){return wt(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?wt(this,"platform",{isWin:!1,isMac:!1}):wt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var st,ct;return wt(this,"isCSSRoundSupported",(ct=(st=globalThis.CSS)==null?void 0:st.supports)==null?void 0:ct.call(st,"width: round(1.5px, 1px)"))}}e.FeatureTest=Ct;const Et=[...Array(256).keys()].map(Tt=>Tt.toString(16).padStart(2,"0"));class mt{static makeHexColor(st,ct,Dt){return`#${Et[st]}${Et[ct]}${Et[Dt]}`}static scaleMinMax(st,ct){let Dt;st[0]?(st[0]<0&&(Dt=ct[0],ct[0]=ct[1],ct[1]=Dt),ct[0]*=st[0],ct[1]*=st[0],st[3]<0&&(Dt=ct[2],ct[2]=ct[3],ct[3]=Dt),ct[2]*=st[3],ct[3]*=st[3]):(Dt=ct[0],ct[0]=ct[2],ct[2]=Dt,Dt=ct[1],ct[1]=ct[3],ct[3]=Dt,st[1]<0&&(Dt=ct[2],ct[2]=ct[3],ct[3]=Dt),ct[2]*=st[1],ct[3]*=st[1],st[2]<0&&(Dt=ct[0],ct[0]=ct[1],ct[1]=Dt),ct[0]*=st[2],ct[1]*=st[2]),ct[0]+=st[4],ct[1]+=st[4],ct[2]+=st[5],ct[3]+=st[5]}static transform(st,ct){return[st[0]*ct[0]+st[2]*ct[1],st[1]*ct[0]+st[3]*ct[1],st[0]*ct[2]+st[2]*ct[3],st[1]*ct[2]+st[3]*ct[3],st[0]*ct[4]+st[2]*ct[5]+st[4],st[1]*ct[4]+st[3]*ct[5]+st[5]]}static applyTransform(st,ct){const Dt=st[0]*ct[0]+st[1]*ct[2]+ct[4],qt=st[0]*ct[1]+st[1]*ct[3]+ct[5];return[Dt,qt]}static applyInverseTransform(st,ct){const Dt=ct[0]*ct[3]-ct[1]*ct[2],qt=(st[0]*ct[3]-st[1]*ct[2]+ct[2]*ct[5]-ct[4]*ct[3])/Dt,Vt=(-st[0]*ct[1]+st[1]*ct[0]+ct[4]*ct[1]-ct[5]*ct[0])/Dt;return[qt,Vt]}static getAxialAlignedBoundingBox(st,ct){const Dt=this.applyTransform(st,ct),qt=this.applyTransform(st.slice(2,4),ct),Vt=this.applyTransform([st[0],st[3]],ct),Kt=this.applyTransform([st[2],st[1]],ct);return[Math.min(Dt[0],qt[0],Vt[0],Kt[0]),Math.min(Dt[1],qt[1],Vt[1],Kt[1]),Math.max(Dt[0],qt[0],Vt[0],Kt[0]),Math.max(Dt[1],qt[1],Vt[1],Kt[1])]}static inverseTransform(st){const ct=st[0]*st[3]-st[1]*st[2];return[st[3]/ct,-st[1]/ct,-st[2]/ct,st[0]/ct,(st[2]*st[5]-st[4]*st[3])/ct,(st[4]*st[1]-st[5]*st[0])/ct]}static singularValueDecompose2dScale(st){const ct=[st[0],st[2],st[1],st[3]],Dt=st[0]*ct[0]+st[1]*ct[2],qt=st[0]*ct[1]+st[1]*ct[3],Vt=st[2]*ct[0]+st[3]*ct[2],Kt=st[2]*ct[1]+st[3]*ct[3],Zt=(Dt+Kt)/2,ft=Math.sqrt((Dt+Kt)**2-4*(Dt*Kt-Vt*qt))/2,It=Zt+ft||1,Wt=Zt-ft||1;return[Math.sqrt(It),Math.sqrt(Wt)]}static normalizeRect(st){const ct=st.slice(0);return st[0]>st[2]&&(ct[0]=st[2],ct[2]=st[0]),st[1]>st[3]&&(ct[1]=st[3],ct[3]=st[1]),ct}static intersect(st,ct){const Dt=Math.max(Math.min(st[0],st[2]),Math.min(ct[0],ct[2])),qt=Math.min(Math.max(st[0],st[2]),Math.max(ct[0],ct[2]));if(Dt>qt)return null;const Vt=Math.max(Math.min(st[1],st[3]),Math.min(ct[1],ct[3])),Kt=Math.min(Math.max(st[1],st[3]),Math.max(ct[1],ct[3]));return Vt>Kt?null:[Dt,Vt,qt,Kt]}static bezierBoundingBox(st,ct,Dt,qt,Vt,Kt,Zt,ft){const It=[],Wt=[[],[]];let Ot,D,A,q,z,Z,gt,kt;for(let Ft=0;Ft<2;++Ft){if(Ft===0?(D=6*st-12*Dt+6*Vt,Ot=-3*st+9*Dt-9*Vt+3*Zt,A=3*Dt-3*st):(D=6*ct-12*qt+6*Kt,Ot=-3*ct+9*qt-9*Kt+3*ft,A=3*qt-3*ct),Math.abs(Ot)<1e-12){if(Math.abs(D)<1e-12)continue;q=-A/D,0<q&&q<1&&It.push(q);continue}gt=D*D-4*A*Ot,kt=Math.sqrt(gt),!(gt<0)&&(z=(-D+kt)/(2*Ot),0<z&&z<1&&It.push(z),Z=(-D-kt)/(2*Ot),0<Z&&Z<1&&It.push(Z))}let W=It.length,rt;const bt=W;for(;W--;)q=It[W],rt=1-q,Wt[0][W]=rt*rt*rt*st+3*rt*rt*q*Dt+3*rt*q*q*Vt+q*q*q*Zt,Wt[1][W]=rt*rt*rt*ct+3*rt*rt*q*qt+3*rt*q*q*Kt+q*q*q*ft;return Wt[0][bt]=st,Wt[1][bt]=ct,Wt[0][bt+1]=Zt,Wt[1][bt+1]=ft,Wt[0].length=Wt[1].length=bt+2,[Math.min(...Wt[0]),Math.min(...Wt[1]),Math.max(...Wt[0]),Math.max(...Wt[1])]}}e.Util=mt;const St=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(Tt){if(Tt[0]>=""){let ct;if(Tt[0]===""&&Tt[1]===""?ct="utf-16be":Tt[0]===""&&Tt[1]===""?ct="utf-16le":Tt[0]===""&&Tt[1]===""&&Tt[2]===""&&(ct="utf-8"),ct)try{const Dt=new TextDecoder(ct,{fatal:!0}),qt=w(Tt);return Dt.decode(qt)}catch(Dt){_t(`stringToPDFString: "${Dt}".`)}}const st=[];for(let ct=0,Dt=Tt.length;ct<Dt;ct++){const qt=St[Tt.charCodeAt(ct)];st.push(qt?String.fromCharCode(qt):Tt.charAt(ct))}return st.join("")}function tt(Tt){return decodeURIComponent(escape(Tt))}function et(Tt){return unescape(encodeURIComponent(Tt))}function pt(Tt){return typeof Tt=="object"&&(Tt==null?void 0:Tt.byteLength)!==void 0}function Pt(Tt,st){if(Tt.length!==st.length)return!1;for(let ct=0,Dt=Tt.length;ct<Dt;ct++)if(Tt[ct]!==st[ct])return!1;return!0}function Mt(Tt=new Date){return[Tt.getUTCFullYear().toString(),(Tt.getUTCMonth()+1).toString().padStart(2,"0"),Tt.getUTCDate().toString().padStart(2,"0"),Tt.getUTCHours().toString().padStart(2,"0"),Tt.getUTCMinutes().toString().padStart(2,"0"),Tt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){K(this,zt,!1);this.promise=new Promise((st,ct)=>{this.resolve=Dt=>{yt(this,zt,!0),st(Dt)},this.reject=Dt=>{yt(this,zt,!0),ct(Dt)}})}get settled(){return r(this,zt)}}zt=new WeakMap,e.PromiseCapability=Bt;let Ut=null,Lt=null;function jt(Tt){return Ut||(Ut=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Lt=new Map([["","t"]])),Tt.replaceAll(Ut,(st,ct,Dt)=>ct?ct.normalize("NFKC"):Lt.get(Dt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Tt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Tt);else for(let st=0;st<32;st++)Tt[st]=Math.floor(Math.random()*255);return ot(Tt)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,oe,c,ye,g,m,u,F,O,P,M,C,_,ve,x,B,Ie,f,b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(v){if(typeof v=="string"||v instanceof URL?v={url:v}:(0,_util.isArrayBuffer)(v)&&(v={data:v}),typeof v!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!v.url&&!v.data&&!v.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const d=new PDFDocumentLoadingTask,{docId:j}=d,k=v.url?getUrlProp(v.url):null,$=v.data?getDataProp(v.data):null,nt=v.httpHeaders||null,H=v.withCredentials===!0,it=v.password??null,ut=v.range instanceof PDFDataRangeTransport?v.range:null,_t=Number.isInteger(v.rangeChunkSize)&&v.rangeChunkSize>0?v.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let S=v.worker instanceof PDFWorker?v.worker:null;const X=v.verbosity,at=typeof v.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(v.docBaseUrl)?v.docBaseUrl:null,At=typeof v.cMapUrl=="string"?v.cMapUrl:null,wt=v.cMapPacked!==!1,R=v.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof v.standardFontDataUrl=="string"?v.standardFontDataUrl:null,o=v.StandardFontDataFactory||DefaultStandardFontDataFactory,y=v.stopAtErrors!==!0,V=Number.isInteger(v.maxImageSize)&&v.maxImageSize>-1?v.maxImageSize:-1,U=v.isEvalSupported!==!1,Y=typeof v.isOffscreenCanvasSupported=="boolean"?v.isOffscreenCanvasSupported:!_util.isNodeJS,Q=Number.isInteger(v.canvasMaxAreaInBytes)?v.canvasMaxAreaInBytes:-1,ot=typeof v.disableFontFace=="boolean"?v.disableFontFace:_util.isNodeJS,w=v.fontExtraProperties===!0,I=v.enableXfa===!0,G=v.ownerDocument||globalThis.document,J=v.disableRange===!0,lt=v.disableStream===!0,dt=v.disableAutoFetch===!0,Ct=v.pdfBug===!0,Et=ut?ut.length:v.length??NaN,mt=typeof v.useSystemFonts=="boolean"?v.useSystemFonts:!_util.isNodeJS&&!ot,St=typeof v.useWorkerFetch=="boolean"?v.useWorkerFetch:R===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&At&&a&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),vt=v.canvasFactory||new DefaultCanvasFactory({ownerDocument:G}),tt=v.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:G}),et=null;(0,_util.setVerbosityLevel)(X);const pt={canvasFactory:vt,filterFactory:tt};if(St||(pt.cMapReaderFactory=new R({baseUrl:At,isCompressed:wt}),pt.standardFontDataFactory=new o({baseUrl:a})),!S){const Bt={verbosity:X,port:_worker_options.GlobalWorkerOptions.workerPort};S=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),d._worker=S}const Pt={docId:j,apiVersion:"3.10.111",data:$,password:it,disableAutoFetch:dt,rangeChunkSize:_t,length:Et,docBaseUrl:at,enableXfa:I,evaluatorOptions:{maxImageSize:V,disableFontFace:ot,ignoreErrors:y,isEvalSupported:U,isOffscreenCanvasSupported:Y,canvasMaxAreaInBytes:Q,fontExtraProperties:w,useSystemFonts:mt,cMapUrl:St?At:null,standardFontDataUrl:St?a:null}},Mt={ignoreErrors:y,isEvalSupported:U,disableFontFace:ot,fontExtraProperties:w,enableXfa:I,ownerDocument:G,disableAutoFetch:dt,pdfBug:Ct,styleElement:et};return S.promise.then(function(){if(d.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(S,Pt),Ut=new Promise(function(Lt){let jt;ut?jt=new _transport_stream.PDFDataTransportStream({length:Et,initialData:ut.initialData,progressiveDone:ut.progressiveDone,contentDispositionFilename:ut.contentDispositionFilename,disableRange:J,disableStream:lt},ut):$||(jt=(zt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(zt):(0,_display_utils.isValidFetchUrl)(zt.url)?new _displayFetch_stream.PDFFetchStream(zt):new _displayNetwork.PDFNetworkStream(zt))({url:k,length:Et,httpHeaders:nt,withCredentials:H,rangeChunkSize:_t,disableRange:J,disableStream:lt})),Lt(jt)});return Promise.all([Bt,Ut]).then(function([Lt,jt]){if(d.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(j,Lt,S.port),zt=new WorkerTransport($t,d,jt,Mt,pt);d._transport=zt,$t.send("Ready",null)})}).catch(d._capability.reject),d}async function _fetchDocument(v,d){if(v.destroyed)throw new Error("Worker was destroyed");const j=await v.messageHandler.sendWithPromise("GetDocRequest",d,d.data?[d.data.buffer]:null);if(v.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(v){if(v instanceof URL)return v.href;try{return new URL(v,window.location).href}catch{if(_util.isNodeJS&&typeof v=="string")return v}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(v){if(_util.isNodeJS&&typeof Buffer<"u"&&v instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength)return v;if(typeof v=="string")return(0,_util.stringToBytes)(v);if(typeof v=="object"&&!isNaN(v==null?void 0:v.length)||(0,_util.isArrayBuffer)(v))return new Uint8Array(v);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ue(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var d,j,k;this.destroyed=!0;try{(d=this._worker)!=null&&d.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch($){throw(k=this._worker)!=null&&k.port&&delete this._worker._pendingDestroy,$}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,K(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(d,j,k=!1,$=null){this.length=d,this.initialData=j,this.progressiveDone=k,this.contentDispositionFilename=$,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(d){this._rangeListeners.push(d)}addProgressListener(d){this._progressListeners.push(d)}addProgressiveReadListener(d){this._progressiveReadListeners.push(d)}addProgressiveDoneListener(d){this._progressiveDoneListeners.push(d)}onDataRange(d,j){for(const k of this._rangeListeners)k(d,j)}onDataProgress(d,j){this._readyCapability.promise.then(()=>{for(const k of this._progressListeners)k(d,j)})}onDataProgressiveRead(d){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(d)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const d of this._progressiveDoneListeners)d()})}transportReady(){this._readyCapability.resolve()}requestDataRange(d,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(d,j){this._pdfInfo=d,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(k=>{if(!k)return k;const $=[];for(const nt in k)$.push(...k[nt]);return $}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(d){return this._transport.getPage(d)}getPageIndex(d){return this._transport.getPageIndex(d)}getDestinations(){return this._transport.getDestinations()}getDestination(d){return this._transport.getDestination(d)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(d=!1){return this._transport.startCleanup(d||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(d,j,k,$=!1){K(this,i);K(this,c);K(this,s,null);K(this,n,!1);this._pageIndex=d,this._pageInfo=j,this._transport=k,this._stats=$?new _display_utils.StatTimer:null,this._pdfBug=$,this.commonObjs=k.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:d,rotation:j=this.rotate,offsetX:k=0,offsetY:$=0,dontFlip:nt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:d,rotation:j,offsetX:k,offsetY:$,dontFlip:nt})}getAnnotations({intent:d="display"}={}){const j=this._transport.getRenderingIntent(d);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var d;return((d=this._transport._htmlForXfa)==null?void 0:d.children[this._pageIndex])||null}render({canvasContext:d,viewport:j,intent:k="display",annotationMode:$=_util.AnnotationMode.ENABLE,transform:nt=null,background:H=null,optionalContentConfigPromise:it=null,annotationCanvasMap:ut=null,pageColors:_t=null,printAnnotationStorage:S=null}){var o,y;(o=this._stats)==null||o.time("Overall");const X=this._transport.getRenderingIntent(k,$,S);yt(this,n,!1),ht(this,c,ye).call(this),it||(it=this._transport.getOptionalContentConfig());let at=this._intentStates.get(X.cacheKey);at||(at=Object.create(null),this._intentStates.set(X.cacheKey,at)),at.streamReaderCancelTimeout&&(clearTimeout(at.streamReaderCancelTimeout),at.streamReaderCancelTimeout=null);const At=!!(X.renderingIntent&_util.RenderingIntentFlag.PRINT);at.displayReadyCapability||(at.displayReadyCapability=new _util.PromiseCapability,at.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(y=this._stats)==null||y.time("Page Request"),this._pumpOperatorList(X));const wt=V=>{var U,Y;at.renderTasks.delete(R),(this._maybeCleanupAfterRender||At)&&yt(this,n,!0),ht(this,i,oe).call(this,!At),V?(R.capability.reject(V),this._abortOperatorList({intentState:at,reason:V instanceof Error?V:new Error(V)})):R.capability.resolve(),(U=this._stats)==null||U.timeEnd("Rendering"),(Y=this._stats)==null||Y.timeEnd("Overall")},R=new InternalRenderTask({callback:wt,params:{canvasContext:d,viewport:j,transform:nt,background:H},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ut,operatorList:at.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!At,pdfBug:this._pdfBug,pageColors:_t});(at.renderTasks||(at.renderTasks=new Set)).add(R);const a=R.task;return Promise.all([at.displayReadyCapability.promise,it]).then(([V,U])=>{var Y;if(this.destroyed){wt();return}(Y=this._stats)==null||Y.time("Rendering"),R.initializeGraphics({transparency:V,optionalContentConfig:U}),R.operatorListChanged()}).catch(wt),a}getOperatorList({intent:d="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:k=null}={}){var ut;function $(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(it))}const nt=this._transport.getRenderingIntent(d,j,k,!0);let H=this._intentStates.get(nt.cacheKey);H||(H=Object.create(null),this._intentStates.set(nt.cacheKey,H));let it;return H.opListReadCapability||(it=Object.create(null),it.operatorListChanged=$,H.opListReadCapability=new _util.PromiseCapability,(H.renderTasks||(H.renderTasks=new Set)).add(it),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ut=this._stats)==null||ut.time("Page Request"),this._pumpOperatorList(nt)),H.opListReadCapability.promise}streamTextContent({includeMarkedContent:d=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:d===!0,disableNormalization:j===!0},{highWaterMark:100,size($){return $.items.length}})}getTextContent(d={}){if(this._transport._htmlForXfa)return this.getXfa().then(k=>_xfa_text.XfaText.textContent(k));const j=this.streamTextContent(d);return new Promise(function(k,$){function nt(){H.read().then(function({value:ut,done:_t}){if(_t){k(it);return}Object.assign(it.styles,ut.styles),it.items.push(...ut.items),nt()},$)}const H=j.getReader(),it={items:[],styles:Object.create(null)};nt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const d=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const k of j.renderTasks)d.push(k.completed),k.cancel();return this.objs.clear(),yt(this,n,!1),ht(this,c,ye).call(this),Promise.all(d)}cleanup(d=!1){yt(this,n,!0);const j=ht(this,i,oe).call(this,!1);return d&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(d,j){var $,nt;const k=this._intentStates.get(j);k&&(($=this._stats)==null||$.timeEnd("Page Request"),(nt=k.displayReadyCapability)==null||nt.resolve(d))}_renderPageChunk(d,j){for(let k=0,$=d.length;k<$;k++)j.operatorList.fnArray.push(d.fnArray[k]),j.operatorList.argsArray.push(d.argsArray[k]);j.operatorList.lastChunk=d.lastChunk,j.operatorList.separateAnnots=d.separateAnnots;for(const k of j.renderTasks)k.operatorListChanged();d.lastChunk&&ht(this,i,oe).call(this,!0)}_pumpOperatorList({renderingIntent:d,cacheKey:j,annotationStorageSerializable:k}){const{map:$,transfers:nt}=k,it=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:d,cacheKey:j,annotationStorage:$},nt).getReader(),ut=this._intentStates.get(j);ut.streamReader=it;const _t=()=>{it.read().then(({value:S,done:X})=>{if(X){ut.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,ut),_t())},S=>{if(ut.streamReader=null,!this._transport.destroyed){if(ut.operatorList){ut.operatorList.lastChunk=!0;for(const X of ut.renderTasks)X.operatorListChanged();ht(this,i,oe).call(this,!0)}if(ut.displayReadyCapability)ut.displayReadyCapability.reject(S);else if(ut.opListReadCapability)ut.opListReadCapability.reject(S);else throw S}})};_t()}_abortOperatorList({intentState:d,reason:j,force:k=!1}){if(d.streamReader){if(d.streamReaderCancelTimeout&&(clearTimeout(d.streamReaderCancelTimeout),d.streamReaderCancelTimeout=null),!k){if(d.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let $=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&($+=j.extraDelay),d.streamReaderCancelTimeout=setTimeout(()=>{d.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:d,reason:j,force:!0})},$);return}}if(d.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),d.streamReader=null,!this._transport.destroyed){for(const[$,nt]of this._intentStates)if(nt===d){this._intentStates.delete($);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,oe=function(d=!1){if(ht(this,c,ye).call(this),!r(this,n)||this.destroyed)return!1;if(d)return yt(this,s,setTimeout(()=>{yt(this,s,null),ht(this,i,oe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:k}of this._intentStates.values())if(j.size>0||!k.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),yt(this,n,!1),!0},c=new WeakSet,ye=function(){r(this,s)&&(clearTimeout(r(this,s)),yt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){K(this,g,new Set);K(this,m,Promise.resolve())}postMessage(d,j){const k={data:structuredClone(d,j?{transfer:j}:null)};r(this,m).then(()=>{for(const $ of r(this,g))$.call(this,k)})}addEventListener(d,j){r(this,g).add(j)}removeEventListener(d,j){r(this,g).delete(j)}terminate(){r(this,g).clear()}}g=new WeakMap,m=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const v=(u=document==null?void 0:document.currentScript)==null?void 0:u.src;v&&(PDFWorkerUtil.fallbackWorkerSrc=v.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(v,d){let j;try{if(j=new URL(v),!j.origin||j.origin==="null")return!1}catch{return!1}const k=new URL(d,j);return j.origin===k.origin},PDFWorkerUtil.createCDNWrapper=function(v){const d=`importScripts("${v}");`;return URL.createObjectURL(new Blob([d]))}}const _PDFWorker=class _PDFWorker{constructor({name:v=null,port:d=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var k;if(this.name=v,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,d){if((k=r(_PDFWorker,F))!=null&&k.has(d))throw new Error("Cannot use more than one PDFWorker per port.");(r(_PDFWorker,F)||yt(_PDFWorker,F,new WeakMap)).set(d,this),this._initializeFromPort(d);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(v){this._port=v,this._messageHandler=new _message_handler.MessageHandler("main","worker",v),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:v}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,v)||(v=PDFWorkerUtil.createCDNWrapper(new URL(v,window.location).href));const d=new Worker(v),j=new _message_handler.MessageHandler("main","worker",d),k=()=>{d.removeEventListener("error",$),j.destroy(),d.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},$=()=>{this._webWorker||k()};d.addEventListener("error",$),j.on("test",H=>{if(d.removeEventListener("error",$),this.destroyed){k();return}H?(this._messageHandler=j,this._port=d,this._webWorker=d,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),d.terminate())}),j.on("ready",H=>{if(d.removeEventListener("error",$),this.destroyed){k();return}try{nt()}catch{this._setupFakeWorker()}});const nt=()=>{const H=new Uint8Array;j.send("test",H,[H.buffer])};nt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(v=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const d=new LoopbackPort;this._port=d;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,k=new _message_handler.MessageHandler(j+"_worker",j,d);v.setup(k,d);const $=new _message_handler.MessageHandler(j,j+"_worker",d);this._messageHandler=$,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})}).catch(v=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${v.message}".`))})}destroy(){var v;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(v=r(_PDFWorker,F))==null||v.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(v){var j;if(!(v!=null&&v.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const d=(j=r(this,F))==null?void 0:j.get(v.port);if(d){if(d._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return d}return new _PDFWorker(v)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var v;try{return((v=globalThis.pdfjsWorker)==null?void 0:v.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};F=new WeakMap,K(_PDFWorker,F,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(d,j,k,$,nt){K(this,_);K(this,O,new Map);K(this,P,new Map);K(this,M,new Map);K(this,C,null);this.messageHandler=d,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:$.ownerDocument,styleElement:$.styleElement}),this._params=$,this.canvasFactory=nt.canvasFactory,this.filterFactory=nt.filterFactory,this.cMapReaderFactory=nt.cMapReaderFactory,this.standardFontDataFactory=nt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=k,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(d,j=_util.AnnotationMode.ENABLE,k=null,$=!1){let nt=_util.RenderingIntentFlag.DISPLAY,H=_annotation_storage.SerializableEmpty;switch(d){case"any":nt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":nt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${d}`)}switch(j){case _util.AnnotationMode.DISABLE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:nt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=(nt&_util.RenderingIntentFlag.PRINT&&k instanceof _annotation_storage.PrintAnnotationStorage?k:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return $&&(nt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:nt,cacheKey:`${nt}_${H.hash}`,annotationStorageSerializable:H}}destroy(){var k;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(k=r(this,C))==null||k.reject(new Error("Worker was destroyed during onPassword callback"));const d=[];for(const $ of r(this,P).values())d.push($._destroy());r(this,P).clear(),r(this,M).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return d.push(j),Promise.all(d).then(()=>{var $;this.commonObjs.clear(),this.fontLoader.clear(),r(this,O).clear(),this.filterFactory.destroy(),($=this._networkStream)==null||$.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:d,loadingTask:j}=this;d.on("GetReader",(k,$)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=nt=>{this._lastProgress={loaded:nt.loaded,total:nt.total}},$.onPull=()=>{this._fullReader.read().then(function({value:nt,done:H}){if(H){$.close();return}(0,_util.assert)(nt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(nt),1,[nt])}).catch(nt=>{$.error(nt)})},$.onCancel=nt=>{this._fullReader.cancel(nt),$.ready.catch(H=>{if(!this.destroyed)throw H})}}),d.on("ReaderHeadersReady",k=>{const $=new _util.PromiseCapability,nt=this._fullReader;return nt.headersReady.then(()=>{var H;(!nt.isStreamingSupported||!nt.isRangeSupported)&&(this._lastProgress&&((H=j.onProgress)==null||H.call(j,this._lastProgress)),nt.onProgress=it=>{var ut;(ut=j.onProgress)==null||ut.call(j,{loaded:it.loaded,total:it.total})}),$.resolve({isStreamingSupported:nt.isStreamingSupported,isRangeSupported:nt.isRangeSupported,contentLength:nt.contentLength})},$.reject),$.promise}),d.on("GetRangeReader",(k,$)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const nt=this._networkStream.getRangeReader(k.begin,k.end);if(!nt){$.close();return}$.onPull=()=>{nt.read().then(function({value:H,done:it}){if(it){$.close();return}(0,_util.assert)(H instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{$.error(H)})},$.onCancel=H=>{nt.cancel(H),$.ready.catch(it=>{if(!this.destroyed)throw it})}}),d.on("GetDoc",({pdfInfo:k})=>{this._numPages=k.numPages,this._htmlForXfa=k.htmlForXfa,delete k.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(k,this))}),d.on("DocException",function(k){let $;switch(k.name){case"PasswordException":$=new _util.PasswordException(k.message,k.code);break;case"InvalidPDFException":$=new _util.InvalidPDFException(k.message);break;case"MissingPDFException":$=new _util.MissingPDFException(k.message);break;case"UnexpectedResponseException":$=new _util.UnexpectedResponseException(k.message,k.status);break;case"UnknownErrorException":$=new _util.UnknownErrorException(k.message,k.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject($)}),d.on("PasswordRequest",k=>{if(yt(this,C,new _util.PromiseCapability),j.onPassword){const $=nt=>{nt instanceof Error?r(this,C).reject(nt):r(this,C).resolve({password:nt})};try{j.onPassword($,k.code)}catch(nt){r(this,C).reject(nt)}}else r(this,C).reject(new _util.PasswordException(k.message,k.code));return r(this,C).promise}),d.on("DataLoaded",k=>{var $;($=j.onProgress)==null||$.call(j,{loaded:k.length,total:k.length}),this.downloadInfoCapability.resolve(k)}),d.on("StartRenderPage",k=>{if(this.destroyed)return;r(this,P).get(k.pageIndex)._startRenderPage(k.transparency,k.cacheKey)}),d.on("commonobj",([k,$,nt])=>{var H;if(!this.destroyed&&!this.commonObjs.has(k))switch($){case"Font":const it=this._params;if("error"in nt){const S=nt.error;(0,_util.warn)(`Error during font loading: ${S}`),this.commonObjs.resolve(k,S);break}const ut=it.pdfBug&&((H=globalThis.FontInspector)!=null&&H.enabled)?(S,X)=>globalThis.FontInspector.fontAdded(S,X):null,_t=new _font_loader.FontFaceObject(nt,{isEvalSupported:it.isEvalSupported,disableFontFace:it.disableFontFace,ignoreErrors:it.ignoreErrors,inspectFont:ut});this.fontLoader.bind(_t).catch(S=>d.sendWithPromise("FontFallback",{id:k})).finally(()=>{!it.fontExtraProperties&&_t.data&&(_t.data=null),this.commonObjs.resolve(k,_t)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(k,nt);break;default:throw new Error(`Got unknown common object type ${$}`)}}),d.on("obj",([k,$,nt,H])=>{var ut;if(this.destroyed)return;const it=r(this,P).get($);if(!it.objs.has(k))switch(nt){case"Image":if(it.objs.resolve(k,H),H){let _t;if(H.bitmap){const{width:S,height:X}=H;_t=S*X*4}else _t=((ut=H.data)==null?void 0:ut.length)||0;_t>_util.MAX_IMAGE_SIZE_TO_CACHE&&(it._maybeCleanupAfterRender=!0)}break;case"Pattern":it.objs.resolve(k,H);break;default:throw new Error(`Got unknown object type ${nt}`)}}),d.on("DocProgress",k=>{var $;this.destroyed||($=j.onProgress)==null||$.call(j,{loaded:k.loaded,total:k.total})}),d.on("FetchBuiltInCMap",k=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(k):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),d.on("FetchStandardFontData",k=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(k):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var k;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:d,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:d,filename:((k=this._fullReader)==null?void 0:k.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(d){if(!Number.isInteger(d)||d<=0||d>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=d-1,k=r(this,M).get(j);if(k)return k;const $=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(nt=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(j,nt,this,this._params.pdfBug);return r(this,P).set(j,H),H});return r(this,M).set(j,$),$}getPageIndex(d){return typeof d!="object"||d===null||!Number.isInteger(d.num)||d.num<0||!Number.isInteger(d.gen)||d.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:d.num,gen:d.gen})}getAnnotations(d,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:d,intent:j})}getFieldObjects(){return ht(this,_,ve).call(this,"GetFieldObjects")}hasJSActions(){return ht(this,_,ve).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(d){return typeof d!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:d})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ht(this,_,ve).call(this,"GetDocJSActions")}getPageJSActions(d){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:d})}getStructTree(d){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:d})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(d=>new _optional_content_config.OptionalContentConfig(d))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const d="GetMetadata",j=r(this,O).get(d);if(j)return j;const k=this.messageHandler.sendWithPromise(d,null).then($=>{var nt,H;return{info:$[0],metadata:$[1]?new _metadata.Metadata($[1]):null,contentDispositionFilename:((nt=this._fullReader)==null?void 0:nt.filename)??null,contentLength:((H=this._fullReader)==null?void 0:H.contentLength)??null}});return r(this,O).set(d,k),k}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(d=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of r(this,P).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),d||this.fontLoader.clear(),r(this,O).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:d,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:d,enableXfa:j})}}O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakSet,ve=function(d,j=null){const k=r(this,O).get(d);if(k)return k;const $=this.messageHandler.sendWithPromise(d,j);return r(this,O).set(d,$),$};class PDFObjects{constructor(){K(this,B);K(this,x,Object.create(null))}get(d,j=null){if(j){const $=ht(this,B,Ie).call(this,d);return $.capability.promise.then(()=>j($.data)),null}const k=r(this,x)[d];if(!(k!=null&&k.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${d}.`);return k.data}has(d){const j=r(this,x)[d];return(j==null?void 0:j.capability.settled)||!1}resolve(d,j=null){const k=ht(this,B,Ie).call(this,d);k.data=j,k.capability.resolve()}clear(){var d;for(const j in r(this,x)){const{data:k}=r(this,x)[j];(d=k==null?void 0:k.bitmap)==null||d.close()}yt(this,x,Object.create(null))}}x=new WeakMap,B=new WeakSet,Ie=function(d){var j;return(j=r(this,x))[d]||(j[d]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(d){K(this,f,null);yt(this,f,d),this.onContinue=null}get promise(){return r(this,f).capability.promise}cancel(d=0){r(this,f).cancel(null,d)}get separateAnnots(){const{separateAnnots:d}=r(this,f).operatorList;if(!d)return!1;const{annotationCanvasMap:j}=r(this,f);return d.form||d.canvas&&(j==null?void 0:j.size)>0}}f=new WeakMap,exports.RenderTask=RenderTask;const N=class N{constructor({callback:d,params:j,objs:k,commonObjs:$,annotationCanvasMap:nt,operatorList:H,pageIndex:it,canvasFactory:ut,filterFactory:_t,useRequestAnimationFrame:S=!1,pdfBug:X=!1,pageColors:at=null}){this.callback=d,this.params=j,this.objs=k,this.commonObjs=$,this.annotationCanvasMap=nt,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=it,this.canvasFactory=ut,this.filterFactory=_t,this._pdfBug=X,this.pageColors=at,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=S===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:d=!1,optionalContentConfig:j}){var it,ut;if(this.cancelled)return;if(this._canvas){if(r(N,b).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(N,b).add(this._canvas)}this._pdfBug&&((it=globalThis.StepperManager)!=null&&it.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:k,viewport:$,transform:nt,background:H}=this.params;this.gfx=new _canvas.CanvasGraphics(k,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:nt,viewport:$,transparency:d,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,(ut=this.graphicsReadyCallback)==null||ut.call(this)}cancel(d=null,j=0){var k;this.running=!1,this.cancelled=!0,(k=this.gfx)==null||k.endDrawing(),this._canvas&&r(N,b).delete(this._canvas),this.callback(d||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var d;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(d=this.stepper)==null||d.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&r(N,b).delete(this._canvas),this.callback())))}};b=new WeakMap,K(N,b,new WeakSet);let InternalRenderTask=N;const version="3.10.111";exports.version=version;const build="e142baecb";exports.build=build},(t,e,s)=>{var m,u,F,un,P;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(4),l=s(8);const c=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=c;class L{constructor(){K(this,F);K(this,m,!1);K(this,u,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,_){const T=r(this,u).get(C);return T===void 0?_:Object.assign(_,T)}getRawValue(C){return r(this,u).get(C)}remove(C){if(r(this,u).delete(C),r(this,u).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const _ of r(this,u).values())if(_ instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,_){const T=r(this,u).get(C);let x=!1;if(T!==void 0)for(const[B,E]of Object.entries(_))T[B]!==E&&(x=!0,T[B]=E);else x=!0,r(this,u).set(C,_);x&&ht(this,F,un).call(this),_ instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(_.constructor._type)}has(C){return r(this,u).has(C)}getAll(){return r(this,u).size>0?(0,n.objectFromMap)(r(this,u)):null}setAll(C){for(const[_,T]of Object.entries(C))this.setValue(_,T)}get size(){return r(this,u).size}resetModified(){r(this,m)&&(yt(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(r(this,u).size===0)return c;const C=new Map,_=new l.MurmurHash3_64,T=[],x=Object.create(null);let B=!1;for(const[E,f]of r(this,u)){const b=f instanceof i.AnnotationEditor?f.serialize(!1,x):f;b&&(C.set(E,b),_.update(`${E}:${JSON.stringify(b)}`),B||(B=!!b.bitmap))}if(B)for(const E of C.values())E.bitmap&&T.push(E.bitmap);return C.size>0?{map:C,hash:_.hexdigest(),transfers:T}:c}}m=new WeakMap,u=new WeakMap,F=new WeakSet,un=function(){r(this,m)||(yt(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=L;class g extends L{constructor(_){super();K(this,P,void 0);const{map:T,hash:x,transfers:B}=_.serializable,E=structuredClone(T,B?{transfer:B}:null);yt(this,P,{map:E,hash:x,transfers:B})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,P)}}P=new WeakMap,e.PrintAnnotationStorage=g},(t,e,s)=>{var L,g,m,u,F,O,P,M,C,_,Oe,x,De,E,Le,b,fn,v,pn,j,gn,$,mn,H,bn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),i=s(1);const ut=class ut{constructor(S){K(this,_);K(this,E);K(this,v);K(this,j);K(this,$);K(this,H);K(this,L,!1);K(this,g,null);K(this,m,this.focusin.bind(this));K(this,u,this.focusout.bind(this));K(this,F,!1);K(this,O,!1);K(this,P,!1);Jt(this,"_initialOptions",Object.create(null));Jt(this,"_uiManager",null);Jt(this,"_focusEventsAllowed",!0);K(this,M,!1);K(this,C,ut._zIndex++);this.constructor===ut&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=S.parent,this.id=S.id,this.width=this.height=null,this.pageIndex=S.parent.pageIndex,this.name=S.name,this.div=null,this._uiManager=S.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=S.isCentered;const{rotation:X,rawDims:{pageWidth:at,pageHeight:At,pageX:wt,pageY:R}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[at,At],this.pageTranslation=[wt,R];const[a,o]=this.parentDimensions;this.x=S.x/a,this.y=S.y/o,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(S){const X=new c({id:S.parent.getNextId(),parent:S.parent,uiManager:S._uiManager});X.annotationElementId=S.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(S){}static updateDefaultParams(S,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(S){return!1}static paste(S,X){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return r(this,M)}set _isDraggable(S){var X;yt(this,M,S),(X=this.div)==null||X.classList.toggle("draggable",S)}center(){const[S,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(S*2),this.y+=this.width*S/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(S*2),this.y-=this.width*S/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(S){this._uiManager.addCommands(S)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,C)}setParent(S){S!==null&&(this.pageIndex=S.pageIndex,this.pageDimensions=S.pageDimensions),this.parent=S}focusin(S){this._focusEventsAllowed&&(r(this,F)?yt(this,F,!1):this.parent.setSelected(this))}focusout(S){var at;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=S.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(S.preventDefault(),(at=this.parent)!=null&&at.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(S,X,at,At){const[wt,R]=this.parentDimensions;[at,At]=this.screenToPageTranslation(at,At),this.x=(S+at)/wt,this.y=(X+At)/R,this.fixAndSetPosition()}translate(S,X){ht(this,_,Oe).call(this,this.parentDimensions,S,X)}translateInPage(S,X){ht(this,_,Oe).call(this,this.pageDimensions,S,X),this.moveInDOM(),this.div.scrollIntoView({block:"nearest"})}drag(S,X){const[at,At]=this.parentDimensions;if(this.x+=S/at,this.y+=X/At,this.x<0||this.x>1||this.y<0||this.y>1){const{x:wt,y:R}=this.div.getBoundingClientRect();this.parent.findNewParent(this,wt,R)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[S,X]=this.pageDimensions;let{x:at,y:At,width:wt,height:R}=this;switch(wt*=S,R*=X,at*=S,At*=X,this.rotation){case 0:at=Math.max(0,Math.min(S-wt,at)),At=Math.max(0,Math.min(X-R,At));break;case 90:at=Math.max(0,Math.min(S-R,at)),At=Math.min(X,Math.max(wt,At));break;case 180:at=Math.min(S,Math.max(wt,at)),At=Math.min(X,Math.max(R,At));break;case 270:at=Math.min(S,Math.max(R,at)),At=Math.max(0,Math.min(X-wt,At));break}this.x=at/S,this.y=At/X,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(S,X){var at;return ht(at=ut,x,De).call(at,S,X,this.parentRotation)}pageTranslationToScreen(S,X){var at;return ht(at=ut,x,De).call(at,S,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:S,pageDimensions:[X,at]}=this,At=X*S,wt=at*S;return i.FeatureTest.isCSSRoundSupported?[Math.round(At),Math.round(wt)]:[At,wt]}setDims(S,X){const[at,At]=this.parentDimensions;this.div.style.width=`${(100*S/at).toFixed(2)}%`,r(this,L)||(this.div.style.height=`${(100*X/At).toFixed(2)}%`)}fixDims(){const{style:S}=this.div,{height:X,width:at}=S,At=at.endsWith("%"),wt=!r(this,L)&&X.endsWith("%");if(At&&wt)return;const[R,a]=this.parentDimensions;At||(S.width=`${(100*parseFloat(at)/R).toFixed(2)}%`),!r(this,L)&&!wt&&(S.height=`${(100*parseFloat(X)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,m)),this.div.addEventListener("focusout",r(this,u));const[S,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/S).toFixed(2)}%`,this.div.style.maxHeight=`${(100*S/X).toFixed(2)}%`);const[at,At]=this.getInitialTranslation();return this.translate(at,At),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(S){const{isMac:X}=i.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&X){S.preventDefault();return}yt(this,F,!0),ht(this,H,bn).call(this,S)}moveInDOM(){this.parent.moveEditorInDOM(this)}_setParentAndPosition(S,X,at){S.changeParent(this),this.x=X,this.y=at,this.fixAndSetPosition(),this.moveInDOM()}getRect(S,X){const at=this.parentScale,[At,wt]=this.pageDimensions,[R,a]=this.pageTranslation,o=S/at,y=X/at,V=this.x*At,U=this.y*wt,Y=this.width*At,Q=this.height*wt;switch(this.rotation){case 0:return[V+o+R,wt-U-y-Q+a,V+o+Y+R,wt-U-y+a];case 90:return[V+y+R,wt-U+o+a,V+y+Q+R,wt-U+o+Y+a];case 180:return[V-o-Y+R,wt-U+y+a,V-o+R,wt-U+y+Q+a];case 270:return[V-y-Q+R,wt-U-o-Y+a,V-y+R,wt-U-o+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(S,X){const[at,At,wt,R]=S,a=wt-at,o=R-At;switch(this.rotation){case 0:return[at,X-R,a,o];case 90:return[at,X-At,o,a];case 180:return[wt,X-At,a,o];case 270:return[wt,X-R,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){yt(this,P,!0)}disableEditMode(){yt(this,P,!1)}isInEditMode(){return r(this,P)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var S,X;(S=this.div)==null||S.addEventListener("focusin",r(this,m)),(X=this.div)==null||X.addEventListener("focusout",r(this,u))}serialize(S=!1,X=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(S,X,at){const At=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:at});At.rotation=S.rotation;const[wt,R]=At.pageDimensions,[a,o,y,V]=At.getRectInCurrentCoords(S.rect,R);return At.x=a/wt,At.y=o/R,At.width=y/wt,At.height=V/R,At}remove(){this.div.removeEventListener("focusin",r(this,m)),this.div.removeEventListener("focusout",r(this,u)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ht(this,v,pn).call(this),r(this,g).classList.remove("hidden"))}select(){var S;this.makeResizable(),(S=this.div)==null||S.classList.add("selectedEditor")}unselect(){var S,X,at;(S=r(this,g))==null||S.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(at=this.div)!=null&&at.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(S,X){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,O)}set isEditing(S){yt(this,O,S),this.parent&&(S?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(S,X){yt(this,L,!0);const at=S/X,{style:At}=this.div;At.aspectRatio=at,At.height="auto"}static get MIN_SIZE(){return 16}};L=new WeakMap,g=new WeakMap,m=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakSet,Oe=function([S,X],at,At){[at,At]=this.screenToPageTranslation(at,At),this.x+=at/S,this.y+=At/X,this.fixAndSetPosition()},x=new WeakSet,De=function(S,X,at){switch(at){case 90:return[X,-S];case 180:return[-S,-X];case 270:return[-X,S];default:return[S,X]}},E=new WeakSet,Le=function(S){switch(S){case 90:{const[X,at]=this.pageDimensions;return[0,-X/at,at/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,at]=this.pageDimensions;return[0,X/at,-at/X,0]}default:return[1,0,0,1]}},b=new WeakSet,fn=function(S){S.preventDefault()},v=new WeakSet,pn=function(){if(r(this,g))return;yt(this,g,document.createElement("div")),r(this,g).classList.add("resizers");const S=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||S.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of S){const at=document.createElement("div");r(this,g).append(at),at.classList.add("resizer",X),at.addEventListener("pointerdown",ht(this,j,gn).bind(this,X)),at.addEventListener("contextmenu",ht(ut,b,fn))}this.div.prepend(r(this,g))},j=new WeakSet,gn=function(S,X){X.preventDefault();const{isMac:at}=i.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&at)return;const At=ht(this,$,mn).bind(this,S),wt=this._isDraggable;this._isDraggable=!1;const R={passive:!0,capture:!0};window.addEventListener("pointermove",At,R);const a=this.x,o=this.y,y=this.width,V=this.height,U=this.parent.div.style.cursor,Y=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const Q=()=>{this._isDraggable=wt,window.removeEventListener("pointerup",Q),window.removeEventListener("blur",Q),window.removeEventListener("pointermove",At,R),this.parent.div.style.cursor=U,this.div.style.cursor=Y;const ot=this.x,w=this.y,I=this.width,G=this.height;ot===a&&w===o&&I===y&&G===V||this.addCommands({cmd:()=>{this.width=I,this.height=G,this.x=ot,this.y=w;const[J,lt]=this.parentDimensions;this.setDims(J*I,lt*G),this.fixAndSetPosition(),this.moveInDOM()},undo:()=>{this.width=y,this.height=V,this.x=a,this.y=o;const[J,lt]=this.parentDimensions;this.setDims(J*y,lt*V),this.fixAndSetPosition(),this.moveInDOM()},mustExec:!0})};window.addEventListener("pointerup",Q),window.addEventListener("blur",Q)},$=new WeakSet,mn=function(S,X){const[at,At]=this.parentDimensions,wt=this.x,R=this.y,a=this.width,o=this.height,y=ut.MIN_SIZE/at,V=ut.MIN_SIZE/At,U=Lt=>Math.round(Lt*1e4)/1e4,Y=ht(this,E,Le).call(this,this.rotation),Q=(Lt,jt)=>[Y[0]*Lt+Y[2]*jt,Y[1]*Lt+Y[3]*jt],ot=ht(this,E,Le).call(this,360-this.rotation),w=(Lt,jt)=>[ot[0]*Lt+ot[2]*jt,ot[1]*Lt+ot[3]*jt];let I,G,J=!1,lt=!1;switch(S){case"topLeft":J=!0,I=(Lt,jt)=>[0,0],G=(Lt,jt)=>[Lt,jt];break;case"topMiddle":I=(Lt,jt)=>[Lt/2,0],G=(Lt,jt)=>[Lt/2,jt];break;case"topRight":J=!0,I=(Lt,jt)=>[Lt,0],G=(Lt,jt)=>[0,jt];break;case"middleRight":lt=!0,I=(Lt,jt)=>[Lt,jt/2],G=(Lt,jt)=>[0,jt/2];break;case"bottomRight":J=!0,I=(Lt,jt)=>[Lt,jt],G=(Lt,jt)=>[0,0];break;case"bottomMiddle":I=(Lt,jt)=>[Lt/2,jt],G=(Lt,jt)=>[Lt/2,0];break;case"bottomLeft":J=!0,I=(Lt,jt)=>[0,jt],G=(Lt,jt)=>[Lt,0];break;case"middleLeft":lt=!0,I=(Lt,jt)=>[0,jt/2],G=(Lt,jt)=>[Lt,jt/2];break}const dt=I(a,o),Ct=G(a,o);let Et=Q(...Ct);const mt=U(wt+Et[0]),St=U(R+Et[1]);let vt=1,tt=1,[et,pt]=this.screenToPageTranslation(X.movementX,X.movementY);if([et,pt]=w(et/at,pt/At),J){const Lt=Math.hypot(a,o);vt=tt=Math.max(Math.min(Math.hypot(Ct[0]-dt[0]-et,Ct[1]-dt[1]-pt)/Lt,1/a,1/o),y/a,V/o)}else lt?vt=Math.max(y,Math.min(1,Math.abs(Ct[0]-dt[0]-et)))/a:tt=Math.max(V,Math.min(1,Math.abs(Ct[1]-dt[1]-pt)))/o;const Pt=U(a*vt),Mt=U(o*tt);Et=Q(...G(Pt,Mt));const Bt=mt-Et[0],Ut=St-Et[1];this.width=Pt,this.height=Mt,this.x=Bt,this.y=Ut,this.setDims(at*Pt,At*Mt),this.fixAndSetPosition()},H=new WeakSet,bn=function(S){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let at,At;X&&(at={passive:!0,capture:!0},At=R=>{const[a,o]=this.screenToPageTranslation(R.movementX,R.movementY);this._uiManager.dragSelectedEditors(a,o)},window.addEventListener("pointermove",At,at));const wt=()=>{if(window.removeEventListener("pointerup",wt),window.removeEventListener("blur",wt),X&&window.removeEventListener("pointermove",At,at),yt(this,F,!1),!this._uiManager.endDragSession()){const{isMac:R}=i.FeatureTest.platform;S.ctrlKey&&!R||S.shiftKey||S.metaKey&&R?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",wt),window.addEventListener("blur",wt)},K(ut,x),K(ut,b),Jt(ut,"_colorManager",new n.ColorManager),Jt(ut,"_zIndex",1);let l=ut;e.AnnotationEditor=l;class c extends l{constructor(S){super(S),this.annotationElementId=S.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var P,M,C,_,T,Ne,E,f,b,N,v,_n,k,$,nt,H,it,ut,_t,S,X,at,At,wt,R,a,o,y,V,U,Y,Q,ot,w,I,G,J,lt,dt,Ct,Et,mt,St,vt,tt,et,pt,An,Mt,Be,Ut,yn,jt,je,zt,vn,st,Sn,Dt,se,Vt,fe,Zt,En,It,Cn,Ot,He,A,pe,z,Ue;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=l,e.opacityToHex=c;var n=s(1),i=s(6);function l(kt,W,rt){for(const bt of rt)W.addEventListener(bt,kt[bt].bind(kt))}function c(kt){return Math.round(Math.min(255,Math.max(1,255*kt))).toString(16).padStart(2,"0")}class L{constructor(){K(this,P,0)}getId(){return`${n.AnnotationEditorPrefix}${ue(this,P)._++}`}}P=new WeakMap;const B=class B{constructor(){K(this,T);K(this,M,(0,n.getUuid)());K(this,C,0);K(this,_,null)}static get _isSVGFittingCanvas(){const W='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',bt=new OffscreenCanvas(1,3).getContext("2d"),Ft=new Image;Ft.src=W;const xt=Ft.decode().then(()=>(bt.drawImage(Ft,0,0,1,1,0,0,1,3),new Uint32Array(bt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",xt)}async getFromFile(W){const{lastModified:rt,name:bt,size:Ft,type:xt}=W;return ht(this,T,Ne).call(this,`${rt}_${bt}_${Ft}_${xt}`,W)}async getFromUrl(W){return ht(this,T,Ne).call(this,W,W)}async getFromId(W){r(this,_)||yt(this,_,new Map);const rt=r(this,_).get(W);return rt?rt.bitmap?(rt.refCounter+=1,rt):rt.file?this.getFromFile(rt.file):this.getFromUrl(rt.url):null}getSvgUrl(W){const rt=r(this,_).get(W);return rt!=null&&rt.isSvg?rt.svgUrl:null}deleteId(W){r(this,_)||yt(this,_,new Map);const rt=r(this,_).get(W);rt&&(rt.refCounter-=1,rt.refCounter===0&&(rt.bitmap=null))}isValidId(W){return W.startsWith(`image_${r(this,M)}_`)}};M=new WeakMap,C=new WeakMap,_=new WeakMap,T=new WeakSet,Ne=async function(W,rt){r(this,_)||yt(this,_,new Map);let bt=r(this,_).get(W);if(bt===null)return null;if(bt!=null&&bt.bitmap)return bt.refCounter+=1,bt;try{bt||(bt={bitmap:null,id:`image_${r(this,M)}_${ue(this,C)._++}`,refCounter:0,isSvg:!1});let Ft;if(typeof rt=="string"){bt.url=rt;const xt=await fetch(rt);if(!xt.ok)throw new Error(xt.statusText);Ft=await xt.blob()}else Ft=bt.file=rt;if(Ft.type==="image/svg+xml"){const xt=B._isSVGFittingCanvas,Rt=new FileReader,Nt=new Image,Ht=new Promise((Gt,Xt)=>{Nt.onload=()=>{bt.bitmap=Nt,bt.isSvg=!0,Gt()},Rt.onload=async()=>{const Qt=bt.svgUrl=Rt.result;Nt.src=await xt?`${Qt}#svgView(preserveAspectRatio(none))`:Qt},Nt.onerror=Rt.onerror=Xt});Rt.readAsDataURL(Ft),await Ht}else bt.bitmap=await createImageBitmap(Ft);bt.refCounter=1}catch(Ft){console.error(Ft),bt=null}return r(this,_).set(W,bt),bt&&r(this,_).set(bt.id,bt),bt};let g=B;class m{constructor(W=128){K(this,E,[]);K(this,f,!1);K(this,b,void 0);K(this,N,-1);yt(this,b,W)}add({cmd:W,undo:rt,mustExec:bt,type:Ft=NaN,overwriteIfSameType:xt=!1,keepUndo:Rt=!1}){if(bt&&W(),r(this,f))return;const Nt={cmd:W,undo:rt,type:Ft};if(r(this,N)===-1){r(this,E).length>0&&(r(this,E).length=0),yt(this,N,0),r(this,E).push(Nt);return}if(xt&&r(this,E)[r(this,N)].type===Ft){Rt&&(Nt.undo=r(this,E)[r(this,N)].undo),r(this,E)[r(this,N)]=Nt;return}const Ht=r(this,N)+1;Ht===r(this,b)?r(this,E).splice(0,1):(yt(this,N,Ht),Ht<r(this,E).length&&r(this,E).splice(Ht)),r(this,E).push(Nt)}undo(){r(this,N)!==-1&&(yt(this,f,!0),r(this,E)[r(this,N)].undo(),yt(this,f,!1),yt(this,N,r(this,N)-1))}redo(){r(this,N)<r(this,E).length-1&&(yt(this,N,r(this,N)+1),yt(this,f,!0),r(this,E)[r(this,N)].cmd(),yt(this,f,!1))}hasSomethingToUndo(){return r(this,N)!==-1}hasSomethingToRedo(){return r(this,N)<r(this,E).length-1}destroy(){yt(this,E,null)}}E=new WeakMap,f=new WeakMap,b=new WeakMap,N=new WeakMap,e.CommandManager=m;class u{constructor(W){K(this,v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:rt}=n.FeatureTest.platform;for(const[bt,Ft,xt={}]of W)for(const Rt of bt){const Nt=Rt.startsWith("mac+");rt&&Nt?(this.callbacks.set(Rt.slice(4),{callback:Ft,options:xt}),this.allKeys.add(Rt.split("+").at(-1))):!rt&&!Nt&&(this.callbacks.set(Rt,{callback:Ft,options:xt}),this.allKeys.add(Rt.split("+").at(-1)))}}exec(W,rt){if(!this.allKeys.has(rt.key))return;const bt=this.callbacks.get(ht(this,v,_n).call(this,rt));if(!bt)return;const{callback:Ft,options:{bubbles:xt=!1,args:Rt=[],checker:Nt=null}}=bt;Nt&&!Nt(W,rt)||(Ft.bind(W,...Rt)(),xt||(rt.stopPropagation(),rt.preventDefault()))}}v=new WeakSet,_n=function(W){W.altKey&&this.buffer.push("alt"),W.ctrlKey&&this.buffer.push("ctrl"),W.metaKey&&this.buffer.push("meta"),W.shiftKey&&this.buffer.push("shift"),this.buffer.push(W.key);const rt=this.buffer.join("+");return this.buffer.length=0,rt},e.KeyboardManager=u;const j=class j{get _colors(){const W=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(W),(0,n.shadow)(this,"_colors",W)}convert(W){const rt=(0,i.getRGB)(W);if(!window.matchMedia("(forced-colors: active)").matches)return rt;for(const[bt,Ft]of this._colors)if(Ft.every((xt,Rt)=>xt===rt[Rt]))return j._colorsMapping.get(bt);return rt}getHexCode(W){const rt=this._colors.get(W);return rt?n.Util.makeHexColor(...rt):W}};Jt(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let F=j;e.ColorManager=F;const gt=class gt{constructor(W,rt,bt,Ft,xt){K(this,pt);K(this,Mt);K(this,Ut);K(this,jt);K(this,zt);K(this,st);K(this,Dt);K(this,Vt);K(this,Zt);K(this,It);K(this,Ot);K(this,A);K(this,z);K(this,k,null);K(this,$,new Map);K(this,nt,new Map);K(this,H,null);K(this,it,new m);K(this,ut,0);K(this,_t,new Set);K(this,S,null);K(this,X,null);K(this,at,new Set);K(this,At,null);K(this,wt,null);K(this,R,new L);K(this,a,!1);K(this,o,!1);K(this,y,null);K(this,V,n.AnnotationEditorType.NONE);K(this,U,new Set);K(this,Y,null);K(this,Q,this.blur.bind(this));K(this,ot,this.focus.bind(this));K(this,w,this.copy.bind(this));K(this,I,this.cut.bind(this));K(this,G,this.paste.bind(this));K(this,J,this.keydown.bind(this));K(this,lt,this.onEditingAction.bind(this));K(this,dt,this.onPageChanging.bind(this));K(this,Ct,this.onScaleChanging.bind(this));K(this,Et,this.onRotationChanging.bind(this));K(this,mt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});K(this,St,[0,0]);K(this,vt,null);K(this,tt,null);K(this,et,null);yt(this,tt,W),yt(this,et,rt),yt(this,At,bt),r(this,At)._on("editingaction",r(this,lt)),r(this,At)._on("pagechanging",r(this,dt)),r(this,At)._on("scalechanging",r(this,Ct)),r(this,At)._on("rotationchanging",r(this,Et)),yt(this,H,Ft.annotationStorage),yt(this,wt,Ft.filterFactory),yt(this,Y,xt),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const W=gt.prototype,rt=xt=>{const{activeElement:Rt}=document;return Rt&&r(xt,tt).contains(Rt)&&xt.hasSomethingToControl()},bt=this.TRANSLATE_SMALL,Ft=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],W.selectAll],[["ctrl+z","mac+meta+z"],W.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],W.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],W.delete],[["Escape","mac+Escape"],W.unselectAll],[["ArrowLeft","mac+ArrowLeft"],W.translateSelectedEditors,{args:[-bt,0],checker:rt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],W.translateSelectedEditors,{args:[-Ft,0],checker:rt}],[["ArrowRight","mac+ArrowRight"],W.translateSelectedEditors,{args:[bt,0],checker:rt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],W.translateSelectedEditors,{args:[Ft,0],checker:rt}],[["ArrowUp","mac+ArrowUp"],W.translateSelectedEditors,{args:[0,-bt],checker:rt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],W.translateSelectedEditors,{args:[0,-Ft],checker:rt}],[["ArrowDown","mac+ArrowDown"],W.translateSelectedEditors,{args:[0,bt],checker:rt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],W.translateSelectedEditors,{args:[0,Ft],checker:rt}]]))}destroy(){ht(this,jt,je).call(this),ht(this,Mt,Be).call(this),r(this,At)._off("editingaction",r(this,lt)),r(this,At)._off("pagechanging",r(this,dt)),r(this,At)._off("scalechanging",r(this,Ct)),r(this,At)._off("rotationchanging",r(this,Et));for(const W of r(this,nt).values())W.destroy();r(this,nt).clear(),r(this,$).clear(),r(this,at).clear(),yt(this,k,null),r(this,U).clear(),r(this,it).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",r(this,Y)?r(this,wt).addHCMFilter(r(this,Y).foreground,r(this,Y).background):"none")}onPageChanging({pageNumber:W}){yt(this,ut,W-1)}focusMainContainer(){r(this,tt).focus()}findParent(W,rt){for(const bt of r(this,nt).values()){const{x:Ft,y:xt,width:Rt,height:Nt}=bt.div.getBoundingClientRect();if(W>=Ft&&W<=Ft+Rt&&rt>=xt&&rt<=xt+Nt)return bt}return null}disableUserSelect(W=!1){r(this,et).classList.toggle("noUserSelect",W)}addShouldRescale(W){r(this,at).add(W)}removeShouldRescale(W){r(this,at).delete(W)}onScaleChanging({scale:W}){this.commitOrRemove(),this.viewParameters.realScale=W*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const rt of r(this,at))rt.onScaleChanging()}onRotationChanging({pagesRotation:W}){this.commitOrRemove(),this.viewParameters.rotation=W}addToAnnotationStorage(W){!W.isEmpty()&&r(this,H)&&!r(this,H).has(W.id)&&r(this,H).setValue(W.id,W)}blur(){if(!this.hasSelection)return;const{activeElement:W}=document;for(const rt of r(this,U))if(rt.div.contains(W)){yt(this,y,[rt,W]),rt._focusEventsAllowed=!1;break}}focus(){if(!r(this,y))return;const[W,rt]=r(this,y);yt(this,y,null),rt.addEventListener("focusin",()=>{W._focusEventsAllowed=!0},{once:!0}),rt.focus()}copy(W){var bt;if(W.preventDefault(),(bt=r(this,k))==null||bt.commitOrRemove(),!this.hasSelection)return;const rt=[];for(const Ft of r(this,U)){const xt=Ft.serialize(!0);xt&&rt.push(xt)}rt.length!==0&&W.clipboardData.setData("application/pdfjs",JSON.stringify(rt))}cut(W){this.copy(W),this.delete()}paste(W){W.preventDefault();const{clipboardData:rt}=W;for(const xt of rt.items)for(const Rt of r(this,X))if(Rt.isHandlingMimeForPasting(xt.type)){Rt.paste(xt,this.currentLayer);return}let bt=rt.getData("application/pdfjs");if(!bt)return;try{bt=JSON.parse(bt)}catch(xt){(0,n.warn)(`paste: "${xt.message}".`);return}if(!Array.isArray(bt))return;this.unselectAll();const Ft=this.currentLayer;try{const xt=[];for(const Ht of bt){const Gt=Ft.deserialize(Ht);if(!Gt)return;xt.push(Gt)}const Rt=()=>{for(const Ht of xt)ht(this,Ot,He).call(this,Ht);ht(this,z,Ue).call(this,xt)},Nt=()=>{for(const Ht of xt)Ht.remove()};this.addCommands({cmd:Rt,undo:Nt,mustExec:!0})}catch(xt){(0,n.warn)(`paste: "${xt.message}".`)}}keydown(W){var rt;(rt=this.getActive())!=null&&rt.shouldGetKeyboardEvents()||gt._keyboardManager.exec(this,W)}onEditingAction(W){["undo","redo","delete","selectAll"].includes(W.name)&&this[W.name]()}setEditingState(W){W?(ht(this,pt,An).call(this),ht(this,Ut,yn).call(this),ht(this,zt,vn).call(this),ht(this,Dt,se).call(this,{isEditing:r(this,V)!==n.AnnotationEditorType.NONE,isEmpty:ht(this,A,pe).call(this),hasSomethingToUndo:r(this,it).hasSomethingToUndo(),hasSomethingToRedo:r(this,it).hasSomethingToRedo(),hasSelectedEditor:!1})):(ht(this,Mt,Be).call(this),ht(this,jt,je).call(this),ht(this,st,Sn).call(this),ht(this,Dt,se).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(W){if(!r(this,X)){yt(this,X,W);for(const rt of r(this,X))ht(this,Vt,fe).call(this,rt.defaultPropertiesToUpdate)}}getId(){return r(this,R).getId()}get currentLayer(){return r(this,nt).get(r(this,ut))}getLayer(W){return r(this,nt).get(W)}get currentPageIndex(){return r(this,ut)}addLayer(W){r(this,nt).set(W.pageIndex,W),r(this,a)?W.enable():W.disable()}removeLayer(W){r(this,nt).delete(W.pageIndex)}updateMode(W,rt=null){if(r(this,V)!==W){if(yt(this,V,W),W===n.AnnotationEditorType.NONE){this.setEditingState(!1),ht(this,It,Cn).call(this);return}this.setEditingState(!0),ht(this,Zt,En).call(this),this.unselectAll();for(const bt of r(this,nt).values())bt.updateMode(W);if(rt){for(const bt of r(this,$).values())if(bt.annotationElementId===rt){this.setSelected(bt),bt.enterInEditMode();break}}}}updateToolbar(W){W!==r(this,V)&&r(this,At).dispatch("switchannotationeditormode",{source:this,mode:W})}updateParams(W,rt){if(r(this,X)){if(W===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(W);return}for(const bt of r(this,U))bt.updateParams(W,rt);for(const bt of r(this,X))bt.updateDefaultParams(W,rt)}}enableWaiting(W=!1){if(r(this,o)!==W){yt(this,o,W);for(const rt of r(this,nt).values())W?rt.disableClick():rt.enableClick(),rt.div.classList.toggle("waiting",W)}}getEditors(W){const rt=[];for(const bt of r(this,$).values())bt.pageIndex===W&&rt.push(bt);return rt}getEditor(W){return r(this,$).get(W)}addEditor(W){r(this,$).set(W.id,W)}removeEditor(W){var rt;r(this,$).delete(W.id),this.unselect(W),(!W.annotationElementId||!r(this,_t).has(W.annotationElementId))&&((rt=r(this,H))==null||rt.remove(W.id))}addDeletedAnnotationElement(W){r(this,_t).add(W.annotationElementId),W.deleted=!0}isDeletedAnnotationElement(W){return r(this,_t).has(W)}removeDeletedAnnotationElement(W){r(this,_t).delete(W.annotationElementId),W.deleted=!1}setActiveEditor(W){r(this,k)!==W&&(yt(this,k,W),W&&ht(this,Vt,fe).call(this,W.propertiesToUpdate))}toggleSelected(W){if(r(this,U).has(W)){r(this,U).delete(W),W.unselect(),ht(this,Dt,se).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,U).add(W),W.select(),ht(this,Vt,fe).call(this,W.propertiesToUpdate),ht(this,Dt,se).call(this,{hasSelectedEditor:!0})}setSelected(W){for(const rt of r(this,U))rt!==W&&rt.unselect();r(this,U).clear(),r(this,U).add(W),W.select(),ht(this,Vt,fe).call(this,W.propertiesToUpdate),ht(this,Dt,se).call(this,{hasSelectedEditor:!0})}isSelected(W){return r(this,U).has(W)}unselect(W){W.unselect(),r(this,U).delete(W),ht(this,Dt,se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,U).size!==0}undo(){r(this,it).undo(),ht(this,Dt,se).call(this,{hasSomethingToUndo:r(this,it).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ht(this,A,pe).call(this)})}redo(){r(this,it).redo(),ht(this,Dt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,it).hasSomethingToRedo(),isEmpty:ht(this,A,pe).call(this)})}addCommands(W){r(this,it).add(W),ht(this,Dt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ht(this,A,pe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const W=[...r(this,U)],rt=()=>{for(const Ft of W)Ft.remove()},bt=()=>{for(const Ft of W)ht(this,Ot,He).call(this,Ft)};this.addCommands({cmd:rt,undo:bt,mustExec:!0})}commitOrRemove(){var W;(W=r(this,k))==null||W.commitOrRemove()}hasSomethingToControl(){return r(this,k)||this.hasSelection}selectAll(){for(const W of r(this,U))W.commit();ht(this,z,Ue).call(this,r(this,$).values())}unselectAll(){if(r(this,k)){r(this,k).commitOrRemove();return}if(this.hasSelection){for(const W of r(this,U))W.unselect();r(this,U).clear(),ht(this,Dt,se).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(W,rt,bt=!1){if(bt||this.commitOrRemove(),!this.hasSelection)return;r(this,St)[0]+=W,r(this,St)[1]+=rt;const[Ft,xt]=r(this,St),Rt=[...r(this,U)],Nt=1e3;r(this,vt)&&clearTimeout(r(this,vt)),yt(this,vt,setTimeout(()=>{yt(this,vt,null),r(this,St)[0]=r(this,St)[1]=0,this.addCommands({cmd:()=>{for(const Ht of Rt)r(this,$).has(Ht.id)&&Ht.translateInPage(Ft,xt)},undo:()=>{for(const Ht of Rt)r(this,$).has(Ht.id)&&Ht.translateInPage(-Ft,-xt)},mustExec:!1})},Nt));for(const Ht of Rt)Ht.translateInPage(W,rt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),yt(this,S,new Map);for(const W of r(this,U))r(this,S).set(W,{savedX:W.x,savedY:W.y,savedPageIndex:W.parent.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!r(this,S))return!1;this.disableUserSelect(!1);const W=r(this,S);yt(this,S,null);let rt=!1;for(const[{x:Ft,y:xt,parent:Rt},Nt]of W)Nt.newX=Ft,Nt.newY=xt,Nt.newPageIndex=Rt.pageIndex,rt||(rt=Ft!==Nt.savedX||xt!==Nt.savedY||Rt.pageIndex!==Nt.savedPageIndex);if(!rt)return!1;const bt=(Ft,xt,Rt,Nt)=>{if(r(this,$).has(Ft.id)){const Ht=r(this,nt).get(Nt);Ht?Ft._setParentAndPosition(Ht,xt,Rt):(Ft.pageIndex=Nt,Ft.x=xt,Ft.y=Rt)}};return this.addCommands({cmd:()=>{for(const[Ft,{newX:xt,newY:Rt,newPageIndex:Nt}]of W)bt(Ft,xt,Rt,Nt)},undo:()=>{for(const[Ft,{savedX:xt,savedY:Rt,savedPageIndex:Nt}]of W)bt(Ft,xt,Rt,Nt)},mustExec:!0}),!0}dragSelectedEditors(W,rt){if(r(this,S))for(const bt of r(this,S).keys())bt.drag(W,rt)}rebuild(W){if(W.parent===null){const rt=this.getLayer(W.pageIndex);rt?(rt.changeParent(W),rt.addOrRebuild(W)):(this.addEditor(W),this.addToAnnotationStorage(W),W.rebuild())}else W.parent.addOrRebuild(W)}isActive(W){return r(this,k)===W}getActive(){return r(this,k)}getMode(){return r(this,V)}get imageManager(){return(0,n.shadow)(this,"imageManager",new g)}};k=new WeakMap,$=new WeakMap,nt=new WeakMap,H=new WeakMap,it=new WeakMap,ut=new WeakMap,_t=new WeakMap,S=new WeakMap,X=new WeakMap,at=new WeakMap,At=new WeakMap,wt=new WeakMap,R=new WeakMap,a=new WeakMap,o=new WeakMap,y=new WeakMap,V=new WeakMap,U=new WeakMap,Y=new WeakMap,Q=new WeakMap,ot=new WeakMap,w=new WeakMap,I=new WeakMap,G=new WeakMap,J=new WeakMap,lt=new WeakMap,dt=new WeakMap,Ct=new WeakMap,Et=new WeakMap,mt=new WeakMap,St=new WeakMap,vt=new WeakMap,tt=new WeakMap,et=new WeakMap,pt=new WeakSet,An=function(){window.addEventListener("focus",r(this,ot)),window.addEventListener("blur",r(this,Q))},Mt=new WeakSet,Be=function(){window.removeEventListener("focus",r(this,ot)),window.removeEventListener("blur",r(this,Q))},Ut=new WeakSet,yn=function(){window.addEventListener("keydown",r(this,J),{capture:!0})},jt=new WeakSet,je=function(){window.removeEventListener("keydown",r(this,J),{capture:!0})},zt=new WeakSet,vn=function(){document.addEventListener("copy",r(this,w)),document.addEventListener("cut",r(this,I)),document.addEventListener("paste",r(this,G))},st=new WeakSet,Sn=function(){document.removeEventListener("copy",r(this,w)),document.removeEventListener("cut",r(this,I)),document.removeEventListener("paste",r(this,G))},Dt=new WeakSet,se=function(W){Object.entries(W).some(([bt,Ft])=>r(this,mt)[bt]!==Ft)&&r(this,At).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,mt),W)})},Vt=new WeakSet,fe=function(W){r(this,At).dispatch("annotationeditorparamschanged",{source:this,details:W})},Zt=new WeakSet,En=function(){if(!r(this,a)){yt(this,a,!0);for(const W of r(this,nt).values())W.enable()}},It=new WeakSet,Cn=function(){if(this.unselectAll(),r(this,a)){yt(this,a,!1);for(const W of r(this,nt).values())W.disable()}},Ot=new WeakSet,He=function(W){const rt=r(this,nt).get(W.pageIndex);rt?rt.addOrRebuild(W):this.addEditor(W)},A=new WeakSet,pe=function(){if(r(this,$).size===0)return!0;if(r(this,$).size===1)for(const W of r(this,$).values())return W.isEmpty();return!1},z=new WeakSet,Ue=function(W){r(this,U).clear();for(const rt of W)rt.isEmpty()||(r(this,U).add(rt),rt.select());ht(this,Dt,se).call(this,{hasSelectedEditor:!0})},Jt(gt,"TRANSLATE_SMALL",1),Jt(gt,"TRANSLATE_BIG",10);let O=gt;e.AnnotationEditorUIManager=O},(t,e,s)=>{var _t,S,X,at,At,wt,R,a,o,y,V,U,le,Q,ce,w,We,G,Se,lt,Ee,Ct,ge,mt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=N,e.getColorValues=$,e.getCurrentTransform=nt,e.getCurrentTransformInverse=H,e.getFilenameFromUrl=x,e.getPdfFilenameFromUrl=B,e.getRGB=k,e.getXfaPageViewport=j,e.isDataScheme=_,e.isPdfFile=T,e.isValidFetchUrl=f,e.loadScript=b,e.setLayerDimensions=it;var n=s(7),i=s(1);const l="http://www.w3.org/2000/svg",c="pdfjs_internal_id_";e.AnnotationPrefix=c;const ut=class ut{};Jt(ut,"CSS",96),Jt(ut,"PDF",72),Jt(ut,"PDF_TO_CSS_UNITS",ut.CSS/ut.PDF);let L=ut;e.PixelsPerInch=L;class g extends n.BaseFilterFactory{constructor({docId:et,ownerDocument:pt=globalThis.document}={}){super();K(this,U);K(this,Q);K(this,w);K(this,G);K(this,lt);K(this,Ct);K(this,mt);K(this,_t,void 0);K(this,S,void 0);K(this,X,void 0);K(this,at,void 0);K(this,At,void 0);K(this,wt,void 0);K(this,R,void 0);K(this,a,void 0);K(this,o,void 0);K(this,y,void 0);K(this,V,0);yt(this,X,et),yt(this,at,pt)}addFilter(et){if(!et)return"none";let pt=r(this,U,le).get(et);if(pt)return pt;let Pt,Mt,Bt,Ut;if(et.length===1){const zt=et[0],Tt=new Array(256);for(let st=0;st<256;st++)Tt[st]=zt[st]/255;Ut=Pt=Mt=Bt=Tt.join(",")}else{const[zt,Tt,st]=et,ct=new Array(256),Dt=new Array(256),qt=new Array(256);for(let Vt=0;Vt<256;Vt++)ct[Vt]=zt[Vt]/255,Dt[Vt]=Tt[Vt]/255,qt[Vt]=st[Vt]/255;Pt=ct.join(","),Mt=Dt.join(","),Bt=qt.join(","),Ut=`${Pt}${Mt}${Bt}`}if(pt=r(this,U,le).get(Ut),pt)return r(this,U,le).set(et,pt),pt;const Lt=`g_${r(this,X)}_transfer_map_${ue(this,V)._++}`,jt=`url(#${Lt})`;r(this,U,le).set(et,jt),r(this,U,le).set(Ut,jt);const $t=ht(this,G,Se).call(this,Lt);return ht(this,Ct,ge).call(this,Pt,Mt,Bt,$t),jt}addHCMFilter(et,pt){var Tt;const Pt=`${et}-${pt}`;if(r(this,wt)===Pt)return r(this,R);if(yt(this,wt,Pt),yt(this,R,"none"),(Tt=r(this,At))==null||Tt.remove(),!et||!pt)return r(this,R);const Mt=ht(this,mt,me).call(this,et);et=i.Util.makeHexColor(...Mt);const Bt=ht(this,mt,me).call(this,pt);if(pt=i.Util.makeHexColor(...Bt),r(this,Q,ce).style.color="",et==="#000000"&&pt==="#ffffff"||et===pt)return r(this,R);const Ut=new Array(256);for(let st=0;st<=255;st++){const ct=st/255;Ut[st]=ct<=.03928?ct/12.92:((ct+.055)/1.055)**2.4}const Lt=Ut.join(","),jt=`g_${r(this,X)}_hcm_filter`,$t=yt(this,a,ht(this,G,Se).call(this,jt));ht(this,Ct,ge).call(this,Lt,Lt,Lt,$t),ht(this,w,We).call(this,$t);const zt=(st,ct)=>{const Dt=Mt[st]/255,qt=Bt[st]/255,Vt=new Array(ct+1);for(let Kt=0;Kt<=ct;Kt++)Vt[Kt]=Dt+Kt/ct*(qt-Dt);return Vt.join(",")};return ht(this,Ct,ge).call(this,zt(0,5),zt(1,5),zt(2,5),$t),yt(this,R,`url(#${jt})`),r(this,R)}addHighlightHCMFilter(et,pt,Pt,Mt){var qt;const Bt=`${et}-${pt}-${Pt}-${Mt}`;if(r(this,o)===Bt)return r(this,y);if(yt(this,o,Bt),yt(this,y,"none"),(qt=r(this,a))==null||qt.remove(),!et||!pt)return r(this,y);const[Ut,Lt]=[et,pt].map(ht(this,mt,me).bind(this));let jt=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),$t=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),[zt,Tt]=[Pt,Mt].map(ht(this,mt,me).bind(this));$t<jt&&([jt,$t,zt,Tt]=[$t,jt,Tt,zt]),r(this,Q,ce).style.color="";const st=(Vt,Kt,Zt)=>{const ft=new Array(256),It=($t-jt)/Zt,Wt=Vt/255,Ot=(Kt-Vt)/(255*Zt);let D=0;for(let A=0;A<=Zt;A++){const q=Math.round(jt+A*It),z=Wt+A*Ot;for(let Z=D;Z<=q;Z++)ft[Z]=z;D=q+1}for(let A=D;A<256;A++)ft[A]=ft[D-1];return ft.join(",")},ct=`g_${r(this,X)}_hcm_highlight_filter`,Dt=yt(this,a,ht(this,G,Se).call(this,ct));return ht(this,w,We).call(this,Dt),ht(this,Ct,ge).call(this,st(zt[0],Tt[0],5),st(zt[1],Tt[1],5),st(zt[2],Tt[2],5),Dt),yt(this,y,`url(#${ct})`),r(this,y)}destroy(et=!1){et&&(r(this,R)||r(this,y))||(r(this,S)&&(r(this,S).parentNode.parentNode.remove(),yt(this,S,null)),r(this,_t)&&(r(this,_t).clear(),yt(this,_t,null)),yt(this,V,0))}}_t=new WeakMap,S=new WeakMap,X=new WeakMap,at=new WeakMap,At=new WeakMap,wt=new WeakMap,R=new WeakMap,a=new WeakMap,o=new WeakMap,y=new WeakMap,V=new WeakMap,U=new WeakSet,le=function(){return r(this,_t)||yt(this,_t,new Map)},Q=new WeakSet,ce=function(){if(!r(this,S)){const et=r(this,at).createElement("div"),{style:pt}=et;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Pt=r(this,at).createElementNS(l,"svg");Pt.setAttribute("width",0),Pt.setAttribute("height",0),yt(this,S,r(this,at).createElementNS(l,"defs")),et.append(Pt),Pt.append(r(this,S)),r(this,at).body.append(et)}return r(this,S)},w=new WeakSet,We=function(et){const pt=r(this,at).createElementNS(l,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(pt)},G=new WeakSet,Se=function(et){const pt=r(this,at).createElementNS(l,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",et),r(this,Q,ce).append(pt),pt},lt=new WeakSet,Ee=function(et,pt,Pt){const Mt=r(this,at).createElementNS(l,pt);Mt.setAttribute("type","discrete"),Mt.setAttribute("tableValues",Pt),et.append(Mt)},Ct=new WeakSet,ge=function(et,pt,Pt,Mt){const Bt=r(this,at).createElementNS(l,"feComponentTransfer");Mt.append(Bt),ht(this,lt,Ee).call(this,Bt,"feFuncR",et),ht(this,lt,Ee).call(this,Bt,"feFuncG",pt),ht(this,lt,Ee).call(this,Bt,"feFuncB",Pt)},mt=new WeakSet,me=function(et){return r(this,Q,ce).style.color=et,k(getComputedStyle(r(this,Q,ce)).getPropertyValue("color"))},e.DOMFilterFactory=g;class m extends n.BaseCanvasFactory{constructor({ownerDocument:tt=globalThis.document}={}){super(),this._document=tt}_createCanvas(tt,et){const pt=this._document.createElement("canvas");return pt.width=tt,pt.height=et,pt}}e.DOMCanvasFactory=m;async function u(vt,tt=!1){if(f(vt,document.baseURI)){const et=await fetch(vt);if(!et.ok)throw new Error(et.statusText);return tt?new Uint8Array(await et.arrayBuffer()):(0,i.stringToBytes)(await et.text())}return new Promise((et,pt)=>{const Pt=new XMLHttpRequest;Pt.open("GET",vt,!0),tt&&(Pt.responseType="arraybuffer"),Pt.onreadystatechange=()=>{if(Pt.readyState===XMLHttpRequest.DONE){if(Pt.status===200||Pt.status===0){let Mt;if(tt&&Pt.response?Mt=new Uint8Array(Pt.response):!tt&&Pt.responseText&&(Mt=(0,i.stringToBytes)(Pt.responseText)),Mt){et(Mt);return}}pt(new Error(Pt.statusText))}},Pt.send(null)})}class F extends n.BaseCMapReaderFactory{_fetchData(tt,et){return u(tt,this.isCompressed).then(pt=>({cMapData:pt,compressionType:et}))}}e.DOMCMapReaderFactory=F;class O extends n.BaseStandardFontDataFactory{_fetchData(tt){return u(tt,!0)}}e.DOMStandardFontDataFactory=O;class P extends n.BaseSVGFactory{_createSVG(tt){return document.createElementNS(l,tt)}}e.DOMSVGFactory=P;class M{constructor({viewBox:tt,scale:et,rotation:pt,offsetX:Pt=0,offsetY:Mt=0,dontFlip:Bt=!1}){this.viewBox=tt,this.scale=et,this.rotation=pt,this.offsetX=Pt,this.offsetY=Mt;const Ut=(tt[2]+tt[0])/2,Lt=(tt[3]+tt[1])/2;let jt,$t,zt,Tt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:jt=-1,$t=0,zt=0,Tt=1;break;case 90:jt=0,$t=1,zt=1,Tt=0;break;case 270:jt=0,$t=-1,zt=-1,Tt=0;break;case 0:jt=1,$t=0,zt=0,Tt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&(zt=-zt,Tt=-Tt);let st,ct,Dt,qt;jt===0?(st=Math.abs(Lt-tt[1])*et+Pt,ct=Math.abs(Ut-tt[0])*et+Mt,Dt=(tt[3]-tt[1])*et,qt=(tt[2]-tt[0])*et):(st=Math.abs(Ut-tt[0])*et+Pt,ct=Math.abs(Lt-tt[1])*et+Mt,Dt=(tt[2]-tt[0])*et,qt=(tt[3]-tt[1])*et),this.transform=[jt*et,$t*et,zt*et,Tt*et,st-jt*et*Ut-zt*et*Lt,ct-$t*et*Ut-Tt*et*Lt],this.width=Dt,this.height=qt}get rawDims(){const{viewBox:tt}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:tt[2]-tt[0],pageHeight:tt[3]-tt[1],pageX:tt[0],pageY:tt[1]})}clone({scale:tt=this.scale,rotation:et=this.rotation,offsetX:pt=this.offsetX,offsetY:Pt=this.offsetY,dontFlip:Mt=!1}={}){return new M({viewBox:this.viewBox.slice(),scale:tt,rotation:et,offsetX:pt,offsetY:Pt,dontFlip:Mt})}convertToViewportPoint(tt,et){return i.Util.applyTransform([tt,et],this.transform)}convertToViewportRectangle(tt){const et=i.Util.applyTransform([tt[0],tt[1]],this.transform),pt=i.Util.applyTransform([tt[2],tt[3]],this.transform);return[et[0],et[1],pt[0],pt[1]]}convertToPdfPoint(tt,et){return i.Util.applyInverseTransform([tt,et],this.transform)}}e.PageViewport=M;class C extends i.BaseException{constructor(tt,et=0){super(tt,"RenderingCancelledException"),this.extraDelay=et}}e.RenderingCancelledException=C;function _(vt){const tt=vt.length;let et=0;for(;et<tt&&vt[et].trim()==="";)et++;return vt.substring(et,et+5).toLowerCase()==="data:"}function T(vt){return typeof vt=="string"&&/\.pdf$/i.test(vt)}function x(vt,tt=!1){return tt||([vt]=vt.split(/[#?]/,1)),vt.substring(vt.lastIndexOf("/")+1)}function B(vt,tt="document.pdf"){if(typeof vt!="string")return tt;if(_(vt))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tt;const et=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Pt=et.exec(vt);let Mt=pt.exec(Pt[1])||pt.exec(Pt[2])||pt.exec(Pt[3]);if(Mt&&(Mt=Mt[0],Mt.includes("%")))try{Mt=pt.exec(decodeURIComponent(Mt))[0]}catch{}return Mt||tt}class E{constructor(){Jt(this,"started",Object.create(null));Jt(this,"times",[])}time(tt){tt in this.started&&(0,i.warn)(`Timer is already running for ${tt}`),this.started[tt]=Date.now()}timeEnd(tt){tt in this.started||(0,i.warn)(`Timer has not been started for ${tt}`),this.times.push({name:tt,start:this.started[tt],end:Date.now()}),delete this.started[tt]}toString(){const tt=[];let et=0;for(const{name:pt}of this.times)et=Math.max(pt.length,et);for(const{name:pt,start:Pt,end:Mt}of this.times)tt.push(`${pt.padEnd(et)} ${Mt-Pt}ms
`);return tt.join("")}}e.StatTimer=E;function f(vt,tt){try{const{protocol:et}=tt?new URL(vt,tt):new URL(vt);return et==="http:"||et==="https:"}catch{return!1}}function b(vt,tt=!1){return new Promise((et,pt)=>{const Pt=document.createElement("script");Pt.src=vt,Pt.onload=function(Mt){tt&&Pt.remove(),et(Mt)},Pt.onerror=function(){pt(new Error(`Cannot load script at: ${Pt.src}`))},(document.head||document.documentElement).append(Pt)})}function N(vt){console.log("Deprecated API usage: "+vt)}let v;class d{static toDateObject(tt){if(!tt||typeof tt!="string")return null;v||(v=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=v.exec(tt);if(!et)return null;const pt=parseInt(et[1],10);let Pt=parseInt(et[2],10);Pt=Pt>=1&&Pt<=12?Pt-1:0;let Mt=parseInt(et[3],10);Mt=Mt>=1&&Mt<=31?Mt:1;let Bt=parseInt(et[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let Ut=parseInt(et[5],10);Ut=Ut>=0&&Ut<=59?Ut:0;let Lt=parseInt(et[6],10);Lt=Lt>=0&&Lt<=59?Lt:0;const jt=et[7]||"Z";let $t=parseInt(et[8],10);$t=$t>=0&&$t<=23?$t:0;let zt=parseInt(et[9],10)||0;return zt=zt>=0&&zt<=59?zt:0,jt==="-"?(Bt+=$t,Ut+=zt):jt==="+"&&(Bt-=$t,Ut-=zt),new Date(Date.UTC(pt,Pt,Mt,Bt,Ut,Lt))}}e.PDFDateString=d;function j(vt,{scale:tt=1,rotation:et=0}){const{width:pt,height:Pt}=vt.attributes.style,Mt=[0,0,parseInt(pt),parseInt(Pt)];return new M({viewBox:Mt,scale:tt,rotation:et})}function k(vt){if(vt.startsWith("#")){const tt=parseInt(vt.slice(1),16);return[(tt&16711680)>>16,(tt&65280)>>8,tt&255]}return vt.startsWith("rgb(")?vt.slice(4,-1).split(",").map(tt=>parseInt(tt)):vt.startsWith("rgba(")?vt.slice(5,-1).split(",").map(tt=>parseInt(tt)).slice(0,3):((0,i.warn)(`Not a valid color format: "${vt}"`),[0,0,0])}function $(vt){const tt=document.createElement("span");tt.style.visibility="hidden",document.body.append(tt);for(const et of vt.keys()){tt.style.color=et;const pt=window.getComputedStyle(tt).color;vt.set(et,k(pt))}tt.remove()}function nt(vt){const{a:tt,b:et,c:pt,d:Pt,e:Mt,f:Bt}=vt.getTransform();return[tt,et,pt,Pt,Mt,Bt]}function H(vt){const{a:tt,b:et,c:pt,d:Pt,e:Mt,f:Bt}=vt.getTransform().invertSelf();return[tt,et,pt,Pt,Mt,Bt]}function it(vt,tt,et=!1,pt=!0){if(tt instanceof M){const{pageWidth:Pt,pageHeight:Mt}=tt.rawDims,{style:Bt}=vt,Ut=i.FeatureTest.isCSSRoundSupported,Lt=`var(--scale-factor) * ${Pt}px`,jt=`var(--scale-factor) * ${Mt}px`,$t=Ut?`round(${Lt}, 1px)`:`calc(${Lt})`,zt=Ut?`round(${jt}, 1px)`:`calc(${jt})`;!et||tt.rotation%180===0?(Bt.width=$t,Bt.height=zt):(Bt.width=zt,Bt.height=$t)}pt&&vt.setAttribute("data-main-rotation",tt.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(u){return"none"}addHCMFilter(u,F){return"none"}addHighlightHCMFilter(u,F,O,P){return"none"}destroy(u=!1){}}e.BaseFilterFactory=i;class l{constructor(){this.constructor===l&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,F){if(u<=0||F<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(u,F);return{canvas:O,context:O.getContext("2d")}}reset(u,F,O){if(!u.canvas)throw new Error("Canvas is not specified");if(F<=0||O<=0)throw new Error("Invalid canvas size");u.canvas.width=F,u.canvas.height=O}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,F){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=l;class c{constructor({baseUrl:u=null,isCompressed:F=!0}){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=F}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const F=this.baseUrl+u+(this.isCompressed?".bcmap":""),O=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(F,O).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${F}`)})}_fetchData(u,F){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=c;class L{constructor({baseUrl:u=null}){this.constructor===L&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const F=`${this.baseUrl}${u}`;return this._fetchData(F).catch(O=>{throw new Error(`Unable to load font data at: ${F}`)})}_fetchData(u){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=L;class g{constructor(){this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,F,O=!1){if(u<=0||F<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),O||(P.setAttribute("width",`${u}px`),P.setAttribute("height",`${F}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${u} ${F}`),P}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,l=4294901760,c=65535;class L{constructor(m){this.h1=m?m&4294967295:i,this.h2=m?m&4294967295:i}update(m){let u,F;if(typeof m=="string"){u=new Uint8Array(m.length*2),F=0;for(let N=0,v=m.length;N<v;N++){const d=m.charCodeAt(N);d<=255?u[F++]=d:(u[F++]=d>>>8,u[F++]=d&255)}}else if((0,n.isArrayBuffer)(m))u=m.slice(),F=u.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=F>>2,P=F-O*4,M=new Uint32Array(u.buffer,0,O);let C=0,_=0,T=this.h1,x=this.h2;const B=3432918353,E=461845907,f=B&c,b=E&c;for(let N=0;N<O;N++)N&1?(C=M[N],C=C*B&l|C*f&c,C=C<<15|C>>>17,C=C*E&l|C*b&c,T^=C,T=T<<13|T>>>19,T=T*5+3864292196):(_=M[N],_=_*B&l|_*f&c,_=_<<15|_>>>17,_=_*E&l|_*b&c,x^=_,x=x<<13|x>>>19,x=x*5+3864292196);switch(C=0,P){case 3:C^=u[O*4+2]<<16;case 2:C^=u[O*4+1]<<8;case 1:C^=u[O*4],C=C*B&l|C*f&c,C=C<<15|C>>>17,C=C*E&l|C*b&c,O&1?T^=C:x^=C}this.h1=T,this.h2=x}hexdigest(){let m=this.h1,u=this.h2;return m^=u>>>1,m=m*3981806797&l|m*36045&c,u=u*4283543511&l|((u<<16|m>>>16)*2950163797&l)>>>16,m^=u>>>1,m=m*444984403&l|m*60499&c,u=u*3301882366&l|((u<<16|m>>>16)*3120437893&l)>>>16,m^=u>>>1,(m>>>0).toString(16).padStart(8,"0")+(u>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=L},(t,e,s)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:g=globalThis.document,styleElement:m=null}){K(this,c,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(g,m.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),r(this,c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||r(this,c).has(g.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:u,style:F}=g,O=new FontFace(m,u,F);this.addNativeFontFace(O);try{await O.load(),r(this,c).add(m)}catch{(0,n.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(O)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const u=g.createNativeFontFace();if(u){this.addNativeFontFace(u);try{await u.loaded}catch(F){throw(0,n.warn)(`Failed to load font '${u.family}': '${F}'.`),g.disableFontFace=!0,F}}return}const m=g.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(u=>{const F=this._queueLoadingCallback(u);this._prepareFontLoadEvent(g,F)})}}get isFontLoadingAPISupported(){var m;const g=!!((m=this._document)!=null&&m.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function m(){for((0,n.assert)(!F.done,"completeRequest() cannot be called twice."),F.done=!0;u.length>0&&u[0].done;){const O=u.shift();setTimeout(O.callback,0)}}const{loadingRequests:u}=this,F={done:!1,complete:m,callback:g};return u.push(F),F}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,m){function u(k,$){return k.charCodeAt($)<<24|k.charCodeAt($+1)<<16|k.charCodeAt($+2)<<8|k.charCodeAt($+3)&255}function F(k,$,nt,H){const it=k.substring(0,$),ut=k.substring($+nt);return it+H+ut}let O,P;const M=this._document.createElement("canvas");M.width=1,M.height=1;const C=M.getContext("2d");let _=0;function T(k,$){if(++_>30){(0,n.warn)("Load test font never loaded."),$();return}if(C.font="30px "+k,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(T.bind(null,k,$))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=F(B,976,x.length,x);const f=16,b=1482184792;let N=u(B,f);for(O=0,P=x.length-3;O<P;O+=4)N=N-b+u(x,O)|0;O<x.length&&(N=N-b+u(x+"XXX",O)|0),B=F(B,f,4,(0,n.string32)(N));const v=`url(data:font/opentype;base64,${btoa(B)});`,d=`@font-face {font-family:"${x}";src:${v}}`;this.insertRule(d);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const k of[g.loadedName,x]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=k,j.append($)}this._document.body.append(j),T(x,()=>{j.remove(),m.complete()})}}c=new WeakMap,e.FontLoader=i;class l{constructor(g,{isEvalSupported:m=!0,disableFontFace:u=!1,ignoreErrors:F=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const P in g)this[P]=g[P];this.isEvalSupported=m!==!1,this.disableFontFace=u===!0,this.ignoreErrors=F===!0,this._inspectFont=O}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return(m=this._inspectFont)==null||m.call(this,this),g}createFontFaceRule(){var F;if(!this.data||this.disableFontFace)return null;const g=(0,n.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(g)});`;let u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${m}}`}return(F=this._inspectFont)==null||F.call(this,this,m),u}getPathGenerator(g,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let u;try{u=g.get(this.loadedName+"_path_"+m)}catch(F){if(!this.ignoreErrors)throw F;return(0,n.warn)(`getPathGenerator - ignoring character: "${F}".`),this.compiledGlyphs[m]=function(O,P){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const F=[];for(const O of u){const P=O.args!==void 0?O.args.join(","):"";F.push("c.",O.cmd,"(",P,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",F.join(""))}return this.compiledGlyphs[m]=function(F,O){for(const P of u)P.cmd==="scale"&&(P.args=[O,-O]),F[P.cmd].apply(F,P.args)}}}e.FontFaceObject=l},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(m){return new Promise((u,F)=>{require$$5.readFile(m,(P,M)=>{if(P||!M){F(new Error(P));return}u(new Uint8Array(M))})})};class l extends n.BaseFilterFactory{}e.NodeFilterFactory=l;class c extends n.BaseCanvasFactory{_createCanvas(u,F){return require$$5.createCanvas(u,F)}}e.NodeCanvasFactory=c;class L extends n.BaseCMapReaderFactory{_fetchData(u,F){return i(u).then(O=>({cMapData:O,compressionType:F}))}}e.NodeCMapReaderFactory=L;class g extends n.BaseStandardFontDataFactory{_fetchData(u){return i(u)}}e.NodeStandardFontDataFactory=g},(t,e,s)=>{var S,Ve,at,ze;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),i=s(6),l=s(12),c=s(13);const L=16,g=100,m=4096,u=15,F=10,O=1e3,P=16;function M(R,a){if(R._removeMirroring)throw new Error("Context is already forwarding operations.");R.__originalSave=R.save,R.__originalRestore=R.restore,R.__originalRotate=R.rotate,R.__originalScale=R.scale,R.__originalTranslate=R.translate,R.__originalTransform=R.transform,R.__originalSetTransform=R.setTransform,R.__originalResetTransform=R.resetTransform,R.__originalClip=R.clip,R.__originalMoveTo=R.moveTo,R.__originalLineTo=R.lineTo,R.__originalBezierCurveTo=R.bezierCurveTo,R.__originalRect=R.rect,R.__originalClosePath=R.closePath,R.__originalBeginPath=R.beginPath,R._removeMirroring=()=>{R.save=R.__originalSave,R.restore=R.__originalRestore,R.rotate=R.__originalRotate,R.scale=R.__originalScale,R.translate=R.__originalTranslate,R.transform=R.__originalTransform,R.setTransform=R.__originalSetTransform,R.resetTransform=R.__originalResetTransform,R.clip=R.__originalClip,R.moveTo=R.__originalMoveTo,R.lineTo=R.__originalLineTo,R.bezierCurveTo=R.__originalBezierCurveTo,R.rect=R.__originalRect,R.closePath=R.__originalClosePath,R.beginPath=R.__originalBeginPath,delete R._removeMirroring},R.save=function(){a.save(),this.__originalSave()},R.restore=function(){a.restore(),this.__originalRestore()},R.translate=function(y,V){a.translate(y,V),this.__originalTranslate(y,V)},R.scale=function(y,V){a.scale(y,V),this.__originalScale(y,V)},R.transform=function(y,V,U,Y,Q,ot){a.transform(y,V,U,Y,Q,ot),this.__originalTransform(y,V,U,Y,Q,ot)},R.setTransform=function(y,V,U,Y,Q,ot){a.setTransform(y,V,U,Y,Q,ot),this.__originalSetTransform(y,V,U,Y,Q,ot)},R.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},R.rotate=function(y){a.rotate(y),this.__originalRotate(y)},R.clip=function(y){a.clip(y),this.__originalClip(y)},R.moveTo=function(o,y){a.moveTo(o,y),this.__originalMoveTo(o,y)},R.lineTo=function(o,y){a.lineTo(o,y),this.__originalLineTo(o,y)},R.bezierCurveTo=function(o,y,V,U,Y,Q){a.bezierCurveTo(o,y,V,U,Y,Q),this.__originalBezierCurveTo(o,y,V,U,Y,Q)},R.rect=function(o,y,V,U){a.rect(o,y,V,U),this.__originalRect(o,y,V,U)},R.closePath=function(){a.closePath(),this.__originalClosePath()},R.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class C{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,o,y){let V;return this.cache[a]!==void 0?(V=this.cache[a],this.canvasFactory.reset(V,o,y)):(V=this.canvasFactory.create(o,y),this.cache[a]=V),V}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const o=this.cache[a];this.canvasFactory.destroy(o),delete this.cache[a]}}}function _(R,a,o,y,V,U,Y,Q,ot,w){const[I,G,J,lt,dt,Ct]=(0,i.getCurrentTransform)(R);if(G===0&&J===0){const St=Y*I+dt,vt=Math.round(St),tt=Q*lt+Ct,et=Math.round(tt),pt=(Y+ot)*I+dt,Pt=Math.abs(Math.round(pt)-vt)||1,Mt=(Q+w)*lt+Ct,Bt=Math.abs(Math.round(Mt)-et)||1;return R.setTransform(Math.sign(I),0,0,Math.sign(lt),vt,et),R.drawImage(a,o,y,V,U,0,0,Pt,Bt),R.setTransform(I,G,J,lt,dt,Ct),[Pt,Bt]}if(I===0&&lt===0){const St=Q*J+dt,vt=Math.round(St),tt=Y*G+Ct,et=Math.round(tt),pt=(Q+w)*J+dt,Pt=Math.abs(Math.round(pt)-vt)||1,Mt=(Y+ot)*G+Ct,Bt=Math.abs(Math.round(Mt)-et)||1;return R.setTransform(0,Math.sign(G),Math.sign(J),0,vt,et),R.drawImage(a,o,y,V,U,0,0,Bt,Pt),R.setTransform(I,G,J,lt,dt,Ct),[Bt,Pt]}R.drawImage(a,o,y,V,U,Y,Q,ot,w);const Et=Math.hypot(I,G),mt=Math.hypot(J,lt);return[Et*ot,mt*w]}function T(R){const{width:a,height:o}=R;if(a>O||o>O)return null;const y=1e3,V=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=a+1;let Y=new Uint8Array(U*(o+1)),Q,ot,w;const I=a+7&-8;let G=new Uint8Array(I*o),J=0;for(const mt of R.data){let St=128;for(;St>0;)G[J++]=mt&St?0:255,St>>=1}let lt=0;for(J=0,G[J]!==0&&(Y[0]=1,++lt),ot=1;ot<a;ot++)G[J]!==G[J+1]&&(Y[ot]=G[J]?2:1,++lt),J++;for(G[J]!==0&&(Y[ot]=2,++lt),Q=1;Q<o;Q++){J=Q*I,w=Q*U,G[J-I]!==G[J]&&(Y[w]=G[J]?1:8,++lt);let mt=(G[J]?4:0)+(G[J-I]?8:0);for(ot=1;ot<a;ot++)mt=(mt>>2)+(G[J+1]?4:0)+(G[J-I+1]?8:0),V[mt]&&(Y[w+ot]=V[mt],++lt),J++;if(G[J-I]!==G[J]&&(Y[w+ot]=G[J]?2:4,++lt),lt>y)return null}for(J=I*(o-1),w=Q*U,G[J]!==0&&(Y[w]=8,++lt),ot=1;ot<a;ot++)G[J]!==G[J+1]&&(Y[w+ot]=G[J]?4:8,++lt),J++;if(G[J]!==0&&(Y[w+ot]=4,++lt),lt>y)return null;const dt=new Int32Array([0,U,-1,0,-U,0,0,0,1]),Ct=new Path2D;for(Q=0;lt&&Q<=o;Q++){let mt=Q*U;const St=mt+a;for(;mt<St&&!Y[mt];)mt++;if(mt===St)continue;Ct.moveTo(mt%U,Q);const vt=mt;let tt=Y[mt];do{const et=dt[tt];do mt+=et;while(!Y[mt]);const pt=Y[mt];pt!==5&&pt!==10?(tt=pt,Y[mt]=0):(tt=pt&51*tt>>4,Y[mt]&=tt>>2|tt<<2),Ct.lineTo(mt%U,mt/U|0),Y[mt]||--lt}while(vt!==mt);--Q}return G=null,Y=null,function(mt){mt.save(),mt.scale(1/a,-1/o),mt.translate(0,-o),mt.fill(Ct),mt.beginPath(),mt.restore()}}class x{constructor(a,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,o])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,o){this.x=a,this.y=o}updatePathMinMax(a,o,y){[o,y]=n.Util.applyTransform([o,y],a),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(a,o){const y=n.Util.applyTransform(o,a),V=n.Util.applyTransform(o.slice(2),a);this.minX=Math.min(this.minX,y[0],V[0]),this.minY=Math.min(this.minY,y[1],V[1]),this.maxX=Math.max(this.maxX,y[0],V[0]),this.maxY=Math.max(this.maxY,y[1],V[1])}updateScalingPathMinMax(a,o){n.Util.scaleMinMax(a,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(a,o,y,V,U,Y,Q,ot,w,I){const G=n.Util.bezierBoundingBox(o,y,V,U,Y,Q,ot,w);if(I){I[0]=Math.min(I[0],G[0],G[2]),I[1]=Math.max(I[1],G[0],G[2]),I[2]=Math.min(I[2],G[1],G[3]),I[3]=Math.max(I[3],G[1],G[3]);return}this.updateRectMinMax(a,G)}getPathBoundingBox(a=l.PathType.FILL,o=null){const y=[this.minX,this.minY,this.maxX,this.maxY];if(a===l.PathType.STROKE){o||(0,n.unreachable)("Stroke bounding box must include transform.");const V=n.Util.singularValueDecompose2dScale(o),U=V[0]*this.lineWidth/2,Y=V[1]*this.lineWidth/2;y[0]-=U,y[1]-=Y,y[2]+=U,y[3]+=Y}return y}updateClipFromPath(){const a=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=l.PathType.FILL,o=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(a,o))}}function B(R,a){if(typeof ImageData<"u"&&a instanceof ImageData){R.putImageData(a,0,0);return}const o=a.height,y=a.width,V=o%P,U=(o-V)/P,Y=V===0?U:U+1,Q=R.createImageData(y,P);let ot=0,w;const I=a.data,G=Q.data;let J,lt,dt,Ct;if(a.kind===n.ImageKind.GRAYSCALE_1BPP){const Et=I.byteLength,mt=new Uint32Array(G.buffer,0,G.byteLength>>2),St=mt.length,vt=y+7>>3,tt=4294967295,et=n.FeatureTest.isLittleEndian?4278190080:255;for(J=0;J<Y;J++){for(dt=J<U?P:V,w=0,lt=0;lt<dt;lt++){const pt=Et-ot;let Pt=0;const Mt=pt>vt?y:pt*8-7,Bt=Mt&-8;let Ut=0,Lt=0;for(;Pt<Bt;Pt+=8)Lt=I[ot++],mt[w++]=Lt&128?tt:et,mt[w++]=Lt&64?tt:et,mt[w++]=Lt&32?tt:et,mt[w++]=Lt&16?tt:et,mt[w++]=Lt&8?tt:et,mt[w++]=Lt&4?tt:et,mt[w++]=Lt&2?tt:et,mt[w++]=Lt&1?tt:et;for(;Pt<Mt;Pt++)Ut===0&&(Lt=I[ot++],Ut=128),mt[w++]=Lt&Ut?tt:et,Ut>>=1}for(;w<St;)mt[w++]=0;R.putImageData(Q,0,J*P)}}else if(a.kind===n.ImageKind.RGBA_32BPP){for(lt=0,Ct=y*P*4,J=0;J<U;J++)G.set(I.subarray(ot,ot+Ct)),ot+=Ct,R.putImageData(Q,0,lt),lt+=P;J<Y&&(Ct=y*V*4,G.set(I.subarray(ot,ot+Ct)),R.putImageData(Q,0,lt))}else if(a.kind===n.ImageKind.RGB_24BPP)for(dt=P,Ct=y*dt,J=0;J<Y;J++){for(J>=U&&(dt=V,Ct=y*dt),w=0,lt=Ct;lt--;)G[w++]=I[ot++],G[w++]=I[ot++],G[w++]=I[ot++],G[w++]=255;R.putImageData(Q,0,J*P)}else throw new Error(`bad image kind: ${a.kind}`)}function E(R,a){if(a.bitmap){R.drawImage(a.bitmap,0,0);return}const o=a.height,y=a.width,V=o%P,U=(o-V)/P,Y=V===0?U:U+1,Q=R.createImageData(y,P);let ot=0;const w=a.data,I=Q.data;for(let G=0;G<Y;G++){const J=G<U?P:V;({srcPos:ot}=(0,c.convertBlackAndWhiteToRGBA)({src:w,srcPos:ot,dest:I,width:y,height:J,nonBlackColor:0})),R.putImageData(Q,0,G*P)}}function f(R,a){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const y of o)R[y]!==void 0&&(a[y]=R[y]);R.setLineDash!==void 0&&(a.setLineDash(R.getLineDash()),a.lineDashOffset=R.lineDashOffset)}function b(R){if(R.strokeStyle=R.fillStyle="#000000",R.fillRule="nonzero",R.globalAlpha=1,R.lineWidth=1,R.lineCap="butt",R.lineJoin="miter",R.miterLimit=10,R.globalCompositeOperation="source-over",R.font="10px sans-serif",R.setLineDash!==void 0&&(R.setLineDash([]),R.lineDashOffset=0),!n.isNodeJS){const{filter:a}=R;a!=="none"&&a!==""&&(R.filter="none")}}function N(R,a,o,y){const V=R.length;for(let U=3;U<V;U+=4){const Y=R[U];if(Y===0)R[U-3]=a,R[U-2]=o,R[U-1]=y;else if(Y<255){const Q=255-Y;R[U-3]=R[U-3]*Y+a*Q>>8,R[U-2]=R[U-2]*Y+o*Q>>8,R[U-1]=R[U-1]*Y+y*Q>>8}}}function v(R,a,o){const y=R.length,V=1/255;for(let U=3;U<y;U+=4){const Y=o?o[R[U]]:R[U];a[U]=a[U]*Y*V|0}}function d(R,a,o){const y=R.length;for(let V=3;V<y;V+=4){const U=R[V-3]*77+R[V-2]*152+R[V-1]*28;a[V]=o?a[V]*o[U>>8]>>8:a[V]*U>>16}}function j(R,a,o,y,V,U,Y,Q,ot,w,I){const G=!!U,J=G?U[0]:0,lt=G?U[1]:0,dt=G?U[2]:0,Ct=V==="Luminosity"?d:v,mt=Math.min(y,Math.ceil(1048576/o));for(let St=0;St<y;St+=mt){const vt=Math.min(mt,y-St),tt=R.getImageData(Q-w,St+(ot-I),o,vt),et=a.getImageData(Q,St+ot,o,vt);G&&N(tt.data,J,lt,dt),Ct(tt.data,et.data,Y),a.putImageData(et,Q,St+ot)}}function k(R,a,o,y){const V=y[0],U=y[1],Y=y[2]-V,Q=y[3]-U;Y===0||Q===0||(j(a.context,o,Y,Q,a.subtype,a.backdrop,a.transferMap,V,U,a.offsetX,a.offsetY),R.save(),R.globalAlpha=1,R.globalCompositeOperation="source-over",R.setTransform(1,0,0,1,0,0),R.drawImage(o.canvas,0,0),R.restore())}function $(R,a){const o=n.Util.singularValueDecompose2dScale(R);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const y=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:o[0]<=y||o[1]<=y}const nt=["butt","round","square"],H=["miter","round","bevel"],it={},ut={},wt=class wt{constructor(a,o,y,V,U,{optionalContentConfig:Y,markedContentStack:Q=null},ot,w){K(this,S);K(this,at);this.ctx=a,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=y,this.canvasFactory=V,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Q||[],this.optionalContentConfig=Y,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ot,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=w,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,o=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):o}beginDrawing({transform:a,viewport:o,transparency:y=!1,background:V=null}){const U=this.ctx.canvas.width,Y=this.ctx.canvas.height,Q=this.ctx.fillStyle;if(this.ctx.fillStyle=V||"#ffffff",this.ctx.fillRect(0,0,U,Y),this.ctx.fillStyle=Q,y){const ot=this.cachedCanvases.getCanvas("transparent",U,Y);this.compositeCtx=this.ctx,this.transparentCanvas=ot.canvas,this.ctx=ot.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),b(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(a,o,y,V){const U=a.argsArray,Y=a.fnArray;let Q=o||0;const ot=U.length;if(ot===Q)return Q;const w=ot-Q>F&&typeof y=="function",I=w?Date.now()+u:0;let G=0;const J=this.commonObjs,lt=this.objs;let dt;for(;;){if(V!==void 0&&Q===V.nextBreakPoint)return V.breakIt(Q,y),Q;if(dt=Y[Q],dt!==n.OPS.dependency)this[dt].apply(this,U[Q]);else for(const Ct of U[Q]){const Et=Ct.startsWith("g_")?J:lt;if(!Et.has(Ct))return Et.get(Ct,y),Q}if(Q++,Q===ot)return Q;if(w&&++G>F){if(Date.now()>I)return y(),Q;G=0}}}endDrawing(){ht(this,S,Ve).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const o of a.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);a.clear()}this._cachedBitmapsMap.clear(),ht(this,at,ze).call(this)}_scaleImage(a,o){const y=a.width,V=a.height;let U=Math.max(Math.hypot(o[0],o[1]),1),Y=Math.max(Math.hypot(o[2],o[3]),1),Q=y,ot=V,w="prescale1",I,G;for(;U>2&&Q>1||Y>2&&ot>1;){let J=Q,lt=ot;U>2&&Q>1&&(J=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q/2),U/=Q/J),Y>2&&ot>1&&(lt=ot>=16384?Math.floor(ot/2)-1||1:Math.ceil(ot)/2,Y/=ot/lt),I=this.cachedCanvases.getCanvas(w,J,lt),G=I.context,G.clearRect(0,0,J,lt),G.drawImage(a,0,0,Q,ot,0,0,J,lt),a=I.canvas,Q=J,ot=lt,w=w==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:Q,paintHeight:ot}}_createMaskCanvas(a){const o=this.ctx,{width:y,height:V}=a,U=this.current.fillColor,Y=this.current.patternFill,Q=(0,i.getCurrentTransform)(o);let ot,w,I,G;if((a.bitmap||a.data)&&a.count>1){const Pt=a.bitmap||a.data.buffer;w=JSON.stringify(Y?Q:[Q.slice(0,4),U]),ot=this._cachedBitmapsMap.get(Pt),ot||(ot=new Map,this._cachedBitmapsMap.set(Pt,ot));const Mt=ot.get(w);if(Mt&&!Y){const Bt=Math.round(Math.min(Q[0],Q[2])+Q[4]),Ut=Math.round(Math.min(Q[1],Q[3])+Q[5]);return{canvas:Mt,offsetX:Bt,offsetY:Ut}}I=Mt}I||(G=this.cachedCanvases.getCanvas("maskCanvas",y,V),E(G.context,a));let J=n.Util.transform(Q,[1/y,0,0,-1/V,0,0]);J=n.Util.transform(J,[1,0,0,1,0,-V]);const lt=n.Util.applyTransform([0,0],J),dt=n.Util.applyTransform([y,V],J),Ct=n.Util.normalizeRect([lt[0],lt[1],dt[0],dt[1]]),Et=Math.round(Ct[2]-Ct[0])||1,mt=Math.round(Ct[3]-Ct[1])||1,St=this.cachedCanvases.getCanvas("fillCanvas",Et,mt),vt=St.context,tt=Math.min(lt[0],dt[0]),et=Math.min(lt[1],dt[1]);vt.translate(-tt,-et),vt.transform(...J),I||(I=this._scaleImage(G.canvas,(0,i.getCurrentTransformInverse)(vt)),I=I.img,ot&&Y&&ot.set(w,I)),vt.imageSmoothingEnabled=$((0,i.getCurrentTransform)(vt),a.interpolate),_(vt,I,0,0,I.width,I.height,0,0,y,V),vt.globalCompositeOperation="source-in";const pt=n.Util.transform((0,i.getCurrentTransformInverse)(vt),[1,0,0,1,-tt,-et]);return vt.fillStyle=Y?U.getPattern(o,this,pt,l.PathType.FILL):U,vt.fillRect(0,0,y,V),ot&&!Y&&(this.cachedCanvases.delete("fillCanvas"),ot.set(w,St.canvas)),{canvas:St.canvas,offsetX:Math.round(tt),offsetY:Math.round(et)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=nt[a]}setLineJoin(a){this.ctx.lineJoin=H[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,o){const y=this.ctx;y.setLineDash!==void 0&&(y.setLineDash(a),y.lineDashOffset=o)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[o,y]of a)switch(o){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y[0],y[1]);break;case"CA":this.current.strokeAlpha=y;break;case"ca":this.current.fillAlpha=y,this.ctx.globalAlpha=y;break;case"BM":this.ctx.globalCompositeOperation=y;break;case"SMask":this.current.activeSMask=y?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(y);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,o=this.ctx.canvas.height,y="smaskGroupAt"+this.groupLevel,V=this.cachedCanvases.getCanvas(y,a,o);this.suspendedCtx=this.ctx,this.ctx=V.context;const U=this.ctx;U.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,U),M(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,y=this.suspendedCtx;k(y,o,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,o,y,V,U,Y){this.ctx.transform(a,o,y,V,U,Y),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,o,y){const V=this.ctx,U=this.current;let Y=U.x,Q=U.y,ot,w;const I=(0,i.getCurrentTransform)(V),G=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,J=G?y.slice(0):null;for(let lt=0,dt=0,Ct=a.length;lt<Ct;lt++)switch(a[lt]|0){case n.OPS.rectangle:Y=o[dt++],Q=o[dt++];const Et=o[dt++],mt=o[dt++],St=Y+Et,vt=Q+mt;V.moveTo(Y,Q),Et===0||mt===0?V.lineTo(St,vt):(V.lineTo(St,Q),V.lineTo(St,vt),V.lineTo(Y,vt)),G||U.updateRectMinMax(I,[Y,Q,St,vt]),V.closePath();break;case n.OPS.moveTo:Y=o[dt++],Q=o[dt++],V.moveTo(Y,Q),G||U.updatePathMinMax(I,Y,Q);break;case n.OPS.lineTo:Y=o[dt++],Q=o[dt++],V.lineTo(Y,Q),G||U.updatePathMinMax(I,Y,Q);break;case n.OPS.curveTo:ot=Y,w=Q,Y=o[dt+4],Q=o[dt+5],V.bezierCurveTo(o[dt],o[dt+1],o[dt+2],o[dt+3],Y,Q),U.updateCurvePathMinMax(I,ot,w,o[dt],o[dt+1],o[dt+2],o[dt+3],Y,Q,J),dt+=6;break;case n.OPS.curveTo2:ot=Y,w=Q,V.bezierCurveTo(Y,Q,o[dt],o[dt+1],o[dt+2],o[dt+3]),U.updateCurvePathMinMax(I,ot,w,Y,Q,o[dt],o[dt+1],o[dt+2],o[dt+3],J),Y=o[dt+2],Q=o[dt+3],dt+=4;break;case n.OPS.curveTo3:ot=Y,w=Q,Y=o[dt+2],Q=o[dt+3],V.bezierCurveTo(o[dt],o[dt+1],Y,Q,Y,Q),U.updateCurvePathMinMax(I,ot,w,o[dt],o[dt+1],Y,Q,Y,Q,J),dt+=4;break;case n.OPS.closePath:V.closePath();break}G&&U.updateScalingPathMinMax(I,J),U.setCurrentPoint(Y,Q)}closePath(){this.ctx.closePath()}stroke(a=!0){const o=this.ctx,y=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof y=="object"&&(y!=null&&y.getPattern)?(o.save(),o.strokeStyle=y.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),l.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const o=this.ctx,y=this.current.fillColor,V=this.current.patternFill;let U=!1;V&&(o.save(),o.fillStyle=y.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),l.PathType.FILL),U=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),U&&o.restore(),a&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=it}eoClip(){this.pendingClip=ut}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,o=this.ctx;if(a===void 0){o.beginPath();return}o.save(),o.beginPath();for(const y of a)o.setTransform(...y.transform),o.translate(y.x,y.y),y.addToPath(o,y.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,o){var I;const y=this.commonObjs.get(a),V=this.current;if(!y)throw new Error(`Can't find font for ${a}`);if(V.fontMatrix=y.fontMatrix||n.FONT_IDENTITY_MATRIX,(V.fontMatrix[0]===0||V.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+a),o<0?(o=-o,V.fontDirection=-1):V.fontDirection=1,this.current.font=y,this.current.fontSize=o,y.isType3Font)return;const U=y.loadedName||"sans-serif",Y=((I=y.systemFontInfo)==null?void 0:I.css)||`"${U}", ${y.fallbackName}`;let Q="normal";y.black?Q="900":y.bold&&(Q="bold");const ot=y.italic?"italic":"normal";let w=o;o<L?w=L:o>g&&(w=g),this.current.fontSizeScale=o/w,this.ctx.font=`${ot} ${Q} ${w}px ${Y}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,o){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=o}setLeadingMoveText(a,o){this.setLeading(-o),this.moveText(a,o)}setTextMatrix(a,o,y,V,U,Y){this.current.textMatrix=[a,o,y,V,U,Y],this.current.textMatrixScale=Math.hypot(a,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,o,y,V){const U=this.ctx,Y=this.current,Q=Y.font,ot=Y.textRenderingMode,w=Y.fontSize/Y.fontSizeScale,I=ot&n.TextRenderingMode.FILL_STROKE_MASK,G=!!(ot&n.TextRenderingMode.ADD_TO_PATH_FLAG),J=Y.patternFill&&!Q.missingFile;let lt;(Q.disableFontFace||G||J)&&(lt=Q.getPathGenerator(this.commonObjs,a)),Q.disableFontFace||J?(U.save(),U.translate(o,y),U.beginPath(),lt(U,w),V&&U.setTransform(...V),(I===n.TextRenderingMode.FILL||I===n.TextRenderingMode.FILL_STROKE)&&U.fill(),(I===n.TextRenderingMode.STROKE||I===n.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((I===n.TextRenderingMode.FILL||I===n.TextRenderingMode.FILL_STROKE)&&U.fillText(a,o,y),(I===n.TextRenderingMode.STROKE||I===n.TextRenderingMode.FILL_STROKE)&&U.strokeText(a,o,y)),G&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(U),x:o,y,fontSize:w,addToPath:lt})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const o=a.getImageData(0,0,10,10).data;let y=!1;for(let V=3;V<o.length;V+=4)if(o[V]>0&&o[V]<255){y=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",y)}showText(a){const o=this.current,y=o.font;if(y.isType3Font)return this.showType3Text(a);const V=o.fontSize;if(V===0)return;const U=this.ctx,Y=o.fontSizeScale,Q=o.charSpacing,ot=o.wordSpacing,w=o.fontDirection,I=o.textHScale*w,G=a.length,J=y.vertical,lt=J?1:-1,dt=y.defaultVMetrics,Ct=V*o.fontMatrix[0],Et=o.textRenderingMode===n.TextRenderingMode.FILL&&!y.disableFontFace&&!o.patternFill;U.save(),U.transform(...o.textMatrix),U.translate(o.x,o.y+o.textRise),w>0?U.scale(I,-1):U.scale(I,1);let mt;if(o.patternFill){U.save();const pt=o.fillColor.getPattern(U,this,(0,i.getCurrentTransformInverse)(U),l.PathType.FILL);mt=(0,i.getCurrentTransform)(U),U.restore(),U.fillStyle=pt}let St=o.lineWidth;const vt=o.textMatrixScale;if(vt===0||St===0){const pt=o.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(pt===n.TextRenderingMode.STROKE||pt===n.TextRenderingMode.FILL_STROKE)&&(St=this.getSinglePixelWidth())}else St/=vt;if(Y!==1&&(U.scale(Y,Y),St/=Y),U.lineWidth=St,y.isInvalidPDFjsFont){const pt=[];let Pt=0;for(const Mt of a)pt.push(Mt.unicode),Pt+=Mt.width;U.fillText(pt.join(""),0,0),o.x+=Pt*Ct*I,U.restore(),this.compose();return}let tt=0,et;for(et=0;et<G;++et){const pt=a[et];if(typeof pt=="number"){tt+=lt*pt*V/1e3;continue}let Pt=!1;const Mt=(pt.isSpace?ot:0)+Q,Bt=pt.fontChar,Ut=pt.accent;let Lt,jt,$t=pt.width;if(J){const Tt=pt.vmetric||dt,st=-(pt.vmetric?Tt[1]:$t*.5)*Ct,ct=Tt[2]*Ct;$t=Tt?-Tt[0]:$t,Lt=st/Y,jt=(tt+ct)/Y}else Lt=tt/Y,jt=0;if(y.remeasure&&$t>0){const Tt=U.measureText(Bt).width*1e3/V*Y;if($t<Tt&&this.isFontSubpixelAAEnabled){const st=$t/Tt;Pt=!0,U.save(),U.scale(st,1),Lt/=st}else $t!==Tt&&(Lt+=($t-Tt)/2e3*V/Y)}if(this.contentVisible&&(pt.isInFont||y.missingFile)){if(Et&&!Ut)U.fillText(Bt,Lt,jt);else if(this.paintChar(Bt,Lt,jt,mt),Ut){const Tt=Lt+V*Ut.offset.x/Y,st=jt-V*Ut.offset.y/Y;this.paintChar(Ut.fontChar,Tt,st,mt)}}const zt=J?$t*Ct-Mt*w:$t*Ct+Mt*w;tt+=zt,Pt&&U.restore()}J?o.y-=tt:o.x+=tt*I,U.restore(),this.compose()}showType3Text(a){const o=this.ctx,y=this.current,V=y.font,U=y.fontSize,Y=y.fontDirection,Q=V.vertical?1:-1,ot=y.charSpacing,w=y.wordSpacing,I=y.textHScale*Y,G=y.fontMatrix||n.FONT_IDENTITY_MATRIX,J=a.length,lt=y.textRenderingMode===n.TextRenderingMode.INVISIBLE;let dt,Ct,Et,mt;if(!(lt||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...y.textMatrix),o.translate(y.x,y.y),o.scale(I,Y),dt=0;dt<J;++dt){if(Ct=a[dt],typeof Ct=="number"){mt=Q*Ct*U/1e3,this.ctx.translate(mt,0),y.x+=mt*I;continue}const St=(Ct.isSpace?w:0)+ot,vt=V.charProcOperatorList[Ct.operatorListId];if(!vt){(0,n.warn)(`Type3 character "${Ct.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ct,this.save(),o.scale(U,U),o.transform(...G),this.executeOperatorList(vt),this.restore()),Et=n.Util.applyTransform([Ct.width,0],G)[0]*U+St,o.translate(Et,0),y.x+=Et*I}o.restore(),this.processingType3=null}}setCharWidth(a,o){}setCharWidthAndBounds(a,o,y,V,U,Y){this.ctx.rect(y,V,U-y,Y-V),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let o;if(a[0]==="TilingPattern"){const y=a[1],V=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),U={createCanvasGraphics:Y=>new wt(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new l.TilingPattern(a,y,this.ctx,U,V)}else o=this._getPattern(a[1],a[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,o,y){const V=n.Util.makeHexColor(a,o,y);this.ctx.strokeStyle=V,this.current.strokeColor=V}setFillRGBColor(a,o,y){const V=n.Util.makeHexColor(a,o,y);this.ctx.fillStyle=V,this.current.fillColor=V,this.current.patternFill=!1}_getPattern(a,o=null){let y;return this.cachedPatterns.has(a)?y=this.cachedPatterns.get(a):(y=(0,l.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,y)),o&&(y.matrix=o),y}shadingFill(a){if(!this.contentVisible)return;const o=this.ctx;this.save();const y=this._getPattern(a);o.fillStyle=y.getPattern(o,this,(0,i.getCurrentTransformInverse)(o),l.PathType.SHADING);const V=(0,i.getCurrentTransformInverse)(o);if(V){const{width:U,height:Y}=o.canvas,[Q,ot,w,I]=n.Util.getAxialAlignedBoundingBox([0,0,U,Y],V);this.ctx.fillRect(Q,ot,w-Q,I-ot)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),o)){const y=o[2]-o[0],V=o[3]-o[1];this.ctx.rect(o[0],o[1],y,V),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;a.isolated||(0,n.info)("TODO: Support non-isolated groups."),a.knockout&&(0,n.warn)("Knockout groups not supported.");const y=(0,i.getCurrentTransform)(o);if(a.matrix&&o.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let V=n.Util.getAxialAlignedBoundingBox(a.bbox,(0,i.getCurrentTransform)(o));const U=[0,0,o.canvas.width,o.canvas.height];V=n.Util.intersect(V,U)||[0,0,0,0];const Y=Math.floor(V[0]),Q=Math.floor(V[1]);let ot=Math.max(Math.ceil(V[2])-Y,1),w=Math.max(Math.ceil(V[3])-Q,1),I=1,G=1;ot>m&&(I=ot/m,ot=m),w>m&&(G=w/m,w=m),this.current.startNewPathAndClipBox([0,0,ot,w]);let J="groupAt"+this.groupLevel;a.smask&&(J+="_smask_"+this.smaskCounter++%2);const lt=this.cachedCanvases.getCanvas(J,ot,w),dt=lt.context;dt.scale(1/I,1/G),dt.translate(-Y,-Q),dt.transform(...y),a.smask?this.smaskStack.push({canvas:lt.canvas,context:dt,offsetX:Y,offsetY:Q,scaleX:I,scaleY:G,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(Y,Q),o.scale(I,G),o.save()),f(o,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,y=this.groupStack.pop();if(this.ctx=y,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const V=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...V);const U=n.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],V);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(a,o,y,V,U){if(ht(this,S,Ve).call(this),b(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const Y=o[2]-o[0],Q=o[3]-o[1];if(U&&this.annotationCanvasMap){y=y.slice(),y[4]-=o[0],y[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=Y,o[3]=Q;const[ot,w]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,G=Math.ceil(Y*this.outputScaleX*I),J=Math.ceil(Q*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(G,J);const{canvas:lt,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(a,lt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(ot,0,0,-w,0,Q*w),b(this.ctx)}else b(this.ctx),this.ctx.rect(o[0],o[1],Y,Q),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...y),this.transform(...V)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ht(this,at,ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const o=a.count;a=this.getObject(a.data,a),a.count=o;const y=this.ctx,V=this.processingType3;if(V&&(V.compiled===void 0&&(V.compiled=T(a)),V.compiled)){V.compiled(y);return}const U=this._createMaskCanvas(a),Y=U.canvas;y.save(),y.setTransform(1,0,0,1,0,0),y.drawImage(Y,U.offsetX,U.offsetY),y.restore(),this.compose()}paintImageMaskXObjectRepeat(a,o,y=0,V=0,U,Y){if(!this.contentVisible)return;a=this.getObject(a.data,a);const Q=this.ctx;Q.save();const ot=(0,i.getCurrentTransform)(Q);Q.transform(o,y,V,U,0,0);const w=this._createMaskCanvas(a);Q.setTransform(1,0,0,1,w.offsetX-ot[4],w.offsetY-ot[5]);for(let I=0,G=Y.length;I<G;I+=2){const J=n.Util.transform(ot,[o,y,V,U,Y[I],Y[I+1]]),[lt,dt]=n.Util.applyTransform([0,0],J);Q.drawImage(w.canvas,lt,dt)}Q.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const o=this.ctx,y=this.current.fillColor,V=this.current.patternFill;for(const U of a){const{data:Y,width:Q,height:ot,transform:w}=U,I=this.cachedCanvases.getCanvas("maskCanvas",Q,ot),G=I.context;G.save();const J=this.getObject(Y,U);E(G,J),G.globalCompositeOperation="source-in",G.fillStyle=V?y.getPattern(G,this,(0,i.getCurrentTransformInverse)(o),l.PathType.FILL):y,G.fillRect(0,0,Q,ot),G.restore(),o.save(),o.transform(...w),o.scale(1,-1),_(o,I.canvas,0,0,Q,ot,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const o=this.getObject(a);if(!o){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(a,o,y,V){if(!this.contentVisible)return;const U=this.getObject(a);if(!U){(0,n.warn)("Dependent image isn't ready yet");return}const Y=U.width,Q=U.height,ot=[];for(let w=0,I=V.length;w<I;w+=2)ot.push({transform:[o,0,0,y,V[w],V[w+1]],x:0,y:0,w:Y,h:Q});this.paintInlineImageXObjectGroup(U,ot)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:o,width:y,height:V}=a,U=this.cachedCanvases.getCanvas("inlineImage",y,V),Y=U.context;return Y.filter=this.current.transferMaps,Y.drawImage(o,0,0),Y.filter="none",U.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const o=a.width,y=a.height,V=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Q}=V;Q!=="none"&&Q!==""&&(V.filter="none")}V.scale(1/o,-1/y);let U;if(a.bitmap)U=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)U=a;else{const ot=this.cachedCanvases.getCanvas("inlineImage",o,y).context;B(ot,a),U=this.applyTransferMapsToCanvas(ot)}const Y=this._scaleImage(U,(0,i.getCurrentTransformInverse)(V));V.imageSmoothingEnabled=$((0,i.getCurrentTransform)(V),a.interpolate),_(V,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-y,o,y),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,o){if(!this.contentVisible)return;const y=this.ctx;let V;if(a.bitmap)V=a.bitmap;else{const U=a.width,Y=a.height,ot=this.cachedCanvases.getCanvas("inlineImage",U,Y).context;B(ot,a),V=this.applyTransferMapsToCanvas(ot)}for(const U of o)y.save(),y.transform(...U.transform),y.scale(1,-1),_(y,V,U.x,U.y,U.w,U.h,0,-1,1,1),y.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,o){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,o){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const y=this.ctx;this.pendingClip&&(o||(this.pendingClip===ut?y.clip("evenodd"):y.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),y.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,i.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const o=Math.abs(a[0]*a[3]-a[2]*a[1]),y=Math.hypot(a[0],a[2]),V=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(y,V)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:o,b:y,c:V,d:U}=this.ctx.getTransform();let Y,Q;if(y===0&&V===0){const ot=Math.abs(o),w=Math.abs(U);if(ot===w)if(a===0)Y=Q=1/ot;else{const I=ot*a;Y=Q=I<1?1/I:1}else if(a===0)Y=1/ot,Q=1/w;else{const I=ot*a,G=w*a;Y=I<1?1/I:1,Q=G<1?1/G:1}}else{const ot=Math.abs(o*U-y*V),w=Math.hypot(o,y),I=Math.hypot(V,U);if(a===0)Y=I/ot,Q=w/ot;else{const G=a*ot;Y=I>G?I/G:1,Q=w>G?w/G:1}}this._cachedScaleForStroking[0]=Y,this._cachedScaleForStroking[1]=Q}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:o}=this,{lineWidth:y}=this.current,[V,U]=this.getScaleForStroking();if(o.lineWidth=y||1,V===1&&U===1){o.stroke();return}const Y=o.getLineDash();if(a&&o.save(),o.scale(V,U),Y.length>0){const Q=Math.max(V,U);o.setLineDash(Y.map(ot=>ot/Q)),o.lineDashOffset/=Q}o.stroke(),a&&o.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};S=new WeakSet,Ve=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},at=new WeakSet,ze=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const o=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let _t=wt;e.CanvasGraphics=_t;for(const R in n.OPS)_t.prototype[R]!==void 0&&(_t.prototype[n.OPS[R]]=_t.prototype[R])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=P;var n=s(1),i=s(6);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=l;function c(T,x){if(!x)return;const B=x[2]-x[0],E=x[3]-x[1],f=new Path2D;f.rect(x[0],x[1],B,E),T.clip(f)}class L{constructor(){this.constructor===L&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class g extends L{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let B;this._type==="axial"?B=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(B=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)B.addColorStop(E[0],E[1]);return B}getPattern(x,B,E,f){let b;if(f===l.STROKE||f===l.FILL){const N=B.current.getClippedPathBoundingBox(f,(0,i.getCurrentTransform)(x))||[0,0,0,0],v=Math.ceil(N[2]-N[0])||1,d=Math.ceil(N[3]-N[1])||1,j=B.cachedCanvases.getCanvas("pattern",v,d,!0),k=j.context;k.clearRect(0,0,k.canvas.width,k.canvas.height),k.beginPath(),k.rect(0,0,k.canvas.width,k.canvas.height),k.translate(-N[0],-N[1]),E=n.Util.transform(E,[1,0,0,1,N[0],N[1]]),k.transform(...B.baseTransform),this.matrix&&k.transform(...this.matrix),c(k,this._bbox),k.fillStyle=this._createGradient(k),k.fill(),b=x.createPattern(j.canvas,"no-repeat");const $=new DOMMatrix(E);b.setTransform($)}else c(x,this._bbox),b=this._createGradient(x);return b}}function m(T,x,B,E,f,b,N,v){const d=x.coords,j=x.colors,k=T.data,$=T.width*4;let nt;d[B+1]>d[E+1]&&(nt=B,B=E,E=nt,nt=b,b=N,N=nt),d[E+1]>d[f+1]&&(nt=E,E=f,f=nt,nt=N,N=v,v=nt),d[B+1]>d[E+1]&&(nt=B,B=E,E=nt,nt=b,b=N,N=nt);const H=(d[B]+x.offsetX)*x.scaleX,it=(d[B+1]+x.offsetY)*x.scaleY,ut=(d[E]+x.offsetX)*x.scaleX,_t=(d[E+1]+x.offsetY)*x.scaleY,S=(d[f]+x.offsetX)*x.scaleX,X=(d[f+1]+x.offsetY)*x.scaleY;if(it>=X)return;const at=j[b],At=j[b+1],wt=j[b+2],R=j[N],a=j[N+1],o=j[N+2],y=j[v],V=j[v+1],U=j[v+2],Y=Math.round(it),Q=Math.round(X);let ot,w,I,G,J,lt,dt,Ct;for(let Et=Y;Et<=Q;Et++){if(Et<_t){const et=Et<it?0:(it-Et)/(it-_t);ot=H-(H-ut)*et,w=at-(at-R)*et,I=At-(At-a)*et,G=wt-(wt-o)*et}else{let et;Et>X?et=1:_t===X?et=0:et=(_t-Et)/(_t-X),ot=ut-(ut-S)*et,w=R-(R-y)*et,I=a-(a-V)*et,G=o-(o-U)*et}let mt;Et<it?mt=0:Et>X?mt=1:mt=(it-Et)/(it-X),J=H-(H-S)*mt,lt=at-(at-y)*mt,dt=At-(At-V)*mt,Ct=wt-(wt-U)*mt;const St=Math.round(Math.min(ot,J)),vt=Math.round(Math.max(ot,J));let tt=$*Et+St*4;for(let et=St;et<=vt;et++)mt=(ot-et)/(ot-J),mt<0?mt=0:mt>1&&(mt=1),k[tt++]=w-(w-lt)*mt|0,k[tt++]=I-(I-dt)*mt|0,k[tt++]=G-(G-Ct)*mt|0,k[tt++]=255}}function u(T,x,B){const E=x.coords,f=x.colors;let b,N;switch(x.type){case"lattice":const v=x.verticesPerRow,d=Math.floor(E.length/v)-1,j=v-1;for(b=0;b<d;b++){let k=b*v;for(let $=0;$<j;$++,k++)m(T,B,E[k],E[k+1],E[k+v],f[k],f[k+1],f[k+v]),m(T,B,E[k+v+1],E[k+1],E[k+v],f[k+v+1],f[k+1],f[k+v])}break;case"triangles":for(b=0,N=E.length;b<N;b+=3)m(T,B,E[b],E[b+1],E[b+2],f[b],f[b+1],f[b+2]);break;default:throw new Error("illegal figure")}}class F extends L{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,B,E){const v=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-v,k=Math.ceil(this._bounds[3])-d,$=Math.min(Math.ceil(Math.abs(j*x[0]*1.1)),3e3),nt=Math.min(Math.ceil(Math.abs(k*x[1]*1.1)),3e3),H=j/$,it=k/nt,ut={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-d,scaleX:1/H,scaleY:1/it},_t=$+2*2,S=nt+2*2,X=E.getCanvas("mesh",_t,S,!1),at=X.context,At=at.createImageData($,nt);if(B){const R=At.data;for(let a=0,o=R.length;a<o;a+=4)R[a]=B[0],R[a+1]=B[1],R[a+2]=B[2],R[a+3]=255}for(const R of this._figures)u(At,R,ut);return at.putImageData(At,2,2),{canvas:X.canvas,offsetX:v-2*H,offsetY:d-2*it,scaleX:H,scaleY:it}}getPattern(x,B,E,f){c(x,this._bbox);let b;if(f===l.SHADING)b=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(x));else if(b=n.Util.singularValueDecompose2dScale(B.baseTransform),this.matrix){const v=n.Util.singularValueDecompose2dScale(this.matrix);b=[b[0]*v[0],b[1]*v[1]]}const N=this._createMeshCanvas(b,f===l.SHADING?null:this._background,B.cachedCanvases);return f!==l.SHADING&&(x.setTransform(...B.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(N.offsetX,N.offsetY),x.scale(N.scaleX,N.scaleY),x.createPattern(N.canvas,"no-repeat")}}class O extends L{getPattern(){return"hotpink"}}function P(T){switch(T[0]){case"RadialAxial":return new g(T);case"Mesh":return new F(T);case"Dummy":return new O}throw new Error(`Unknown IR type: ${T[0]}`)}const M={COLORED:1,UNCOLORED:2},_=class _{constructor(x,B,E,f,b){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=B,this.ctx=E,this.canvasGraphicsFactory=f,this.baseTransform=b}createPatternCanvas(x){const B=this.operatorList,E=this.bbox,f=this.xstep,b=this.ystep,N=this.paintType,v=this.tilingType,d=this.color,j=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+v);const k=E[0],$=E[1],nt=E[2],H=E[3],it=n.Util.singularValueDecompose2dScale(this.matrix),ut=n.Util.singularValueDecompose2dScale(this.baseTransform),_t=[it[0]*ut[0],it[1]*ut[1]],S=this.getSizeAndScale(f,this.ctx.canvas.width,_t[0]),X=this.getSizeAndScale(b,this.ctx.canvas.height,_t[1]),at=x.cachedCanvases.getCanvas("pattern",S.size,X.size,!0),At=at.context,wt=j.createCanvasGraphics(At);wt.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(wt,N,d);let R=k,a=$,o=nt,y=H;return k<0&&(R=0,o+=Math.abs(k)),$<0&&(a=0,y+=Math.abs($)),At.translate(-(S.scale*R),-(X.scale*a)),wt.transform(S.scale,0,0,X.scale,0,0),At.save(),this.clipBbox(wt,R,a,o,y),wt.baseTransform=(0,i.getCurrentTransform)(wt.ctx),wt.executeOperatorList(B),wt.endDrawing(),{canvas:at.canvas,scaleX:S.scale,scaleY:X.scale,offsetX:R,offsetY:a}}getSizeAndScale(x,B,E){x=Math.abs(x);const f=Math.max(_.MAX_PATTERN_SIZE,B);let b=Math.ceil(x*E);return b>=f?b=f:E=b/x,{scale:E,size:b}}clipBbox(x,B,E,f,b){const N=f-B,v=b-E;x.ctx.rect(B,E,N,v),x.current.updateRectMinMax((0,i.getCurrentTransform)(x.ctx),[B,E,f,b]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,B,E){const f=x.ctx,b=x.current;switch(B){case M.COLORED:const N=this.ctx;f.fillStyle=N.fillStyle,f.strokeStyle=N.strokeStyle,b.fillColor=N.fillStyle,b.strokeColor=N.strokeStyle;break;case M.UNCOLORED:const v=n.Util.makeHexColor(E[0],E[1],E[2]);f.fillStyle=v,f.strokeStyle=v,b.fillColor=v,b.strokeColor=v;break;default:throw new n.FormatError(`Unsupported paint type: ${B}`)}}getPattern(x,B,E,f){let b=E;f!==l.SHADING&&(b=n.Util.transform(b,B.baseTransform),this.matrix&&(b=n.Util.transform(b,this.matrix)));const N=this.createPatternCanvas(B);let v=new DOMMatrix(b);v=v.translate(N.offsetX,N.offsetY),v=v.scale(1/N.scaleX,1/N.scaleY);const d=x.createPattern(N.canvas,"repeat");return d.setTransform(v),d}};Jt(_,"MAX_PATTERN_SIZE",3e3);let C=_;e.TilingPattern=C},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=l,e.convertToRGBA=i,e.grayToRGBA=L;var n=s(1);function i(g){switch(g.kind){case n.ImageKind.GRAYSCALE_1BPP:return l(g);case n.ImageKind.RGB_24BPP:return c(g)}return null}function l({src:g,srcPos:m=0,dest:u,width:F,height:O,nonBlackColor:P=4294967295,inverseDecode:M=!1}){const C=n.FeatureTest.isLittleEndian?4278190080:255,[_,T]=M?[P,C]:[C,P],x=F>>3,B=F&7,E=g.length;u=new Uint32Array(u.buffer);let f=0;for(let b=0;b<O;b++){for(const v=m+x;m<v;m++){const d=m<E?g[m]:255;u[f++]=d&128?T:_,u[f++]=d&64?T:_,u[f++]=d&32?T:_,u[f++]=d&16?T:_,u[f++]=d&8?T:_,u[f++]=d&4?T:_,u[f++]=d&2?T:_,u[f++]=d&1?T:_}if(B===0)continue;const N=m<E?g[m++]:255;for(let v=0;v<B;v++)u[f++]=N&1<<7-v?T:_}return{srcPos:m,destPos:f}}function c({src:g,srcPos:m=0,dest:u,destPos:F=0,width:O,height:P}){let M=0;const C=g.length>>2,_=new Uint32Array(g.buffer,m,C);if(n.FeatureTest.isLittleEndian){for(;M<C-2;M+=3,F+=4){const T=_[M],x=_[M+1],B=_[M+2];u[F]=T|4278190080,u[F+1]=T>>>24|x<<8|4278190080,u[F+2]=x>>>16|B<<16|4278190080,u[F+3]=B>>>8|4278190080}for(let T=M*4,x=g.length;T<x;T+=3)u[F++]=g[T]|g[T+1]<<8|g[T+2]<<16|4278190080}else{for(;M<C-2;M+=3,F+=4){const T=_[M],x=_[M+1],B=_[M+2];u[F]=T|255,u[F+1]=T<<24|x>>>8|255,u[F+2]=x<<16|B>>>16|255,u[F+3]=B<<8|255}for(let T=M*4,x=g.length;T<x;T+=3)u[F++]=g[T]<<24|g[T+1]<<16|g[T+2]<<8|255}return{srcPos:m,destPos:F}}function L(g,m){if(n.FeatureTest.isLittleEndian)for(let u=0,F=g.length;u<F;u++)m[u]=g[u]*65793|4278190080;else for(let u=0,F=g.length;u<F;u++)m[u]=g[u]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var g,wn,u,Tn,O,Ce;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},l={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(M){switch(M instanceof Error||typeof M=="object"&&M!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),M.name){case"AbortException":return new n.AbortException(M.message);case"MissingPDFException":return new n.MissingPDFException(M.message);case"PasswordException":return new n.PasswordException(M.message,M.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(M.message,M.status);case"UnknownErrorException":return new n.UnknownErrorException(M.message,M.details);default:return new n.UnknownErrorException(M.message,M.toString())}}class L{constructor(C,_,T){K(this,g);K(this,u);K(this,O);this.sourceName=C,this.targetName=_,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const B=x.data;if(B.targetName!==this.sourceName)return;if(B.stream){ht(this,u,Tn).call(this,B);return}if(B.callback){const f=B.callbackId,b=this.callbackCapabilities[f];if(!b)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],B.callback===i.DATA)b.resolve(B.data);else if(B.callback===i.ERROR)b.reject(c(B.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[B.action];if(!E)throw new Error(`Unknown action from worker: ${B.action}`);if(B.callbackId){const f=this.sourceName,b=B.sourceName;new Promise(function(N){N(E(B.data))}).then(function(N){T.postMessage({sourceName:f,targetName:b,callback:i.DATA,callbackId:B.callbackId,data:N})},function(N){T.postMessage({sourceName:f,targetName:b,callback:i.ERROR,callbackId:B.callbackId,reason:c(N)})});return}if(B.streamId){ht(this,g,wn).call(this,B);return}E(B.data)},T.addEventListener("message",this._onComObjOnMessage)}on(C,_){const T=this.actionHandler;if(T[C])throw new Error(`There is already an actionName called "${C}"`);T[C]=_}send(C,_,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:_},T)}sendWithPromise(C,_,T){const x=this.callbackId++,B=new n.PromiseCapability;this.callbackCapabilities[x]=B;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:x,data:_},T)}catch(E){B.reject(E)}return B.promise}sendWithStream(C,_,T,x){const B=this.streamId++,E=this.sourceName,f=this.targetName,b=this.comObj;return new ReadableStream({start:N=>{const v=new n.PromiseCapability;return this.streamControllers[B]={controller:N,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:E,targetName:f,action:C,streamId:B,data:_,desiredSize:N.desiredSize},x),v.promise},pull:N=>{const v=new n.PromiseCapability;return this.streamControllers[B].pullCall=v,b.postMessage({sourceName:E,targetName:f,stream:l.PULL,streamId:B,desiredSize:N.desiredSize}),v.promise},cancel:N=>{(0,n.assert)(N instanceof Error,"cancel must have a valid reason");const v=new n.PromiseCapability;return this.streamControllers[B].cancelCall=v,this.streamControllers[B].isClosed=!0,b.postMessage({sourceName:E,targetName:f,stream:l.CANCEL,streamId:B,reason:c(N)}),v.promise}},T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,wn=function(C){const _=C.streamId,T=this.sourceName,x=C.sourceName,B=this.comObj,E=this,f=this.actionHandler[C.action],b={enqueue(N,v=1,d){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=v,j>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),B.postMessage({sourceName:T,targetName:x,stream:l.ENQUEUE,streamId:_,chunk:N},d)},close(){this.isCancelled||(this.isCancelled=!0,B.postMessage({sourceName:T,targetName:x,stream:l.CLOSE,streamId:_}),delete E.streamSinks[_])},error(N){(0,n.assert)(N instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,B.postMessage({sourceName:T,targetName:x,stream:l.ERROR,streamId:_,reason:c(N)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[_]=b,new Promise(function(N){N(f(C.data,b))}).then(function(){B.postMessage({sourceName:T,targetName:x,stream:l.START_COMPLETE,streamId:_,success:!0})},function(N){B.postMessage({sourceName:T,targetName:x,stream:l.START_COMPLETE,streamId:_,reason:c(N)})})},u=new WeakSet,Tn=function(C){const _=C.streamId,T=this.sourceName,x=C.sourceName,B=this.comObj,E=this.streamControllers[_],f=this.streamSinks[_];switch(C.stream){case l.START_COMPLETE:C.success?E.startCall.resolve():E.startCall.reject(c(C.reason));break;case l.PULL_COMPLETE:C.success?E.pullCall.resolve():E.pullCall.reject(c(C.reason));break;case l.PULL:if(!f){B.postMessage({sourceName:T,targetName:x,stream:l.PULL_COMPLETE,streamId:_,success:!0});break}f.desiredSize<=0&&C.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=C.desiredSize,new Promise(function(b){var N;b((N=f.onPull)==null?void 0:N.call(f))}).then(function(){B.postMessage({sourceName:T,targetName:x,stream:l.PULL_COMPLETE,streamId:_,success:!0})},function(b){B.postMessage({sourceName:T,targetName:x,stream:l.PULL_COMPLETE,streamId:_,reason:c(b)})});break;case l.ENQUEUE:if((0,n.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(C.chunk);break;case l.CLOSE:if((0,n.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),ht(this,O,Ce).call(this,E,_);break;case l.ERROR:(0,n.assert)(E,"error should have stream controller"),E.controller.error(c(C.reason)),ht(this,O,Ce).call(this,E,_);break;case l.CANCEL_COMPLETE:C.success?E.cancelCall.resolve():E.cancelCall.reject(c(C.reason)),ht(this,O,Ce).call(this,E,_);break;case l.CANCEL:if(!f)break;new Promise(function(b){var N;b((N=f.onCancel)==null?void 0:N.call(f,c(C.reason)))}).then(function(){B.postMessage({sourceName:T,targetName:x,stream:l.CANCEL_COMPLETE,streamId:_,success:!0})},function(b){B.postMessage({sourceName:T,targetName:x,stream:l.CANCEL_COMPLETE,streamId:_,reason:c(b)})}),f.sinkCapability.reject(c(C.reason)),f.isCancelled=!0,delete this.streamSinks[_];break;default:throw new Error("Unexpected stream case")}},O=new WeakSet,Ce=async function(C,_){var T,x,B;await Promise.allSettled([(T=C.startCall)==null?void 0:T.promise,(x=C.pullCall)==null?void 0:x.promise,(B=C.cancelCall)==null?void 0:B.promise]),delete this.streamControllers[_]},e.MessageHandler=L},(t,e,s)=>{var l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:g,rawData:m}){K(this,l,void 0);K(this,c,void 0);yt(this,l,g),yt(this,c,m)}getRaw(){return r(this,c)}get(g){return r(this,l).get(g)??null}getAll(){return(0,n.objectFromMap)(r(this,l))}has(g){return r(this,l).has(g)}}l=new WeakMap,c=new WeakMap,e.Metadata=i},(t,e,s)=>{var g,m,u,F,O,P,$e;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),i=s(8);const l=Symbol("INTERNAL");class c{constructor(_,T){K(this,g,!0);this.name=_,this.intent=T}get visible(){return r(this,g)}_setVisible(_,T){_!==l&&(0,n.unreachable)("Internal method `_setVisible` called."),yt(this,g,T)}}g=new WeakMap;class L{constructor(_){K(this,P);K(this,m,null);K(this,u,new Map);K(this,F,null);K(this,O,null);if(this.name=null,this.creator=null,_!==null){this.name=_.name,this.creator=_.creator,yt(this,O,_.order);for(const T of _.groups)r(this,u).set(T.id,new c(T.name,T.intent));if(_.baseState==="OFF")for(const T of r(this,u).values())T._setVisible(l,!1);for(const T of _.on)r(this,u).get(T)._setVisible(l,!0);for(const T of _.off)r(this,u).get(T)._setVisible(l,!1);yt(this,F,this.getHash())}}isVisible(_){if(r(this,u).size===0)return!0;if(!_)return(0,n.warn)("Optional content group not defined."),!0;if(_.type==="OCG")return r(this,u).has(_.id)?r(this,u).get(_.id).visible:((0,n.warn)(`Optional content group not found: ${_.id}`),!0);if(_.type==="OCMD"){if(_.expression)return ht(this,P,$e).call(this,_.expression);if(!_.policy||_.policy==="AnyOn"){for(const T of _.ids){if(!r(this,u).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(r(this,u).get(T).visible)return!0}return!1}else if(_.policy==="AllOn"){for(const T of _.ids){if(!r(this,u).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!r(this,u).get(T).visible)return!1}return!0}else if(_.policy==="AnyOff"){for(const T of _.ids){if(!r(this,u).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!r(this,u).get(T).visible)return!0}return!1}else if(_.policy==="AllOff"){for(const T of _.ids){if(!r(this,u).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(r(this,u).get(T).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${_.policy}.`),!0}return(0,n.warn)(`Unknown group type ${_.type}.`),!0}setVisibility(_,T=!0){if(!r(this,u).has(_)){(0,n.warn)(`Optional content group not found: ${_}`);return}r(this,u).get(_)._setVisible(l,!!T),yt(this,m,null)}get hasInitialVisibility(){return r(this,F)===null||this.getHash()===r(this,F)}getOrder(){return r(this,u).size?r(this,O)?r(this,O).slice():[...r(this,u).keys()]:null}getGroups(){return r(this,u).size>0?(0,n.objectFromMap)(r(this,u)):null}getGroup(_){return r(this,u).get(_)||null}getHash(){if(r(this,m)!==null)return r(this,m);const _=new i.MurmurHash3_64;for(const[T,x]of r(this,u))_.update(`${T}:${x.visible}`);return yt(this,m,_.hexdigest())}}m=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakSet,$e=function(_){const T=_.length;if(T<2)return!0;const x=_[0];for(let B=1;B<T;B++){const E=_[B];let f;if(Array.isArray(E))f=ht(this,P,$e).call(this,E);else if(r(this,u).has(E))f=r(this,u).get(E).visible;else return(0,n.warn)(`Optional content group not found: ${E}`),!0;switch(x){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return x==="And"},e.OptionalContentConfig=L},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class l{constructor({length:m,initialData:u,progressiveDone:F=!1,contentDispositionFilename:O=null,disableRange:P=!1,disableStream:M=!1},C){if((0,n.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=F,this._contentDispositionFilename=O,(u==null?void 0:u.length)>0){const _=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;this._queuedChunks.push(_)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!M,this._isRangeSupported=!P,this._contentLength=m,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((_,T)=>{this._onReceiveData({begin:_,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((_,T)=>{this._onProgress({loaded:_,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(_=>{this._onReceiveData({chunk:_})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:m,chunk:u}){const F=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(F):this._queuedChunks.push(F);else{const O=this._rangeReaders.some(function(P){return P._begin!==m?!1:(P._enqueue(F),!0)});(0,n.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var u,F,O,P;m.total===void 0?(F=(u=this._rangeReaders[0])==null?void 0:u.onProgress)==null||F.call(u,{loaded:m.loaded}):(P=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||P.call(O,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const u=this._rangeReaders.indexOf(m);u>=0&&this._rangeReaders.splice(u,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new c(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,u){if(u<=this._progressiveDataLength)return null;const F=new L(this,m,u);return this._pdfDataRangeTransport.requestDataRange(m,u),this._rangeReaders.push(F),F}cancelAllRequests(m){var u;(u=this._fullRequestReader)==null||u.cancel(m);for(const F of this._rangeReaders.slice(0))F.cancel(m);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=l;class c{constructor(m,u,F=!1,O=null){this._stream=m,this._done=F||!1,this._filename=(0,i.isPdfFile)(O)?O:null,this._queuedChunks=u||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new n.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class L{constructor(m,u,F){this._stream=m,this._begin=u,this._end=F,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new n.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(20);function l(F,O,P){return{method:"GET",headers:F,signal:P.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function c(F){const O=new Headers;for(const P in F){const M=F[P];M!==void 0&&O.append(P,M)}return O}function L(F){return F instanceof Uint8Array?F.buffer:F instanceof ArrayBuffer?F:((0,n.warn)(`getArrayBuffer - unexpected data format: ${F}`),new Uint8Array(F).buffer)}class g{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(O,P){if(P<=this._progressiveDataLength)return null;const M=new u(this,O,P);return this._rangeRequestReaders.push(M),M}cancelAllRequests(O){var P;(P=this._fullRequestReader)==null||P.cancel(O);for(const M of this._rangeRequestReaders.slice(0))M.cancel(O)}}e.PDFFetchStream=g;class m{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const P=O.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=new n.PromiseCapability,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=c(this._stream.httpHeaders);const M=P.url;fetch(M,l(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,i.validateResponseStatus)(C.status))throw(0,i.createResponseStatusError)(C.status,M);this._reader=C.body.getReader(),this._headersCapability.resolve();const _=B=>C.headers.get(B),{allowRangeRequests:T,suggestedLength:x}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=x||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;await this._headersCapability.promise;const{value:O,done:P}=await this._reader.read();return P?{value:O,done:P}:(this._loaded+=O.byteLength,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded,total:this._contentLength}),{value:L(O),done:!1})}cancel(O){var P;(P=this._reader)==null||P.cancel(O),this._abortController.abort()}}class u{constructor(O,P,M){this._stream=O,this._reader=null,this._loaded=0;const C=O.source;this._withCredentials=C.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!C.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${M-1}`);const _=C.url;fetch(_,l(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,_);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;await this._readCapability.promise;const{value:O,done:P}=await this._reader.read();return P?{value:O,done:P}:(this._loaded+=O.byteLength,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded}),{value:L(O),done:!1})}cancel(O){var P;(P=this._reader)==null||P.cancel(O),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=L,e.validateRangeRequestCapabilities=c,e.validateResponseStatus=m;var n=s(1),i=s(21),l=s(6);function c({getResponseHeader:u,isHttp:F,rangeChunkSize:O,disableRange:P}){const M={allowRangeRequests:!1,suggestedLength:void 0},C=parseInt(u("Content-Length"),10);return!Number.isInteger(C)||(M.suggestedLength=C,C<=2*O)||P||!F||u("Accept-Ranges")!=="bytes"||(u("Content-Encoding")||"identity")!=="identity"||(M.allowRangeRequests=!0),M}function L(u){const F=u("Content-Disposition");if(F){let O=(0,i.getFilenameFromContentDispositionHeader)(F);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,l.isPdfFile)(O))return O}return null}function g(u,F){return u===404||u===0&&F.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+F+'".'):new n.UnexpectedResponseException(`Unexpected server response (${u}) while retrieving PDF "${F}".`,u)}function m(u){return u===200||u===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(l){let c=!0,L=g("filename\\*","i").exec(l);if(L){L=L[1];let C=O(L);return C=unescape(C),C=P(C),C=M(C),u(C)}if(L=F(l),L){const C=M(L);return u(C)}if(L=g("filename","i").exec(l),L){L=L[1];let C=O(L);return C=M(C),u(C)}function g(C,_){return new RegExp("(?:^|;)\\s*"+C+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function m(C,_){if(C){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const T=new TextDecoder(C,{fatal:!0}),x=(0,n.stringToBytes)(_);_=T.decode(x),c=!1}catch{}}return _}function u(C){return c&&/[\x80-\xff]/.test(C)&&(C=m("utf-8",C),c&&(C=m("iso-8859-1",C))),C}function F(C){const _=[];let T;const x=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=x.exec(C))!==null;){let[,E,f,b]=T;if(E=parseInt(E,10),E in _){if(E===0)break;continue}_[E]=[f,b]}const B=[];for(let E=0;E<_.length&&E in _;++E){let[f,b]=_[E];b=O(b),f&&(b=unescape(b),E===0&&(b=P(b))),B.push(b)}return B.join("")}function O(C){if(C.startsWith('"')){const _=C.slice(1).split('\\"');for(let T=0;T<_.length;++T){const x=_[T].indexOf('"');x!==-1&&(_[T]=_[T].slice(0,x),_.length=T+1),_[T]=_[T].replaceAll(/\\(.)/g,"$1")}C=_.join('"')}return C}function P(C){const _=C.indexOf("'");if(_===-1)return C;const T=C.slice(0,_),B=C.slice(_+1).replace(/^[^']*'/,"");return m(T,B)}function M(C){return!C.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(C)?C:C.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,T,x,B){if(x==="q"||x==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,f){return String.fromCharCode(parseInt(f,16))}),m(T,B);try{B=atob(B)}catch{}return m(T,B)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(20);const l=200,c=206;function L(O){const P=O.response;return typeof P!="string"?P:(0,n.stringToBytes)(P).buffer}class g{constructor(P,M={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,M,C){const _={begin:P,end:M};for(const T in C)_[T]=C[T];return this.request(_)}requestFull(P){return this.request(P)}request(P){const M=new XMLHttpRequest,C=this.currXhrId++,_=this.pendingRequests[C]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const x=this.httpHeaders[T];x!==void 0&&M.setRequestHeader(T,x)}return this.isHttp&&"begin"in P&&"end"in P?(M.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),_.expectedStatus=c):_.expectedStatus=l,M.responseType="arraybuffer",P.onError&&(M.onerror=function(T){P.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,C),M.onprogress=this.onProgress.bind(this,C),_.onHeadersReceived=P.onHeadersReceived,_.onDone=P.onDone,_.onError=P.onError,_.onProgress=P.onProgress,M.send(null),C}onProgress(P,M){var _;const C=this.pendingRequests[P];C&&((_=C.onProgress)==null||_.call(C,M))}onStateChange(P,M){var E,f,b;const C=this.pendingRequests[P];if(!C)return;const _=C.xhr;if(_.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),_.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],_.status===0&&this.isHttp){(E=C.onError)==null||E.call(C,_.status);return}const T=_.status||l;if(!(T===l&&C.expectedStatus===c)&&T!==C.expectedStatus){(f=C.onError)==null||f.call(C,_.status);return}const B=L(_);if(T===c){const N=_.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(N);C.onDone({begin:parseInt(v[1],10),chunk:B})}else B?C.onDone({begin:0,chunk:B}):(b=C.onError)==null||b.call(C,_.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const M=this.pendingRequests[P].xhr;delete this.pendingRequests[P],M.abort()}}class m{constructor(P){this._source=P,this._manager=new g(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const M=this._rangeRequestReaders.indexOf(P);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u(this._manager,this._source),this._fullRequestReader}getRangeReader(P,M){const C=new F(this._manager,P,M);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}cancelAllRequests(P){var M;(M=this._fullRequestReader)==null||M.cancel(P);for(const C of this._rangeRequestReaders.slice(0))C.cancel(P)}}e.PDFNetworkStream=m;class u{constructor(P,M){this._manager=P;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=P.requestFull(C),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,M=this._manager.getRequestXhr(P),C=x=>M.getResponseHeader(x),{allowRangeRequests:_,suggestedLength:T}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,i.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var M;(M=this.onProgress)==null||M.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new n.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class F{constructor(P,M,C){this._manager=P;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(M,C,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const M=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,i.createResponseStatusError)(P,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var M;this.isStreamingSupported||(M=this.onProgress)==null||M.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new n.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(20);const l=/^file:\/\/\/[a-zA-Z]:\//;function c(C){const _=require$$5,T=_.parse(C);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(C)?_.parse(`file:///${C}`):(T.host||(T.protocol="file:"),T)}class L{constructor(_){this.source=_,this.url=c(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new F(this),this._fullRequestReader}getRangeReader(_,T){if(T<=this._progressiveDataLength)return null;const x=this.isFsUrl?new M(this,_,T):new O(this,_,T);return this._rangeRequestReaders.push(x),x}cancelAllRequests(_){var T;(T=this._fullRequestReader)==null||T.cancel(_);for(const x of this._rangeRequestReaders.slice(0))x.cancel(_)}}e.PDFNodeStream=L;class g{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const T=_.source;this._contentLength=T.length,this._loaded=0,this._filename=null,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=_.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",T=>{this._error(T)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const T=_.source;this._isStreamingSupported=!T.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=_.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",T=>{this._error(T)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function u(C,_){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:_}}class F extends g{constructor(_){super(_);const T=x=>{if(x.statusCode===404){const b=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b,this._headersCapability.reject(b);return}this._headersCapability.resolve(),this._setReadableStream(x);const B=b=>this._readableStream.headers[b.toLowerCase()],{allowRangeRequests:E,suggestedLength:f}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=f||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(u(this._url,_.httpHeaders),T)}else{const x=require$$5;this._request=x.request(u(this._url,_.httpHeaders),T)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class O extends m{constructor(_,T,x){super(_),this._httpHeaders={};for(const E in _.httpHeaders){const f=_.httpHeaders[E];f!==void 0&&(this._httpHeaders[E]=f)}this._httpHeaders.Range=`bytes=${T}-${x-1}`;const B=E=>{if(E.statusCode===404){const f=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f;return}this._setReadableStream(E)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(u(this._url,this._httpHeaders),B)}else{const E=require$$5;this._request=E.request(u(this._url,this._httpHeaders),B)}this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class P extends g{constructor(_){super(_);let T=decodeURIComponent(this._url.path);l.test(this._url.href)&&(T=T.replace(/^\//,""));const x=require$$5;x.lstat(T,(B,E)=>{if(B){B.code==="ENOENT"&&(B=new n.MissingPDFException(`Missing PDF "${T}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=E.size,this._setReadableStream(x.createReadStream(T)),this._headersCapability.resolve()})}}class M extends m{constructor(_,T,x){super(_);let B=decodeURIComponent(this._url.path);l.test(this._url.href)&&(B=B.replace(/^\//,""));const E=require$$5;this._setReadableStream(E.createReadStream(B,{start:T,end:x-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),i=s(1);const l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",L="http://www.w3.org/1999/xlink",g=["butt","round","square"],m=["miter","round","bevel"],u=function(E,f="",b=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!b)return URL.createObjectURL(new Blob([E],{type:f}));const N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let v=`data:${f};base64,`;for(let d=0,j=E.length;d<j;d+=3){const k=E[d]&255,$=E[d+1]&255,nt=E[d+2]&255,H=k>>2,it=(k&3)<<4|$>>4,ut=d+1<j?($&15)<<2|nt>>6:64,_t=d+2<j?nt&63:64;v+=N[H]+N[it]+N[ut]+N[_t]}return v},F=function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),f=12,b=new Int32Array(256);for(let nt=0;nt<256;nt++){let H=nt;for(let it=0;it<8;it++)H=H&1?3988292384^H>>1&2147483647:H>>1&2147483647;b[nt]=H}function N(nt,H,it){let ut=-1;for(let _t=H;_t<it;_t++){const S=(ut^nt[_t])&255,X=b[S];ut=ut>>>8^X}return ut^-1}function v(nt,H,it,ut){let _t=ut;const S=H.length;it[_t]=S>>24&255,it[_t+1]=S>>16&255,it[_t+2]=S>>8&255,it[_t+3]=S&255,_t+=4,it[_t]=nt.charCodeAt(0)&255,it[_t+1]=nt.charCodeAt(1)&255,it[_t+2]=nt.charCodeAt(2)&255,it[_t+3]=nt.charCodeAt(3)&255,_t+=4,it.set(H,_t),_t+=H.length;const X=N(it,ut+4,_t);it[_t]=X>>24&255,it[_t+1]=X>>16&255,it[_t+2]=X>>8&255,it[_t+3]=X&255}function d(nt,H,it){let ut=1,_t=0;for(let S=H;S<it;++S)ut=(ut+(nt[S]&255))%65521,_t=(_t+ut)%65521;return _t<<16|ut}function j(nt){if(!i.isNodeJS)return k(nt);try{const H=parseInt(process.versions.node)>=8?nt:Buffer.from(nt),it=require$$5.deflateSync(H,{level:9});return it instanceof Uint8Array?it:new Uint8Array(it)}catch(H){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return k(nt)}function k(nt){let H=nt.length;const it=65535,ut=Math.ceil(H/it),_t=new Uint8Array(2+H+ut*5+4);let S=0;_t[S++]=120,_t[S++]=156;let X=0;for(;H>it;)_t[S++]=0,_t[S++]=255,_t[S++]=255,_t[S++]=0,_t[S++]=0,_t.set(nt.subarray(X,X+it),S),S+=it,X+=it,H-=it;_t[S++]=1,_t[S++]=H&255,_t[S++]=H>>8&255,_t[S++]=~H&65535&255,_t[S++]=(~H&65535)>>8&255,_t.set(nt.subarray(X),S),S+=nt.length-X;const at=d(nt,0,nt.length);return _t[S++]=at>>24&255,_t[S++]=at>>16&255,_t[S++]=at>>8&255,_t[S++]=at&255,_t}function $(nt,H,it,ut){const _t=nt.width,S=nt.height;let X,at,At;const wt=nt.data;switch(H){case i.ImageKind.GRAYSCALE_1BPP:at=0,X=1,At=_t+7>>3;break;case i.ImageKind.RGB_24BPP:at=2,X=8,At=_t*3;break;case i.ImageKind.RGBA_32BPP:at=6,X=8,At=_t*4;break;default:throw new Error("invalid format")}const R=new Uint8Array((1+At)*S);let a=0,o=0;for(let ot=0;ot<S;++ot)R[a++]=0,R.set(wt.subarray(o,o+At),a),o+=At,a+=At;if(H===i.ImageKind.GRAYSCALE_1BPP&&ut){a=0;for(let ot=0;ot<S;ot++){a++;for(let w=0;w<At;w++)R[a++]^=255}}const y=new Uint8Array([_t>>24&255,_t>>16&255,_t>>8&255,_t&255,S>>24&255,S>>16&255,S>>8&255,S&255,X,at,0,0,0]),V=j(R),U=E.length+f*3+y.length+V.length,Y=new Uint8Array(U);let Q=0;return Y.set(E,Q),Q+=E.length,v("IHDR",y,Y,Q),Q+=f+y.length,v("IDATA",V,Y,Q),Q+=f+V.length,v("IEND",new Uint8Array(0),Y,Q),u(Y,"image/png",it)}return function(H,it,ut){const _t=H.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:H.kind;return $(H,_t,it,ut)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(f,b){this.x=f,this.y=b}}function P(E){let f=[];const b=[];for(const N of E){if(N.fn==="save"){f.push({fnId:92,fn:"group",items:[]}),b.push(f),f=f.at(-1).items;continue}N.fn==="restore"?f=b.pop():f.push(N)}return f}function M(E){if(Number.isInteger(E))return E.toString();const f=E.toFixed(10);let b=f.length-1;if(f[b]!=="0")return f;do b--;while(f[b]==="0");return f.substring(0,f[b]==="."?b:b+1)}function C(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${M(E[0])} ${M(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const f=Math.acos(E[0])*180/Math.PI;return`rotate(${M(f)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${M(E[4])} ${M(E[5])})`;return`matrix(${M(E[0])} ${M(E[1])} ${M(E[2])} ${M(E[3])} ${M(E[4])} ${M(E[5])})`}let _=0,T=0,x=0;class B{constructor(f,b,N=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new O,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=f,this.objs=b,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!N,this._operatorIdMapping=[];for(const v in i.OPS)this._operatorIdMapping[i.OPS[v]]=v}getObject(f,b=null){return typeof f=="string"?f.startsWith("g_")?this.commonObjs.get(f):this.objs.get(f):b}save(){this.transformStack.push(this.transformMatrix);const f=this.current;this.extraStack.push(f),this.current=f.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(f){this.save(),this.executeOpTree(f),this.restore()}loadDependencies(f){const b=f.fnArray,N=f.argsArray;for(let v=0,d=b.length;v<d;v++)if(b[v]===i.OPS.dependency)for(const j of N[v]){const k=j.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(nt=>{k.get(j,nt)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(f,b,N,v,d,j){const k=[f,b,N,v,d,j];this.transformMatrix=i.Util.transform(this.transformMatrix,k),this.tgrp=null}getSVG(f,b){this.viewport=b;const N=this._initialize(b);return this.loadDependencies(f).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(f)),N))}convertOpList(f){const b=this._operatorIdMapping,N=f.argsArray,v=f.fnArray,d=[];for(let j=0,k=v.length;j<k;j++){const $=v[j];d.push({fnId:$,fn:b[$],args:N[j]})}return P(d)}executeOpTree(f){for(const b of f){const N=b.fn,v=b.fnId,d=b.args;switch(v|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(d);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(d[0],d[1]);break;case i.OPS.setFont:this.setFont(d);break;case i.OPS.showText:this.showText(d[0]);break;case i.OPS.showSpacedText:this.showText(d[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(d[0],d[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(d[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(d[0]);break;case i.OPS.setHScale:this.setHScale(d[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(d[0],d[1],d[2],d[3],d[4],d[5]);break;case i.OPS.setTextRise:this.setTextRise(d[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(d[0]);break;case i.OPS.setLineWidth:this.setLineWidth(d[0]);break;case i.OPS.setLineJoin:this.setLineJoin(d[0]);break;case i.OPS.setLineCap:this.setLineCap(d[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(d[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(d[0],d[1],d[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(d[0],d[1],d[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(d);break;case i.OPS.setFillColorN:this.setFillColorN(d);break;case i.OPS.shadingFill:this.shadingFill(d[0]);break;case i.OPS.setDash:this.setDash(d[0],d[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(d[0]);break;case i.OPS.setFlatness:this.setFlatness(d[0]);break;case i.OPS.setGState:this.setGState(d[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(d[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(d[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(d[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(d[0],d[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(d[0],d[1],d[2],d[3],d[4],d[5]);break;case i.OPS.constructPath:this.constructPath(d[0],d[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(b.items);break;default:(0,i.warn)(`Unimplemented operator ${N}`);break}}}setWordSpacing(f){this.current.wordSpacing=f}setCharSpacing(f){this.current.charSpacing=f}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(f,b,N,v,d,j){const k=this.current;k.textMatrix=k.lineMatrix=[f,b,N,v,d,j],k.textMatrixScale=Math.hypot(f,b),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${M(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",M(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.append(k.tspan)}beginText(){const f=this.current;f.x=f.lineX=0,f.y=f.lineY=0,f.textMatrix=i.IDENTITY_MATRIX,f.lineMatrix=i.IDENTITY_MATRIX,f.textMatrixScale=1,f.tspan=this.svgFactory.createElement("svg:tspan"),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtgrp=this.svgFactory.createElement("svg:g"),f.xcoords=[],f.ycoords=[]}moveText(f,b){const N=this.current;N.x=N.lineX+=f,N.y=N.lineY+=b,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${M(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",M(-N.y))}showText(f){const b=this.current,N=b.font,v=b.fontSize;if(v===0)return;const d=b.fontSizeScale,j=b.charSpacing,k=b.wordSpacing,$=b.fontDirection,nt=b.textHScale*$,H=N.vertical,it=H?1:-1,ut=N.defaultVMetrics,_t=v*b.fontMatrix[0];let S=0;for(const At of f){if(At===null){S+=$*k;continue}else if(typeof At=="number"){S+=it*At*v/1e3;continue}const wt=(At.isSpace?k:0)+j,R=At.fontChar;let a,o,y=At.width;if(H){let U;const Y=At.vmetric||ut;U=At.vmetric?Y[1]:y*.5,U=-U*_t;const Q=Y[2]*_t;y=Y?-Y[0]:y,a=U/d,o=(S+Q)/d}else a=S/d,o=0;(At.isInFont||N.missingFile)&&(b.xcoords.push(b.x+a),H&&b.ycoords.push(-b.y+o),b.tspan.textContent+=R);const V=H?y*_t-wt*$:y*_t+wt*$;S+=V}b.tspan.setAttributeNS(null,"x",b.xcoords.map(M).join(" ")),H?b.tspan.setAttributeNS(null,"y",b.ycoords.map(M).join(" ")):b.tspan.setAttributeNS(null,"y",M(-b.y)),H?b.y-=S:b.x+=S*nt,b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${M(b.fontSize)}px`),b.fontStyle!==l.fontStyle&&b.tspan.setAttributeNS(null,"font-style",b.fontStyle),b.fontWeight!==l.fontWeight&&b.tspan.setAttributeNS(null,"font-weight",b.fontWeight);const X=b.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(X===i.TextRenderingMode.FILL||X===i.TextRenderingMode.FILL_STROKE?(b.fillColor!==l.fillColor&&b.tspan.setAttributeNS(null,"fill",b.fillColor),b.fillAlpha<1&&b.tspan.setAttributeNS(null,"fill-opacity",b.fillAlpha)):b.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?b.tspan.setAttributeNS(null,"fill","transparent"):b.tspan.setAttributeNS(null,"fill","none"),X===i.TextRenderingMode.STROKE||X===i.TextRenderingMode.FILL_STROKE){const At=1/(b.textMatrixScale||1);this._setStrokeAttributes(b.tspan,At)}let at=b.textMatrix;b.textRise!==0&&(at=at.slice(),at[5]+=b.textRise),b.txtElement.setAttributeNS(null,"transform",`${C(at)} scale(${M(nt)}, -1)`),b.txtElement.setAttributeNS(c,"xml:space","preserve"),b.txtElement.append(b.tspan),b.txtgrp.append(b.txtElement),this._ensureTransformGroup().append(b.txtElement)}setLeadingMoveText(f,b){this.setLeading(-b),this.moveText(f,b)}addFontStyle(f){if(!f.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const b=u(f.data,f.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${f.loadedName}"; src: url(${b}); }
`}setFont(f){const b=this.current,N=this.commonObjs.get(f[0]);let v=f[1];b.font=N,this.embedFonts&&!N.missingFile&&!this.embeddedFonts[N.loadedName]&&(this.addFontStyle(N),this.embeddedFonts[N.loadedName]=N),b.fontMatrix=N.fontMatrix||i.FONT_IDENTITY_MATRIX;let d="normal";N.black?d="900":N.bold&&(d="bold");const j=N.italic?"italic":"normal";v<0?(v=-v,b.fontDirection=-1):b.fontDirection=1,b.fontSize=v,b.fontFamily=N.loadedName,b.fontWeight=d,b.fontStyle=j,b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"y",M(-b.y)),b.xcoords=[],b.ycoords=[]}endText(){var b;const f=this.current;f.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((b=f.txtElement)!=null&&b.hasChildNodes())&&(f.element=f.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(f){f>0&&(this.current.lineWidth=f)}setLineCap(f){this.current.lineCap=g[f]}setLineJoin(f){this.current.lineJoin=m[f]}setMiterLimit(f){this.current.miterLimit=f}setStrokeAlpha(f){this.current.strokeAlpha=f}setStrokeRGBColor(f,b,N){this.current.strokeColor=i.Util.makeHexColor(f,b,N)}setFillAlpha(f){this.current.fillAlpha=f}setFillRGBColor(f,b,N){this.current.fillColor=i.Util.makeHexColor(f,b,N),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(f){this.current.strokeColor=this._makeColorN_Pattern(f)}setFillColorN(f){this.current.fillColor=this._makeColorN_Pattern(f)}shadingFill(f){const{width:b,height:N}=this.viewport,v=i.Util.inverseTransform(this.transformMatrix),[d,j,k,$]=i.Util.getAxialAlignedBoundingBox([0,0,b,N],v),nt=this.svgFactory.createElement("svg:rect");nt.setAttributeNS(null,"x",d),nt.setAttributeNS(null,"y",j),nt.setAttributeNS(null,"width",k-d),nt.setAttributeNS(null,"height",$-j),nt.setAttributeNS(null,"fill",this._makeShadingPattern(f)),this.current.fillAlpha<1&&nt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(nt)}_makeColorN_Pattern(f){return f[0]==="TilingPattern"?this._makeTilingPattern(f):this._makeShadingPattern(f)}_makeTilingPattern(f){const b=f[1],N=f[2],v=f[3]||i.IDENTITY_MATRIX,[d,j,k,$]=f[4],nt=f[5],H=f[6],it=f[7],ut=`shading${x++}`,[_t,S,X,at]=i.Util.normalizeRect([...i.Util.applyTransform([d,j],v),...i.Util.applyTransform([k,$],v)]),[At,wt]=i.Util.singularValueDecompose2dScale(v),R=nt*At,a=H*wt,o=this.svgFactory.createElement("svg:pattern");o.setAttributeNS(null,"id",ut),o.setAttributeNS(null,"patternUnits","userSpaceOnUse"),o.setAttributeNS(null,"width",R),o.setAttributeNS(null,"height",a),o.setAttributeNS(null,"x",`${_t}`),o.setAttributeNS(null,"y",`${S}`);const y=this.svg,V=this.transformMatrix,U=this.current.fillColor,Y=this.current.strokeColor,Q=this.svgFactory.create(X-_t,at-S);if(this.svg=Q,this.transformMatrix=v,it===2){const ot=i.Util.makeHexColor(...b);this.current.fillColor=ot,this.current.strokeColor=ot}return this.executeOpTree(this.convertOpList(N)),this.svg=y,this.transformMatrix=V,this.current.fillColor=U,this.current.strokeColor=Y,o.append(Q.childNodes[0]),this.defs.append(o),`url(#${ut})`}_makeShadingPattern(f){switch(typeof f=="string"&&(f=this.objs.get(f)),f[0]){case"RadialAxial":const b=`shading${x++}`,N=f[3];let v;switch(f[1]){case"axial":const d=f[4],j=f[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",b),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",d[0]),v.setAttributeNS(null,"y1",d[1]),v.setAttributeNS(null,"x2",j[0]),v.setAttributeNS(null,"y2",j[1]);break;case"radial":const k=f[4],$=f[5],nt=f[6],H=f[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",b),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",$[0]),v.setAttributeNS(null,"cy",$[1]),v.setAttributeNS(null,"r",H),v.setAttributeNS(null,"fx",k[0]),v.setAttributeNS(null,"fy",k[1]),v.setAttributeNS(null,"fr",nt);break;default:throw new Error(`Unknown RadialAxial type: ${f[1]}`)}for(const d of N){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",d[0]),j.setAttributeNS(null,"stop-color",d[1]),v.append(j)}return this.defs.append(v),`url(#${b})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${f[0]}`)}}setDash(f,b){this.current.dashArray=f,this.current.dashPhase=b}constructPath(f,b){const N=this.current;let v=N.x,d=N.y,j=[],k=0;for(const $ of f)switch($|0){case i.OPS.rectangle:v=b[k++],d=b[k++];const nt=b[k++],H=b[k++],it=v+nt,ut=d+H;j.push("M",M(v),M(d),"L",M(it),M(d),"L",M(it),M(ut),"L",M(v),M(ut),"Z");break;case i.OPS.moveTo:v=b[k++],d=b[k++],j.push("M",M(v),M(d));break;case i.OPS.lineTo:v=b[k++],d=b[k++],j.push("L",M(v),M(d));break;case i.OPS.curveTo:v=b[k+4],d=b[k+5],j.push("C",M(b[k]),M(b[k+1]),M(b[k+2]),M(b[k+3]),M(v),M(d)),k+=6;break;case i.OPS.curveTo2:j.push("C",M(v),M(d),M(b[k]),M(b[k+1]),M(b[k+2]),M(b[k+3])),v=b[k+2],d=b[k+3],k+=4;break;case i.OPS.curveTo3:v=b[k+2],d=b[k+3],j.push("C",M(b[k]),M(b[k+1]),M(v),M(d),M(v),M(d)),k+=4;break;case i.OPS.closePath:j.push("Z");break}j=j.join(" "),N.path&&f.length>0&&f[0]!==i.OPS.rectangle&&f[0]!==i.OPS.moveTo?j=N.path.getAttributeNS(null,"d")+j:(N.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(N.path)),N.path.setAttributeNS(null,"d",j),N.path.setAttributeNS(null,"fill","none"),N.element=N.path,N.setCurrentPoint(v,d)}endPath(){const f=this.current;if(f.path=null,!this.pendingClip)return;if(!f.element){this.pendingClip=null;return}const b=`clippath${_++}`,N=this.svgFactory.createElement("svg:clipPath");N.setAttributeNS(null,"id",b),N.setAttributeNS(null,"transform",C(this.transformMatrix));const v=f.element.cloneNode(!0);if(this.pendingClip==="evenodd"?v.setAttributeNS(null,"clip-rule","evenodd"):v.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,N.append(v),this.defs.append(N),f.activeClipUrl){f.clipGroup=null;for(const d of this.extraStack)d.clipGroup=null;N.setAttributeNS(null,"clip-path",f.activeClipUrl)}f.activeClipUrl=`url(#${b})`,this.tgrp=null}clip(f){this.pendingClip=f}closePath(){const f=this.current;if(f.path){const b=`${f.path.getAttributeNS(null,"d")}Z`;f.path.setAttributeNS(null,"d",b)}}setLeading(f){this.current.leading=-f}setTextRise(f){this.current.textRise=f}setTextRenderingMode(f){this.current.textRenderingMode=f}setHScale(f){this.current.textHScale=f/100}setRenderingIntent(f){}setFlatness(f){}setGState(f){for(const[b,N]of f)switch(b){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N);break;case"CA":this.setStrokeAlpha(N);break;case"ca":this.setFillAlpha(N);break;default:(0,i.warn)(`Unimplemented graphic state operator ${b}`);break}}fill(){const f=this.current;f.element&&(f.element.setAttributeNS(null,"fill",f.fillColor),f.element.setAttributeNS(null,"fill-opacity",f.fillAlpha),this.endPath())}stroke(){const f=this.current;f.element&&(this._setStrokeAttributes(f.element),f.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(f,b=1){const N=this.current;let v=N.dashArray;b!==1&&v.length>0&&(v=v.map(function(d){return b*d})),f.setAttributeNS(null,"stroke",N.strokeColor),f.setAttributeNS(null,"stroke-opacity",N.strokeAlpha),f.setAttributeNS(null,"stroke-miterlimit",M(N.miterLimit)),f.setAttributeNS(null,"stroke-linecap",N.lineCap),f.setAttributeNS(null,"stroke-linejoin",N.lineJoin),f.setAttributeNS(null,"stroke-width",M(b*N.lineWidth)+"px"),f.setAttributeNS(null,"stroke-dasharray",v.map(M).join(" ")),f.setAttributeNS(null,"stroke-dashoffset",M(b*N.dashPhase)+"px")}eoFill(){var f;(f=this.current.element)==null||f.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var f;(f=this.current.element)==null||f.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width","1px"),f.setAttributeNS(null,"height","1px"),f.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(f)}paintImageXObject(f){const b=this.getObject(f);if(!b){(0,i.warn)(`Dependent image with object ID ${f} is not ready yet`);return}this.paintInlineImageXObject(b)}paintInlineImageXObject(f,b){const N=f.width,v=f.height,d=F(f,this.forceDataSchema,!!b),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",M(N)),j.setAttributeNS(null,"height",M(v)),this.current.element=j,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(L,"xlink:href",d),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",M(-v)),k.setAttributeNS(null,"width",M(N)+"px"),k.setAttributeNS(null,"height",M(v)+"px"),k.setAttributeNS(null,"transform",`scale(${M(1/N)} ${M(-1/v)})`),b?b.append(k):this._ensureTransformGroup().append(k)}paintImageMaskXObject(f){const b=this.getObject(f.data,f);if(b.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const N=this.current,v=b.width,d=b.height,j=N.fillColor;N.maskId=`mask${T++}`;const k=this.svgFactory.createElement("svg:mask");k.setAttributeNS(null,"id",N.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",M(v)),$.setAttributeNS(null,"height",M(d)),$.setAttributeNS(null,"fill",j),$.setAttributeNS(null,"mask",`url(#${N.maskId})`),this.defs.append(k),this._ensureTransformGroup().append($),this.paintInlineImageXObject(b,k)}paintFormXObjectBegin(f,b){if(Array.isArray(f)&&f.length===6&&this.transform(f[0],f[1],f[2],f[3],f[4],f[5]),b){const N=b[2]-b[0],v=b[3]-b[1],d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",b[0]),d.setAttributeNS(null,"y",b[1]),d.setAttributeNS(null,"width",M(N)),d.setAttributeNS(null,"height",M(v)),this.current.element=d,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(f){const b=this.svgFactory.create(f.width,f.height),N=this.svgFactory.createElement("svg:defs");b.append(N),this.defs=N;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",C(f.transform)),b.append(v),this.svg=v,b}_ensureClipGroup(){if(!this.current.clipGroup){const f=this.svgFactory.createElement("svg:g");f.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(f),this.current.clipGroup=f}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",C(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=B},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const l=[],c={items:l,styles:Object.create(null)};function L(g){var F;if(!g)return;let m=null;const u=g.name;if(u==="#text")m=g.value;else if(s.shouldBuildText(u))(F=g==null?void 0:g.attributes)!=null&&F.textContent?m=g.attributes.textContent:g.value&&(m=g.value);else return;if(m!==null&&l.push({str:m}),!!g.children)for(const O of g.children)L(O)}return L(i),c}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=C,e.updateTextLayer=_;var n=s(1),i=s(6);const l=1e5,c=30,L=.8,g=new Map;function m(T,x){let B;if(x&&n.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=T,B=E.getContext("2d",{alpha:!1})}return B}function u(T,x){const B=g.get(T);if(B)return B;const E=m(c,x);E.font=`${c}px ${T}`;const f=E.measureText("");let b=f.fontBoundingBoxAscent,N=Math.abs(f.fontBoundingBoxDescent);if(b){const d=b/(b+N);return g.set(T,d),E.canvas.width=E.canvas.height=0,d}E.strokeStyle="red",E.clearRect(0,0,c,c),E.strokeText("g",0,0);let v=E.getImageData(0,0,c,c).data;N=0;for(let d=v.length-1-3;d>=0;d-=4)if(v[d]>0){N=Math.ceil(d/4/c);break}E.clearRect(0,0,c,c),E.strokeText("A",0,c),v=E.getImageData(0,0,c,c).data,b=0;for(let d=0,j=v.length;d<j;d+=4)if(v[d]>0){b=c-Math.floor(d/4/c);break}if(E.canvas.width=E.canvas.height=0,b){const d=b/(b+N);return g.set(T,d),d}return g.set(T,L),L}function F(T,x,B){const E=document.createElement("span"),f={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};T._textDivs.push(E);const b=n.Util.transform(T._transform,x.transform);let N=Math.atan2(b[1],b[0]);const v=B[x.fontName];v.vertical&&(N+=Math.PI/2);const d=Math.hypot(b[2],b[3]),j=d*u(v.fontFamily,T._isOffscreenCanvasSupported);let k,$;N===0?(k=b[4],$=b[5]-j):(k=b[4]+j*Math.sin(N),$=b[5]-j*Math.cos(N));const nt="calc(var(--scale-factor)*",H=E.style;T._container===T._rootContainer?(H.left=`${(100*k/T._pageWidth).toFixed(2)}%`,H.top=`${(100*$/T._pageHeight).toFixed(2)}%`):(H.left=`${nt}${k.toFixed(2)}px)`,H.top=`${nt}${$.toFixed(2)}px)`),H.fontSize=`${nt}${d.toFixed(2)}px)`,H.fontFamily=v.fontFamily,f.fontSize=d,E.setAttribute("role","presentation"),E.textContent=x.str,E.dir=x.dir,T._fontInspectorEnabled&&(E.dataset.fontName=x.fontName),N!==0&&(f.angle=N*(180/Math.PI));let it=!1;if(x.str.length>1)it=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const ut=Math.abs(x.transform[0]),_t=Math.abs(x.transform[3]);ut!==_t&&Math.max(ut,_t)/Math.min(ut,_t)>1.5&&(it=!0)}it&&(f.canvasWidth=v.vertical?x.height:x.width),T._textDivProperties.set(E,f),T._isReadableStream&&T._layoutText(E)}function O(T){const{div:x,scale:B,properties:E,ctx:f,prevFontSize:b,prevFontFamily:N}=T,{style:v}=x;let d="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:j}=v,{canvasWidth:k,fontSize:$}=E;(b!==$||N!==j)&&(f.font=`${$*B}px ${j}`,T.prevFontSize=$,T.prevFontFamily=j);const{width:nt}=f.measureText(x.textContent);nt>0&&(d=`scaleX(${k*B/nt})`)}E.angle!==0&&(d=`rotate(${E.angle}deg) ${d}`),d.length>0&&(v.transform=d)}function P(T){if(T._canceled)return;const x=T._textDivs,B=T._capability;if(x.length>l){B.resolve();return}if(!T._isReadableStream)for(const f of x)T._layoutText(f);B.resolve()}class M{constructor({textContentSource:x,container:B,viewport:E,textDivs:f,textDivProperties:b,textContentItemsStr:N,isOffscreenCanvasSupported:v}){var nt;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=f||[],this._textContentItemsStr=N||[],this._isOffscreenCanvasSupported=v,this._fontInspectorEnabled=!!((nt=globalThis.FontInspector)!=null&&nt.enabled),this._reader=null,this._textDivProperties=b||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,v)};const{pageWidth:d,pageHeight:j,pageX:k,pageY:$}=E.rawDims;this._transform=[1,0,0,-1,-k,$+j],this._pageWidth=d,this._pageHeight=j,(0,i.setLayerDimensions)(B,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(x,B){for(const E of x){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const f=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),f.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),F(this,E,B)}}_layoutText(x){const B=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,O(this._layoutTextParams),B.hasText&&this._container.append(x),B.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const x=new n.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:f,done:b})=>{if(b){x.resolve();return}Object.assign(B,f.styles),this._processItems(f.items,B),E()},x.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:f}=this._textContentSource;this._processItems(E,f),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{B=null,P(this)},this._capability.reject)}}e.TextLayerRenderTask=M;function C(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:x,viewport:B}=T,E=getComputedStyle(x),f=E.getPropertyValue("visibility"),b=parseFloat(E.getPropertyValue("--scale-factor"));f==="visible"&&(!b||Math.abs(b-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const N=new M(T);return N._render(),N}function _({container:T,viewport:x,textDivs:B,textDivProperties:E,isOffscreenCanvasSupported:f,mustRotate:b=!0,mustRescale:N=!0}){if(b&&(0,i.setLayerDimensions)(T,{rotation:x.rotation}),N){const v=m(0,f),j={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v};for(const k of B)j.properties=E.get(k),j.div=k,O(j)}}},(t,e,s)=>{var u,F,O,P,M,C,_,T,x,B,E,qe,b,we,v,Ge,j,Xe;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),l=s(28),c=s(33),L=s(6),g=s(34);const $=class ${constructor({uiManager:H,pageIndex:it,div:ut,accessibilityManager:_t,annotationLayer:S,viewport:X,l10n:at}){K(this,E);K(this,b);K(this,v);K(this,j);K(this,u,void 0);K(this,F,!1);K(this,O,null);K(this,P,this.pointerup.bind(this));K(this,M,this.pointerdown.bind(this));K(this,C,new Map);K(this,_,!1);K(this,T,!1);K(this,x,!1);K(this,B,void 0);const At=[l.FreeTextEditor,c.InkEditor,g.StampEditor];if(!$._initialized){$._initialized=!0;for(const wt of At)wt.initialize(at)}H.registerEditorTypes(At),yt(this,B,H),this.pageIndex=it,this.div=ut,yt(this,u,_t),yt(this,O,S),this.viewport=X,r(this,B).addLayer(this)}get isEmpty(){return r(this,C).size===0}updateToolbar(H){r(this,B).updateToolbar(H)}updateMode(H=r(this,B).getMode()){ht(this,j,Xe).call(this),H===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),H!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",H===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(H){if(!H&&r(this,B).getMode()!==n.AnnotationEditorType.INK)return;if(!H){for(const ut of r(this,C).values())if(ut.isEmpty()){ut.setInBackground();return}}ht(this,b,we).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(H){r(this,B).setEditingState(H)}addCommands(H){r(this,B).addCommands(H)}enable(){this.div.style.pointerEvents="auto";const H=new Set;for(const ut of r(this,C).values())ut.enableEditing(),ut.annotationElementId&&H.add(ut.annotationElementId);if(!r(this,O))return;const it=r(this,O).getEditableAnnotations();for(const ut of it){if(ut.hide(),r(this,B).isDeletedAnnotationElement(ut.data.id)||H.has(ut.data.id))continue;const _t=this.deserialize(ut);_t&&(this.addOrRebuild(_t),_t.enableEditing())}}disable(){var it;yt(this,x,!0),this.div.style.pointerEvents="none";const H=new Set;for(const ut of r(this,C).values()){if(ut.disableEditing(),!ut.annotationElementId||ut.serialize()!==null){H.add(ut.annotationElementId);continue}(it=this.getEditableAnnotation(ut.annotationElementId))==null||it.show(),ut.remove()}if(r(this,O)){const ut=r(this,O).getEditableAnnotations();for(const _t of ut){const{id:S}=_t.data;H.has(S)||r(this,B).isDeletedAnnotationElement(S)||_t.show()}}ht(this,j,Xe).call(this),this.isEmpty&&(this.div.hidden=!0),yt(this,x,!1)}getEditableAnnotation(H){var it;return((it=r(this,O))==null?void 0:it.getEditableAnnotation(H))||null}setActiveEditor(H){r(this,B).getActive()!==H&&r(this,B).setActiveEditor(H)}enableClick(){this.div.addEventListener("pointerdown",r(this,M)),this.div.addEventListener("pointerup",r(this,P))}disableClick(){this.div.removeEventListener("pointerdown",r(this,M)),this.div.removeEventListener("pointerup",r(this,P))}attach(H){r(this,C).set(H.id,H);const{annotationElementId:it}=H;it&&r(this,B).isDeletedAnnotationElement(it)&&r(this,B).removeDeletedAnnotationElement(H)}detach(H){var it;r(this,C).delete(H.id),(it=r(this,u))==null||it.removePointerInTextLayer(H.contentDiv),!r(this,x)&&H.annotationElementId&&r(this,B).addDeletedAnnotationElement(H)}remove(H){this.detach(H),r(this,B).removeEditor(H),H.div.contains(document.activeElement)&&setTimeout(()=>{r(this,B).focusMainContainer()},0),H.div.remove(),H.isAttachedToDOM=!1,r(this,T)||this.addInkEditorIfNeeded(!1)}changeParent(H){var it;H.parent!==this&&(H.annotationElementId&&(r(this,B).addDeletedAnnotationElement(H.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(H),H.annotationElementId=null),this.attach(H),(it=H.parent)==null||it.detach(H),H.setParent(this),H.div&&H.isAttachedToDOM&&(H.div.remove(),this.div.append(H.div)))}add(H){if(this.changeParent(H),r(this,B).addEditor(H),this.attach(H),!H.isAttachedToDOM){const it=H.render();this.div.append(it),H.isAttachedToDOM=!0}this.moveEditorInDOM(H),H.onceAdded(),r(this,B).addToAnnotationStorage(H)}moveEditorInDOM(H){var ut;if(!H.isAttachedToDOM)return;const{activeElement:it}=document;H.div.contains(it)&&(H._focusEventsAllowed=!1,setTimeout(()=>{H.div.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),it.focus()},0)),(ut=r(this,u))==null||ut.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}addOrRebuild(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}addUndoableEditor(H){const it=()=>H._uiManager.rebuild(H),ut=()=>{H.remove()};this.addCommands({cmd:it,undo:ut,mustExec:!1})}getNextId(){return r(this,B).getId()}pasteEditor(H,it){r(this,B).updateToolbar(H),r(this,B).updateMode(H);const{offsetX:ut,offsetY:_t}=ht(this,v,Ge).call(this),S=this.getNextId(),X=ht(this,E,qe).call(this,{parent:this,id:S,x:ut,y:_t,uiManager:r(this,B),isCentered:!0,...it});X&&this.add(X)}deserialize(H){switch(H.annotationType??H.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(H,this,r(this,B));case n.AnnotationEditorType.INK:return c.InkEditor.deserialize(H,this,r(this,B));case n.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(H,this,r(this,B))}return null}addNewEditor(){ht(this,b,we).call(this,ht(this,v,Ge).call(this),!0)}setSelected(H){r(this,B).setSelected(H)}toggleSelected(H){r(this,B).toggleSelected(H)}isSelected(H){return r(this,B).isSelected(H)}unselect(H){r(this,B).unselect(H)}pointerup(H){const{isMac:it}=n.FeatureTest.platform;if(!(H.button!==0||H.ctrlKey&&it)&&H.target===this.div&&r(this,_)){if(yt(this,_,!1),!r(this,F)){yt(this,F,!0);return}if(r(this,B).getMode()===n.AnnotationEditorType.STAMP){r(this,B).unselectAll();return}ht(this,b,we).call(this,H,!1)}}pointerdown(H){if(r(this,_)){yt(this,_,!1);return}const{isMac:it}=n.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&it||H.target!==this.div)return;yt(this,_,!0);const ut=r(this,B).getActive();yt(this,F,!ut||ut.isEmpty())}findNewParent(H,it,ut){const _t=r(this,B).findParent(it,ut);return _t===null||_t===this?!1:(_t.changeParent(H),!0)}destroy(){var H,it;((H=r(this,B).getActive())==null?void 0:H.parent)===this&&r(this,B).setActiveEditor(null);for(const ut of r(this,C).values())(it=r(this,u))==null||it.removePointerInTextLayer(ut.contentDiv),ut.setParent(null),ut.isAttachedToDOM=!1,ut.div.remove();this.div=null,r(this,C).clear(),r(this,B).removeLayer(this)}render({viewport:H}){this.viewport=H,(0,L.setLayerDimensions)(this.div,H);for(const it of r(this,B).getEditors(this.pageIndex))this.add(it);this.updateMode()}update({viewport:H}){r(this,B).commitOrRemove(),this.viewport=H,(0,L.setLayerDimensions)(this.div,{rotation:H.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:H,pageHeight:it}=this.viewport.rawDims;return[H,it]}};u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap,B=new WeakMap,E=new WeakSet,qe=function(H){switch(r(this,B).getMode()){case n.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(H);case n.AnnotationEditorType.INK:return new c.InkEditor(H);case n.AnnotationEditorType.STAMP:return new g.StampEditor(H)}return null},b=new WeakSet,we=function(H,it){const ut=this.getNextId(),_t=ht(this,E,qe).call(this,{parent:this,id:ut,x:H.offsetX,y:H.offsetY,uiManager:r(this,B),isCentered:it});return _t&&this.add(_t),_t},v=new WeakSet,Ge=function(){const{x:H,y:it,width:ut,height:_t}=this.div.getBoundingClientRect(),S=Math.max(0,H),X=Math.max(0,it),at=Math.min(window.innerWidth,H+ut),At=Math.min(window.innerHeight,it+_t),wt=(S+at)/2-H,R=(X+At)/2-it,[a,o]=this.viewport.rotation%180===0?[wt,R]:[R,wt];return{offsetX:a,offsetY:o}},j=new WeakSet,Xe=function(){yt(this,T,!0);for(const H of r(this,C).values())H.isEmpty()&&H.remove();yt(this,T,!1)},Jt($,"_initialized",!1);let m=$;e.AnnotationEditorLayer=m},(t,e,s)=>{var g,m,u,F,O,P,M,C,_,T,xn,B,Pn,f,kn,N,be,d,Ye,k,Rn,nt,Ke;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(5),l=s(4),c=s(29);const it=class it extends l.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});K(this,T);K(this,B);K(this,f);K(this,N);K(this,d);K(this,k);K(this,nt);K(this,g,this.editorDivBlur.bind(this));K(this,m,this.editorDivFocus.bind(this));K(this,u,this.editorDivInput.bind(this));K(this,F,this.editorDivKeydown.bind(this));K(this,O,void 0);K(this,P,"");K(this,M,`${this.id}-editor`);K(this,C,void 0);K(this,_,null);yt(this,O,S.color||it._defaultColor||l.AnnotationEditor._defaultLineColor),yt(this,C,S.fontSize||it._defaultFontSize)}static get _keyboardManager(){const S=it.prototype,X=wt=>wt.isEmpty(),at=i.AnnotationEditorUIManager.TRANSLATE_SMALL,At=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],S.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],S.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],S._translateEmpty,{args:[-at,0],checker:X}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],S._translateEmpty,{args:[-At,0],checker:X}],[["ArrowRight","mac+ArrowRight"],S._translateEmpty,{args:[at,0],checker:X}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],S._translateEmpty,{args:[At,0],checker:X}],[["ArrowUp","mac+ArrowUp"],S._translateEmpty,{args:[0,-at],checker:X}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],S._translateEmpty,{args:[0,-At],checker:X}],[["ArrowDown","mac+ArrowDown"],S._translateEmpty,{args:[0,at],checker:X}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],S._translateEmpty,{args:[0,At],checker:X}]]))}static initialize(S){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(at=>[at,S.get(at)]));const X=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(X.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,X){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:it._defaultFontSize=X;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:it._defaultColor=X;break}}updateParams(S,X){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ht(this,T,xn).call(this,X);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ht(this,B,Pn).call(this,X);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,it._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,it._defaultColor||l.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,C)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,O)]]}_translateEmpty(S,X){this._uiManager.translateSelectedEditors(S,X,!0)}getInitialTranslation(){const S=this.parentScale;return[-it._internalPadding*S,-(it._internalPadding+r(this,C))*S]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,F)),this.editorDiv.addEventListener("focus",r(this,m)),this.editorDiv.addEventListener("blur",r(this,g)),this.editorDiv.addEventListener("input",r(this,u)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,M)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",r(this,F)),this.editorDiv.removeEventListener("focus",r(this,m)),this.editorDiv.removeEventListener("blur",r(this,g)),this.editorDiv.removeEventListener("input",r(this,u)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(S){this._focusEventsAllowed&&(super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var S;if(this.width){ht(this,nt,Ke).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(S=this._initialOptions)!=null&&S.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const S=r(this,P),X=yt(this,P,ht(this,f,kn).call(this).trimEnd());if(S===X)return;const at=At=>{if(yt(this,P,At),!At){this.remove();return}ht(this,d,Ye).call(this),this._uiManager.rebuild(this),ht(this,N,be).call(this)};this.addCommands({cmd:()=>{at(X)},undo:()=>{at(S)},mustExec:!1}),ht(this,N,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(S){this.enterInEditMode()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enterInEditMode(),S.preventDefault())}editorDivKeydown(S){it._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}editorDivInput(S){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,X;this.width&&(S=this.x,X=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,M)),this.enableEditing(),it._l10nPromise.get("editor_free_text2_aria_label").then(At=>{var wt;return(wt=this.editorDiv)==null?void 0:wt.setAttribute("aria-label",At)}),it._l10nPromise.get("free_text2_default_content").then(At=>{var wt;return(wt=this.editorDiv)==null?void 0:wt.setAttribute("default-content",At)}),this.editorDiv.contentEditable=!0;const{style:at}=this.editorDiv;if(at.fontSize=`calc(${r(this,C)}px * var(--scale-factor))`,at.color=r(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[At,wt]=this.parentDimensions;if(this.annotationElementId){const{position:R}=r(this,_);let[a,o]=this.getInitialTranslation();[a,o]=this.pageTranslationToScreen(a,o);const[y,V]=this.pageDimensions,[U,Y]=this.pageTranslation;let Q,ot;switch(this.rotation){case 0:Q=S+(R[0]-U)/y,ot=X+this.height-(R[1]-Y)/V;break;case 90:Q=S+(R[0]-U)/y,ot=X-(R[1]-Y)/V,[a,o]=[o,-a];break;case 180:Q=S-this.width+(R[0]-U)/y,ot=X-(R[1]-Y)/V,[a,o]=[-a,-o];break;case 270:Q=S+(R[0]-U-this.height*V)/y,ot=X+(R[1]-Y-this.width*y)/V,[a,o]=[-o,a];break}this.setAt(Q*At,ot*wt,a,o)}else this.setAt(S*At,X*wt,this.width*At,this.height*wt);ht(this,d,Ye).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,X,at){let At=null;if(S instanceof c.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:R,fontColor:a},rect:o,rotation:y,id:V},textContent:U,textPosition:Y,parent:{page:{pageNumber:Q}}}=S;if(!U||U.length===0)return null;At=S={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:R,value:U.join(`
`),position:Y,pageIndex:Q-1,rect:o,rotation:y,id:V,deleted:!1}}const wt=super.deserialize(S,X,at);return yt(wt,C,S.fontSize),yt(wt,O,n.Util.makeHexColor(...S.color)),yt(wt,P,S.value),wt.annotationElementId=S.id||null,yt(wt,_,At),wt}serialize(S=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const X=it._internalPadding*this.parentScale,at=this.getRect(X,X),At=l.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,O)),wt={annotationType:n.AnnotationEditorType.FREETEXT,color:At,fontSize:r(this,C),value:r(this,P),pageIndex:this.pageIndex,rect:at,rotation:this.rotation};return S?wt:this.annotationElementId&&!ht(this,k,Rn).call(this,wt)?null:(wt.id=this.annotationElementId,wt)}};g=new WeakMap,m=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakMap,T=new WeakSet,xn=function(S){const X=At=>{this.editorDiv.style.fontSize=`calc(${At}px * var(--scale-factor))`,this.translate(0,-(At-r(this,C))*this.parentScale),yt(this,C,At),ht(this,N,be).call(this)},at=r(this,C);this.addCommands({cmd:()=>{X(S)},undo:()=>{X(at)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},B=new WeakSet,Pn=function(S){const X=r(this,O);this.addCommands({cmd:()=>{yt(this,O,this.editorDiv.style.color=S)},undo:()=>{yt(this,O,this.editorDiv.style.color=X)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,kn=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const X=[];for(const at of S)X.push(at.innerText.replace(/\r\n?|\n/,""));return X.join(`
`)},N=new WeakSet,be=function(){const[S,X]=this.parentDimensions;let at;if(this.isAttachedToDOM)at=this.div.getBoundingClientRect();else{const{currentLayer:At,div:wt}=this,R=wt.style.display;wt.style.display="hidden",At.div.append(this.div),at=wt.getBoundingClientRect(),wt.remove(),wt.style.display=R}this.rotation%180===this.parentRotation%180?(this.width=at.width/S,this.height=at.height/X):(this.width=at.height/S,this.height=at.width/X),this.fixAndSetPosition()},d=new WeakSet,Ye=function(){if(this.editorDiv.replaceChildren(),!!r(this,P))for(const S of r(this,P).split(`
`)){const X=document.createElement("div");X.append(S?document.createTextNode(S):document.createElement("br")),this.editorDiv.append(X)}},k=new WeakSet,Rn=function(S){const{value:X,fontSize:at,color:At,rect:wt,pageIndex:R}=r(this,_);return S.value!==X||S.fontSize!==at||S.rect.some((a,o)=>Math.abs(a-wt[o])>=1)||S.color.some((a,o)=>a!==At[o])||S.pageIndex!==R},nt=new WeakSet,Ke=function(S=!1){if(!this.annotationElementId)return;if(ht(this,N,be).call(this),!S&&(this.width===0||this.height===0)){setTimeout(()=>ht(this,nt,Ke).call(this,!0),0);return}const X=it._internalPadding*this.parentScale;r(this,_).rect=this.getRect(X,X)},Jt(it,"_freeTextDefaultContent",""),Jt(it,"_l10nPromise"),Jt(it,"_internalPadding",0),Jt(it,"_defaultColor",null),Jt(it,"_defaultFontSize",10),Jt(it,"_type","freetext");let L=it;e.FreeTextEditor=L},(t,e,s)=>{var o,y,ae,U,Fn,Q,ot,w,I,G,J,lt,dt,Ct,Et,mt,St,vt,tt,et,pt,Pt,Je,Bt,Qe,Lt,Ze,$t,zt,Tt,st,ct,Dt,qt,Vt,Kt,Zt,Mn,It,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),i=s(6),l=s(3),c=s(30),L=s(31),g=s(32);const m=1e3,u=9,F=new WeakSet;function O(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class P{static create(D){switch(D.data.annotationType){case n.AnnotationType.LINK:return new C(D);case n.AnnotationType.TEXT:return new _(D);case n.AnnotationType.WIDGET:switch(D.data.fieldType){case"Tx":return new x(D);case"Btn":return D.data.radioButton?new f(D):D.data.checkBox?new E(D):new b(D);case"Ch":return new N(D);case"Sig":return new B(D)}return new T(D);case n.AnnotationType.POPUP:return new v(D);case n.AnnotationType.FREETEXT:return new j(D);case n.AnnotationType.LINE:return new k(D);case n.AnnotationType.SQUARE:return new $(D);case n.AnnotationType.CIRCLE:return new nt(D);case n.AnnotationType.POLYLINE:return new H(D);case n.AnnotationType.CARET:return new ut(D);case n.AnnotationType.INK:return new _t(D);case n.AnnotationType.POLYGON:return new it(D);case n.AnnotationType.HIGHLIGHT:return new S(D);case n.AnnotationType.UNDERLINE:return new X(D);case n.AnnotationType.SQUIGGLY:return new at(D);case n.AnnotationType.STRIKEOUT:return new At(D);case n.AnnotationType.STAMP:return new wt(D);case n.AnnotationType.FILEATTACHMENT:return new R(D);default:return new M(D)}}}class M{constructor(D,{isRenderable:A=!1,ignoreBorder:q=!1,createQuadrilaterals:z=!1}={}){K(this,o,!1);this.isRenderable=A,this.data=D.data,this.layer=D.layer,this.linkService=D.linkService,this.downloadManager=D.downloadManager,this.imageResourcesPath=D.imageResourcesPath,this.renderForms=D.renderForms,this.svgFactory=D.svgFactory,this.annotationStorage=D.annotationStorage,this.enableScripting=D.enableScripting,this.hasJSActions=D.hasJSActions,this._fieldObjects=D.fieldObjects,this.parent=D.parent,A&&(this.container=this._createContainer(q)),z&&this._createQuadrilaterals()}_createContainer(D){const{data:A,parent:{page:q,viewport:z}}=this,Z=document.createElement("section");Z.setAttribute("data-annotation-id",A.id),Z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Z.setAttribute("aria-haspopup","dialog"),A.noRotate&&Z.classList.add("norotate");const{pageWidth:gt,pageHeight:kt,pageX:W,pageY:rt}=z.rawDims;if(!A.rect||this instanceof v){const{rotation:Nt}=A;return!A.hasOwnCanvas&&Nt!==0&&this.setRotation(Nt,Z),Z}const{width:bt,height:Ft}=O(A.rect),xt=n.Util.normalizeRect([A.rect[0],q.view[3]-A.rect[1]+q.view[1],A.rect[2],q.view[3]-A.rect[3]+q.view[1]]);if(!D&&A.borderStyle.width>0){Z.style.borderWidth=`${A.borderStyle.width}px`;const Nt=A.borderStyle.horizontalCornerRadius,Ht=A.borderStyle.verticalCornerRadius;if(Nt>0||Ht>0){const Xt=`calc(${Nt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;Z.style.borderRadius=Xt}else if(this instanceof f){const Xt=`calc(${bt}px * var(--scale-factor)) / calc(${Ft}px * var(--scale-factor))`;Z.style.borderRadius=Xt}switch(A.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:Z.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:Z.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:Z.style.borderBottomStyle="solid";break}const Gt=A.borderColor||null;Gt?(yt(this,o,!0),Z.style.borderColor=n.Util.makeHexColor(Gt[0]|0,Gt[1]|0,Gt[2]|0)):Z.style.borderWidth=0}Z.style.left=`${100*(xt[0]-W)/gt}%`,Z.style.top=`${100*(xt[1]-rt)/kt}%`;const{rotation:Rt}=A;return A.hasOwnCanvas||Rt===0?(Z.style.width=`${100*bt/gt}%`,Z.style.height=`${100*Ft/kt}%`):this.setRotation(Rt,Z),Z}setRotation(D,A=this.container){if(!this.data.rect)return;const{pageWidth:q,pageHeight:z}=this.parent.viewport.rawDims,{width:Z,height:gt}=O(this.data.rect);let kt,W;D%180===0?(kt=100*Z/q,W=100*gt/z):(kt=100*gt/q,W=100*Z/z),A.style.width=`${kt}%`,A.style.height=`${W}%`,A.setAttribute("data-main-rotation",(360-D)%360)}get _commonActions(){const D=(A,q,z)=>{const Z=z.detail[A],gt=Z[0],kt=Z.slice(1);z.target.style[q]=c.ColorConverters[`${gt}_HTML`](kt),this.annotationStorage.setValue(this.data.id,{[q]:c.ColorConverters[`${gt}_rgb`](kt)})};return(0,n.shadow)(this,"_commonActions",{display:A=>{const{display:q}=A.detail,z=q%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:q===1||q===2})},print:A=>{this.annotationStorage.setValue(this.data.id,{noPrint:!A.detail.print})},hidden:A=>{const{hidden:q}=A.detail;this.container.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:q,noView:q})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.target.disabled=A.detail.readonly},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{D("bgColor","backgroundColor",A)},fillColor:A=>{D("fillColor","backgroundColor",A)},fgColor:A=>{D("fgColor","color",A)},textColor:A=>{D("textColor","color",A)},borderColor:A=>{D("borderColor","borderColor",A)},strokeColor:A=>{D("strokeColor","borderColor",A)},rotation:A=>{const q=A.detail.rotation;this.setRotation(q),this.annotationStorage.setValue(this.data.id,{rotation:q})}})}_dispatchEventFromSandbox(D,A){const q=this._commonActions;for(const z of Object.keys(A.detail)){const Z=D[z]||q[z];Z==null||Z(A)}}_setDefaultPropertiesFromJS(D){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const q=this._commonActions;for(const[z,Z]of Object.entries(A)){const gt=q[z];if(gt){const kt={detail:{[z]:Z},target:D};gt(kt),delete A[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:D}=this.data;if(!D)return;const[A,q,z,Z]=this.data.rect;if(D.length===1){const[,{x:Ht,y:Gt},{x:Xt,y:Qt}]=D[0];if(z===Ht&&Z===Gt&&A===Xt&&q===Qt)return}const{style:gt}=this.container;let kt;if(r(this,o)){const{borderColor:Ht,borderWidth:Gt}=gt;gt.borderWidth=0,kt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ht}" stroke-width="${Gt}">`],this.container.classList.add("hasBorder")}const W=z-A,rt=Z-q,{svgFactory:bt}=this,Ft=bt.createElement("svg");Ft.classList.add("quadrilateralsContainer"),Ft.setAttribute("width",0),Ft.setAttribute("height",0);const xt=bt.createElement("defs");Ft.append(xt);const Rt=bt.createElement("clipPath"),Nt=`clippath_${this.data.id}`;Rt.setAttribute("id",Nt),Rt.setAttribute("clipPathUnits","objectBoundingBox"),xt.append(Rt);for(const[,{x:Ht,y:Gt},{x:Xt,y:Qt}]of D){const Yt=bt.createElement("rect"),te=(Xt-A)/W,ne=(Z-Gt)/rt,ee=(Ht-Xt)/W,re=(Gt-Qt)/rt;Yt.setAttribute("x",te),Yt.setAttribute("y",ne),Yt.setAttribute("width",ee),Yt.setAttribute("height",re),Rt.append(Yt),kt==null||kt.push(`<rect vector-effect="non-scaling-stroke" x="${te}" y="${ne}" width="${ee}" height="${re}"/>`)}r(this,o)&&(kt.push("</g></svg>')"),gt.backgroundImage=kt.join("")),this.container.append(Ft),this.container.style.clipPath=`url(#${Nt})`}_createPopup(){const{container:D,data:A}=this;D.setAttribute("aria-haspopup","dialog");const q=new v({data:{color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,parentRect:A.rect,borderStyle:0,id:`popup_${A.id}`,rotation:A.rotation},parent:this.parent,elements:[this]});this.parent.div.append(q.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(D,A=null){const q=[];if(this._fieldObjects){const z=this._fieldObjects[D];if(z)for(const{page:Z,id:gt,exportValues:kt}of z){if(Z===-1||gt===A)continue;const W=typeof kt=="string"?kt:null,rt=document.querySelector(`[data-element-id="${gt}"]`);if(rt&&!F.has(rt)){(0,n.warn)(`_getElementsByName - element not allowed: ${gt}`);continue}q.push({id:gt,exportValue:W,domElement:rt})}return q}for(const z of document.getElementsByName(D)){const{exportValue:Z}=z,gt=z.getAttribute("data-element-id");gt!==A&&F.has(z)&&q.push({id:gt,exportValue:Z,domElement:z})}return q}show(){var D;this.container&&(this.container.hidden=!1),(D=this.popup)==null||D.maybeShow()}hide(){var D;this.container&&(this.container.hidden=!0),(D=this.popup)==null||D.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const D=this.getElementsToTriggerPopup();if(Array.isArray(D))for(const A of D)A.classList.add("highlightArea");else D.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:D,data:{id:A}}=this;this.container.addEventListener("dblclick",()=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("switchannotationeditormode",{source:this,mode:D,editId:A})})}}o=new WeakMap;class C extends M{constructor(A,q=null){super(A,{isRenderable:!0,ignoreBorder:!!(q!=null&&q.ignoreBorder),createQuadrilaterals:!0});K(this,y);K(this,U);this.isTooltipOnly=A.data.isTooltipOnly}render(){const{data:A,linkService:q}=this,z=document.createElement("a");z.setAttribute("data-element-id",A.id);let Z=!1;return A.url?(q.addLinkAttributes(z,A.url,A.newWindow),Z=!0):A.action?(this._bindNamedAction(z,A.action),Z=!0):A.attachment?(this._bindAttachment(z,A.attachment),Z=!0):A.setOCGState?(ht(this,U,Fn).call(this,z,A.setOCGState),Z=!0):A.dest?(this._bindLink(z,A.dest),Z=!0):(A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,A),Z=!0),A.resetForm?(this._bindResetFormAction(z,A.resetForm),Z=!0):this.isTooltipOnly&&!Z&&(this._bindLink(z,""),Z=!0)),this.container.classList.add("linkAnnotation"),Z&&this.container.append(z),this.container}_bindLink(A,q){A.href=this.linkService.getDestinationHash(q),A.onclick=()=>(q&&this.linkService.goToDestination(q),!1),(q||q==="")&&ht(this,y,ae).call(this)}_bindNamedAction(A,q){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(q),!1),ht(this,y,ae).call(this)}_bindAttachment(A,q){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,q.content,q.filename),!1},ht(this,y,ae).call(this)}_bindJSAction(A,q){A.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Z of Object.keys(q.actions)){const gt=z.get(Z);gt&&(A[gt]=()=>{var kt;return(kt=this.linkService.eventBus)==null||kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:q.id,name:Z}}),!1})}A.onclick||(A.onclick=()=>!1),ht(this,y,ae).call(this)}_bindResetFormAction(A,q){const z=A.onclick;if(z||(A.href=this.linkService.getAnchorUrl("")),ht(this,y,ae).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(A.onclick=()=>!1);return}A.onclick=()=>{var Ft;z==null||z();const{fields:Z,refs:gt,include:kt}=q,W=[];if(Z.length!==0||gt.length!==0){const xt=new Set(gt);for(const Rt of Z){const Nt=this._fieldObjects[Rt]||[];for(const{id:Ht}of Nt)xt.add(Ht)}for(const Rt of Object.values(this._fieldObjects))for(const Nt of Rt)xt.has(Nt.id)===kt&&W.push(Nt)}else for(const xt of Object.values(this._fieldObjects))W.push(...xt);const rt=this.annotationStorage,bt=[];for(const xt of W){const{id:Rt}=xt;switch(bt.push(Rt),xt.type){case"text":{const Ht=xt.defaultValue||"";rt.setValue(Rt,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=xt.defaultValue===xt.exportValues;rt.setValue(Rt,{value:Ht});break}case"combobox":case"listbox":{const Ht=xt.defaultValue||"";rt.setValue(Rt,{value:Ht});break}default:continue}const Nt=document.querySelector(`[data-element-id="${Rt}"]`);if(Nt){if(!F.has(Nt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Rt}`);continue}}else continue;Nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:bt,name:"ResetForm"}})),!1}}}y=new WeakSet,ae=function(){this.container.setAttribute("data-internal-link","")},U=new WeakSet,Fn=function(A,q){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeSetOCGState(q),!1),ht(this,y,ae).call(this)};class _ extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A})}render(){this.container.classList.add("textAnnotation");const D=document.createElement("img");return D.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",D.alt="[{{type}} Annotation]",D.dataset.l10nId="text_annotation_type",D.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(D),this.container}}class T extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(D){var A;this.data.hasOwnCanvas&&(((A=D.previousSibling)==null?void 0:A.nodeName)==="CANVAS"&&(D.previousSibling.hidden=!0),D.hidden=!1)}_getKeyModifier(D){const{isWin:A,isMac:q}=n.FeatureTest.platform;return A&&D.ctrlKey||q&&D.metaKey}_setEventListener(D,A,q,z){A.includes("mouse")?D.addEventListener(A,Z=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:z(Z),shift:Z.shiftKey,modifier:this._getKeyModifier(Z)}})}):D.addEventListener(A,Z=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:z(Z)}})})}_setEventListeners(D,A,q){var z;for(const[Z,gt]of A)(gt==="Action"||(z=this.data.actions)!=null&&z[gt])&&this._setEventListener(D,Z,gt,q)}_setBackgroundColor(D){const A=this.data.backgroundColor||null;D.style.backgroundColor=A===null?"transparent":n.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(D){const A=["left","center","right"],{fontColor:q}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||u,Z=D.style;let gt;const kt=2,W=rt=>Math.round(10*rt)/10;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-kt),bt=Math.round(rt/(n.LINE_FACTOR*z))||1,Ft=rt/bt;gt=Math.min(z,W(Ft/n.LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-kt);gt=Math.min(z,W(rt/n.LINE_FACTOR))}Z.fontSize=`calc(${gt}px * var(--scale-factor))`,Z.color=n.Util.makeHexColor(q[0],q[1],q[2]),this.data.textAlignment!==null&&(Z.textAlign=A[this.data.textAlignment])}_setRequired(D,A){A?D.setAttribute("required",!0):D.removeAttribute("required"),D.setAttribute("aria-required",A)}}class x extends T{constructor(D){const A=D.renderForms||!D.data.hasAppearance&&!!D.data.fieldValue;super(D,{isRenderable:A})}setPropertyOnSiblings(D,A,q,z){const Z=this.annotationStorage;for(const gt of this._getElementsByName(D.name,D.id))gt.domElement&&(gt.domElement[A]=q),Z.setValue(gt.id,{[z]:q})}render(){var z,Z;const D=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let q=null;if(this.renderForms){const gt=D.getValue(A,{value:this.data.fieldValue});let kt=gt.value||"";const W=D.getValue(A,{charLimit:this.data.maxLen}).charLimit;W&&kt.length>W&&(kt=kt.slice(0,W));let rt=gt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;rt&&this.data.comb&&(rt=rt.replaceAll(/\s+/g,""));const bt={userValue:kt,formattedValue:rt,lastCommittedValue:null,commitKey:1};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=rt??kt,this.data.doNotScroll&&(q.style.overflowY="hidden")):(q=document.createElement("input"),q.type="text",q.setAttribute("value",rt??kt),this.data.doNotScroll&&(q.style.overflowX="hidden")),this.data.hasOwnCanvas&&(q.hidden=!0),F.add(q),q.setAttribute("data-element-id",A),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=m,this._setRequired(q,this.data.required),W&&(q.maxLength=W),q.addEventListener("input",xt=>{D.setValue(A,{value:xt.target.value}),this.setPropertyOnSiblings(q,"value",xt.target.value,"value"),bt.formattedValue=null}),q.addEventListener("resetform",xt=>{const Rt=this.data.defaultFieldValue??"";q.value=bt.userValue=Rt,bt.formattedValue=null});let Ft=xt=>{const{formattedValue:Rt}=bt;Rt!=null&&(xt.target.value=Rt),xt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",Rt=>{const{target:Nt}=Rt;bt.userValue&&(Nt.value=bt.userValue),bt.lastCommittedValue=Nt.value,bt.commitKey=1}),q.addEventListener("updatefromsandbox",Rt=>{this.showElementAndHideCanvas(Rt.target);const Nt={value(Ht){bt.userValue=Ht.detail.value??"",D.setValue(A,{value:bt.userValue.toString()}),Ht.target.value=bt.userValue},formattedValue(Ht){const{formattedValue:Gt}=Ht.detail;bt.formattedValue=Gt,Gt!=null&&Ht.target!==document.activeElement&&(Ht.target.value=Gt),D.setValue(A,{formattedValue:Gt})},selRange(Ht){Ht.target.setSelectionRange(...Ht.detail.selRange)},charLimit:Ht=>{var Yt;const{charLimit:Gt}=Ht.detail,{target:Xt}=Ht;if(Gt===0){Xt.removeAttribute("maxLength");return}Xt.setAttribute("maxLength",Gt);let Qt=bt.userValue;!Qt||Qt.length<=Gt||(Qt=Qt.slice(0,Gt),Xt.value=bt.userValue=Qt,D.setValue(A,{value:Qt}),(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Qt,willCommit:!0,commitKey:1,selStart:Xt.selectionStart,selEnd:Xt.selectionEnd}}))}};this._dispatchEventFromSandbox(Nt,Rt)}),q.addEventListener("keydown",Rt=>{var Gt;bt.commitKey=1;let Nt=-1;if(Rt.key==="Escape"?Nt=0:Rt.key==="Enter"&&!this.data.multiLine?Nt=2:Rt.key==="Tab"&&(bt.commitKey=3),Nt===-1)return;const{value:Ht}=Rt.target;bt.lastCommittedValue!==Ht&&(bt.lastCommittedValue=Ht,bt.userValue=Ht,(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Ht,willCommit:!0,commitKey:Nt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const xt=Ft;Ft=null,q.addEventListener("blur",Rt=>{var Ht;if(!Rt.relatedTarget)return;const{value:Nt}=Rt.target;bt.userValue=Nt,bt.lastCommittedValue!==Nt&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Nt,willCommit:!0,commitKey:bt.commitKey,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),xt(Rt)}),(Z=this.data.actions)!=null&&Z.Keystroke&&q.addEventListener("beforeinput",Rt=>{var ne;bt.lastCommittedValue=null;const{data:Nt,target:Ht}=Rt,{value:Gt,selectionStart:Xt,selectionEnd:Qt}=Ht;let Yt=Xt,te=Qt;switch(Rt.inputType){case"deleteWordBackward":{const ee=Gt.substring(0,Xt).match(/\w*[^\w]*$/);ee&&(Yt-=ee[0].length);break}case"deleteWordForward":{const ee=Gt.substring(Xt).match(/^[^\w]*\w*/);ee&&(te+=ee[0].length);break}case"deleteContentBackward":Xt===Qt&&(Yt-=1);break;case"deleteContentForward":Xt===Qt&&(te+=1);break}Rt.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Gt,change:Nt||"",willCommit:!1,selStart:Yt,selEnd:te}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(Ft&&q.addEventListener("blur",Ft),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/W;q.classList.add("comb"),q.style.letterSpacing=`calc(${Rt}px * var(--scale-factor) - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class B extends T{constructor(D){super(D,{isRenderable:!!D.data.hasOwnCanvas})}}class E extends T{constructor(D){super(D,{isRenderable:D.renderForms})}render(){const D=this.annotationStorage,A=this.data,q=A.id;let z=D.getValue(q,{value:A.exportValue===A.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",D.setValue(q,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Z=document.createElement("input");return F.add(Z),Z.setAttribute("data-element-id",q),Z.disabled=A.readOnly,this._setRequired(Z,this.data.required),Z.type="checkbox",Z.name=A.fieldName,z&&Z.setAttribute("checked",!0),Z.setAttribute("exportValue",A.exportValue),Z.tabIndex=m,Z.addEventListener("change",gt=>{const{name:kt,checked:W}=gt.target;for(const rt of this._getElementsByName(kt,q)){const bt=W&&rt.exportValue===A.exportValue;rt.domElement&&(rt.domElement.checked=bt),D.setValue(rt.id,{value:bt})}D.setValue(q,{value:W})}),Z.addEventListener("resetform",gt=>{const kt=A.defaultFieldValue||"Off";gt.target.checked=kt===A.exportValue}),this.enableScripting&&this.hasJSActions&&(Z.addEventListener("updatefromsandbox",gt=>{const kt={value(W){W.target.checked=W.detail.value!=="Off",D.setValue(q,{value:W.target.checked})}};this._dispatchEventFromSandbox(kt,gt)}),this._setEventListeners(Z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gt=>gt.target.checked)),this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class f extends T{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const D=this.annotationStorage,A=this.data,q=A.id;let z=D.getValue(q,{value:A.fieldValue===A.buttonValue}).value;typeof z=="string"&&(z=z!==A.buttonValue,D.setValue(q,{value:z}));const Z=document.createElement("input");if(F.add(Z),Z.setAttribute("data-element-id",q),Z.disabled=A.readOnly,this._setRequired(Z,this.data.required),Z.type="radio",Z.name=A.fieldName,z&&Z.setAttribute("checked",!0),Z.tabIndex=m,Z.addEventListener("change",gt=>{const{name:kt,checked:W}=gt.target;for(const rt of this._getElementsByName(kt,q))D.setValue(rt.id,{value:!1});D.setValue(q,{value:W})}),Z.addEventListener("resetform",gt=>{const kt=A.defaultFieldValue;gt.target.checked=kt!=null&&kt===A.buttonValue}),this.enableScripting&&this.hasJSActions){const gt=A.buttonValue;Z.addEventListener("updatefromsandbox",kt=>{const W={value:rt=>{const bt=gt===rt.detail.value;for(const Ft of this._getElementsByName(rt.target.name)){const xt=bt&&Ft.id===q;Ft.domElement&&(Ft.domElement.checked=xt),D.setValue(Ft.id,{value:xt})}}};this._dispatchEventFromSandbox(W,kt)}),this._setEventListeners(Z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.checked)}return this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class b extends C{constructor(D){super(D,{ignoreBorder:D.data.hasAppearance})}render(){const D=super.render();D.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(D.title=this.data.alternativeText);const A=D.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",q=>{this._dispatchEventFromSandbox({},q)})),D}}class N extends T{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const D=this.annotationStorage,A=this.data.id,q=D.getValue(A,{value:this.data.fieldValue}),z=document.createElement("select");F.add(z),z.setAttribute("data-element-id",A),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=m;let Z=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",bt=>{const Ft=this.data.defaultFieldValue;for(const xt of z.options)xt.selected=xt.value===Ft});for(const bt of this.data.options){const Ft=document.createElement("option");Ft.textContent=bt.displayValue,Ft.value=bt.exportValue,q.value.includes(bt.exportValue)&&(Ft.setAttribute("selected",!0),Z=!1),z.append(Ft)}let gt=null;if(Z){const bt=document.createElement("option");bt.value=" ",bt.setAttribute("hidden",!0),bt.setAttribute("selected",!0),z.prepend(bt),gt=()=>{bt.remove(),z.removeEventListener("input",gt),gt=null},z.addEventListener("input",gt)}const kt=bt=>{const Ft=bt?"value":"textContent",{options:xt,multiple:Rt}=z;return Rt?Array.prototype.filter.call(xt,Nt=>Nt.selected).map(Nt=>Nt[Ft]):xt.selectedIndex===-1?null:xt[xt.selectedIndex][Ft]};let W=kt(!1);const rt=bt=>{const Ft=bt.target.options;return Array.prototype.map.call(Ft,xt=>({displayValue:xt.textContent,exportValue:xt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",bt=>{const Ft={value(xt){gt==null||gt();const Rt=xt.detail.value,Nt=new Set(Array.isArray(Rt)?Rt:[Rt]);for(const Ht of z.options)Ht.selected=Nt.has(Ht.value);D.setValue(A,{value:kt(!0)}),W=kt(!1)},multipleSelection(xt){z.multiple=!0},remove(xt){const Rt=z.options,Nt=xt.detail.remove;Rt[Nt].selected=!1,z.remove(Nt),Rt.length>0&&Array.prototype.findIndex.call(Rt,Gt=>Gt.selected)===-1&&(Rt[0].selected=!0),D.setValue(A,{value:kt(!0),items:rt(xt)}),W=kt(!1)},clear(xt){for(;z.length!==0;)z.remove(0);D.setValue(A,{value:null,items:[]}),W=kt(!1)},insert(xt){const{index:Rt,displayValue:Nt,exportValue:Ht}=xt.detail.insert,Gt=z.children[Rt],Xt=document.createElement("option");Xt.textContent=Nt,Xt.value=Ht,Gt?Gt.before(Xt):z.append(Xt),D.setValue(A,{value:kt(!0),items:rt(xt)}),W=kt(!1)},items(xt){const{items:Rt}=xt.detail;for(;z.length!==0;)z.remove(0);for(const Nt of Rt){const{displayValue:Ht,exportValue:Gt}=Nt,Xt=document.createElement("option");Xt.textContent=Ht,Xt.value=Gt,z.append(Xt)}z.options.length>0&&(z.options[0].selected=!0),D.setValue(A,{value:kt(!0),items:rt(xt)}),W=kt(!1)},indices(xt){const Rt=new Set(xt.detail.indices);for(const Nt of xt.target.options)Nt.selected=Rt.has(Nt.index);D.setValue(A,{value:kt(!0)}),W=kt(!1)},editable(xt){xt.target.disabled=!xt.detail.editable}};this._dispatchEventFromSandbox(Ft,bt)}),z.addEventListener("input",bt=>{var xt;const Ft=kt(!0);D.setValue(A,{value:Ft}),bt.preventDefault(),(xt=this.linkService.eventBus)==null||xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:W,changeEx:Ft,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],bt=>bt.target.value)):z.addEventListener("input",function(bt){D.setValue(A,{value:kt(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class v extends M{constructor(D){var Z,gt,kt;const{data:A,elements:q}=D,z=!!((Z=A.titleObj)!=null&&Z.str||(gt=A.contentsObj)!=null&&gt.str||(kt=A.richText)!=null&&kt.str);super(D,{isRenderable:z}),this.elements=q}render(){this.container.classList.add("popupAnnotation");const D=new d({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),A=[];for(const q of this.elements)q.popup=D,A.push(q.data.id),q.addHighlightArea();return this.container.setAttribute("aria-controls",A.join(",")),this.container}}class d{constructor({container:D,color:A,elements:q,titleObj:z,modificationDate:Z,contentsObj:gt,richText:kt,parent:W,rect:rt,parentRect:bt,open:Ft}){K(this,Pt);K(this,Bt);K(this,Lt);K(this,Q,null);K(this,ot,ht(this,Lt,Ze).bind(this));K(this,w,ht(this,Bt,Qe).bind(this));K(this,I,ht(this,Pt,Je).bind(this));K(this,G,null);K(this,J,null);K(this,lt,null);K(this,dt,null);K(this,Ct,null);K(this,Et,null);K(this,mt,!1);K(this,St,null);K(this,vt,null);K(this,tt,null);K(this,et,null);K(this,pt,!1);yt(this,J,D),yt(this,et,z),yt(this,lt,gt),yt(this,tt,kt),yt(this,Ct,W),yt(this,G,A),yt(this,vt,rt),yt(this,Et,bt),yt(this,dt,q);const xt=i.PDFDateString.toDateObject(Z);xt&&yt(this,Q,W.l10n.get("annotation_date_string",{date:xt.toLocaleDateString(),time:xt.toLocaleTimeString()})),this.trigger=q.flatMap(Rt=>Rt.getElementsToTriggerPopup());for(const Rt of this.trigger)Rt.addEventListener("click",r(this,I)),Rt.addEventListener("mouseenter",r(this,w)),Rt.addEventListener("mouseleave",r(this,ot));r(this,J).hidden=!0,Ft&&ht(this,Pt,Je).call(this)}render(){if(r(this,St))return;const{page:{view:D},viewport:{rawDims:{pageWidth:A,pageHeight:q,pageX:z,pageY:Z}}}=r(this,Ct),gt=yt(this,St,document.createElement("div"));if(gt.className="popup",r(this,G)){const Yt=gt.style.outlineColor=n.Util.makeHexColor(...r(this,G));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?gt.style.backgroundColor=`color-mix(in srgb, ${Yt} 30%, white)`:gt.style.backgroundColor=n.Util.makeHexColor(...r(this,G).map(ne=>Math.floor(.7*(255-ne)+ne)))}const kt=document.createElement("span");kt.className="header";const W=document.createElement("h1");if(kt.append(W),{dir:W.dir,str:W.textContent}=r(this,et),gt.append(kt),r(this,Q)){const Yt=document.createElement("span");Yt.classList.add("popupDate"),r(this,Q).then(te=>{Yt.textContent=te}),kt.append(Yt)}const rt=r(this,lt),bt=r(this,tt);if(bt!=null&&bt.str&&(!(rt!=null&&rt.str)||rt.str===bt.str))g.XfaLayer.render({xfaHtml:bt.html,intent:"richText",div:gt}),gt.lastChild.classList.add("richText","popupContent");else{const Yt=this._formatContents(rt);gt.append(Yt)}let Ft=!!r(this,Et),xt=Ft?r(this,Et):r(this,vt);for(const Yt of r(this,dt))if(!xt||n.Util.intersect(Yt.data.rect,xt)!==null){xt=Yt.data.rect,Ft=!0;break}const Rt=n.Util.normalizeRect([xt[0],D[3]-xt[1]+D[1],xt[2],D[3]-xt[3]+D[1]]),Nt=5,Ht=Ft?xt[2]-xt[0]+Nt:0,Gt=Rt[0]+Ht,Xt=Rt[1],{style:Qt}=r(this,J);Qt.left=`${100*(Gt-z)/A}%`,Qt.top=`${100*(Xt-Z)/q}%`,r(this,J).append(gt)}_formatContents({str:D,dir:A}){const q=document.createElement("p");q.classList.add("popupContent"),q.dir=A;const z=D.split(/(?:\r\n?|\n)/);for(let Z=0,gt=z.length;Z<gt;++Z){const kt=z[Z];q.append(document.createTextNode(kt)),Z<gt-1&&q.append(document.createElement("br"))}return q}forceHide(){yt(this,pt,this.isVisible),r(this,pt)&&(r(this,J).hidden=!0)}maybeShow(){r(this,pt)&&(yt(this,pt,!1),r(this,J).hidden=!1)}get isVisible(){return r(this,J).hidden===!1}}Q=new WeakMap,ot=new WeakMap,w=new WeakMap,I=new WeakMap,G=new WeakMap,J=new WeakMap,lt=new WeakMap,dt=new WeakMap,Ct=new WeakMap,Et=new WeakMap,mt=new WeakMap,St=new WeakMap,vt=new WeakMap,tt=new WeakMap,et=new WeakMap,pt=new WeakMap,Pt=new WeakSet,Je=function(){yt(this,mt,!r(this,mt)),r(this,mt)?(ht(this,Bt,Qe).call(this),r(this,J).addEventListener("click",r(this,I))):(ht(this,Lt,Ze).call(this),r(this,J).removeEventListener("click",r(this,I)))},Bt=new WeakSet,Qe=function(){r(this,St)||this.render(),this.isVisible?r(this,mt)&&r(this,J).classList.add("focused"):(r(this,J).hidden=!1,r(this,J).style.zIndex=parseInt(r(this,J).style.zIndex)+1e3)},Lt=new WeakSet,Ze=function(){r(this,J).classList.remove("focused"),!(r(this,mt)||!this.isVisible)&&(r(this,J).hidden=!0,r(this,J).style.zIndex=parseInt(r(this,J).style.zIndex)-1e3)};class j extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0}),this.textContent=D.data.textContent,this.textPosition=D.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const D=document.createElement("div");D.classList.add("annotationTextContent"),D.setAttribute("role","comment");for(const A of this.textContent){const q=document.createElement("span");q.textContent=A,D.append(q)}this.container.append(D)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=j;class k extends M{constructor(A){var z,Z,gt;const q=!!(A.data.popupRef||(z=A.data.titleObj)!=null&&z.str||(Z=A.data.contentsObj)!=null&&Z.str||(gt=A.data.richText)!=null&&gt.str);super(A,{isRenderable:q,ignoreBorder:!0});K(this,$t,null)}render(){this.container.classList.add("lineAnnotation");const A=this.data,{width:q,height:z}=O(A.rect),Z=this.svgFactory.create(q,z,!0),gt=yt(this,$t,this.svgFactory.createElement("svg:line"));return gt.setAttribute("x1",A.rect[2]-A.lineCoordinates[0]),gt.setAttribute("y1",A.rect[3]-A.lineCoordinates[1]),gt.setAttribute("x2",A.rect[2]-A.lineCoordinates[2]),gt.setAttribute("y2",A.rect[3]-A.lineCoordinates[3]),gt.setAttribute("stroke-width",A.borderStyle.width||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),Z.append(gt),this.container.append(Z),A.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,$t)}addHighlightArea(){this.container.classList.add("highlightArea")}}$t=new WeakMap;class $ extends M{constructor(A){var z,Z,gt;const q=!!(A.data.popupRef||(z=A.data.titleObj)!=null&&z.str||(Z=A.data.contentsObj)!=null&&Z.str||(gt=A.data.richText)!=null&&gt.str);super(A,{isRenderable:q,ignoreBorder:!0});K(this,zt,null)}render(){this.container.classList.add("squareAnnotation");const A=this.data,{width:q,height:z}=O(A.rect),Z=this.svgFactory.create(q,z,!0),gt=A.borderStyle.width,kt=yt(this,zt,this.svgFactory.createElement("svg:rect"));return kt.setAttribute("x",gt/2),kt.setAttribute("y",gt/2),kt.setAttribute("width",q-gt),kt.setAttribute("height",z-gt),kt.setAttribute("stroke-width",gt||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),A.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class nt extends M{constructor(A){var z,Z,gt;const q=!!(A.data.popupRef||(z=A.data.titleObj)!=null&&z.str||(Z=A.data.contentsObj)!=null&&Z.str||(gt=A.data.richText)!=null&&gt.str);super(A,{isRenderable:q,ignoreBorder:!0});K(this,Tt,null)}render(){this.container.classList.add("circleAnnotation");const A=this.data,{width:q,height:z}=O(A.rect),Z=this.svgFactory.create(q,z,!0),gt=A.borderStyle.width,kt=yt(this,Tt,this.svgFactory.createElement("svg:ellipse"));return kt.setAttribute("cx",q/2),kt.setAttribute("cy",z/2),kt.setAttribute("rx",q/2-gt/2),kt.setAttribute("ry",z/2-gt/2),kt.setAttribute("stroke-width",gt||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),A.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class H extends M{constructor(A){var z,Z,gt;const q=!!(A.data.popupRef||(z=A.data.titleObj)!=null&&z.str||(Z=A.data.contentsObj)!=null&&Z.str||(gt=A.data.richText)!=null&&gt.str);super(A,{isRenderable:q,ignoreBorder:!0});K(this,st,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:q,height:z}=O(A.rect),Z=this.svgFactory.create(q,z,!0);let gt=[];for(const W of A.vertices){const rt=W.x-A.rect[0],bt=A.rect[3]-W.y;gt.push(rt+","+bt)}gt=gt.join(" ");const kt=yt(this,st,this.svgFactory.createElement(this.svgElementName));return kt.setAttribute("points",gt),kt.setAttribute("stroke-width",A.borderStyle.width||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),A.popupRef||this._createPopup(kt,A),this.container}getElementsToTriggerPopup(){return r(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap;class it extends H{constructor(D){super(D),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ut extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class _t extends M{constructor(A){var z,Z,gt;const q=!!(A.data.popupRef||(z=A.data.titleObj)!=null&&z.str||(Z=A.data.contentsObj)!=null&&Z.str||(gt=A.data.richText)!=null&&gt.str);super(A,{isRenderable:q,ignoreBorder:!0});K(this,ct,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const A=this.data,{width:q,height:z}=O(A.rect),Z=this.svgFactory.create(q,z,!0);for(const gt of A.inkLists){let kt=[];for(const rt of gt){const bt=rt.x-A.rect[0],Ft=A.rect[3]-rt.y;kt.push(`${bt},${Ft}`)}kt=kt.join(" ");const W=this.svgFactory.createElement(this.svgElementName);r(this,ct).push(W),W.setAttribute("points",kt),W.setAttribute("stroke-width",A.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),A.popupRef||this._createPopup(W,A),Z.append(W)}return this.container.append(Z),this.container}getElementsToTriggerPopup(){return r(this,ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}ct=new WeakMap,e.InkAnnotationElement=_t;class S extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class X extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class at extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class At extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class wt extends M{constructor(D){var q,z,Z;const A=!!(D.data.popupRef||(q=D.data.titleObj)!=null&&q.str||(z=D.data.contentsObj)!=null&&z.str||(Z=D.data.richText)!=null&&Z.str);super(D,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}e.StampAnnotationElement=wt;class R extends M{constructor(A){var Z;super(A,{isRenderable:!0});K(this,Dt,null);const{filename:q,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(q,!0),this.content=z,(Z=this.linkService.eventBus)==null||Z.dispatch("fileattachmentannotation",{source:this,filename:q,content:z})}render(){var z,Z;this.container.classList.add("fileAttachmentAnnotation");const{data:A}=this;let q;return A.hasAppearance||A.fillAlpha===0?q=document.createElement("div"):(q=document.createElement("img"),q.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(A.name)?"paperclip":"pushpin"}.svg`,A.fillAlpha&&A.fillAlpha<1&&(q.style=`filter: opacity(${Math.round(A.fillAlpha*100)}%);`)),q.classList.add("popupTriggerArea"),q.addEventListener("dblclick",this._download.bind(this)),yt(this,Dt,q),!A.popupRef&&((z=A.titleObj)!=null&&z.str||(Z=A.contentsObj)!=null&&Z.str||A.richText)&&this._createPopup(),this.container.append(q),this.container}getElementsToTriggerPopup(){return r(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var A;(A=this.downloadManager)==null||A.openOrDownloadData(this.container,this.content,this.filename)}}Dt=new WeakMap;class a{constructor({div:D,accessibilityManager:A,annotationCanvasMap:q,l10n:z,page:Z,viewport:gt}){K(this,Zt);K(this,It);K(this,qt,null);K(this,Vt,null);K(this,Kt,new Map);this.div=D,yt(this,qt,A),yt(this,Vt,q),this.l10n=z,this.page=Z,this.viewport=gt,this.zIndex=0,this.l10n||(this.l10n=L.NullL10n)}async render(D){const{annotations:A}=D,q=this.div;(0,i.setLayerDimensions)(q,this.viewport);const z=new Map,Z={data:null,layer:q,linkService:D.linkService,downloadManager:D.downloadManager,imageResourcesPath:D.imageResourcesPath||"",renderForms:D.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:D.annotationStorage||new l.AnnotationStorage,enableScripting:D.enableScripting===!0,hasJSActions:D.hasJSActions,fieldObjects:D.fieldObjects,parent:this,elements:null};for(const gt of A){if(gt.noHTML)continue;const kt=gt.annotationType===n.AnnotationType.POPUP;if(kt){const bt=z.get(gt.id);if(!bt)continue;Z.elements=bt}else{const{width:bt,height:Ft}=O(gt.rect);if(bt<=0||Ft<=0)continue}Z.data=gt;const W=P.create(Z);if(!W.isRenderable)continue;if(!kt&&gt.popupRef){const bt=z.get(gt.popupRef);bt?bt.push(W):z.set(gt.popupRef,[W])}W.annotationEditorType>0&&r(this,Kt).set(W.data.id,W);const rt=W.render();gt.hidden&&(rt.style.visibility="hidden"),ht(this,Zt,Mn).call(this,rt,gt.id)}ht(this,It,tn).call(this),await this.l10n.translate(q)}update({viewport:D}){const A=this.div;this.viewport=D,(0,i.setLayerDimensions)(A,{rotation:D.rotation}),ht(this,It,tn).call(this),A.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Kt).values())}getEditableAnnotation(D){return r(this,Kt).get(D)}}qt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,Zt=new WeakSet,Mn=function(D,A){var z;const q=D.firstChild||D;q.id=`${i.AnnotationPrefix}${A}`,this.div.append(D),(z=r(this,qt))==null||z.moveElementInDOM(this.div,D,q,!1)},It=new WeakSet,tn=function(){if(!r(this,Vt))return;const D=this.div;for(const[A,q]of r(this,Vt)){const z=D.querySelector(`[data-annotation-id="${A}"]`);if(!z)continue;const{firstChild:Z}=z;Z?Z.nodeName==="CANVAS"?Z.replaceWith(q):Z.before(q):z.append(q)}r(this,Vt).clear()},e.AnnotationLayer=a},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function n(l){return Math.max(0,Math.min(255,255*l))}class i{static CMYK_G([c,L,g,m]){return["G",1-Math.min(1,.3*c+.59*g+.11*L+m)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_rgb([c]){return c=n(c),[c,c,c]}static G_HTML([c]){const L=s(c);return`#${L}${L}${L}`}static RGB_G([c,L,g]){return["G",.3*c+.59*L+.11*g]}static RGB_rgb(c){return c.map(n)}static RGB_HTML(c){return`#${c.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([c,L,g,m]){return["RGB",1-Math.min(1,c+m),1-Math.min(1,g+m),1-Math.min(1,L+m)]}static CMYK_rgb([c,L,g,m]){return[n(1-Math.min(1,c+m)),n(1-Math.min(1,g+m)),n(1-Math.min(1,L+m))]}static CMYK_HTML(c){const L=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(L)}static RGB_CMYK([c,L,g]){const m=1-c,u=1-L,F=1-g,O=Math.min(m,u,F);return["CMYK",m,u,F,O]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};s.print_progress_percent="{{progress}}%";function n(c,L){switch(c){case"find_match_count":c=`find_match_count[${L.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${L.limit===1?"one":"other"}]`;break}return s[c]||""}function i(c,L){return L?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,m)=>m in L?L[m]:"{{"+m+"}}"):c}const l={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(c,L=null,g=n(c,L)){return i(g,L)},async translate(c){}};e.NullL10n=l},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class i{static setupStorage(c,L,g,m,u){const F=m.getValue(L,{value:null});switch(g.name){case"textarea":if(F.value!==null&&(c.textContent=F.value),u==="print")break;c.addEventListener("input",O=>{m.setValue(L,{value:O.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(F.value===g.attributes.xfaOn?c.setAttribute("checked",!0):F.value===g.attributes.xfaOff&&c.removeAttribute("checked"),u==="print")break;c.addEventListener("change",O=>{m.setValue(L,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(F.value!==null&&c.setAttribute("value",F.value),u==="print")break;c.addEventListener("input",O=>{m.setValue(L,{value:O.target.value})})}break;case"select":if(F.value!==null){c.setAttribute("value",F.value);for(const O of g.children)O.attributes.value===F.value?O.attributes.selected=!0:O.attributes.hasOwnProperty("selected")&&delete O.attributes.selected}c.addEventListener("input",O=>{const P=O.target.options,M=P.selectedIndex===-1?"":P[P.selectedIndex].value;m.setValue(L,{value:M})});break}}static setAttributes({html:c,element:L,storage:g=null,intent:m,linkService:u}){const{attributes:F}=L,O=c instanceof HTMLAnchorElement;F.type==="radio"&&(F.name=`${F.name}-${m}`);for(const[P,M]of Object.entries(F))if(M!=null)switch(P){case"class":M.length&&c.setAttribute(P,M.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",M);break;case"style":Object.assign(c.style,M);break;case"textContent":c.textContent=M;break;default:(!O||P!=="href"&&P!=="newWindow")&&c.setAttribute(P,M)}O&&u.addLinkAttributes(c,F.href,F.newWindow),g&&F.dataId&&this.setupStorage(c,F.dataId,L,g)}static render(c){var C;const L=c.annotationStorage,g=c.linkService,m=c.xfaHtml,u=c.intent||"display",F=document.createElement(m.name);m.attributes&&this.setAttributes({html:F,element:m,intent:u,linkService:g});const O=[[m,-1,F]],P=c.div;if(P.append(F),c.viewport){const _=`matrix(${c.viewport.transform.join(",")})`;P.style.transform=_}u!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const M=[];for(;O.length>0;){const[_,T,x]=O.at(-1);if(T+1===_.children.length){O.pop();continue}const B=_.children[++O.at(-1)[1]];if(B===null)continue;const{name:E}=B;if(E==="#text"){const b=document.createTextNode(B.value);M.push(b),x.append(b);continue}const f=(C=B==null?void 0:B.attributes)!=null&&C.xmlns?document.createElementNS(B.attributes.xmlns,E):document.createElement(E);if(x.append(f),B.attributes&&this.setAttributes({html:f,element:B,storage:L,intent:u,linkService:g}),B.children&&B.children.length>0)O.push([B,-1,f]);else if(B.value){const b=document.createTextNode(B.value);n.XfaText.shouldBuildText(E)&&M.push(b),f.append(b)}}for(const _ of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:M}}static update(c){const L=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=L,c.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{var g,m,u,F,O,P,M,C,_,T,x,B,E,f,b,N,In,d,On,k,Dn,nt,Ln,it,en,_t,Nn,X,nn,At,Bn,R,jn,o,Hn,V,Un,Y,Wn,ot,ie,I,sn,J,Te,dt,xe,Et,he,St,rn,tt,Pe,pt,Vn,Mt,an,Ut,zn,jt,$n,zt,on,st,ke,Dt,de;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),i=s(4),l=s(29),c=s(5);const Vt=class Vt extends i.AnnotationEditor{constructor(ft){super({...ft,name:"inkEditor"});K(this,N);K(this,d);K(this,k);K(this,nt);K(this,it);K(this,_t);K(this,X);K(this,At);K(this,R);K(this,o);K(this,V);K(this,Y);K(this,ot);K(this,I);K(this,J);K(this,dt);K(this,Et);K(this,St);K(this,tt);K(this,jt);K(this,zt);K(this,st);K(this,Dt);K(this,g,0);K(this,m,0);K(this,u,this.canvasContextMenu.bind(this));K(this,F,this.canvasPointermove.bind(this));K(this,O,this.canvasPointerleave.bind(this));K(this,P,this.canvasPointerup.bind(this));K(this,M,this.canvasPointerdown.bind(this));K(this,C,new Path2D);K(this,_,!1);K(this,T,!1);K(this,x,!1);K(this,B,null);K(this,E,0);K(this,f,0);K(this,b,null);this.color=ft.color||null,this.thickness=ft.thickness||null,this.opacity=ft.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ft){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(It=>[It,ft.get(It)]))}static updateDefaultParams(ft,It){switch(ft){case n.AnnotationEditorParamsType.INK_THICKNESS:Vt._defaultThickness=It;break;case n.AnnotationEditorParamsType.INK_COLOR:Vt._defaultColor=It;break;case n.AnnotationEditorParamsType.INK_OPACITY:Vt._defaultOpacity=It/100;break}}updateParams(ft,It){switch(ft){case n.AnnotationEditorParamsType.INK_THICKNESS:ht(this,N,In).call(this,It);break;case n.AnnotationEditorParamsType.INK_COLOR:ht(this,d,On).call(this,It);break;case n.AnnotationEditorParamsType.INK_OPACITY:ht(this,k,Dn).call(this,It);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Vt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Vt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ht(this,J,Te).call(this),ht(this,dt,xe).call(this)),this.isAttachedToDOM||(this.parent.add(this),ht(this,Et,he).call(this)),ht(this,Dt,de).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,B).disconnect(),yt(this,B,null),super.remove())}setParent(ft){!this.parent&&ft?this._uiManager.removeShouldRescale(this):this.parent&&ft===null&&this._uiManager.addShouldRescale(this),super.setParent(ft)}onScaleChanging(){const[ft,It]=this.parentDimensions,Wt=this.width*ft,Ot=this.height*It;this.setDimensions(Wt,Ot)}enableEditMode(){r(this,_)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",r(this,M)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,M)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,_)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),yt(this,_,!0),this.div.classList.add("disabled"),ht(this,Dt,de).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ft){this._focusEventsAllowed&&(super.focusin(ft),this.enableEditMode())}canvasPointerdown(ft){ft.button!==0||!this.isInEditMode()||r(this,_)||(this.setInForeground(),ft.preventDefault(),ft.type!=="mouse"&&this.div.focus(),ht(this,_t,Nn).call(this,ft.offsetX,ft.offsetY))}canvasContextMenu(ft){ft.preventDefault()}canvasPointermove(ft){ft.preventDefault(),ht(this,X,nn).call(this,ft.offsetX,ft.offsetY)}canvasPointerup(ft){ft.preventDefault(),ht(this,I,sn).call(this,ft)}canvasPointerleave(ft){ht(this,I,sn).call(this,ft)}get isResizable(){return!this.isEmpty()&&r(this,_)}render(){if(this.div)return this.div;let ft,It;this.width&&(ft=this.x,It=this.y),super.render(),Vt._l10nPromise.get("editor_ink2_aria_label").then(q=>{var z;return(z=this.div)==null?void 0:z.setAttribute("aria-label",q)});const[Wt,Ot,D,A]=ht(this,nt,Ln).call(this);if(this.setAt(Wt,Ot,0,0),this.setDims(D,A),ht(this,J,Te).call(this),this.width){const[q,z]=this.parentDimensions;this.setAspectRatio(this.width*q,this.height*z),this.setAt(ft*q,It*z,this.width*q,this.height*z),yt(this,x,!0),ht(this,Et,he).call(this),this.setDims(this.width*q,this.height*z),ht(this,ot,ie).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ht(this,dt,xe).call(this),this.div}setDimensions(ft,It){const Wt=Math.round(ft),Ot=Math.round(It);if(r(this,E)===Wt&&r(this,f)===Ot)return;yt(this,E,Wt),yt(this,f,Ot),this.canvas.style.visibility="hidden";const[D,A]=this.parentDimensions;this.width=ft/D,this.height=It/A,this.fixAndSetPosition(),r(this,_)&&ht(this,St,rn).call(this,ft,It),ht(this,Et,he).call(this),ht(this,ot,ie).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ft,It,Wt){var Ft,xt,Rt;if(ft instanceof l.InkAnnotationElement)return null;const Ot=super.deserialize(ft,It,Wt);Ot.thickness=ft.thickness,Ot.color=n.Util.makeHexColor(...ft.color),Ot.opacity=ft.opacity;const[D,A]=Ot.pageDimensions,q=Ot.width*D,z=Ot.height*A,Z=Ot.parentScale,gt=ft.thickness/2;yt(Ot,_,!0),yt(Ot,E,Math.round(q)),yt(Ot,f,Math.round(z));const{paths:kt,rect:W,rotation:rt}=ft;for(let{bezier:Nt}of kt){Nt=ht(Ft=Vt,Ut,zn).call(Ft,Nt,W,rt);const Ht=[];Ot.paths.push(Ht);let Gt=Z*(Nt[0]-gt),Xt=Z*(Nt[1]-gt);for(let Yt=2,te=Nt.length;Yt<te;Yt+=6){const ne=Z*(Nt[Yt]-gt),ee=Z*(Nt[Yt+1]-gt),re=Z*(Nt[Yt+2]-gt),Yn=Z*(Nt[Yt+3]-gt),hn=Z*(Nt[Yt+4]-gt),dn=Z*(Nt[Yt+5]-gt);Ht.push([[Gt,Xt],[ne,ee],[re,Yn],[hn,dn]]),Gt=hn,Xt=dn}const Qt=ht(this,pt,Vn).call(this,Ht);Ot.bezierPath2D.push(Qt)}const bt=ht(xt=Ot,zt,on).call(xt);return yt(Ot,m,Math.max(i.AnnotationEditor.MIN_SIZE,bt[2]-bt[0])),yt(Ot,g,Math.max(i.AnnotationEditor.MIN_SIZE,bt[3]-bt[1])),ht(Rt=Ot,St,rn).call(Rt,q,z),Ot}serialize(){if(this.isEmpty())return null;const ft=this.getRect(0,0),It=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:It,thickness:this.thickness,opacity:this.opacity,paths:ht(this,jt,$n).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ft),pageIndex:this.pageIndex,rect:ft,rotation:this.rotation}}};g=new WeakMap,m=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap,B=new WeakMap,E=new WeakMap,f=new WeakMap,b=new WeakMap,N=new WeakSet,In=function(ft){const It=this.thickness;this.addCommands({cmd:()=>{this.thickness=ft,ht(this,Dt,de).call(this)},undo:()=>{this.thickness=It,ht(this,Dt,de).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},d=new WeakSet,On=function(ft){const It=this.color;this.addCommands({cmd:()=>{this.color=ft,ht(this,ot,ie).call(this)},undo:()=>{this.color=It,ht(this,ot,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,Dn=function(ft){ft/=100;const It=this.opacity;this.addCommands({cmd:()=>{this.opacity=ft,ht(this,ot,ie).call(this)},undo:()=>{this.opacity=It,ht(this,ot,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},nt=new WeakSet,Ln=function(){const{parentRotation:ft,parentDimensions:[It,Wt]}=this;switch(ft){case 90:return[0,Wt,Wt,It];case 180:return[It,Wt,It,Wt];case 270:return[It,0,Wt,It];default:return[0,0,It,Wt]}},it=new WeakSet,en=function(){const{ctx:ft,color:It,opacity:Wt,thickness:Ot,parentScale:D,scaleFactor:A}=this;ft.lineWidth=Ot*D/A,ft.lineCap="round",ft.lineJoin="round",ft.miterLimit=10,ft.strokeStyle=`${It}${(0,c.opacityToHex)(Wt)}`},_t=new WeakSet,Nn=function(ft,It){this.canvas.addEventListener("contextmenu",r(this,u)),this.canvas.addEventListener("pointerleave",r(this,O)),this.canvas.addEventListener("pointermove",r(this,F)),this.canvas.addEventListener("pointerup",r(this,P)),this.canvas.removeEventListener("pointerdown",r(this,M)),this.isEditing=!0,r(this,x)||(yt(this,x,!0),ht(this,Et,he).call(this),this.thickness||(this.thickness=Vt._defaultThickness),this.color||(this.color=Vt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Vt._defaultOpacity)),this.currentPath.push([ft,It]),yt(this,T,!1),ht(this,it,en).call(this),yt(this,b,()=>{ht(this,o,Hn).call(this),r(this,b)&&window.requestAnimationFrame(r(this,b))}),window.requestAnimationFrame(r(this,b))},X=new WeakSet,nn=function(ft,It){const[Wt,Ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&ft===Wt&&It===Ot)return;const D=this.currentPath;let A=r(this,C);if(D.push([ft,It]),yt(this,T,!0),D.length<=2){A.moveTo(...D[0]),A.lineTo(ft,It);return}D.length===3&&(yt(this,C,A=new Path2D),A.moveTo(...D[0])),ht(this,V,Un).call(this,A,...D.at(-3),...D.at(-2),ft,It)},At=new WeakSet,Bn=function(){if(this.currentPath.length===0)return;const ft=this.currentPath.at(-1);r(this,C).lineTo(...ft)},R=new WeakSet,jn=function(ft,It){yt(this,b,null),ft=Math.min(Math.max(ft,0),this.canvas.width),It=Math.min(Math.max(It,0),this.canvas.height),ht(this,X,nn).call(this,ft,It),ht(this,At,Bn).call(this);let Wt;if(this.currentPath.length!==1)Wt=ht(this,Y,Wn).call(this);else{const z=[ft,It];Wt=[[z,z.slice(),z.slice(),z]]}const Ot=r(this,C),D=this.currentPath;this.currentPath=[],yt(this,C,new Path2D);const A=()=>{this.allRawPaths.push(D),this.paths.push(Wt),this.bezierPath2D.push(Ot),this.rebuild()},q=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ht(this,J,Te).call(this),ht(this,dt,xe).call(this)),ht(this,Dt,de).call(this))};this.addCommands({cmd:A,undo:q,mustExec:!0})},o=new WeakSet,Hn=function(){if(!r(this,T))return;yt(this,T,!1);const ft=Math.ceil(this.thickness*this.parentScale),It=this.currentPath.slice(-3),Wt=It.map(A=>A[0]),Ot=It.map(A=>A[1]);Math.min(...Wt)-ft,Math.max(...Wt)+ft,Math.min(...Ot)-ft,Math.max(...Ot)+ft;const{ctx:D}=this;D.save(),D.clearRect(0,0,this.canvas.width,this.canvas.height);for(const A of this.bezierPath2D)D.stroke(A);D.stroke(r(this,C)),D.restore()},V=new WeakSet,Un=function(ft,It,Wt,Ot,D,A,q){const z=(It+Ot)/2,Z=(Wt+D)/2,gt=(Ot+A)/2,kt=(D+q)/2;ft.bezierCurveTo(z+2*(Ot-z)/3,Z+2*(D-Z)/3,gt+2*(Ot-gt)/3,kt+2*(D-kt)/3,gt,kt)},Y=new WeakSet,Wn=function(){const ft=this.currentPath;if(ft.length<=2)return[[ft[0],ft[0],ft.at(-1),ft.at(-1)]];const It=[];let Wt,[Ot,D]=ft[0];for(Wt=1;Wt<ft.length-2;Wt++){const[W,rt]=ft[Wt],[bt,Ft]=ft[Wt+1],xt=(W+bt)/2,Rt=(rt+Ft)/2,Nt=[Ot+2*(W-Ot)/3,D+2*(rt-D)/3],Ht=[xt+2*(W-xt)/3,Rt+2*(rt-Rt)/3];It.push([[Ot,D],Nt,Ht,[xt,Rt]]),[Ot,D]=[xt,Rt]}const[A,q]=ft[Wt],[z,Z]=ft[Wt+1],gt=[Ot+2*(A-Ot)/3,D+2*(q-D)/3],kt=[z+2*(A-z)/3,Z+2*(q-Z)/3];return It.push([[Ot,D],gt,kt,[z,Z]]),It},ot=new WeakSet,ie=function(){if(this.isEmpty()){ht(this,tt,Pe).call(this);return}ht(this,it,en).call(this);const{canvas:ft,ctx:It}=this;It.setTransform(1,0,0,1,0,0),It.clearRect(0,0,ft.width,ft.height),ht(this,tt,Pe).call(this);for(const Wt of this.bezierPath2D)It.stroke(Wt)},I=new WeakSet,sn=function(ft){this.canvas.removeEventListener("pointerleave",r(this,O)),this.canvas.removeEventListener("pointermove",r(this,F)),this.canvas.removeEventListener("pointerup",r(this,P)),this.canvas.addEventListener("pointerdown",r(this,M)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",r(this,u))},10),ht(this,R,jn).call(this,ft.offsetX,ft.offsetY),this.addToAnnotationStorage(),this.setInBackground()},J=new WeakSet,Te=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Vt._l10nPromise.get("editor_ink_canvas_aria_label").then(ft=>{var It;return(It=this.canvas)==null?void 0:It.setAttribute("aria-label",ft)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,xe=function(){yt(this,B,new ResizeObserver(ft=>{const It=ft[0].contentRect;It.width&&It.height&&this.setDimensions(It.width,It.height)})),r(this,B).observe(this.div)},Et=new WeakSet,he=function(){if(!r(this,x))return;const[ft,It]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ft),this.canvas.height=Math.ceil(this.height*It),ht(this,tt,Pe).call(this)},St=new WeakSet,rn=function(ft,It){const Wt=ht(this,st,ke).call(this),Ot=(ft-Wt)/r(this,m),D=(It-Wt)/r(this,g);this.scaleFactor=Math.min(Ot,D)},tt=new WeakSet,Pe=function(){const ft=ht(this,st,ke).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ft,this.translationY*this.scaleFactor+ft)},pt=new WeakSet,Vn=function(ft){const It=new Path2D;for(let Wt=0,Ot=ft.length;Wt<Ot;Wt++){const[D,A,q,z]=ft[Wt];Wt===0&&It.moveTo(...D),It.bezierCurveTo(A[0],A[1],q[0],q[1],z[0],z[1])}return It},Mt=new WeakSet,an=function(ft,It,Wt){const[Ot,D,A,q]=It;switch(Wt){case 0:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]+=Ot,ft[z+1]=q-ft[z+1];break;case 90:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=ft[z+1]+Ot,ft[z+1]=gt+D}break;case 180:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]=A-ft[z],ft[z+1]+=D;break;case 270:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=A-ft[z+1],ft[z+1]=q-gt}break;default:throw new Error("Invalid rotation")}return ft},Ut=new WeakSet,zn=function(ft,It,Wt){const[Ot,D,A,q]=It;switch(Wt){case 0:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]-=Ot,ft[z+1]=q-ft[z+1];break;case 90:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=ft[z+1]-D,ft[z+1]=gt-Ot}break;case 180:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]=A-ft[z],ft[z+1]-=D;break;case 270:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=q-ft[z+1],ft[z+1]=A-gt}break;default:throw new Error("Invalid rotation")}return ft},jt=new WeakSet,$n=function(ft,It,Wt,Ot){var Z,gt;const D=[],A=this.thickness/2,q=ft*It+A,z=ft*Wt+A;for(const kt of this.paths){const W=[],rt=[];for(let bt=0,Ft=kt.length;bt<Ft;bt++){const[xt,Rt,Nt,Ht]=kt[bt],Gt=ft*xt[0]+q,Xt=ft*xt[1]+z,Qt=ft*Rt[0]+q,Yt=ft*Rt[1]+z,te=ft*Nt[0]+q,ne=ft*Nt[1]+z,ee=ft*Ht[0]+q,re=ft*Ht[1]+z;bt===0&&(W.push(Gt,Xt),rt.push(Gt,Xt)),W.push(Qt,Yt,te,ne,ee,re),rt.push(Qt,Yt),bt===Ft-1&&rt.push(ee,re)}D.push({bezier:ht(Z=Vt,Mt,an).call(Z,W,Ot,this.rotation),points:ht(gt=Vt,Mt,an).call(gt,rt,Ot,this.rotation)})}return D},zt=new WeakSet,on=function(){let ft=1/0,It=-1/0,Wt=1/0,Ot=-1/0;for(const D of this.paths)for(const[A,q,z,Z]of D){const gt=n.Util.bezierBoundingBox(...A,...q,...z,...Z);ft=Math.min(ft,gt[0]),Wt=Math.min(Wt,gt[1]),It=Math.max(It,gt[2]),Ot=Math.max(Ot,gt[3])}return[ft,Wt,It,Ot]},st=new WeakSet,ke=function(){return r(this,_)?Math.ceil(this.thickness*this.parentScale):0},Dt=new WeakSet,de=function(ft=!1){if(this.isEmpty())return;if(!r(this,_)){ht(this,ot,ie).call(this);return}const It=ht(this,zt,on).call(this),Wt=ht(this,st,ke).call(this);yt(this,m,Math.max(i.AnnotationEditor.MIN_SIZE,It[2]-It[0])),yt(this,g,Math.max(i.AnnotationEditor.MIN_SIZE,It[3]-It[1]));const Ot=Math.ceil(Wt+r(this,m)*this.scaleFactor),D=Math.ceil(Wt+r(this,g)*this.scaleFactor),[A,q]=this.parentDimensions;this.width=Ot/A,this.height=D/q,this.setAspectRatio(Ot,D);const z=this.translationX,Z=this.translationY;this.translationX=-It[0],this.translationY=-It[1],ht(this,Et,he).call(this),ht(this,ot,ie).call(this),yt(this,E,Ot),yt(this,f,D),this.setDims(Ot,D);const gt=ft?Wt/this.scaleFactor/2:0;this.translate(z-this.translationX-gt,Z-this.translationY-gt)},K(Vt,pt),K(Vt,Mt),K(Vt,Ut),Jt(Vt,"_defaultColor",null),Jt(Vt,"_defaultOpacity",1),Jt(Vt,"_defaultThickness",1),Jt(Vt,"_l10nPromise"),Jt(Vt,"_type","ink");let L=Vt;e.InkEditor=L},(t,e,s)=>{var g,m,u,F,O,P,M,C,_,T,x,_e,E,Ae,b,Re,v,ln,j,qn,$,Gn,H,cn,ut,Fe,S,Xn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),i=s(4),l=s(6),c=s(29);const at=class at extends i.AnnotationEditor{constructor(R){super({...R,name:"stampEditor"});K(this,x);K(this,E);K(this,b);K(this,v);K(this,j);K(this,$);K(this,H);K(this,ut);K(this,S);K(this,g,null);K(this,m,null);K(this,u,null);K(this,F,null);K(this,O,null);K(this,P,null);K(this,M,null);K(this,C,null);K(this,_,!1);K(this,T,!1);yt(this,F,R.bitmapUrl),yt(this,O,R.bitmapFile)}static get supportedTypes(){const R=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",R.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(R){return this.supportedTypes.includes(R)}static paste(R,a){a.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:R.getAsFile()})}remove(){var R,a;r(this,m)&&(yt(this,g,null),this._uiManager.imageManager.deleteId(r(this,m)),(R=r(this,P))==null||R.remove(),yt(this,P,null),(a=r(this,M))==null||a.disconnect(),yt(this,M,null)),super.remove()}rebuild(){if(!this.parent){r(this,m)&&ht(this,b,Re).call(this);return}super.rebuild(),this.div!==null&&(r(this,m)&&ht(this,b,Re).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(r(this,u)||r(this,g)||r(this,F)||r(this,O))}get isResizable(){return!0}render(){if(this.div)return this.div;let R,a;if(this.width&&(R=this.x,a=this.y),super.render(),this.div.hidden=!0,r(this,g)?ht(this,v,ln).call(this):ht(this,b,Re).call(this),this.width){const[o,y]=this.parentDimensions;this.setAt(R*o,a*y,this.width*o,this.height*y)}return this.div}static deserialize(R,a,o){if(R instanceof c.StampAnnotationElement)return null;const y=super.deserialize(R,a,o),{rect:V,bitmapUrl:U,bitmapId:Y,isSvg:Q}=R;Y&&o.imageManager.isValidId(Y)?yt(y,m,Y):yt(y,F,U),yt(y,_,Q);const[ot,w]=y.pageDimensions;return y.width=(V[2]-V[0])/ot,y.height=(V[3]-V[1])/w,y}serialize(R=!1,a=null){if(this.isEmpty())return null;const o={annotationType:n.AnnotationEditorType.STAMP,bitmapId:r(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,_)};if(R)return o.bitmapUrl=ht(this,ut,Fe).call(this,!0),o;if(a===null)return o;a.stamps||(a.stamps=new Map);const y=r(this,_)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!a.stamps.has(r(this,m)))a.stamps.set(r(this,m),{area:y,serialized:o}),o.bitmap=ht(this,ut,Fe).call(this,!1);else if(r(this,_)){const V=a.stamps.get(r(this,m));y>V.area&&(V.area=y,V.serialized.bitmap.close(),V.serialized.bitmap=ht(this,ut,Fe).call(this,!1))}return o}};g=new WeakMap,m=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakSet,_e=function(R,a=!1){if(!R){this.remove();return}yt(this,g,R.bitmap),a||(yt(this,m,R.id),yt(this,_,R.isSvg)),ht(this,v,ln).call(this)},E=new WeakSet,Ae=function(){yt(this,u,null),this._uiManager.enableWaiting(!1),r(this,P)&&this.div.focus()},b=new WeakSet,Re=function(){if(r(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(r(this,m)).then(a=>ht(this,x,_e).call(this,a,!0)).finally(()=>ht(this,E,Ae).call(this));return}if(r(this,F)){const a=r(this,F);yt(this,F,null),this._uiManager.enableWaiting(!0),yt(this,u,this._uiManager.imageManager.getFromUrl(a).then(o=>ht(this,x,_e).call(this,o)).finally(()=>ht(this,E,Ae).call(this)));return}if(r(this,O)){const a=r(this,O);yt(this,O,null),this._uiManager.enableWaiting(!0),yt(this,u,this._uiManager.imageManager.getFromFile(a).then(o=>ht(this,x,_e).call(this,o)).finally(()=>ht(this,E,Ae).call(this)));return}const R=document.createElement("input");R.type="file",R.accept=at.supportedTypesStr,yt(this,u,new Promise(a=>{R.addEventListener("change",async()=>{if(!R.files||R.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(R.files[0]);ht(this,x,_e).call(this,o)}a()}),R.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>ht(this,E,Ae).call(this))),R.click()},v=new WeakSet,ln=function(){const{div:R}=this;let{width:a,height:o}=r(this,g);const[y,V]=this.pageDimensions,U=.75;if(this.width)a=this.width*y,o=this.height*V;else if(a>U*y||o>U*V){const w=Math.min(U*y/a,U*V/o);a*=w,o*=w}const[Y,Q]=this.parentDimensions;this.setDims(a*Y/y,o*Q/V),this._uiManager.enableWaiting(!1);const ot=yt(this,P,document.createElement("canvas"));R.append(ot),R.hidden=!1,ht(this,H,cn).call(this,a,o),ht(this,S,Xn).call(this),r(this,T)||(this.parent.addUndoableEditor(this),yt(this,T,!0))},j=new WeakSet,qn=function(R,a){var U;const[o,y]=this.parentDimensions;this.width=R/o,this.height=a/y,this.setDims(R,a),(U=this._initialOptions)!=null&&U.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,r(this,C)!==null&&clearTimeout(r(this,C)),yt(this,C,setTimeout(()=>{yt(this,C,null),ht(this,H,cn).call(this,R,a)},200))},$=new WeakSet,Gn=function(R,a){const{width:o,height:y}=r(this,g);let V=o,U=y,Y=r(this,g);for(;V>2*R||U>2*a;){const Q=V,ot=U;V>2*R&&(V=V>=16384?Math.floor(V/2)-1:Math.ceil(V/2)),U>2*a&&(U=U>=16384?Math.floor(U/2)-1:Math.ceil(U/2));const w=new OffscreenCanvas(V,U);w.getContext("2d").drawImage(Y,0,0,Q,ot,0,0,V,U),Y=w.transferToImageBitmap()}return Y},H=new WeakSet,cn=function(R,a){R=Math.ceil(R),a=Math.ceil(a);const o=r(this,P);if(!o||o.width===R&&o.height===a)return;o.width=R,o.height=a;const y=r(this,_)?r(this,g):ht(this,$,Gn).call(this,R,a),V=o.getContext("2d");V.filter=this._uiManager.hcmFilter,V.drawImage(y,0,0,y.width,y.height,0,0,R,a)},ut=new WeakSet,Fe=function(R){if(R){if(r(this,_)){const y=this._uiManager.imageManager.getSvgUrl(r(this,m));if(y)return y}const a=document.createElement("canvas");return{width:a.width,height:a.height}=r(this,g),a.getContext("2d").drawImage(r(this,g),0,0),a.toDataURL()}if(r(this,_)){const[a,o]=this.pageDimensions,y=Math.round(this.width*a*l.PixelsPerInch.PDF_TO_CSS_UNITS),V=Math.round(this.height*o*l.PixelsPerInch.PDF_TO_CSS_UNITS),U=new OffscreenCanvas(y,V);return U.getContext("2d").drawImage(r(this,g),0,0,r(this,g).width,r(this,g).height,0,0,y,V),U.transferToImageBitmap()}return structuredClone(r(this,g))},S=new WeakSet,Xn=function(){yt(this,M,new ResizeObserver(R=>{const a=R[0].contentRect;a.width&&a.height&&ht(this,j,qn).call(this,a.width,a.height)})),r(this,M).observe(this.div)},Jt(at,"_type","stamp");let L=at;e.StampEditor=L}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return l.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return L.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),l=__w_pdfjs_require__(27),c=__w_pdfjs_require__(5),L=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),m=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const _hoisted_1={class:"flex w-full flex-col items-center min-h-[calc(100dvh)] bg-white dark:bg-slate-900 transition-all duration-200 overflow-x-auto relative"},_hoisted_2={class:"flex items-center mt-4 w-10/12 lg:w-auto"},_hoisted_3={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},_hoisted_4=createBaseVNode("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1),_hoisted_5=[_hoisted_4],_hoisted_6={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},_hoisted_7=createBaseVNode("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1),_hoisted_8=[_hoisted_7],_hoisted_9={class:"w-full flex flex-col lg:flex-row mt-6 items-start lg:items-start px-4 pb-6"},_hoisted_10={key:0,class:"w-full lg:w-auto p-4 bg-white border border-gray-200 rounded-lg shadow lg:p-5 dark:bg-gray-800 dark:border-gray-700"},_hoisted_11=createBaseVNode("div",{class:"flex items-center justify-between mb-4"},[createBaseVNode("h5",{class:"text-xl font-bold leading-none text-gray-900 dark:text-white"},"Summary")],-1),_hoisted_12={class:"flow-root"},_hoisted_13={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-700"},_hoisted_14={class:"py-2 sm:py-3"},_hoisted_15={class:"flex items-center space-x-6"},_hoisted_16={class:"flex-1 min-w-0"},_hoisted_17={class:"text-sm font-medium text-gray-900 truncate dark:text-white"},_hoisted_18={class:"ml-2 inline-flex items-center text-base font-semibold text-gray-900 dark:text-white"},_hoisted_19={key:0,class:"mt-6 lg:mt-auto lg:ml-4 flex flex-col space-y-4 max-w-full"},_hoisted_20={class:"relative shadow-md rounded-lg border border-gray-200 dark:border-gray-700 overflow-x-auto"},_hoisted_21={class:"w-full border-collapse border-spacing-1 min-w-min text-sm text-left text-gray-500 dark:text-gray-400"},_hoisted_22={class:"p-4 lg:p-6 text-lg font-semibold text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800"},_hoisted_23={class:"mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"},_hoisted_24={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},_hoisted_25={scope:"col",class:"px-4 py-3 whitespace-nowrap"},_hoisted_26={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-xs lg:text-sm last:border-b-0"},_hoisted_27={scope:"row",class:"px-4 lg:px-6 py-3 lg:py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white max-w-full overflow-hidden text-ellipsis"},_hoisted_28={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_29={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_30={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_31={class:"px-4 lg:px-6 py-3 lg:py-4 text-center"},_hoisted_32={class:"px-4 lg:px-6 py-3 lg:py-4 text-center"},_sfc_main=defineComponent({__name:"App",setup(t){pdfExports.GlobalWorkerOptions.workerSrc=new URL("/dbs-tw-statement-sorter/assets/js/pdf.worker.min.js",self.location).toString();const e=ref(null);ref(null);const s=u=>{const F=u.target;F.files&&F.files.length>0&&(e.value=F)},n=ref([]),i=ref({}),l=ref([]),c=()=>{let u=!1,F=!1,O=0,P=0,M="",C="";l.value=[];let _={};for(let T=0;T<n.value.length;T++){let x=n.value[T];if(x===""||x===""){M=`${n.value[T-2]} ${x} ${n.value[T+2]} ${n.value[T+4]}`,C=`card_${n.value[T+4]}`;continue}if(x===""){u=!0;continue}else if(x===""){u=!1;continue}const B=/^(\d{4}\/\d{2}\/\d{2})\s+(\d{4}\/\d{2}\/\d{2})$/,E=/^(\d{4}\/\d{2}\/\d{2})\s+(\d{4}\/\d{2}\/\d{2})\s+([\w\s,\/\.\-\*]+)\s+(.*)$/,f=/^(\d{4}\/\d{2}\/\d{2})$/,b=()=>{l.value.push(_),i.value[C]===void 0&&(i.value[C]={groupName:M,transactions:[],totalAmount:0});const N=i.value[C];N.transactions.push(_),N.totalAmount+=_.amount,_={},F=!1};if(u){if(x.includes(",")&&(x=x.replace(",","")),x.match(B)){O=1,P=T,F=!0;let N=x.match(B);_.transactionDate=(N==null?void 0:N[1])??"",_.settlementDate=(N==null?void 0:N[2])??""}if(x.match(E)){O=2,P=T,F=!0;let N=x.match(E);_.transactionDate=(N==null?void 0:N[1])??"",_.settlementDate=(N==null?void 0:N[2])??"",_.description=x.replace((N==null?void 0:N[1])??"","").replace((N==null?void 0:N[2])??"","")}if(F)switch(O){case 1:if(T===P+2)_.description=x;else if(T===P+4)_.description+=x;else if(T>P+5&&T<P+12){let N=parseFloat(x);isNaN(N)?_.description+=x:(_.amount=parseFloat(x),b())}break;case 2:if(T===P+2){if(x.match(f))continue;if(x.includes("/")){let N=x.split("/");N.length>1&&(_.foreignCurrency=N[1],_.foreignAmount=parseFloat(N[0]))}else _.amount=parseFloat(x),b()}else if(T===P+4)if(x.includes("/")){let N=x.split("/");N.length>1&&(_.foreignCurrency=N[1],_.foreignAmount=parseFloat(N[0]))}else _.amount=parseInt(x),b();else T===P+6&&(_.amount=parseFloat(x),b());break}}}},L=async()=>{var O,P;if(n.value=[],l.value=[],i.value={},!((P=(O=e.value)==null?void 0:O.files)!=null&&P[0])){console.log("No file selected.");return}const u=e.value.files[0],F=new FileReader;F.onload=async M=>{var _;if(!((_=M.target)!=null&&_.result)){console.log("Failed to read the file.");return}const C=M.target.result;try{const x=await pdfExports.getDocument({data:C}).promise,B=x.numPages;for(let E=1;E<=B;E++){const b=await(await x.getPage(E)).getTextContent();n.value.push(...b.items.map(N=>N.str))}c(),console.log(l.value),console.log(i.value)}catch(T){console.error("Error extracting text from PDF:",T)}},F.readAsArrayBuffer(u)},g=ref(!0),m=()=>{g.value=!g.value};return(u,F)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["flex w-full flex-col items-center min-h-[calc(100dvh)]",[g.value?"dark":""]])},[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("input",{class:"block text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"file_input",type:"file",onChange:s},null,32),createBaseVNode("div",{class:"shrink-0"},[createBaseVNode("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 ml-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:L},"  ")]),createBaseVNode("button",{onClick:m,class:"border border-gray-200 dark:border-gray-700 dark:text-slate-100 text-gray-600 dark:bg-slate-800 rounded-full absolute right-2 top-2 p-1"},[createVNode(Transition,{name:"fade",mode:"out-in"},{default:withCtx(()=>[g.value?(openBlock(),createElementBlock("svg",_hoisted_3,_hoisted_5)):(openBlock(),createElementBlock("svg",_hoisted_6,_hoisted_8))]),_:1})])]),createBaseVNode("div",_hoisted_9,[createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[Object.keys(i.value).length?(openBlock(),createElementBlock("div",_hoisted_10,[_hoisted_11,createBaseVNode("div",_hoisted_12,[createBaseVNode("ul",_hoisted_13,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,O=>(openBlock(),createElementBlock("li",_hoisted_14,[createBaseVNode("div",_hoisted_15,[createBaseVNode("div",_hoisted_16,[createBaseVNode("p",_hoisted_17,toDisplayString(O.groupName),1)]),createBaseVNode("div",_hoisted_18," $"+toDisplayString(O.totalAmount.toLocaleString()),1)])]))),256))])])])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[Object.keys(i.value).length?(openBlock(),createElementBlock("div",_hoisted_19,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,O=>(openBlock(),createElementBlock("div",_hoisted_20,[createBaseVNode("table",_hoisted_21,[createBaseVNode("caption",_hoisted_22,[createTextVNode(toDisplayString(O.groupName)+" ",1),createBaseVNode("p",_hoisted_23,"$"+toDisplayString(O.totalAmount.toLocaleString()),1)]),createBaseVNode("thead",_hoisted_24,[(openBlock(),createElementBlock(Fragment,null,renderList(["","","","","",""],P=>createBaseVNode("th",_hoisted_25,toDisplayString(P),1)),64))]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(O.transactions,P=>(openBlock(),createElementBlock("tr",_hoisted_26,[createBaseVNode("th",_hoisted_27,toDisplayString(P.description),1),createBaseVNode("td",_hoisted_28,toDisplayString(P.transactionDate),1),createBaseVNode("td",_hoisted_29,toDisplayString(P.settlementDate),1),createBaseVNode("td",_hoisted_30,toDisplayString(P.foreignCurrency),1),createBaseVNode("td",_hoisted_31,toDisplayString(P.foreignAmount?`$${P.foreignAmount.toLocaleString()}`:""),1),createBaseVNode("td",_hoisted_32,"$"+toDisplayString(P.amount.toLocaleString()),1)]))),256))])])]))),256))])):createCommentVNode("",!0)]),_:1})])])],2))}});createApp(_sfc_main).mount("#app");
