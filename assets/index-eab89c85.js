var Kn=Object.defineProperty;var Jn=(t,e,s)=>e in t?Kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Jt=(t,e,s)=>(Jn(t,typeof e!="symbol"?e+"":e,s),s),Me=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(Me(t,e,"read from private field"),s?s.call(t):e.get(t)),K=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},yt=(t,e,s,n)=>(Me(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var ue=(t,e,s,n)=>({set _(i){yt(t,e,i,s)},get _(){return r(t,e,n)}}),dt=(t,e,s)=>(Me(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function makeMap(t,e){const s=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return e?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>isObject(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let s=0;s<t.length;s++)t[s](e)},def=(t,e,s)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e},toNumber=t=>{const e=isString(t)?Number(t):NaN;return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const o in i)e[o]=i[o]}return e}else{if(isString(t))return t;if(isObject(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e;let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function getCurrentScope(){return activeEffectScope}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let s=0;for(let n=0;n<e.length;n++){const i=e[n];wasTracked(i)&&!newTracked(i)?i.delete(t):e[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}e.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,s=null,n){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,s=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,s){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||n.set(s,i=createDep()),trackEffects(i)}}function trackEffects(t,e){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,s=!wasTracked(t)):s=!t.has(activeEffect),s&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,s,n,i,o){const d=targetMap.get(t);if(!d)return;let P=[];if(e==="clear")P=[...d.values()];else if(s==="length"&&isArray(t)){const m=Number(n);d.forEach((b,f)=>{(f==="length"||f>=m)&&P.push(b)})}else switch(s!==void 0&&P.push(d.get(s)),e){case"add":isArray(t)?isIntegerKey(s)&&P.push(d.get("length")):(P.push(d.get(ITERATE_KEY)),isMap(t)&&P.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(t)||(P.push(d.get(ITERATE_KEY)),isMap(t)&&P.push(d.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&P.push(d.get(ITERATE_KEY));break}if(P.length===1)P[0]&&triggerEffects(P[0]);else{const m=[];for(const b of P)b&&m.push(...b);triggerEffects(createDep(m))}}function triggerEffects(t,e){const s=isArray(t)?t:[...t];for(const n of s)n.computed&&triggerEffect(n);for(const n of s)n.computed||triggerEffect(n)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const n=toRaw(this);for(let o=0,d=this.length;o<d;o++)track(n,"get",o+"");const i=n[e](...s);return i===-1||i===!1?n[e](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){pauseTracking();const n=toRaw(this)[e].apply(this,s);return resetTracking(),n}}),t}function hasOwnProperty(t){const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}function createGetter(t=!1,e=!1){return function(n,i,o){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(n))return n;const d=isArray(n);if(!t){if(d&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,o);if(i==="hasOwnProperty")return hasOwnProperty}const P=Reflect.get(n,i,o);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(t||track(n,"get",i),e)?P:isRef(P)?d&&isIntegerKey(i)?P:P.value:isObject(P)?t?readonly(P):reactive(P):P}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(s,n,i,o){let d=s[n];if(isReadonly(d)&&isRef(d)&&!isRef(i))return!1;if(!t&&(!isShallow(i)&&!isReadonly(i)&&(d=toRaw(d),i=toRaw(i)),!isArray(s)&&isRef(d)&&!isRef(i)))return d.value=i,!0;const P=isArray(s)&&isIntegerKey(n)?Number(n)<s.length:hasOwn(s,n),m=Reflect.set(s,n,i,o);return s===toRaw(o)&&(P?hasChanged(i,d)&&trigger(s,"set",n,i):trigger(s,"add",n,i)),m}}function deleteProperty(t,e){const s=hasOwn(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&trigger(t,"delete",e,void 0),n}function has$1(t,e){const s=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),s}function ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get(t,e,s=!1,n=!1){t=t.__v_raw;const i=toRaw(t),o=toRaw(e);s||(e!==o&&track(i,"get",e),track(i,"get",o));const{has:d}=getProto(i),P=n?toShallow:s?toReadonly:toReactive;if(d.call(i,e))return P(t.get(e));if(d.call(i,o))return P(t.get(o));t!==i&&t.get(e)}function has(t,e=!1){const s=this.__v_raw,n=toRaw(s),i=toRaw(t);return e||(t!==i&&track(n,"has",t),track(n,"has",i)),t===i?s.has(t):s.has(t)||s.has(i)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set(t,e){e=toRaw(e);const s=toRaw(this),{has:n,get:i}=getProto(s);let o=n.call(s,t);o||(t=toRaw(t),o=n.call(s,t));const d=i.call(s,t);return s.set(t,e),o?hasChanged(e,d)&&trigger(s,"set",t,e):trigger(s,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:s,get:n}=getProto(e);let i=s.call(e,t);i||(t=toRaw(t),i=s.call(e,t)),n&&n.call(e,t);const o=e.delete(t);return i&&trigger(e,"delete",t,void 0),o}function clear(){const t=toRaw(this),e=t.size!==0,s=t.clear();return e&&trigger(t,"clear",void 0,void 0),s}function createForEach(t,e){return function(n,i){const o=this,d=o.__v_raw,P=toRaw(d),m=e?toShallow:t?toReadonly:toReactive;return!t&&track(P,"iterate",ITERATE_KEY),d.forEach((b,f)=>n.call(i,m(b),m(f),o))}}function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,o=toRaw(i),d=isMap(o),P=t==="entries"||t===Symbol.iterator&&d,m=t==="keys"&&d,b=i[t](...n),f=s?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",m?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:I,done:N}=b.next();return N?{value:I,done:N}:{value:P?[f(I[0]),f(I[1])]:f(I),done:N}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(o){return get(this,o)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(o){return get(this,o,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(o){return get(this,o,!0)},get size(){return size(this,!0)},has(o){return has.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(o){return get(this,o,!0,!0)},get size(){return size(this,!0)},has(o){return has.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=createIterableMethod(o,!1,!1),s[o]=createIterableMethod(o,!0,!1),e[o]=createIterableMethod(o,!1,!0),n[o]=createIterableMethod(o,!0,!0)}),[t,s,e,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const s=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const d=getTargetType(t);if(d===0)return t;const P=new Proxy(t,d===2?n:s);return i.set(t,P),P}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t);const s=t.dep;s&&triggerEffects(s)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=s?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(t,e,s=!1){let n,i;const o=isFunction(t);return o?(n=t,i=NOOP):(n=t.get,i=t.set),new ComputedRefImpl(n,i,o||!i,s)}function warn(t,...e){}function callWithErrorHandling(t,e,s,n){let i;try{i=n?t(...n):t()}catch(o){handleError(o,e,s)}return i}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction(t)){const o=callWithErrorHandling(t,e,s,n);return o&&isPromise(o)&&o.catch(d=>{handleError(d,e,s)}),o}const i=[];for(let o=0;o<t.length;o++)i.push(callWithAsyncErrorHandling(t[o],e,s,n));return i}function handleError(t,e,s,n=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const d=e.proxy,P=s;for(;o;){const b=o.ec;if(b){for(let f=0;f<b.length;f++)if(b[f](t,d,P)===!1)return}o=o.parent}const m=e.appContext.config.errorHandler;if(m){callWithErrorHandling(m,null,10,[t,d,P]);return}}logError(t,s,i,n)}function logError(t,e,s,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1;getId(queue[n])<t?e=n+1:s=n}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const s=queue[e];s&&s.pre&&(queue.splice(e,1),e--,s())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((s,n)=>getId(s)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const s=getId(t)-getId(e);if(s===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return s};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const o=e.startsWith("update:"),d=o&&e.slice(7);if(d&&d in n){const f=`${d==="modelValue"?"model":d}Modifiers`,{number:I,trim:N}=n[f]||EMPTY_OBJ;N&&(i=s.map(D=>isString(D)?D.trim():D)),I&&(i=s.map(looseToNumber))}let P,m=n[P=toHandlerKey(e)]||n[P=toHandlerKey(camelize(e))];!m&&o&&(m=n[P=toHandlerKey(hyphenate(e))]),m&&callWithAsyncErrorHandling(m,t,6,i);const b=n[P+"Once"];if(b){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,callWithAsyncErrorHandling(b,t,6,i)}}function normalizeEmitsOptions(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const o=t.emits;let d={},P=!1;if(!isFunction(t)){const m=b=>{const f=normalizeEmitsOptions(b,e,!0);f&&(P=!0,extend(d,f))};!s&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}return!o&&!P?(isObject(t)&&n.set(t,null),null):(isArray(o)?o.forEach(m=>d[m]=null):extend(d,o),isObject(t)&&n.set(t,d),d)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(e);let d;try{d=t(...i)}finally{setCurrentRenderingInstance(o),n._d&&setBlockTracking(1)}return d};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,props:o,propsOptions:[d],slots:P,attrs:m,emit:b,render:f,renderCache:I,data:N,setupState:D,ctx:k,inheritAttrs:T}=t;let A,M;const L=setCurrentRenderingInstance(t);try{if(s.shapeFlag&4){const E=i||n;A=normalizeVNode(f.call(E,E,I,o,D,N,k)),M=m}else{const E=e;A=normalizeVNode(E.length>1?E(o,{attrs:m,slots:P,emit:b}):E(o,null)),M=e.props?m:getFunctionalFallthrough(m)}}catch(E){blockStack.length=0,handleError(E,t,1),A=createVNode(Comment)}let B=A;if(M&&T!==!1){const E=Object.keys(M),{shapeFlag:u}=B;E.length&&u&7&&(d&&E.some(isModelListener)&&(M=filterModelListeners(M,d)),B=cloneVNode(B,M))}return s.dirs&&(B=cloneVNode(B),B.dirs=B.dirs?B.dirs.concat(s.dirs):s.dirs),s.transition&&(B.transition=s.transition),A=B,setCurrentRenderingInstance(L),A}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:o}=t,{props:d,children:P,patchFlag:m}=e,b=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&m>=0){if(m&1024)return!0;if(m&16)return n?hasPropsChanged(n,d,b):!!d;if(m&8){const f=e.dynamicProps;for(let I=0;I<f.length;I++){const N=f[I];if(d[N]!==n[N]&&!isEmitListener(b,N))return!0}}}else return(i||P)&&(!P||!P.$stable)?!0:n===d?!1:n?d?hasPropsChanged(n,d,b):!0:!!d;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==t[o]&&!isEmitListener(s,o))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e&&e.subTree===t;)(t=e.vnode).el=s,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const INITIAL_WATCHER_VALUE={};function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,{immediate:s,deep:n,flush:i,onTrack:o,onTrigger:d}=EMPTY_OBJ){var P;const m=getCurrentScope()===((P=currentInstance)==null?void 0:P.scope)?currentInstance:null;let b,f=!1,I=!1;if(isRef(t)?(b=()=>t.value,f=isShallow(t)):isReactive(t)?(b=()=>t,n=!0):isArray(t)?(I=!0,f=t.some(E=>isReactive(E)||isShallow(E)),b=()=>t.map(E=>{if(isRef(E))return E.value;if(isReactive(E))return traverse(E);if(isFunction(E))return callWithErrorHandling(E,m,2)})):isFunction(t)?e?b=()=>callWithErrorHandling(t,m,2):b=()=>{if(!(m&&m.isUnmounted))return N&&N(),callWithAsyncErrorHandling(t,m,3,[D])}:b=NOOP,e&&n){const E=b;b=()=>traverse(E())}let N,D=E=>{N=L.onStop=()=>{callWithErrorHandling(E,m,4)}},k;if(isInSSRComponentSetup)if(D=NOOP,e?s&&callWithAsyncErrorHandling(e,m,3,[b(),I?[]:void 0,D]):b(),i==="sync"){const E=useSSRContext();k=E.__watcherHandles||(E.__watcherHandles=[])}else return NOOP;let T=I?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const A=()=>{if(L.active)if(e){const E=L.run();(n||f||(I?E.some((u,g)=>hasChanged(u,T[g])):hasChanged(E,T)))&&(N&&N(),callWithAsyncErrorHandling(e,m,3,[E,T===INITIAL_WATCHER_VALUE?void 0:I&&T[0]===INITIAL_WATCHER_VALUE?[]:T,D]),T=E)}else L.run()};A.allowRecurse=!!e;let M;i==="sync"?M=A:i==="post"?M=()=>queuePostRenderEffect(A,m&&m.suspense):(A.pre=!0,m&&(A.id=m.uid),M=()=>queueJob(A));const L=new ReactiveEffect(b,M);e?s?A():T=L.run():i==="post"?queuePostRenderEffect(L.run.bind(L),m&&m.suspense):L.run();const B=()=>{L.stop(),m&&m.scope&&remove(m.scope.effects,L)};return k&&k.push(B),B}function instanceWatch(t,e,s){const n=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let o;isFunction(e)?o=e:(o=e.handler,s=e);const d=currentInstance;setCurrentInstance(this);const P=doWatch(i,o.bind(n),s);return d?setCurrentInstance(d):unsetCurrentInstance(),P}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function traverse(t,e){if(!isObject(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray(t))for(let s=0;s<t.length;s++)traverse(t[s],e);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e)});else if(isPlainObject(t))for(const s in t)traverse(t[s],e);return t}function withDirectives(t,e){const s=currentRenderingInstance;if(s===null)return t;const n=getExposeProxy(s)||s.proxy,i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[d,P,m,b=EMPTY_OBJ]=e[o];d&&(isFunction(d)&&(d={mounted:d,updated:d}),d.deep&&traverse(P),i.push({dir:d,instance:n,value:P,oldValue:void 0,arg:m,modifiers:b}))}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,o=e&&e.dirs;for(let d=0;d<i.length;d++){const P=i[d];o&&(P.oldValue=o[d].value);let m=P.dir[n];m&&(pauseTracking(),callWithAsyncErrorHandling(m,s,8,[t.el,P,t,e]),resetTracking())}}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:e}){const s=getCurrentInstance(),n=useTransitionState();let i;return()=>{const o=e.default&&getTransitionRawChildren(e.default(),!0);if(!o||!o.length)return;let d=o[0];if(o.length>1){for(const T of o)if(T.type!==Comment){d=T;break}}const P=toRaw(t),{mode:m}=P;if(n.isLeaving)return emptyPlaceholder(d);const b=getKeepAliveChild(d);if(!b)return emptyPlaceholder(d);const f=resolveTransitionHooks(b,P,n,s);setTransitionHooks(b,f);const I=s.subTree,N=I&&getKeepAliveChild(I);let D=!1;const{getTransitionKey:k}=b.type;if(k){const T=k();i===void 0?i=T:T!==i&&(i=T,D=!0)}if(N&&N.type!==Comment&&(!isSameVNodeType(b,N)||D)){const T=resolveTransitionHooks(N,P,n,s);if(setTransitionHooks(N,T),m==="out-in")return n.isLeaving=!0,T.afterLeave=()=>{n.isLeaving=!1,s.update.active!==!1&&s.update()},emptyPlaceholder(d);m==="in-out"&&b.type!==Comment&&(T.delayLeave=(A,M,L)=>{const B=getLeavingNodesForType(n,N);B[String(N.key)]=N,A._leaveCb=()=>{M(),A._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=L})}return d}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function resolveTransitionHooks(t,e,s,n){const{appear:i,mode:o,persisted:d=!1,onBeforeEnter:P,onEnter:m,onAfterEnter:b,onEnterCancelled:f,onBeforeLeave:I,onLeave:N,onAfterLeave:D,onLeaveCancelled:k,onBeforeAppear:T,onAppear:A,onAfterAppear:M,onAppearCancelled:L}=e,B=String(t.key),E=getLeavingNodesForType(s,t),u=(v,c)=>{v&&callWithAsyncErrorHandling(v,n,9,c)},g=(v,c)=>{const F=c[1];u(v,c),isArray(v)?v.every(S=>S.length<=1)&&F():v.length<=1&&F()},W={mode:o,persisted:d,beforeEnter(v){let c=P;if(!s.isMounted)if(i)c=T||P;else return;v._leaveCb&&v._leaveCb(!0);const F=E[B];F&&isSameVNodeType(t,F)&&F.el._leaveCb&&F.el._leaveCb(),u(c,[v])},enter(v){let c=m,F=b,S=f;if(!s.isMounted)if(i)c=A||m,F=M||b,S=L||f;else return;let $=!1;const tt=v._enterCb=j=>{$||($=!0,j?u(S,[v]):u(F,[v]),W.delayedLeave&&W.delayedLeave(),v._enterCb=void 0)};c?g(c,[v,tt]):tt()},leave(v,c){const F=String(t.key);if(v._enterCb&&v._enterCb(!0),s.isUnmounting)return c();u(I,[v]);let S=!1;const $=v._leaveCb=tt=>{S||(S=!0,c(),tt?u(k,[v]):u(D,[v]),v._leaveCb=void 0,E[F]===t&&delete E[F])};E[F]=t,N?g(N,[v,$]):$()},clone(v){return resolveTransitionHooks(v,e,s,n)}};return W}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,s){let n=[],i=0;for(let o=0;o<t.length;o++){let d=t[o];const P=s==null?d.key:String(s)+String(d.key!=null?d.key:o);d.type===Fragment?(d.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(d.children,e,P))):(e||d.type!==Comment)&&n.push(P!=null?cloneVNode(d,{key:P}):d)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function defineComponent(t,e){return isFunction(t)?(()=>extend({name:t.name},e,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...d)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const P=callWithAsyncErrorHandling(e,s,t,d);return unsetCurrentInstance(),resetTracking(),P});return n?i.unshift(o):i.push(o),o}}const createHook=t=>(e,s=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const o=s&&s[n];if(isArray(t)||isString(t)){i=new Array(t.length);for(let d=0,P=t.length;d<P;d++)i[d]=e(t[d],d,void 0,o&&o[d])}else if(typeof t=="number"){i=new Array(t);for(let d=0;d<t;d++)i[d]=e(d+1,d,void 0,o&&o[d])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(d,P)=>e(d,P,void 0,o&&o[P]));else{const d=Object.keys(t);i=new Array(d.length);for(let P=0,m=d.length;P<m;P++){const b=d[P];i[P]=e(t[b],b,P,o&&o[P])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:s,setupState:n,data:i,props:o,accessCache:d,type:P,appContext:m}=t;let b;if(e[0]!=="$"){const D=d[e];if(D!==void 0)switch(D){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return o[e]}else{if(hasSetupBinding(n,e))return d[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return d[e]=2,i[e];if((b=t.propsOptions[0])&&hasOwn(b,e))return d[e]=3,o[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return d[e]=4,s[e];shouldCacheAccess&&(d[e]=0)}}const f=publicPropertiesMap[e];let I,N;if(f)return e==="$attrs"&&track(t,"get",e),f(t);if((I=P.__cssModules)&&(I=I[e]))return I;if(s!==EMPTY_OBJ&&hasOwn(s,e))return d[e]=4,s[e];if(N=m.config.globalProperties,hasOwn(N,e))return N[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:o}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:o}},d){let P;return!!s[d]||t!==EMPTY_OBJ&&hasOwn(t,d)||hasSetupBinding(e,d)||(P=o[0])&&hasOwn(P,d)||hasOwn(n,d)||hasOwn(publicPropertiesMap,d)||hasOwn(i.config.globalProperties,d)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:d,watch:P,provide:m,inject:b,created:f,beforeMount:I,mounted:N,beforeUpdate:D,updated:k,activated:T,deactivated:A,beforeDestroy:M,beforeUnmount:L,destroyed:B,unmounted:E,render:u,renderTracked:g,renderTriggered:W,errorCaptured:v,serverPrefetch:c,expose:F,inheritAttrs:S,components:$,directives:tt,filters:j}=e;if(b&&resolveInjections(b,n,null),d)for(const bt in d){const w=d[bt];isFunction(w)&&(n[bt]=w.bind(s))}if(i){const bt=i.call(s,s);isObject(bt)&&(t.data=reactive(bt))}if(shouldCacheAccess=!0,o)for(const bt in o){const w=o[bt],X=isFunction(w)?w.bind(s,s):isFunction(w.get)?w.get.bind(s,s):NOOP,ot=!isFunction(w)&&isFunction(w.set)?w.set.bind(s):NOOP,At=computed({get:X,set:ot});Object.defineProperty(n,bt,{enumerable:!0,configurable:!0,get:()=>At.value,set:Ct=>At.value=Ct})}if(P)for(const bt in P)createWatcher(P[bt],n,s,bt);if(m){const bt=isFunction(m)?m.call(s):m;Reflect.ownKeys(bt).forEach(w=>{provide(w,bt[w])})}f&&callHook$1(f,t,"c");function it(bt,w){isArray(w)?w.forEach(X=>bt(X.bind(s))):w&&bt(w.bind(s))}if(it(onBeforeMount,I),it(onMounted,N),it(onBeforeUpdate,D),it(onUpdated,k),it(onActivated,T),it(onDeactivated,A),it(onErrorCaptured,v),it(onRenderTracked,g),it(onRenderTriggered,W),it(onBeforeUnmount,L),it(onUnmounted,E),it(onServerPrefetch,c),isArray(F))if(F.length){const bt=t.exposed||(t.exposed={});F.forEach(w=>{Object.defineProperty(bt,w,{get:()=>s[w],set:X=>s[w]=X})})}else t.exposed||(t.exposed={});u&&t.render===NOOP&&(t.render=u),S!=null&&(t.inheritAttrs=S),$&&(t.components=$),tt&&(t.directives=tt)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let o;isObject(i)?"default"in i?o=inject(i.from||n,i.default,!0):o=inject(i.from||n):o=inject(i),isRef(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:d=>o.value=d}):e[n]=o}}function callHook$1(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){const i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(t)){const o=e[t];isFunction(o)&&watch(i,o)}else if(isFunction(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(o=>createWatcher(o,e,s,n));else{const o=isFunction(t.handler)?t.handler.bind(s):e[t.handler];isFunction(o)&&watch(i,o,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:d}}=t.appContext,P=o.get(e);let m;return P?m=P:!i.length&&!s&&!n?m=e:(m={},i.length&&i.forEach(b=>mergeOptions(m,b,d,!0)),mergeOptions(m,e,d)),isObject(e)&&o.set(e,m),m}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:o}=e;o&&mergeOptions(t,o,s,!0),i&&i.forEach(d=>mergeOptions(t,d,s,!0));for(const d in e)if(!(n&&d==="expose")){const P=internalOptionMergeStrats[d]||s&&s[d];t[d]=P?P(t[d],e[d]):e[d]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const o=createAppContext(),d=new Set;let P=!1;const m=o.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:o,_instance:null,version,get config(){return o.config},set config(b){},use(b,...f){return d.has(b)||(b&&isFunction(b.install)?(d.add(b),b.install(m,...f)):isFunction(b)&&(d.add(b),b(m,...f))),m},mixin(b){return o.mixins.includes(b)||o.mixins.push(b),m},component(b,f){return f?(o.components[b]=f,m):o.components[b]},directive(b,f){return f?(o.directives[b]=f,m):o.directives[b]},mount(b,f,I){if(!P){const N=createVNode(n,i);return N.appContext=o,f&&e?e(N,b):t(N,b,I),P=!0,m._container=b,b.__vue_app__=m,getExposeProxy(N.component)||N.component.proxy}},unmount(){P&&(t(null,m._container),delete m._container.__vue_app__)},provide(b,f){return o.provides[b]=f,m},runWithContext(b){currentApp=m;try{return b()}finally{currentApp=null}}};return m}}let currentApp=null;function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction(e)?e.call(n&&n.proxy):e}}function initProps(t,e,s,n=!1){const i={},o={};def(o,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,i,o);for(const d in t.propsOptions[0])d in i||(i[d]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function updateProps(t,e,s,n){const{props:i,attrs:o,vnode:{patchFlag:d}}=t,P=toRaw(i),[m]=t.propsOptions;let b=!1;if((n||d>0)&&!(d&16)){if(d&8){const f=t.vnode.dynamicProps;for(let I=0;I<f.length;I++){let N=f[I];if(isEmitListener(t.emitsOptions,N))continue;const D=e[N];if(m)if(hasOwn(o,N))D!==o[N]&&(o[N]=D,b=!0);else{const k=camelize(N);i[k]=resolvePropValue(m,P,k,D,t,!1)}else D!==o[N]&&(o[N]=D,b=!0)}}}else{setFullProps(t,e,i,o)&&(b=!0);let f;for(const I in P)(!e||!hasOwn(e,I)&&((f=hyphenate(I))===I||!hasOwn(e,f)))&&(m?s&&(s[I]!==void 0||s[f]!==void 0)&&(i[I]=resolvePropValue(m,P,I,void 0,t,!0)):delete i[I]);if(o!==P)for(const I in o)(!e||!hasOwn(e,I))&&(delete o[I],b=!0)}b&&trigger(t,"set","$attrs")}function setFullProps(t,e,s,n){const[i,o]=t.propsOptions;let d=!1,P;if(e)for(let m in e){if(isReservedProp(m))continue;const b=e[m];let f;i&&hasOwn(i,f=camelize(m))?!o||!o.includes(f)?s[f]=b:(P||(P={}))[f]=b:isEmitListener(t.emitsOptions,m)||(!(m in n)||b!==n[m])&&(n[m]=b,d=!0)}if(o){const m=toRaw(s),b=P||EMPTY_OBJ;for(let f=0;f<o.length;f++){const I=o[f];s[I]=resolvePropValue(i,m,I,b[I],t,!hasOwn(b,I))}}return d}function resolvePropValue(t,e,s,n,i,o){const d=t[s];if(d!=null){const P=hasOwn(d,"default");if(P&&n===void 0){const m=d.default;if(d.type!==Function&&!d.skipFactory&&isFunction(m)){const{propsDefaults:b}=i;s in b?n=b[s]:(setCurrentInstance(i),n=b[s]=m.call(null,e),unsetCurrentInstance())}else n=m}d[0]&&(o&&!P?n=!1:d[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}function normalizePropsOptions(t,e,s=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const o=t.props,d={},P=[];let m=!1;if(!isFunction(t)){const f=I=>{m=!0;const[N,D]=normalizePropsOptions(I,e,!0);extend(d,N),D&&P.push(...D)};!s&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!o&&!m)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(o))for(let f=0;f<o.length;f++){const I=camelize(o[f]);validatePropName(I)&&(d[I]=EMPTY_OBJ)}else if(o)for(const f in o){const I=camelize(f);if(validatePropName(I)){const N=o[f],D=d[I]=isArray(N)||isFunction(N)?{type:N}:extend({},N);if(D){const k=getTypeIndex(Boolean,D.type),T=getTypeIndex(String,D.type);D[0]=k>-1,D[1]=T<0||k<T,(k>-1||hasOwn(D,"default"))&&P.push(I)}}}const b=[d,P];return isObject(t)&&n.set(t,b),b}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray(e)?e.findIndex(s=>isSameType(s,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const o=t[i];if(isFunction(o))e[i]=normalizeSlot(i,o,n);else if(o!=null){const d=normalizeSlotValue(o);e[i]=()=>d}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const s=e._;s?(t.slots=toRaw(e),def(e,"_",s)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let o=!0,d=EMPTY_OBJ;if(n.shapeFlag&32){const P=e._;P?s&&P===1?o=!1:(extend(i,e),!s&&P===1&&delete i._):(o=!e.$stable,normalizeObjectSlots(e,i)),d=e}else e&&(normalizeVNodeSlots(t,e),d={default:1});if(o)for(const P in i)!isInternalKey(P)&&!(P in d)&&delete i[P]};function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((N,D)=>setRef(N,e&&(isArray(e)?e[D]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i)return;const o=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,d=i?null:o,{i:P,r:m}=t,b=e&&e.r,f=P.refs===EMPTY_OBJ?P.refs={}:P.refs,I=P.setupState;if(b!=null&&b!==m&&(isString(b)?(f[b]=null,hasOwn(I,b)&&(I[b]=null)):isRef(b)&&(b.value=null)),isFunction(m))callWithErrorHandling(m,P,12,[d,f]);else{const N=isString(m),D=isRef(m);if(N||D){const k=()=>{if(t.f){const T=N?hasOwn(I,m)?I[m]:f[m]:m.value;i?isArray(T)&&remove(T,o):isArray(T)?T.includes(o)||T.push(o):N?(f[m]=[o],hasOwn(I,m)&&(I[m]=f[m])):(m.value=[o],t.k&&(f[t.k]=m.value))}else N?(f[m]=d,hasOwn(I,m)&&(I[m]=d)):D&&(m.value=d,t.k&&(f[t.k]=d))};d?(k.id=-1,queuePostRenderEffect(k,s)):k()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:d,createText:P,createComment:m,setText:b,setElementText:f,parentNode:I,nextSibling:N,setScopeId:D=NOOP,insertStaticContent:k}=t,T=(C,R,G,J=null,ct=null,ut=null,wt=!1,Et=null,mt=!!R.dynamicChildren)=>{if(C===R)return;C&&!isSameVNodeType(C,R)&&(J=V(C),Ct(C,ct,ut,!0),C=null),R.patchFlag===-2&&(mt=!1,R.dynamicChildren=null);const{type:St,ref:vt,shapeFlag:et}=R;switch(St){case Text:A(C,R,G,J);break;case Comment:M(C,R,G,J);break;case Static:C==null&&L(R,G,J,wt);break;case Fragment:$(C,R,G,J,ct,ut,wt,Et,mt);break;default:et&1?u(C,R,G,J,ct,ut,wt,Et,mt):et&6?tt(C,R,G,J,ct,ut,wt,Et,mt):(et&64||et&128)&&St.process(C,R,G,J,ct,ut,wt,Et,mt,Y)}vt!=null&&ct&&setRef(vt,C&&C.ref,ut,R||C,!R)},A=(C,R,G,J)=>{if(C==null)n(R.el=P(R.children),G,J);else{const ct=R.el=C.el;R.children!==C.children&&b(ct,R.children)}},M=(C,R,G,J)=>{C==null?n(R.el=m(R.children||""),G,J):R.el=C.el},L=(C,R,G,J)=>{[C.el,C.anchor]=k(C.children,R,G,J,C.el,C.anchor)},B=({el:C,anchor:R},G,J)=>{let ct;for(;C&&C!==R;)ct=N(C),n(C,G,J),C=ct;n(R,G,J)},E=({el:C,anchor:R})=>{let G;for(;C&&C!==R;)G=N(C),i(C),C=G;i(R)},u=(C,R,G,J,ct,ut,wt,Et,mt)=>{wt=wt||R.type==="svg",C==null?g(R,G,J,ct,ut,wt,Et,mt):c(C,R,ct,ut,wt,Et,mt)},g=(C,R,G,J,ct,ut,wt,Et)=>{let mt,St;const{type:vt,props:et,shapeFlag:nt,transition:pt,dirs:Pt}=C;if(mt=C.el=d(C.type,ut,et&&et.is,et),nt&8?f(mt,C.children):nt&16&&v(C.children,mt,null,J,ct,ut&&vt!=="foreignObject",wt,Et),Pt&&invokeDirectiveHook(C,null,J,"created"),W(mt,C,C.scopeId,wt,J),et){for(const Bt in et)Bt!=="value"&&!isReservedProp(Bt)&&o(mt,Bt,null,et[Bt],ut,C.children,J,ct,y);"value"in et&&o(mt,"value",null,et.value),(St=et.onVnodeBeforeMount)&&invokeVNodeHook(St,J,C)}Pt&&invokeDirectiveHook(C,null,J,"beforeMount");const Mt=(!ct||ct&&!ct.pendingBranch)&&pt&&!pt.persisted;Mt&&pt.beforeEnter(mt),n(mt,R,G),((St=et&&et.onVnodeMounted)||Mt||Pt)&&queuePostRenderEffect(()=>{St&&invokeVNodeHook(St,J,C),Mt&&pt.enter(mt),Pt&&invokeDirectiveHook(C,null,J,"mounted")},ct)},W=(C,R,G,J,ct)=>{if(G&&D(C,G),J)for(let ut=0;ut<J.length;ut++)D(C,J[ut]);if(ct){let ut=ct.subTree;if(R===ut){const wt=ct.vnode;W(C,wt,wt.scopeId,wt.slotScopeIds,ct.parent)}}},v=(C,R,G,J,ct,ut,wt,Et,mt=0)=>{for(let St=mt;St<C.length;St++){const vt=C[St]=Et?cloneIfMounted(C[St]):normalizeVNode(C[St]);T(null,vt,R,G,J,ct,ut,wt,Et)}},c=(C,R,G,J,ct,ut,wt)=>{const Et=R.el=C.el;let{patchFlag:mt,dynamicChildren:St,dirs:vt}=R;mt|=C.patchFlag&16;const et=C.props||EMPTY_OBJ,nt=R.props||EMPTY_OBJ;let pt;G&&toggleRecurse(G,!1),(pt=nt.onVnodeBeforeUpdate)&&invokeVNodeHook(pt,G,R,C),vt&&invokeDirectiveHook(R,C,G,"beforeUpdate"),G&&toggleRecurse(G,!0);const Pt=ct&&R.type!=="foreignObject";if(St?F(C.dynamicChildren,St,Et,G,J,Pt,ut):wt||w(C,R,Et,null,G,J,Pt,ut,!1),mt>0){if(mt&16)S(Et,R,et,nt,G,J,ct);else if(mt&2&&et.class!==nt.class&&o(Et,"class",null,nt.class,ct),mt&4&&o(Et,"style",et.style,nt.style,ct),mt&8){const Mt=R.dynamicProps;for(let Bt=0;Bt<Mt.length;Bt++){const Ut=Mt[Bt],Lt=et[Ut],jt=nt[Ut];(jt!==Lt||Ut==="value")&&o(Et,Ut,Lt,jt,ct,C.children,G,J,y)}}mt&1&&C.children!==R.children&&f(Et,R.children)}else!wt&&St==null&&S(Et,R,et,nt,G,J,ct);((pt=nt.onVnodeUpdated)||vt)&&queuePostRenderEffect(()=>{pt&&invokeVNodeHook(pt,G,R,C),vt&&invokeDirectiveHook(R,C,G,"updated")},J)},F=(C,R,G,J,ct,ut,wt)=>{for(let Et=0;Et<R.length;Et++){const mt=C[Et],St=R[Et],vt=mt.el&&(mt.type===Fragment||!isSameVNodeType(mt,St)||mt.shapeFlag&70)?I(mt.el):G;T(mt,St,vt,null,J,ct,ut,wt,!0)}},S=(C,R,G,J,ct,ut,wt)=>{if(G!==J){if(G!==EMPTY_OBJ)for(const Et in G)!isReservedProp(Et)&&!(Et in J)&&o(C,Et,G[Et],null,wt,R.children,ct,ut,y);for(const Et in J){if(isReservedProp(Et))continue;const mt=J[Et],St=G[Et];mt!==St&&Et!=="value"&&o(C,Et,St,mt,wt,R.children,ct,ut,y)}"value"in J&&o(C,"value",G.value,J.value)}},$=(C,R,G,J,ct,ut,wt,Et,mt)=>{const St=R.el=C?C.el:P(""),vt=R.anchor=C?C.anchor:P("");let{patchFlag:et,dynamicChildren:nt,slotScopeIds:pt}=R;pt&&(Et=Et?Et.concat(pt):pt),C==null?(n(St,G,J),n(vt,G,J),v(R.children,G,vt,ct,ut,wt,Et,mt)):et>0&&et&64&&nt&&C.dynamicChildren?(F(C.dynamicChildren,nt,G,ct,ut,wt,Et),(R.key!=null||ct&&R===ct.subTree)&&traverseStaticChildren(C,R,!0)):w(C,R,G,vt,ct,ut,wt,Et,mt)},tt=(C,R,G,J,ct,ut,wt,Et,mt)=>{R.slotScopeIds=Et,C==null?R.shapeFlag&512?ct.ctx.activate(R,G,J,wt,mt):j(R,G,J,ct,ut,wt,mt):rt(C,R,mt)},j=(C,R,G,J,ct,ut,wt)=>{const Et=C.component=createComponentInstance(C,J,ct);if(isKeepAlive(C)&&(Et.ctx.renderer=Y),setupComponent(Et),Et.asyncDep){if(ct&&ct.registerDep(Et,it),!C.el){const mt=Et.subTree=createVNode(Comment);M(null,mt,R,G)}return}it(Et,C,R,G,ct,ut,wt)},rt=(C,R,G)=>{const J=R.component=C.component;if(shouldUpdateComponent(C,R,G))if(J.asyncDep&&!J.asyncResolved){bt(J,R,G);return}else J.next=R,invalidateJob(J.update),J.update();else R.el=C.el,J.vnode=R},it=(C,R,G,J,ct,ut,wt)=>{const Et=()=>{if(C.isMounted){let{next:vt,bu:et,u:nt,parent:pt,vnode:Pt}=C,Mt=vt,Bt;toggleRecurse(C,!1),vt?(vt.el=Pt.el,bt(C,vt,wt)):vt=Pt,et&&invokeArrayFns(et),(Bt=vt.props&&vt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Bt,pt,vt,Pt),toggleRecurse(C,!0);const Ut=renderComponentRoot(C),Lt=C.subTree;C.subTree=Ut,T(Lt,Ut,I(Lt.el),V(Lt),C,ct,ut),vt.el=Ut.el,Mt===null&&updateHOCHostEl(C,Ut.el),nt&&queuePostRenderEffect(nt,ct),(Bt=vt.props&&vt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Bt,pt,vt,Pt),ct)}else{let vt;const{el:et,props:nt}=R,{bm:pt,m:Pt,parent:Mt}=C,Bt=isAsyncWrapper(R);if(toggleRecurse(C,!1),pt&&invokeArrayFns(pt),!Bt&&(vt=nt&&nt.onVnodeBeforeMount)&&invokeVNodeHook(vt,Mt,R),toggleRecurse(C,!0),et&&lt){const Ut=()=>{C.subTree=renderComponentRoot(C),lt(et,C.subTree,C,ct,null)};Bt?R.type.__asyncLoader().then(()=>!C.isUnmounted&&Ut()):Ut()}else{const Ut=C.subTree=renderComponentRoot(C);T(null,Ut,G,J,C,ct,ut),R.el=Ut.el}if(Pt&&queuePostRenderEffect(Pt,ct),!Bt&&(vt=nt&&nt.onVnodeMounted)){const Ut=R;queuePostRenderEffect(()=>invokeVNodeHook(vt,Mt,Ut),ct)}(R.shapeFlag&256||Mt&&isAsyncWrapper(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&C.a&&queuePostRenderEffect(C.a,ct),C.isMounted=!0,R=G=J=null}},mt=C.effect=new ReactiveEffect(Et,()=>queueJob(St),C.scope),St=C.update=()=>mt.run();St.id=C.uid,toggleRecurse(C,!0),St()},bt=(C,R,G)=>{R.component=C;const J=C.vnode.props;C.vnode=R,C.next=null,updateProps(C,R.props,J,G),updateSlots(C,R.children,G),pauseTracking(),flushPreFlushCbs(),resetTracking()},w=(C,R,G,J,ct,ut,wt,Et,mt=!1)=>{const St=C&&C.children,vt=C?C.shapeFlag:0,et=R.children,{patchFlag:nt,shapeFlag:pt}=R;if(nt>0){if(nt&128){ot(St,et,G,J,ct,ut,wt,Et,mt);return}else if(nt&256){X(St,et,G,J,ct,ut,wt,Et,mt);return}}pt&8?(vt&16&&y(St,ct,ut),et!==St&&f(G,et)):vt&16?pt&16?ot(St,et,G,J,ct,ut,wt,Et,mt):y(St,ct,ut,!0):(vt&8&&f(G,""),pt&16&&v(et,G,J,ct,ut,wt,Et,mt))},X=(C,R,G,J,ct,ut,wt,Et,mt)=>{C=C||EMPTY_ARR,R=R||EMPTY_ARR;const St=C.length,vt=R.length,et=Math.min(St,vt);let nt;for(nt=0;nt<et;nt++){const pt=R[nt]=mt?cloneIfMounted(R[nt]):normalizeVNode(R[nt]);T(C[nt],pt,G,null,ct,ut,wt,Et,mt)}St>vt?y(C,ct,ut,!0,!1,et):v(R,G,J,ct,ut,wt,Et,mt,et)},ot=(C,R,G,J,ct,ut,wt,Et,mt)=>{let St=0;const vt=R.length;let et=C.length-1,nt=vt-1;for(;St<=et&&St<=nt;){const pt=C[St],Pt=R[St]=mt?cloneIfMounted(R[St]):normalizeVNode(R[St]);if(isSameVNodeType(pt,Pt))T(pt,Pt,G,null,ct,ut,wt,Et,mt);else break;St++}for(;St<=et&&St<=nt;){const pt=C[et],Pt=R[nt]=mt?cloneIfMounted(R[nt]):normalizeVNode(R[nt]);if(isSameVNodeType(pt,Pt))T(pt,Pt,G,null,ct,ut,wt,Et,mt);else break;et--,nt--}if(St>et){if(St<=nt){const pt=nt+1,Pt=pt<vt?R[pt].el:J;for(;St<=nt;)T(null,R[St]=mt?cloneIfMounted(R[St]):normalizeVNode(R[St]),G,Pt,ct,ut,wt,Et,mt),St++}}else if(St>nt)for(;St<=et;)Ct(C[St],ct,ut,!0),St++;else{const pt=St,Pt=St,Mt=new Map;for(St=Pt;St<=nt;St++){const st=R[St]=mt?cloneIfMounted(R[St]):normalizeVNode(R[St]);st.key!=null&&Mt.set(st.key,St)}let Bt,Ut=0;const Lt=nt-Pt+1;let jt=!1,$t=0;const zt=new Array(Lt);for(St=0;St<Lt;St++)zt[St]=0;for(St=pt;St<=et;St++){const st=C[St];if(Ut>=Lt){Ct(st,ct,ut,!0);continue}let ht;if(st.key!=null)ht=Mt.get(st.key);else for(Bt=Pt;Bt<=nt;Bt++)if(zt[Bt-Pt]===0&&isSameVNodeType(st,R[Bt])){ht=Bt;break}ht===void 0?Ct(st,ct,ut,!0):(zt[ht-Pt]=St+1,ht>=$t?$t=ht:jt=!0,T(st,R[ht],G,null,ct,ut,wt,Et,mt),Ut++)}const Tt=jt?getSequence(zt):EMPTY_ARR;for(Bt=Tt.length-1,St=Lt-1;St>=0;St--){const st=Pt+St,ht=R[st],Dt=st+1<vt?R[st+1].el:J;zt[St]===0?T(null,ht,G,Dt,ct,ut,wt,Et,mt):jt&&(Bt<0||St!==Tt[Bt]?At(ht,G,Dt,2):Bt--)}}},At=(C,R,G,J,ct=null)=>{const{el:ut,type:wt,transition:Et,children:mt,shapeFlag:St}=C;if(St&6){At(C.component.subTree,R,G,J);return}if(St&128){C.suspense.move(R,G,J);return}if(St&64){wt.move(C,R,G,Y);return}if(wt===Fragment){n(ut,R,G);for(let et=0;et<mt.length;et++)At(mt[et],R,G,J);n(C.anchor,R,G);return}if(wt===Static){B(C,R,G);return}if(J!==2&&St&1&&Et)if(J===0)Et.beforeEnter(ut),n(ut,R,G),queuePostRenderEffect(()=>Et.enter(ut),ct);else{const{leave:et,delayLeave:nt,afterLeave:pt}=Et,Pt=()=>n(ut,R,G),Mt=()=>{et(ut,()=>{Pt(),pt&&pt()})};nt?nt(ut,Pt,Mt):Mt()}else n(ut,R,G)},Ct=(C,R,G,J=!1,ct=!1)=>{const{type:ut,props:wt,ref:Et,children:mt,dynamicChildren:St,shapeFlag:vt,patchFlag:et,dirs:nt}=C;if(Et!=null&&setRef(Et,null,G,C,!0),vt&256){R.ctx.deactivate(C);return}const pt=vt&1&&nt,Pt=!isAsyncWrapper(C);let Mt;if(Pt&&(Mt=wt&&wt.onVnodeBeforeUnmount)&&invokeVNodeHook(Mt,R,C),vt&6)l(C.component,G,J);else{if(vt&128){C.suspense.unmount(G,J);return}pt&&invokeDirectiveHook(C,null,R,"beforeUnmount"),vt&64?C.type.remove(C,R,G,ct,Y,J):St&&(ut!==Fragment||et>0&&et&64)?y(St,R,G,!1,!0):(ut===Fragment&&et&384||!ct&&vt&16)&&y(mt,R,G),J&&x(C)}(Pt&&(Mt=wt&&wt.onVnodeUnmounted)||pt)&&queuePostRenderEffect(()=>{Mt&&invokeVNodeHook(Mt,R,C),pt&&invokeDirectiveHook(C,null,R,"unmounted")},G)},x=C=>{const{type:R,el:G,anchor:J,transition:ct}=C;if(R===Fragment){a(G,J);return}if(R===Static){E(C);return}const ut=()=>{i(G),ct&&!ct.persisted&&ct.afterLeave&&ct.afterLeave()};if(C.shapeFlag&1&&ct&&!ct.persisted){const{leave:wt,delayLeave:Et}=ct,mt=()=>wt(G,ut);Et?Et(C.el,ut,mt):mt()}else ut()},a=(C,R)=>{let G;for(;C!==R;)G=N(C),i(C),C=G;i(R)},l=(C,R,G)=>{const{bum:J,scope:ct,update:ut,subTree:wt,um:Et}=C;J&&invokeArrayFns(J),ct.stop(),ut&&(ut.active=!1,Ct(wt,C,R,G)),Et&&queuePostRenderEffect(Et,R),queuePostRenderEffect(()=>{C.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},y=(C,R,G,J=!1,ct=!1,ut=0)=>{for(let wt=ut;wt<C.length;wt++)Ct(C[wt],R,G,J,ct)},V=C=>C.shapeFlag&6?V(C.component.subTree):C.shapeFlag&128?C.suspense.next():N(C.anchor||C.el),H=(C,R,G)=>{C==null?R._vnode&&Ct(R._vnode,null,null,!0):T(R._vnode||null,C,R,null,null,null,G),flushPreFlushCbs(),flushPostFlushCbs(),R._vnode=C},Y={p:T,um:Ct,m:At,r:x,mt:j,mc:v,pc:w,pbc:F,n:V,o:t};let Q,lt;return e&&([Q,lt]=e(Y)),{render:H,hydrate:Q,createApp:createAppAPI(H,Q)}}function toggleRecurse({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let o=0;o<n.length;o++){const d=n[o];let P=i[o];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=i[o]=cloneIfMounted(i[o]),P.el=d.el),s||traverseStaticChildren(d,P)),P.type===Text&&(P.el=d.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,o,d,P;const m=t.length;for(n=0;n<m;n++){const b=t[n];if(b!==0){if(i=s[s.length-1],t[i]<b){e[n]=i,s.push(n);continue}for(o=0,d=s.length-1;o<d;)P=o+d>>1,t[s[P]]<b?o=P+1:d=P;b<t[s[o]]&&(o>0&&(e[n]=s[o-1]),s[o]=n)}}for(o=s.length,d=s[o-1];o-- >0;)s[o]=d,d=e[d];return s}const isTeleport=t=>t.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,o){return setupBlock(createBaseVNode(t,e,s,n,i,o,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,o=t===Fragment?0:1,d=!1,P=!1){const m={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return P?(normalizeChildren(m,s),o&128&&t.normalize(m)):s&&(m.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!d&&currentBlock&&(m.patchFlag>0||o&6)&&m.patchFlag!==32&&currentBlock.push(m),m}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,o=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const P=cloneVNode(t,e,!0);return s&&normalizeChildren(P,s),isBlockTreeEnabled>0&&!o&&currentBlock&&(P.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=P:currentBlock.push(P)),P.patchFlag|=-2,P}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:P,style:m}=e;P&&!isString(P)&&(e.class=normalizeClass(P)),isObject(m)&&(isProxy(m)&&!isArray(m)&&(m=extend({},m)),e.style=normalizeStyle(m))}const d=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,s,n,i,d,o,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,s=!1){const{props:n,ref:i,patchFlag:o,children:d}=t,P=e?mergeProps(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:P,key:P&&normalizeKey(P),ref:e&&e.ref?s&&i?isArray(i)?i.concat(normalizeRef(e)):[i,normalizeRef(e)]:normalizeRef(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:d,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const o=e[i],d=n[i];d&&o!==d&&!(isArray(o)&&o.includes(d))&&(e[i]=o?[].concat(o,d):d)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,o={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=emit.bind(null,o),t.ce&&t.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(t=>currentInstance=t),internalSetCurrentInstance=t=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(e=>e(t)):globalCurrentInstanceSetters[0](t)};const setCurrentInstance=t=>{internalSetCurrentInstance(t),t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:s,children:n}=t.vnode,i=isStatefulComponent(t);initProps(t,s,i,e),initSlots(t,n);const o=i?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,o}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=s;if(n){const i=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const o=callWithErrorHandling(n,t,0,[t.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(d=>{handleSetupResult(t,d,e)}).catch(d=>{handleError(d,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:o,compilerOptions:d}=t.appContext.config,{delimiters:P,compilerOptions:m}=n,b=extend(extend({isCustomElement:o,delimiters:P},d),m);n.render=compile(i,b)}}t.render=n.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,s){return track(t,"get","$attrs"),e[s]}}))}function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}}))}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,s){const n=arguments.length;return n===2?isObject(e)&&!isArray(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&isVNode(s)&&(s=[s]),createVNode(t,e,s))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e?doc.createElementNS(svgNS,t):doc.createElement(t,s?{is:s}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,o){const d=s?s.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const P=templateContainer.content;if(n){const m=P.firstChild;for(;m.firstChild;)P.appendChild(m.firstChild);P.removeChild(m)}e.insertBefore(P,s)}return[d?d.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}};function patchClass(t,e,s){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,s){const n=t.style,i=isString(s);if(s&&!i){if(e&&!isString(e))for(const o in e)s[o]==null&&setStyle(n,o,"");for(const o in s)setStyle(n,o,s[o])}else{const o=n.display;i?e!==s&&(n.cssText=s):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=o)}}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const o=prefixes[i]+n;if(o in t)return prefixCache[e]=o}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i){if(n&&e.startsWith("xlink:"))s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s);else{const o=isSpecialBooleanAttr(e);s==null||o&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,o?"":s)}}function patchDOMProp(t,e,s,n,i,o,d){if(e==="innerHTML"||e==="textContent"){n&&d(n,i,o),t[e]=s??"";return}const P=t.tagName;if(e==="value"&&P!=="PROGRESS"&&!P.includes("-")){t._value=s;const b=P==="OPTION"?t.getAttribute("value"):t.value,f=s??"";b!==f&&(t.value=f),s==null&&t.removeAttribute(e);return}let m=!1;if(s===""||s==null){const b=typeof t[e];b==="boolean"?s=includeBooleanAttr(s):s==null&&b==="string"?(s="",m=!0):b==="number"&&(s=0,m=!0)}try{t[e]=s}catch{}m&&t.removeAttribute(e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}function patchEvent(t,e,s,n,i=null){const o=t._vei||(t._vei={}),d=o[e];if(n&&d)d.value=n;else{const[P,m]=parseName(e);if(n){const b=o[e]=createInvoker(n,i);addEventListener(t,P,b,m)}else d&&(removeEventListener(t,P,d,m),o[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,s,n,i=!1,o,d,P,m)=>{e==="class"?patchClass(t,n,i):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,d):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,i))?patchDOMProp(t,e,n,o,d,P,m):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,i))};function shouldSetAsProp(t,e,s,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(s)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(s)?!1:e in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:e})=>h(BaseTransition,resolveTransitionProps(t),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(t,e=[])=>{isArray(t)?t.forEach(s=>s(...e)):t&&t(...e)},hasExplicitCallback=t=>t?isArray(t)?t.some(e=>e.length>1):t.length>1:!1;function resolveTransitionProps(t){const e={};for(const $ in t)$ in DOMTransitionPropsValidators||(e[$]=t[$]);if(t.css===!1)return e;const{name:s="v",type:n,duration:i,enterFromClass:o=`${s}-enter-from`,enterActiveClass:d=`${s}-enter-active`,enterToClass:P=`${s}-enter-to`,appearFromClass:m=o,appearActiveClass:b=d,appearToClass:f=P,leaveFromClass:I=`${s}-leave-from`,leaveActiveClass:N=`${s}-leave-active`,leaveToClass:D=`${s}-leave-to`}=t,k=normalizeDuration(i),T=k&&k[0],A=k&&k[1],{onBeforeEnter:M,onEnter:L,onEnterCancelled:B,onLeave:E,onLeaveCancelled:u,onBeforeAppear:g=M,onAppear:W=L,onAppearCancelled:v=B}=e,c=($,tt,j)=>{removeTransitionClass($,tt?f:P),removeTransitionClass($,tt?b:d),j&&j()},F=($,tt)=>{$._isLeaving=!1,removeTransitionClass($,I),removeTransitionClass($,D),removeTransitionClass($,N),tt&&tt()},S=$=>(tt,j)=>{const rt=$?W:L,it=()=>c(tt,$,j);callHook(rt,[tt,it]),nextFrame(()=>{removeTransitionClass(tt,$?m:o),addTransitionClass(tt,$?f:P),hasExplicitCallback(rt)||whenTransitionEnds(tt,n,T,it)})};return extend(e,{onBeforeEnter($){callHook(M,[$]),addTransitionClass($,o),addTransitionClass($,d)},onBeforeAppear($){callHook(g,[$]),addTransitionClass($,m),addTransitionClass($,b)},onEnter:S(!1),onAppear:S(!0),onLeave($,tt){$._isLeaving=!0;const j=()=>F($,tt);addTransitionClass($,I),forceReflow(),addTransitionClass($,N),nextFrame(()=>{$._isLeaving&&(removeTransitionClass($,I),addTransitionClass($,D),hasExplicitCallback(E)||whenTransitionEnds($,n,A,j))}),callHook(E,[$,j])},onEnterCancelled($){c($,!1),callHook(B,[$])},onAppearCancelled($){c($,!0),callHook(v,[$])},onLeaveCancelled($){F($),callHook(u,[$])}})}function normalizeDuration(t){if(t==null)return null;if(isObject(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const e=NumberOf(t);return[e,e]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t._vtc||(t._vtc=new Set)).add(e)}function removeTransitionClass(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:s}=t;s&&(s.delete(e),s.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,e,s,n){const i=t._endId=++endId,o=()=>{i===t._endId&&n()};if(s)return setTimeout(o,s);const{type:d,timeout:P,propCount:m}=getTransitionInfo(t,e);if(!d)return n();const b=d+"end";let f=0;const I=()=>{t.removeEventListener(b,N),o()},N=D=>{D.target===t&&++f>=m&&I()};setTimeout(()=>{f<m&&I()},P+1),t.addEventListener(b,N)}function getTransitionInfo(t,e){const s=window.getComputedStyle(t),n=k=>(s[k]||"").split(", "),i=n(`${TRANSITION}Delay`),o=n(`${TRANSITION}Duration`),d=getTimeout(i,o),P=n(`${ANIMATION}Delay`),m=n(`${ANIMATION}Duration`),b=getTimeout(P,m);let f=null,I=0,N=0;e===TRANSITION?d>0&&(f=TRANSITION,I=d,N=o.length):e===ANIMATION?b>0&&(f=ANIMATION,I=b,N=m.length):(I=Math.max(d,b),f=I>0?d>b?TRANSITION:ANIMATION:null,N=f?f===TRANSITION?o.length:m.length:0);const D=f===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:f,timeout:I,propCount:N,hasTransform:D}}function getTimeout(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>toMs(s)+toMs(t[n])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?s=>invokeArrayFns(e,s):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t._assign=getModelAssigner(i);const o=n||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",d=>{if(d.target.composing)return;let P=t.value;s&&(P=P.trim()),o&&(P=looseToNumber(P)),t._assign(P)}),s&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:s,trim:n,number:i}},o){if(t._assign=getModelAssigner(o),t.composing||document.activeElement===t&&t.type!=="range"&&(s||n&&t.value.trim()===e||(i||t.type==="number")&&looseToNumber(t.value)===e))return;const d=e??"";t.value!==d&&(t.value=d)}},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const o=e._component;!isFunction(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const d=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),d},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}const style="";function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var zt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=X,e.bytesToString=lt,e.createValidAbsoluteUrl=At,e.getModificationDate=Mt,e.getUuid=$t,e.getVerbosityLevel=rt,e.info=it,e.isArrayBuffer=pt,e.isArrayEqual=Pt,e.isNodeJS=void 0,e.normalizeUnicode=jt,e.objectFromMap=J,e.objectSize=G,e.setVerbosityLevel=j,e.shadow=Ct,e.string32=R,e.stringToBytes=C,e.stringToPDFString=vt,e.stringToUTF8String=et,e.unreachable=w,e.utf8StringToString=nt,e.warn=bt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const o=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=o;const d=1.35;e.LINE_FACTOR=d;const P=.35;e.LINE_DESCENT_FACTOR=P;const m=P/d;e.BASELINE_FACTOR=m;const b={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=b;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=f;const I="pdfjs_internal_editor_";e.AnnotationEditorPrefix=I;const N={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=N;const D={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=D;const k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=k;const T={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=T;const A={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=A;const M={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=M;const L={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=L;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=B;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=E;const u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=u;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=g;const W={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=W;const v={O:"PageOpen",C:"PageClose"};e.PageActionEventType=v;const c={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=c;const F={NONE:0,BINARY:1};e.CMapCompressionType=F;const S={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=S;const $={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=$;let tt=c.WARNINGS;function j(Tt){Number.isInteger(Tt)&&(tt=Tt)}function rt(){return tt}function it(Tt){tt>=c.INFOS&&console.log(`Info: ${Tt}`)}function bt(Tt){tt>=c.WARNINGS&&console.log(`Warning: ${Tt}`)}function w(Tt){throw new Error(Tt)}function X(Tt,st){Tt||w(st)}function ot(Tt){switch(Tt==null?void 0:Tt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function At(Tt,st=null,ht=null){if(!Tt)return null;try{if(ht&&typeof Tt=="string"){if(ht.addDefaultProtocol&&Tt.startsWith("www.")){const qt=Tt.match(/\./g);(qt==null?void 0:qt.length)>=2&&(Tt=`http://${Tt}`)}if(ht.tryConvertEncoding)try{Tt=et(Tt)}catch{}}const Dt=st?new URL(Tt,st):new URL(Tt);if(ot(Dt))return Dt}catch{}return null}function Ct(Tt,st,ht,Dt=!1){return Object.defineProperty(Tt,st,{value:ht,enumerable:!Dt,configurable:!0,writable:!1}),ht}const x=function(){function st(ht,Dt){this.constructor===st&&w("Cannot initialize BaseException."),this.message=ht,this.name=Dt}return st.prototype=new Error,st.constructor=st,st}();e.BaseException=x;class a extends x{constructor(st,ht){super(st,"PasswordException"),this.code=ht}}e.PasswordException=a;class l extends x{constructor(st,ht){super(st,"UnknownErrorException"),this.details=ht}}e.UnknownErrorException=l;class y extends x{constructor(st){super(st,"InvalidPDFException")}}e.InvalidPDFException=y;class V extends x{constructor(st){super(st,"MissingPDFException")}}e.MissingPDFException=V;class H extends x{constructor(st,ht){super(st,"UnexpectedResponseException"),this.status=ht}}e.UnexpectedResponseException=H;class Y extends x{constructor(st){super(st,"FormatError")}}e.FormatError=Y;class Q extends x{constructor(st){super(st,"AbortException")}}e.AbortException=Q;function lt(Tt){(typeof Tt!="object"||(Tt==null?void 0:Tt.length)===void 0)&&w("Invalid argument for bytesToString");const st=Tt.length,ht=8192;if(st<ht)return String.fromCharCode.apply(null,Tt);const Dt=[];for(let qt=0;qt<st;qt+=ht){const Wt=Math.min(qt+ht,st),Kt=Tt.subarray(qt,Wt);Dt.push(String.fromCharCode.apply(null,Kt))}return Dt.join("")}function C(Tt){typeof Tt!="string"&&w("Invalid argument for stringToBytes");const st=Tt.length,ht=new Uint8Array(st);for(let Dt=0;Dt<st;++Dt)ht[Dt]=Tt.charCodeAt(Dt)&255;return ht}function R(Tt){return String.fromCharCode(Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255)}function G(Tt){return Object.keys(Tt).length}function J(Tt){const st=Object.create(null);for(const[ht,Dt]of Tt)st[ht]=Dt;return st}function ct(){const Tt=new Uint8Array(4);return Tt[0]=1,new Uint32Array(Tt.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class wt{static get isLittleEndian(){return Ct(this,"isLittleEndian",ct())}static get isEvalSupported(){return Ct(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ct(this,"platform",{isWin:!1,isMac:!1}):Ct(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var st,ht;return Ct(this,"isCSSRoundSupported",(ht=(st=globalThis.CSS)==null?void 0:st.supports)==null?void 0:ht.call(st,"width: round(1.5px, 1px)"))}}e.FeatureTest=wt;const Et=[...Array(256).keys()].map(Tt=>Tt.toString(16).padStart(2,"0"));class mt{static makeHexColor(st,ht,Dt){return`#${Et[st]}${Et[ht]}${Et[Dt]}`}static scaleMinMax(st,ht){let Dt;st[0]?(st[0]<0&&(Dt=ht[0],ht[0]=ht[1],ht[1]=Dt),ht[0]*=st[0],ht[1]*=st[0],st[3]<0&&(Dt=ht[2],ht[2]=ht[3],ht[3]=Dt),ht[2]*=st[3],ht[3]*=st[3]):(Dt=ht[0],ht[0]=ht[2],ht[2]=Dt,Dt=ht[1],ht[1]=ht[3],ht[3]=Dt,st[1]<0&&(Dt=ht[2],ht[2]=ht[3],ht[3]=Dt),ht[2]*=st[1],ht[3]*=st[1],st[2]<0&&(Dt=ht[0],ht[0]=ht[1],ht[1]=Dt),ht[0]*=st[2],ht[1]*=st[2]),ht[0]+=st[4],ht[1]+=st[4],ht[2]+=st[5],ht[3]+=st[5]}static transform(st,ht){return[st[0]*ht[0]+st[2]*ht[1],st[1]*ht[0]+st[3]*ht[1],st[0]*ht[2]+st[2]*ht[3],st[1]*ht[2]+st[3]*ht[3],st[0]*ht[4]+st[2]*ht[5]+st[4],st[1]*ht[4]+st[3]*ht[5]+st[5]]}static applyTransform(st,ht){const Dt=st[0]*ht[0]+st[1]*ht[2]+ht[4],qt=st[0]*ht[1]+st[1]*ht[3]+ht[5];return[Dt,qt]}static applyInverseTransform(st,ht){const Dt=ht[0]*ht[3]-ht[1]*ht[2],qt=(st[0]*ht[3]-st[1]*ht[2]+ht[2]*ht[5]-ht[4]*ht[3])/Dt,Wt=(-st[0]*ht[1]+st[1]*ht[0]+ht[4]*ht[1]-ht[5]*ht[0])/Dt;return[qt,Wt]}static getAxialAlignedBoundingBox(st,ht){const Dt=this.applyTransform(st,ht),qt=this.applyTransform(st.slice(2,4),ht),Wt=this.applyTransform([st[0],st[3]],ht),Kt=this.applyTransform([st[2],st[1]],ht);return[Math.min(Dt[0],qt[0],Wt[0],Kt[0]),Math.min(Dt[1],qt[1],Wt[1],Kt[1]),Math.max(Dt[0],qt[0],Wt[0],Kt[0]),Math.max(Dt[1],qt[1],Wt[1],Kt[1])]}static inverseTransform(st){const ht=st[0]*st[3]-st[1]*st[2];return[st[3]/ht,-st[1]/ht,-st[2]/ht,st[0]/ht,(st[2]*st[5]-st[4]*st[3])/ht,(st[4]*st[1]-st[5]*st[0])/ht]}static singularValueDecompose2dScale(st){const ht=[st[0],st[2],st[1],st[3]],Dt=st[0]*ht[0]+st[1]*ht[2],qt=st[0]*ht[1]+st[1]*ht[3],Wt=st[2]*ht[0]+st[3]*ht[2],Kt=st[2]*ht[1]+st[3]*ht[3],Zt=(Dt+Kt)/2,ft=Math.sqrt((Dt+Kt)**2-4*(Dt*Kt-Wt*qt))/2,It=Zt+ft||1,Vt=Zt-ft||1;return[Math.sqrt(It),Math.sqrt(Vt)]}static normalizeRect(st){const ht=st.slice(0);return st[0]>st[2]&&(ht[0]=st[2],ht[2]=st[0]),st[1]>st[3]&&(ht[1]=st[3],ht[3]=st[1]),ht}static intersect(st,ht){const Dt=Math.max(Math.min(st[0],st[2]),Math.min(ht[0],ht[2])),qt=Math.min(Math.max(st[0],st[2]),Math.max(ht[0],ht[2]));if(Dt>qt)return null;const Wt=Math.max(Math.min(st[1],st[3]),Math.min(ht[1],ht[3])),Kt=Math.min(Math.max(st[1],st[3]),Math.max(ht[1],ht[3]));return Wt>Kt?null:[Dt,Wt,qt,Kt]}static bezierBoundingBox(st,ht,Dt,qt,Wt,Kt,Zt,ft){const It=[],Vt=[[],[]];let Ot,O,_,q,z,Z,gt,kt;for(let Ft=0;Ft<2;++Ft){if(Ft===0?(O=6*st-12*Dt+6*Wt,Ot=-3*st+9*Dt-9*Wt+3*Zt,_=3*Dt-3*st):(O=6*ht-12*qt+6*Kt,Ot=-3*ht+9*qt-9*Kt+3*ft,_=3*qt-3*ht),Math.abs(Ot)<1e-12){if(Math.abs(O)<1e-12)continue;q=-_/O,0<q&&q<1&&It.push(q);continue}gt=O*O-4*_*Ot,kt=Math.sqrt(gt),!(gt<0)&&(z=(-O+kt)/(2*Ot),0<z&&z<1&&It.push(z),Z=(-O-kt)/(2*Ot),0<Z&&Z<1&&It.push(Z))}let U=It.length,at;const _t=U;for(;U--;)q=It[U],at=1-q,Vt[0][U]=at*at*at*st+3*at*at*q*Dt+3*at*q*q*Wt+q*q*q*Zt,Vt[1][U]=at*at*at*ht+3*at*at*q*qt+3*at*q*q*Kt+q*q*q*ft;return Vt[0][_t]=st,Vt[1][_t]=ht,Vt[0][_t+1]=Zt,Vt[1][_t+1]=ft,Vt[0].length=Vt[1].length=_t+2,[Math.min(...Vt[0]),Math.min(...Vt[1]),Math.max(...Vt[0]),Math.max(...Vt[1])]}}e.Util=mt;const St=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(Tt){if(Tt[0]>="ï"){let ht;if(Tt[0]==="þ"&&Tt[1]==="ÿ"?ht="utf-16be":Tt[0]==="ÿ"&&Tt[1]==="þ"?ht="utf-16le":Tt[0]==="ï"&&Tt[1]==="»"&&Tt[2]==="¿"&&(ht="utf-8"),ht)try{const Dt=new TextDecoder(ht,{fatal:!0}),qt=C(Tt);return Dt.decode(qt)}catch(Dt){bt(`stringToPDFString: "${Dt}".`)}}const st=[];for(let ht=0,Dt=Tt.length;ht<Dt;ht++){const qt=St[Tt.charCodeAt(ht)];st.push(qt?String.fromCharCode(qt):Tt.charAt(ht))}return st.join("")}function et(Tt){return decodeURIComponent(escape(Tt))}function nt(Tt){return unescape(encodeURIComponent(Tt))}function pt(Tt){return typeof Tt=="object"&&(Tt==null?void 0:Tt.byteLength)!==void 0}function Pt(Tt,st){if(Tt.length!==st.length)return!1;for(let ht=0,Dt=Tt.length;ht<Dt;ht++)if(Tt[ht]!==st[ht])return!1;return!0}function Mt(Tt=new Date){return[Tt.getUTCFullYear().toString(),(Tt.getUTCMonth()+1).toString().padStart(2,"0"),Tt.getUTCDate().toString().padStart(2,"0"),Tt.getUTCHours().toString().padStart(2,"0"),Tt.getUTCMinutes().toString().padStart(2,"0"),Tt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){K(this,zt,!1);this.promise=new Promise((st,ht)=>{this.resolve=Dt=>{yt(this,zt,!0),st(Dt)},this.reject=Dt=>{yt(this,zt,!0),ht(Dt)}})}get settled(){return r(this,zt)}}zt=new WeakMap,e.PromiseCapability=Bt;let Ut=null,Lt=null;function jt(Tt){return Ut||(Ut=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Lt=new Map([["ﬅ","ſt"]])),Tt.replaceAll(Ut,(st,ht,Dt)=>ht?ht.normalize("NFKC"):Lt.get(Dt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Tt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Tt);else for(let st=0;st<32;st++)Tt[st]=Math.floor(Math.random()*255);return lt(Tt)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,oe,d,ye,m,b,f,I,N,D,k,T,A,ve,L,B,Ie,u,g;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(v){if(typeof v=="string"||v instanceof URL?v={url:v}:(0,_util.isArrayBuffer)(v)&&(v={data:v}),typeof v!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!v.url&&!v.data&&!v.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:F}=c,S=v.url?getUrlProp(v.url):null,$=v.data?getDataProp(v.data):null,tt=v.httpHeaders||null,j=v.withCredentials===!0,rt=v.password??null,it=v.range instanceof PDFDataRangeTransport?v.range:null,bt=Number.isInteger(v.rangeChunkSize)&&v.rangeChunkSize>0?v.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let w=v.worker instanceof PDFWorker?v.worker:null;const X=v.verbosity,ot=typeof v.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(v.docBaseUrl)?v.docBaseUrl:null,At=typeof v.cMapUrl=="string"?v.cMapUrl:null,Ct=v.cMapPacked!==!1,x=v.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof v.standardFontDataUrl=="string"?v.standardFontDataUrl:null,l=v.StandardFontDataFactory||DefaultStandardFontDataFactory,y=v.stopAtErrors!==!0,V=Number.isInteger(v.maxImageSize)&&v.maxImageSize>-1?v.maxImageSize:-1,H=v.isEvalSupported!==!1,Y=typeof v.isOffscreenCanvasSupported=="boolean"?v.isOffscreenCanvasSupported:!_util.isNodeJS,Q=Number.isInteger(v.canvasMaxAreaInBytes)?v.canvasMaxAreaInBytes:-1,lt=typeof v.disableFontFace=="boolean"?v.disableFontFace:_util.isNodeJS,C=v.fontExtraProperties===!0,R=v.enableXfa===!0,G=v.ownerDocument||globalThis.document,J=v.disableRange===!0,ct=v.disableStream===!0,ut=v.disableAutoFetch===!0,wt=v.pdfBug===!0,Et=it?it.length:v.length??NaN,mt=typeof v.useSystemFonts=="boolean"?v.useSystemFonts:!_util.isNodeJS&&!lt,St=typeof v.useWorkerFetch=="boolean"?v.useWorkerFetch:x===_display_utils.DOMCMapReaderFactory&&l===_display_utils.DOMStandardFontDataFactory&&At&&a&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),vt=v.canvasFactory||new DefaultCanvasFactory({ownerDocument:G}),et=v.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:G}),nt=null;(0,_util.setVerbosityLevel)(X);const pt={canvasFactory:vt,filterFactory:et};if(St||(pt.cMapReaderFactory=new x({baseUrl:At,isCompressed:Ct}),pt.standardFontDataFactory=new l({baseUrl:a})),!w){const Bt={verbosity:X,port:_worker_options.GlobalWorkerOptions.workerPort};w=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),c._worker=w}const Pt={docId:F,apiVersion:"3.10.111",data:$,password:rt,disableAutoFetch:ut,rangeChunkSize:bt,length:Et,docBaseUrl:ot,enableXfa:R,evaluatorOptions:{maxImageSize:V,disableFontFace:lt,ignoreErrors:y,isEvalSupported:H,isOffscreenCanvasSupported:Y,canvasMaxAreaInBytes:Q,fontExtraProperties:C,useSystemFonts:mt,cMapUrl:St?At:null,standardFontDataUrl:St?a:null}},Mt={ignoreErrors:y,isEvalSupported:H,disableFontFace:lt,fontExtraProperties:C,enableXfa:R,ownerDocument:G,disableAutoFetch:ut,pdfBug:wt,styleElement:nt};return w.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(w,Pt),Ut=new Promise(function(Lt){let jt;it?jt=new _transport_stream.PDFDataTransportStream({length:Et,initialData:it.initialData,progressiveDone:it.progressiveDone,contentDispositionFilename:it.contentDispositionFilename,disableRange:J,disableStream:ct},it):$||(jt=(zt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(zt):(0,_display_utils.isValidFetchUrl)(zt.url)?new _displayFetch_stream.PDFFetchStream(zt):new _displayNetwork.PDFNetworkStream(zt))({url:S,length:Et,httpHeaders:tt,withCredentials:j,rangeChunkSize:bt,disableRange:J,disableStream:ct})),Lt(jt)});return Promise.all([Bt,Ut]).then(function([Lt,jt]){if(c.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(F,Lt,w.port),zt=new WorkerTransport($t,c,jt,Mt,pt);c._transport=zt,$t.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(v,c){if(v.destroyed)throw new Error("Worker was destroyed");const F=await v.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(v.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(v){if(v instanceof URL)return v.href;try{return new URL(v,window.location).href}catch{if(_util.isNodeJS&&typeof v=="string")return v}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(v){if(_util.isNodeJS&&typeof Buffer<"u"&&v instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength)return v;if(typeof v=="string")return(0,_util.stringToBytes)(v);if(typeof v=="object"&&!isNaN(v==null?void 0:v.length)||(0,_util.isArrayBuffer)(v))return new Uint8Array(v);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ue(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c,F,S;this.destroyed=!0;try{(c=this._worker)!=null&&c.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch($){throw(S=this._worker)!=null&&S.port&&delete this._worker._pendingDestroy,$}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,K(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,F,S=!1,$=null){this.length=c,this.initialData=F,this.progressiveDone=S,this.contentDispositionFilename=$,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,F){for(const S of this._rangeListeners)S(c,F)}onDataProgress(c,F){this._readyCapability.promise.then(()=>{for(const S of this._progressListeners)S(c,F)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,F){this._pdfInfo=c,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(S=>{if(!S)return S;const $=[];for(const tt in S)$.push(...S[tt]);return $}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,F,S,$=!1){K(this,i);K(this,d);K(this,s,null);K(this,n,!1);this._pageIndex=c,this._pageInfo=F,this._transport=S,this._stats=$?new _display_utils.StatTimer:null,this._pdfBug=$,this.commonObjs=S.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:F=this.rotate,offsetX:S=0,offsetY:$=0,dontFlip:tt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:F,offsetX:S,offsetY:$,dontFlip:tt})}getAnnotations({intent:c="display"}={}){const F=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:F,intent:S="display",annotationMode:$=_util.AnnotationMode.ENABLE,transform:tt=null,background:j=null,optionalContentConfigPromise:rt=null,annotationCanvasMap:it=null,pageColors:bt=null,printAnnotationStorage:w=null}){var l,y;(l=this._stats)==null||l.time("Overall");const X=this._transport.getRenderingIntent(S,$,w);yt(this,n,!1),dt(this,d,ye).call(this),rt||(rt=this._transport.getOptionalContentConfig());let ot=this._intentStates.get(X.cacheKey);ot||(ot=Object.create(null),this._intentStates.set(X.cacheKey,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const At=!!(X.renderingIntent&_util.RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=new _util.PromiseCapability,ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(y=this._stats)==null||y.time("Page Request"),this._pumpOperatorList(X));const Ct=V=>{var H,Y;ot.renderTasks.delete(x),(this._maybeCleanupAfterRender||At)&&yt(this,n,!0),dt(this,i,oe).call(this,!At),V?(x.capability.reject(V),this._abortOperatorList({intentState:ot,reason:V instanceof Error?V:new Error(V)})):x.capability.resolve(),(H=this._stats)==null||H.timeEnd("Rendering"),(Y=this._stats)==null||Y.timeEnd("Overall")},x=new InternalRenderTask({callback:Ct,params:{canvasContext:c,viewport:F,transform:tt,background:j},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:it,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!At,pdfBug:this._pdfBug,pageColors:bt});(ot.renderTasks||(ot.renderTasks=new Set)).add(x);const a=x.task;return Promise.all([ot.displayReadyCapability.promise,rt]).then(([V,H])=>{var Y;if(this.destroyed){Ct();return}(Y=this._stats)==null||Y.time("Rendering"),x.initializeGraphics({transparency:V,optionalContentConfig:H}),x.operatorListChanged()}).catch(Ct),a}getOperatorList({intent:c="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:S=null}={}){var it;function $(){j.operatorList.lastChunk&&(j.opListReadCapability.resolve(j.operatorList),j.renderTasks.delete(rt))}const tt=this._transport.getRenderingIntent(c,F,S,!0);let j=this._intentStates.get(tt.cacheKey);j||(j=Object.create(null),this._intentStates.set(tt.cacheKey,j));let rt;return j.opListReadCapability||(rt=Object.create(null),rt.operatorListChanged=$,j.opListReadCapability=new _util.PromiseCapability,(j.renderTasks||(j.renderTasks=new Set)).add(rt),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(tt)),j.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:F===!0},{highWaterMark:100,size($){return $.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(S=>_xfa_text.XfaText.textContent(S));const F=this.streamTextContent(c);return new Promise(function(S,$){function tt(){j.read().then(function({value:it,done:bt}){if(bt){S(rt);return}Object.assign(rt.styles,it.styles),rt.items.push(...it.items),tt()},$)}const j=F.getReader(),rt={items:[],styles:Object.create(null)};tt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const S of F.renderTasks)c.push(S.completed),S.cancel();return this.objs.clear(),yt(this,n,!1),dt(this,d,ye).call(this),Promise.all(c)}cleanup(c=!1){yt(this,n,!0);const F=dt(this,i,oe).call(this,!1);return c&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(c,F){var $,tt;const S=this._intentStates.get(F);S&&(($=this._stats)==null||$.timeEnd("Page Request"),(tt=S.displayReadyCapability)==null||tt.resolve(c))}_renderPageChunk(c,F){for(let S=0,$=c.length;S<$;S++)F.operatorList.fnArray.push(c.fnArray[S]),F.operatorList.argsArray.push(c.argsArray[S]);F.operatorList.lastChunk=c.lastChunk,F.operatorList.separateAnnots=c.separateAnnots;for(const S of F.renderTasks)S.operatorListChanged();c.lastChunk&&dt(this,i,oe).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:F,annotationStorageSerializable:S}){const{map:$,transfers:tt}=S,rt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:F,annotationStorage:$},tt).getReader(),it=this._intentStates.get(F);it.streamReader=rt;const bt=()=>{rt.read().then(({value:w,done:X})=>{if(X){it.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(w,it),bt())},w=>{if(it.streamReader=null,!this._transport.destroyed){if(it.operatorList){it.operatorList.lastChunk=!0;for(const X of it.renderTasks)X.operatorListChanged();dt(this,i,oe).call(this,!0)}if(it.displayReadyCapability)it.displayReadyCapability.reject(w);else if(it.opListReadCapability)it.opListReadCapability.reject(w);else throw w}})};bt()}_abortOperatorList({intentState:c,reason:F,force:S=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!S){if(c.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let $=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&($+=F.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:F,force:!0})},$);return}}if(c.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[$,tt]of this._intentStates)if(tt===c){this._intentStates.delete($);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,oe=function(c=!1){if(dt(this,d,ye).call(this),!r(this,n)||this.destroyed)return!1;if(c)return yt(this,s,setTimeout(()=>{yt(this,s,null),dt(this,i,oe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:S}of this._intentStates.values())if(F.size>0||!S.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),yt(this,n,!1),!0},d=new WeakSet,ye=function(){r(this,s)&&(clearTimeout(r(this,s)),yt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){K(this,m,new Set);K(this,b,Promise.resolve())}postMessage(c,F){const S={data:structuredClone(c,F?{transfer:F}:null)};r(this,b).then(()=>{for(const $ of r(this,m))$.call(this,S)})}addEventListener(c,F){r(this,m).add(F)}removeEventListener(c,F){r(this,m).delete(F)}terminate(){r(this,m).clear()}}m=new WeakMap,b=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const v=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;v&&(PDFWorkerUtil.fallbackWorkerSrc=v.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(v,c){let F;try{if(F=new URL(v),!F.origin||F.origin==="null")return!1}catch{return!1}const S=new URL(c,F);return F.origin===S.origin},PDFWorkerUtil.createCDNWrapper=function(v){const c=`importScripts("${v}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class _PDFWorker{constructor({name:v=null,port:c=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var S;if(this.name=v,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){if((S=r(_PDFWorker,I))!=null&&S.has(c))throw new Error("Cannot use more than one PDFWorker per port.");(r(_PDFWorker,I)||yt(_PDFWorker,I,new WeakMap)).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(v){this._port=v,this._messageHandler=new _message_handler.MessageHandler("main","worker",v),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:v}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,v)||(v=PDFWorkerUtil.createCDNWrapper(new URL(v,window.location).href));const c=new Worker(v),F=new _message_handler.MessageHandler("main","worker",c),S=()=>{c.removeEventListener("error",$),F.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},$=()=>{this._webWorker||S()};c.addEventListener("error",$),F.on("test",j=>{if(c.removeEventListener("error",$),this.destroyed){S();return}j?(this._messageHandler=F,this._port=c,this._webWorker=c,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),c.terminate())}),F.on("ready",j=>{if(c.removeEventListener("error",$),this.destroyed){S();return}try{tt()}catch{this._setupFakeWorker()}});const tt=()=>{const j=new Uint8Array;F.send("test",j,[j.buffer])};tt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(v=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,S=new _message_handler.MessageHandler(F+"_worker",F,c);v.setup(S,c);const $=new _message_handler.MessageHandler(F,F+"_worker",c);this._messageHandler=$,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})}).catch(v=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${v.message}".`))})}destroy(){var v;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(v=r(_PDFWorker,I))==null||v.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(v){var F;if(!(v!=null&&v.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const c=(F=r(this,I))==null?void 0:F.get(v.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new _PDFWorker(v)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var v;try{return((v=globalThis.pdfjsWorker)==null?void 0:v.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};I=new WeakMap,K(_PDFWorker,I,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,F,S,$,tt){K(this,A);K(this,N,new Map);K(this,D,new Map);K(this,k,new Map);K(this,T,null);this.messageHandler=c,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:$.ownerDocument,styleElement:$.styleElement}),this._params=$,this.canvasFactory=tt.canvasFactory,this.filterFactory=tt.filterFactory,this.cMapReaderFactory=tt.cMapReaderFactory,this.standardFontDataFactory=tt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=S,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,F=_util.AnnotationMode.ENABLE,S=null,$=!1){let tt=_util.RenderingIntentFlag.DISPLAY,j=_annotation_storage.SerializableEmpty;switch(c){case"any":tt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":tt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(F){case _util.AnnotationMode.DISABLE:tt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:tt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:tt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,j=(tt&_util.RenderingIntentFlag.PRINT&&S instanceof _annotation_storage.PrintAnnotationStorage?S:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return $&&(tt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:tt,cacheKey:`${tt}_${j.hash}`,annotationStorageSerializable:j}}destroy(){var S;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(S=r(this,T))==null||S.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const $ of r(this,D).values())c.push($._destroy());r(this,D).clear(),r(this,k).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return c.push(F),Promise.all(c).then(()=>{var $;this.commonObjs.clear(),this.fontLoader.clear(),r(this,N).clear(),this.filterFactory.destroy(),($=this._networkStream)==null||$.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:F}=this;c.on("GetReader",(S,$)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=tt=>{this._lastProgress={loaded:tt.loaded,total:tt.total}},$.onPull=()=>{this._fullReader.read().then(function({value:tt,done:j}){if(j){$.close();return}(0,_util.assert)(tt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(tt),1,[tt])}).catch(tt=>{$.error(tt)})},$.onCancel=tt=>{this._fullReader.cancel(tt),$.ready.catch(j=>{if(!this.destroyed)throw j})}}),c.on("ReaderHeadersReady",S=>{const $=new _util.PromiseCapability,tt=this._fullReader;return tt.headersReady.then(()=>{var j;(!tt.isStreamingSupported||!tt.isRangeSupported)&&(this._lastProgress&&((j=F.onProgress)==null||j.call(F,this._lastProgress)),tt.onProgress=rt=>{var it;(it=F.onProgress)==null||it.call(F,{loaded:rt.loaded,total:rt.total})}),$.resolve({isStreamingSupported:tt.isStreamingSupported,isRangeSupported:tt.isRangeSupported,contentLength:tt.contentLength})},$.reject),$.promise}),c.on("GetRangeReader",(S,$)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const tt=this._networkStream.getRangeReader(S.begin,S.end);if(!tt){$.close();return}$.onPull=()=>{tt.read().then(function({value:j,done:rt}){if(rt){$.close();return}(0,_util.assert)(j instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(j),1,[j])}).catch(j=>{$.error(j)})},$.onCancel=j=>{tt.cancel(j),$.ready.catch(rt=>{if(!this.destroyed)throw rt})}}),c.on("GetDoc",({pdfInfo:S})=>{this._numPages=S.numPages,this._htmlForXfa=S.htmlForXfa,delete S.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(S,this))}),c.on("DocException",function(S){let $;switch(S.name){case"PasswordException":$=new _util.PasswordException(S.message,S.code);break;case"InvalidPDFException":$=new _util.InvalidPDFException(S.message);break;case"MissingPDFException":$=new _util.MissingPDFException(S.message);break;case"UnexpectedResponseException":$=new _util.UnexpectedResponseException(S.message,S.status);break;case"UnknownErrorException":$=new _util.UnknownErrorException(S.message,S.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject($)}),c.on("PasswordRequest",S=>{if(yt(this,T,new _util.PromiseCapability),F.onPassword){const $=tt=>{tt instanceof Error?r(this,T).reject(tt):r(this,T).resolve({password:tt})};try{F.onPassword($,S.code)}catch(tt){r(this,T).reject(tt)}}else r(this,T).reject(new _util.PasswordException(S.message,S.code));return r(this,T).promise}),c.on("DataLoaded",S=>{var $;($=F.onProgress)==null||$.call(F,{loaded:S.length,total:S.length}),this.downloadInfoCapability.resolve(S)}),c.on("StartRenderPage",S=>{if(this.destroyed)return;r(this,D).get(S.pageIndex)._startRenderPage(S.transparency,S.cacheKey)}),c.on("commonobj",([S,$,tt])=>{var j;if(!this.destroyed&&!this.commonObjs.has(S))switch($){case"Font":const rt=this._params;if("error"in tt){const w=tt.error;(0,_util.warn)(`Error during font loading: ${w}`),this.commonObjs.resolve(S,w);break}const it=rt.pdfBug&&((j=globalThis.FontInspector)!=null&&j.enabled)?(w,X)=>globalThis.FontInspector.fontAdded(w,X):null,bt=new _font_loader.FontFaceObject(tt,{isEvalSupported:rt.isEvalSupported,disableFontFace:rt.disableFontFace,ignoreErrors:rt.ignoreErrors,inspectFont:it});this.fontLoader.bind(bt).catch(w=>c.sendWithPromise("FontFallback",{id:S})).finally(()=>{!rt.fontExtraProperties&&bt.data&&(bt.data=null),this.commonObjs.resolve(S,bt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(S,tt);break;default:throw new Error(`Got unknown common object type ${$}`)}}),c.on("obj",([S,$,tt,j])=>{var it;if(this.destroyed)return;const rt=r(this,D).get($);if(!rt.objs.has(S))switch(tt){case"Image":if(rt.objs.resolve(S,j),j){let bt;if(j.bitmap){const{width:w,height:X}=j;bt=w*X*4}else bt=((it=j.data)==null?void 0:it.length)||0;bt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(rt._maybeCleanupAfterRender=!0)}break;case"Pattern":rt.objs.resolve(S,j);break;default:throw new Error(`Got unknown object type ${tt}`)}}),c.on("DocProgress",S=>{var $;this.destroyed||($=F.onProgress)==null||$.call(F,{loaded:S.loaded,total:S.total})}),c.on("FetchBuiltInCMap",S=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(S):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",S=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(S):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var S;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:c,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:c,filename:((S=this._fullReader)==null?void 0:S.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=c-1,S=r(this,k).get(F);if(S)return S;const $=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(tt=>{if(this.destroyed)throw new Error("Transport destroyed");const j=new PDFPageProxy(F,tt,this,this._params.pdfBug);return r(this,D).set(F,j),j});return r(this,k).set(F,$),$}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:F})}getFieldObjects(){return dt(this,A,ve).call(this,"GetFieldObjects")}hasJSActions(){return dt(this,A,ve).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return dt(this,A,ve).call(this,"GetDocJSActions")}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",F=r(this,N).get(c);if(F)return F;const S=this.messageHandler.sendWithPromise(c,null).then($=>{var tt,j;return{info:$[0],metadata:$[1]?new _metadata.Metadata($[1]):null,contentDispositionFilename:((tt=this._fullReader)==null?void 0:tt.filename)??null,contentLength:((j=this._fullReader)==null?void 0:j.contentLength)??null}});return r(this,N).set(c,S),S}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of r(this,D).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),r(this,N).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:F})}}N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakSet,ve=function(c,F=null){const S=r(this,N).get(c);if(S)return S;const $=this.messageHandler.sendWithPromise(c,F);return r(this,N).set(c,$),$};class PDFObjects{constructor(){K(this,B);K(this,L,Object.create(null))}get(c,F=null){if(F){const $=dt(this,B,Ie).call(this,c);return $.capability.promise.then(()=>F($.data)),null}const S=r(this,L)[c];if(!(S!=null&&S.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return S.data}has(c){const F=r(this,L)[c];return(F==null?void 0:F.capability.settled)||!1}resolve(c,F=null){const S=dt(this,B,Ie).call(this,c);S.data=F,S.capability.resolve()}clear(){var c;for(const F in r(this,L)){const{data:S}=r(this,L)[F];(c=S==null?void 0:S.bitmap)==null||c.close()}yt(this,L,Object.create(null))}}L=new WeakMap,B=new WeakSet,Ie=function(c){var F;return(F=r(this,L))[c]||(F[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){K(this,u,null);yt(this,u,c),this.onContinue=null}get promise(){return r(this,u).capability.promise}cancel(c=0){r(this,u).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=r(this,u).operatorList;if(!c)return!1;const{annotationCanvasMap:F}=r(this,u);return c.form||c.canvas&&(F==null?void 0:F.size)>0}}u=new WeakMap,exports.RenderTask=RenderTask;const W=class W{constructor({callback:c,params:F,objs:S,commonObjs:$,annotationCanvasMap:tt,operatorList:j,pageIndex:rt,canvasFactory:it,filterFactory:bt,useRequestAnimationFrame:w=!1,pdfBug:X=!1,pageColors:ot=null}){this.callback=c,this.params=F,this.objs=S,this.commonObjs=$,this.annotationCanvasMap=tt,this.operatorListIdx=null,this.operatorList=j,this._pageIndex=rt,this.canvasFactory=it,this.filterFactory=bt,this._pdfBug=X,this.pageColors=ot,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=w===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:F}){var rt,it;if(this.cancelled)return;if(this._canvas){if(r(W,g).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(W,g).add(this._canvas)}this._pdfBug&&((rt=globalThis.StepperManager)!=null&&rt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:S,viewport:$,transform:tt,background:j}=this.params;this.gfx=new _canvas.CanvasGraphics(S,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:tt,viewport:$,transparency:c,background:j}),this.operatorListIdx=0,this.graphicsReady=!0,(it=this.graphicsReadyCallback)==null||it.call(this)}cancel(c=null,F=0){var S;this.running=!1,this.cancelled=!0,(S=this.gfx)==null||S.endDrawing(),this._canvas&&r(W,g).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&r(W,g).delete(this._canvas),this.callback())))}};g=new WeakMap,K(W,g,new WeakSet);let InternalRenderTask=W;const version="3.10.111";exports.version=version;const build="e142baecb";exports.build=build},(t,e,s)=>{var b,f,I,un,D;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(4),o=s(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=d;class P{constructor(){K(this,I);K(this,b,!1);K(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(T,A){const M=r(this,f).get(T);return M===void 0?A:Object.assign(A,M)}getRawValue(T){return r(this,f).get(T)}remove(T){if(r(this,f).delete(T),r(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const A of r(this,f).values())if(A instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(T,A){const M=r(this,f).get(T);let L=!1;if(M!==void 0)for(const[B,E]of Object.entries(A))M[B]!==E&&(L=!0,M[B]=E);else L=!0,r(this,f).set(T,A);L&&dt(this,I,un).call(this),A instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(A.constructor._type)}has(T){return r(this,f).has(T)}getAll(){return r(this,f).size>0?(0,n.objectFromMap)(r(this,f)):null}setAll(T){for(const[A,M]of Object.entries(T))this.setValue(A,M)}get size(){return r(this,f).size}resetModified(){r(this,b)&&(yt(this,b,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m(this)}get serializable(){if(r(this,f).size===0)return d;const T=new Map,A=new o.MurmurHash3_64,M=[],L=Object.create(null);let B=!1;for(const[E,u]of r(this,f)){const g=u instanceof i.AnnotationEditor?u.serialize(!1,L):u;g&&(T.set(E,g),A.update(`${E}:${JSON.stringify(g)}`),B||(B=!!g.bitmap))}if(B)for(const E of T.values())E.bitmap&&M.push(E.bitmap);return T.size>0?{map:T,hash:A.hexdigest(),transfers:M}:d}}b=new WeakMap,f=new WeakMap,I=new WeakSet,un=function(){r(this,b)||(yt(this,b,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=P;class m extends P{constructor(A){super();K(this,D,void 0);const{map:M,hash:L,transfers:B}=A.serializable,E=structuredClone(M,B?{transfer:B}:null);yt(this,D,{map:E,hash:L,transfers:B})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,D)}}D=new WeakMap,e.PrintAnnotationStorage=m},(t,e,s)=>{var P,m,b,f,I,N,D,k,T,A,Oe,L,De,E,Le,g,fn,v,pn,F,gn,$,mn,j,bn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),i=s(1);const it=class it{constructor(w){K(this,A);K(this,E);K(this,v);K(this,F);K(this,$);K(this,j);K(this,P,!1);K(this,m,null);K(this,b,this.focusin.bind(this));K(this,f,this.focusout.bind(this));K(this,I,!1);K(this,N,!1);K(this,D,!1);Jt(this,"_initialOptions",Object.create(null));Jt(this,"_uiManager",null);Jt(this,"_focusEventsAllowed",!0);K(this,k,!1);K(this,T,it._zIndex++);this.constructor===it&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=w.parent,this.id=w.id,this.width=this.height=null,this.pageIndex=w.parent.pageIndex,this.name=w.name,this.div=null,this._uiManager=w.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=w.isCentered;const{rotation:X,rawDims:{pageWidth:ot,pageHeight:At,pageX:Ct,pageY:x}}=this.parent.viewport;this.rotation=X,this.pageRotation=(360+X-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,At],this.pageTranslation=[Ct,x];const[a,l]=this.parentDimensions;this.x=w.x/a,this.y=w.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(w){const X=new d({id:w.parent.getNextId(),parent:w.parent,uiManager:w._uiManager});X.annotationElementId=w.annotationElementId,X.deleted=!0,X._uiManager.addToAnnotationStorage(X)}static initialize(w){}static updateDefaultParams(w,X){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(w){return!1}static paste(w,X){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return r(this,k)}set _isDraggable(w){var X;yt(this,k,w),(X=this.div)==null||X.classList.toggle("draggable",w)}center(){const[w,X]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*X/(w*2),this.y+=this.width*w/(X*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*X/(w*2),this.y-=this.width*w/(X*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(w){this._uiManager.addCommands(w)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,T)}setParent(w){w!==null&&(this.pageIndex=w.pageIndex,this.pageDimensions=w.pageDimensions),this.parent=w}focusin(w){this._focusEventsAllowed&&(r(this,I)?yt(this,I,!1):this.parent.setSelected(this))}focusout(w){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const X=w.relatedTarget;X!=null&&X.closest(`#${this.id}`)||(w.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(w,X,ot,At){const[Ct,x]=this.parentDimensions;[ot,At]=this.screenToPageTranslation(ot,At),this.x=(w+ot)/Ct,this.y=(X+At)/x,this.fixAndSetPosition()}translate(w,X){dt(this,A,Oe).call(this,this.parentDimensions,w,X)}translateInPage(w,X){dt(this,A,Oe).call(this,this.pageDimensions,w,X),this.moveInDOM(),this.div.scrollIntoView({block:"nearest"})}drag(w,X){const[ot,At]=this.parentDimensions;if(this.x+=w/ot,this.y+=X/At,this.x<0||this.x>1||this.y<0||this.y>1){const{x:Ct,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ct,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[w,X]=this.pageDimensions;let{x:ot,y:At,width:Ct,height:x}=this;switch(Ct*=w,x*=X,ot*=w,At*=X,this.rotation){case 0:ot=Math.max(0,Math.min(w-Ct,ot)),At=Math.max(0,Math.min(X-x,At));break;case 90:ot=Math.max(0,Math.min(w-x,ot)),At=Math.min(X,Math.max(Ct,At));break;case 180:ot=Math.min(w,Math.max(Ct,ot)),At=Math.min(X,Math.max(x,At));break;case 270:ot=Math.min(w,Math.max(x,ot)),At=Math.max(0,Math.min(X-Ct,At));break}this.x=ot/w,this.y=At/X,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(w,X){var ot;return dt(ot=it,L,De).call(ot,w,X,this.parentRotation)}pageTranslationToScreen(w,X){var ot;return dt(ot=it,L,De).call(ot,w,X,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:w,pageDimensions:[X,ot]}=this,At=X*w,Ct=ot*w;return i.FeatureTest.isCSSRoundSupported?[Math.round(At),Math.round(Ct)]:[At,Ct]}setDims(w,X){const[ot,At]=this.parentDimensions;this.div.style.width=`${(100*w/ot).toFixed(2)}%`,r(this,P)||(this.div.style.height=`${(100*X/At).toFixed(2)}%`)}fixDims(){const{style:w}=this.div,{height:X,width:ot}=w,At=ot.endsWith("%"),Ct=!r(this,P)&&X.endsWith("%");if(At&&Ct)return;const[x,a]=this.parentDimensions;At||(w.width=`${(100*parseFloat(ot)/x).toFixed(2)}%`),!r(this,P)&&!Ct&&(w.height=`${(100*parseFloat(X)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,b)),this.div.addEventListener("focusout",r(this,f));const[w,X]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*X/w).toFixed(2)}%`,this.div.style.maxHeight=`${(100*w/X).toFixed(2)}%`);const[ot,At]=this.getInitialTranslation();return this.translate(ot,At),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(w){const{isMac:X}=i.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&X){w.preventDefault();return}yt(this,I,!0),dt(this,j,bn).call(this,w)}moveInDOM(){this.parent.moveEditorInDOM(this)}_setParentAndPosition(w,X,ot){w.changeParent(this),this.x=X,this.y=ot,this.fixAndSetPosition(),this.moveInDOM()}getRect(w,X){const ot=this.parentScale,[At,Ct]=this.pageDimensions,[x,a]=this.pageTranslation,l=w/ot,y=X/ot,V=this.x*At,H=this.y*Ct,Y=this.width*At,Q=this.height*Ct;switch(this.rotation){case 0:return[V+l+x,Ct-H-y-Q+a,V+l+Y+x,Ct-H-y+a];case 90:return[V+y+x,Ct-H+l+a,V+y+Q+x,Ct-H+l+Y+a];case 180:return[V-l-Y+x,Ct-H+y+a,V-l+x,Ct-H+y+Q+a];case 270:return[V-y-Q+x,Ct-H-l-Y+a,V-y+x,Ct-H-l+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(w,X){const[ot,At,Ct,x]=w,a=Ct-ot,l=x-At;switch(this.rotation){case 0:return[ot,X-x,a,l];case 90:return[ot,X-At,l,a];case 180:return[Ct,X-At,a,l];case 270:return[Ct,X-x,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){yt(this,D,!0)}disableEditMode(){yt(this,D,!1)}isInEditMode(){return r(this,D)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var w,X;(w=this.div)==null||w.addEventListener("focusin",r(this,b)),(X=this.div)==null||X.addEventListener("focusout",r(this,f))}serialize(w=!1,X=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(w,X,ot){const At=new this.prototype.constructor({parent:X,id:X.getNextId(),uiManager:ot});At.rotation=w.rotation;const[Ct,x]=At.pageDimensions,[a,l,y,V]=At.getRectInCurrentCoords(w.rect,x);return At.x=a/Ct,At.y=l/x,At.width=y/Ct,At.height=V/x,At}remove(){this.div.removeEventListener("focusin",r(this,b)),this.div.removeEventListener("focusout",r(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(dt(this,v,pn).call(this),r(this,m).classList.remove("hidden"))}select(){var w;this.makeResizable(),(w=this.div)==null||w.classList.add("selectedEditor")}unselect(){var w,X,ot;(w=r(this,m))==null||w.classList.add("hidden"),(X=this.div)==null||X.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(w,X){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,N)}set isEditing(w){yt(this,N,w),this.parent&&(w?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(w,X){yt(this,P,!0);const ot=w/X,{style:At}=this.div;At.aspectRatio=ot,At.height="auto"}static get MIN_SIZE(){return 16}};P=new WeakMap,m=new WeakMap,b=new WeakMap,f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakSet,Oe=function([w,X],ot,At){[ot,At]=this.screenToPageTranslation(ot,At),this.x+=ot/w,this.y+=At/X,this.fixAndSetPosition()},L=new WeakSet,De=function(w,X,ot){switch(ot){case 90:return[X,-w];case 180:return[-w,-X];case 270:return[-X,w];default:return[w,X]}},E=new WeakSet,Le=function(w){switch(w){case 90:{const[X,ot]=this.pageDimensions;return[0,-X/ot,ot/X,0]}case 180:return[-1,0,0,-1];case 270:{const[X,ot]=this.pageDimensions;return[0,X/ot,-ot/X,0]}default:return[1,0,0,1]}},g=new WeakSet,fn=function(w){w.preventDefault()},v=new WeakSet,pn=function(){if(r(this,m))return;yt(this,m,document.createElement("div")),r(this,m).classList.add("resizers");const w=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||w.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const X of w){const ot=document.createElement("div");r(this,m).append(ot),ot.classList.add("resizer",X),ot.addEventListener("pointerdown",dt(this,F,gn).bind(this,X)),ot.addEventListener("contextmenu",dt(it,g,fn))}this.div.prepend(r(this,m))},F=new WeakSet,gn=function(w,X){X.preventDefault();const{isMac:ot}=i.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&ot)return;const At=dt(this,$,mn).bind(this,w),Ct=this._isDraggable;this._isDraggable=!1;const x={passive:!0,capture:!0};window.addEventListener("pointermove",At,x);const a=this.x,l=this.y,y=this.width,V=this.height,H=this.parent.div.style.cursor,Y=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(X.target).cursor;const Q=()=>{this._isDraggable=Ct,window.removeEventListener("pointerup",Q),window.removeEventListener("blur",Q),window.removeEventListener("pointermove",At,x),this.parent.div.style.cursor=H,this.div.style.cursor=Y;const lt=this.x,C=this.y,R=this.width,G=this.height;lt===a&&C===l&&R===y&&G===V||this.addCommands({cmd:()=>{this.width=R,this.height=G,this.x=lt,this.y=C;const[J,ct]=this.parentDimensions;this.setDims(J*R,ct*G),this.fixAndSetPosition(),this.moveInDOM()},undo:()=>{this.width=y,this.height=V,this.x=a,this.y=l;const[J,ct]=this.parentDimensions;this.setDims(J*y,ct*V),this.fixAndSetPosition(),this.moveInDOM()},mustExec:!0})};window.addEventListener("pointerup",Q),window.addEventListener("blur",Q)},$=new WeakSet,mn=function(w,X){const[ot,At]=this.parentDimensions,Ct=this.x,x=this.y,a=this.width,l=this.height,y=it.MIN_SIZE/ot,V=it.MIN_SIZE/At,H=Lt=>Math.round(Lt*1e4)/1e4,Y=dt(this,E,Le).call(this,this.rotation),Q=(Lt,jt)=>[Y[0]*Lt+Y[2]*jt,Y[1]*Lt+Y[3]*jt],lt=dt(this,E,Le).call(this,360-this.rotation),C=(Lt,jt)=>[lt[0]*Lt+lt[2]*jt,lt[1]*Lt+lt[3]*jt];let R,G,J=!1,ct=!1;switch(w){case"topLeft":J=!0,R=(Lt,jt)=>[0,0],G=(Lt,jt)=>[Lt,jt];break;case"topMiddle":R=(Lt,jt)=>[Lt/2,0],G=(Lt,jt)=>[Lt/2,jt];break;case"topRight":J=!0,R=(Lt,jt)=>[Lt,0],G=(Lt,jt)=>[0,jt];break;case"middleRight":ct=!0,R=(Lt,jt)=>[Lt,jt/2],G=(Lt,jt)=>[0,jt/2];break;case"bottomRight":J=!0,R=(Lt,jt)=>[Lt,jt],G=(Lt,jt)=>[0,0];break;case"bottomMiddle":R=(Lt,jt)=>[Lt/2,jt],G=(Lt,jt)=>[Lt/2,0];break;case"bottomLeft":J=!0,R=(Lt,jt)=>[0,jt],G=(Lt,jt)=>[Lt,0];break;case"middleLeft":ct=!0,R=(Lt,jt)=>[0,jt/2],G=(Lt,jt)=>[Lt,jt/2];break}const ut=R(a,l),wt=G(a,l);let Et=Q(...wt);const mt=H(Ct+Et[0]),St=H(x+Et[1]);let vt=1,et=1,[nt,pt]=this.screenToPageTranslation(X.movementX,X.movementY);if([nt,pt]=C(nt/ot,pt/At),J){const Lt=Math.hypot(a,l);vt=et=Math.max(Math.min(Math.hypot(wt[0]-ut[0]-nt,wt[1]-ut[1]-pt)/Lt,1/a,1/l),y/a,V/l)}else ct?vt=Math.max(y,Math.min(1,Math.abs(wt[0]-ut[0]-nt)))/a:et=Math.max(V,Math.min(1,Math.abs(wt[1]-ut[1]-pt)))/l;const Pt=H(a*vt),Mt=H(l*et);Et=Q(...G(Pt,Mt));const Bt=mt-Et[0],Ut=St-Et[1];this.width=Pt,this.height=Mt,this.x=Bt,this.y=Ut,this.setDims(ot*Pt,At*Mt),this.fixAndSetPosition()},j=new WeakSet,bn=function(w){if(!this._isDraggable)return;const X=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ot,At;X&&(ot={passive:!0,capture:!0},At=x=>{const[a,l]=this.screenToPageTranslation(x.movementX,x.movementY);this._uiManager.dragSelectedEditors(a,l)},window.addEventListener("pointermove",At,ot));const Ct=()=>{if(window.removeEventListener("pointerup",Ct),window.removeEventListener("blur",Ct),X&&window.removeEventListener("pointermove",At,ot),yt(this,I,!1),!this._uiManager.endDragSession()){const{isMac:x}=i.FeatureTest.platform;w.ctrlKey&&!x||w.shiftKey||w.metaKey&&x?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Ct),window.addEventListener("blur",Ct)},K(it,L),K(it,g),Jt(it,"_colorManager",new n.ColorManager),Jt(it,"_zIndex",1);let o=it;e.AnnotationEditor=o;class d extends o{constructor(w){super(w),this.annotationElementId=w.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var D,k,T,A,M,Ne,E,u,g,W,v,_n,S,$,tt,j,rt,it,bt,w,X,ot,At,Ct,x,a,l,y,V,H,Y,Q,lt,C,R,G,J,ct,ut,wt,Et,mt,St,vt,et,nt,pt,An,Mt,Be,Ut,yn,jt,je,zt,vn,st,Sn,Dt,se,Wt,fe,Zt,En,It,wn,Ot,He,_,pe,z,Ue;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=o,e.opacityToHex=d;var n=s(1),i=s(6);function o(kt,U,at){for(const _t of at)U.addEventListener(_t,kt[_t].bind(kt))}function d(kt){return Math.round(Math.min(255,Math.max(1,255*kt))).toString(16).padStart(2,"0")}class P{constructor(){K(this,D,0)}getId(){return`${n.AnnotationEditorPrefix}${ue(this,D)._++}`}}D=new WeakMap;const B=class B{constructor(){K(this,M);K(this,k,(0,n.getUuid)());K(this,T,0);K(this,A,null)}static get _isSVGFittingCanvas(){const U='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',_t=new OffscreenCanvas(1,3).getContext("2d"),Ft=new Image;Ft.src=U;const xt=Ft.decode().then(()=>(_t.drawImage(Ft,0,0,1,1,0,0,1,3),new Uint32Array(_t.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",xt)}async getFromFile(U){const{lastModified:at,name:_t,size:Ft,type:xt}=U;return dt(this,M,Ne).call(this,`${at}_${_t}_${Ft}_${xt}`,U)}async getFromUrl(U){return dt(this,M,Ne).call(this,U,U)}async getFromId(U){r(this,A)||yt(this,A,new Map);const at=r(this,A).get(U);return at?at.bitmap?(at.refCounter+=1,at):at.file?this.getFromFile(at.file):this.getFromUrl(at.url):null}getSvgUrl(U){const at=r(this,A).get(U);return at!=null&&at.isSvg?at.svgUrl:null}deleteId(U){r(this,A)||yt(this,A,new Map);const at=r(this,A).get(U);at&&(at.refCounter-=1,at.refCounter===0&&(at.bitmap=null))}isValidId(U){return U.startsWith(`image_${r(this,k)}_`)}};k=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakSet,Ne=async function(U,at){r(this,A)||yt(this,A,new Map);let _t=r(this,A).get(U);if(_t===null)return null;if(_t!=null&&_t.bitmap)return _t.refCounter+=1,_t;try{_t||(_t={bitmap:null,id:`image_${r(this,k)}_${ue(this,T)._++}`,refCounter:0,isSvg:!1});let Ft;if(typeof at=="string"){_t.url=at;const xt=await fetch(at);if(!xt.ok)throw new Error(xt.statusText);Ft=await xt.blob()}else Ft=_t.file=at;if(Ft.type==="image/svg+xml"){const xt=B._isSVGFittingCanvas,Rt=new FileReader,Nt=new Image,Ht=new Promise((Gt,Xt)=>{Nt.onload=()=>{_t.bitmap=Nt,_t.isSvg=!0,Gt()},Rt.onload=async()=>{const Qt=_t.svgUrl=Rt.result;Nt.src=await xt?`${Qt}#svgView(preserveAspectRatio(none))`:Qt},Nt.onerror=Rt.onerror=Xt});Rt.readAsDataURL(Ft),await Ht}else _t.bitmap=await createImageBitmap(Ft);_t.refCounter=1}catch(Ft){console.error(Ft),_t=null}return r(this,A).set(U,_t),_t&&r(this,A).set(_t.id,_t),_t};let m=B;class b{constructor(U=128){K(this,E,[]);K(this,u,!1);K(this,g,void 0);K(this,W,-1);yt(this,g,U)}add({cmd:U,undo:at,mustExec:_t,type:Ft=NaN,overwriteIfSameType:xt=!1,keepUndo:Rt=!1}){if(_t&&U(),r(this,u))return;const Nt={cmd:U,undo:at,type:Ft};if(r(this,W)===-1){r(this,E).length>0&&(r(this,E).length=0),yt(this,W,0),r(this,E).push(Nt);return}if(xt&&r(this,E)[r(this,W)].type===Ft){Rt&&(Nt.undo=r(this,E)[r(this,W)].undo),r(this,E)[r(this,W)]=Nt;return}const Ht=r(this,W)+1;Ht===r(this,g)?r(this,E).splice(0,1):(yt(this,W,Ht),Ht<r(this,E).length&&r(this,E).splice(Ht)),r(this,E).push(Nt)}undo(){r(this,W)!==-1&&(yt(this,u,!0),r(this,E)[r(this,W)].undo(),yt(this,u,!1),yt(this,W,r(this,W)-1))}redo(){r(this,W)<r(this,E).length-1&&(yt(this,W,r(this,W)+1),yt(this,u,!0),r(this,E)[r(this,W)].cmd(),yt(this,u,!1))}hasSomethingToUndo(){return r(this,W)!==-1}hasSomethingToRedo(){return r(this,W)<r(this,E).length-1}destroy(){yt(this,E,null)}}E=new WeakMap,u=new WeakMap,g=new WeakMap,W=new WeakMap,e.CommandManager=b;class f{constructor(U){K(this,v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:at}=n.FeatureTest.platform;for(const[_t,Ft,xt={}]of U)for(const Rt of _t){const Nt=Rt.startsWith("mac+");at&&Nt?(this.callbacks.set(Rt.slice(4),{callback:Ft,options:xt}),this.allKeys.add(Rt.split("+").at(-1))):!at&&!Nt&&(this.callbacks.set(Rt,{callback:Ft,options:xt}),this.allKeys.add(Rt.split("+").at(-1)))}}exec(U,at){if(!this.allKeys.has(at.key))return;const _t=this.callbacks.get(dt(this,v,_n).call(this,at));if(!_t)return;const{callback:Ft,options:{bubbles:xt=!1,args:Rt=[],checker:Nt=null}}=_t;Nt&&!Nt(U,at)||(Ft.bind(U,...Rt)(),xt||(at.stopPropagation(),at.preventDefault()))}}v=new WeakSet,_n=function(U){U.altKey&&this.buffer.push("alt"),U.ctrlKey&&this.buffer.push("ctrl"),U.metaKey&&this.buffer.push("meta"),U.shiftKey&&this.buffer.push("shift"),this.buffer.push(U.key);const at=this.buffer.join("+");return this.buffer.length=0,at},e.KeyboardManager=f;const F=class F{get _colors(){const U=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(U),(0,n.shadow)(this,"_colors",U)}convert(U){const at=(0,i.getRGB)(U);if(!window.matchMedia("(forced-colors: active)").matches)return at;for(const[_t,Ft]of this._colors)if(Ft.every((xt,Rt)=>xt===at[Rt]))return F._colorsMapping.get(_t);return at}getHexCode(U){const at=this._colors.get(U);return at?n.Util.makeHexColor(...at):U}};Jt(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let I=F;e.ColorManager=I;const gt=class gt{constructor(U,at,_t,Ft,xt){K(this,pt);K(this,Mt);K(this,Ut);K(this,jt);K(this,zt);K(this,st);K(this,Dt);K(this,Wt);K(this,Zt);K(this,It);K(this,Ot);K(this,_);K(this,z);K(this,S,null);K(this,$,new Map);K(this,tt,new Map);K(this,j,null);K(this,rt,new b);K(this,it,0);K(this,bt,new Set);K(this,w,null);K(this,X,null);K(this,ot,new Set);K(this,At,null);K(this,Ct,null);K(this,x,new P);K(this,a,!1);K(this,l,!1);K(this,y,null);K(this,V,n.AnnotationEditorType.NONE);K(this,H,new Set);K(this,Y,null);K(this,Q,this.blur.bind(this));K(this,lt,this.focus.bind(this));K(this,C,this.copy.bind(this));K(this,R,this.cut.bind(this));K(this,G,this.paste.bind(this));K(this,J,this.keydown.bind(this));K(this,ct,this.onEditingAction.bind(this));K(this,ut,this.onPageChanging.bind(this));K(this,wt,this.onScaleChanging.bind(this));K(this,Et,this.onRotationChanging.bind(this));K(this,mt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});K(this,St,[0,0]);K(this,vt,null);K(this,et,null);K(this,nt,null);yt(this,et,U),yt(this,nt,at),yt(this,At,_t),r(this,At)._on("editingaction",r(this,ct)),r(this,At)._on("pagechanging",r(this,ut)),r(this,At)._on("scalechanging",r(this,wt)),r(this,At)._on("rotationchanging",r(this,Et)),yt(this,j,Ft.annotationStorage),yt(this,Ct,Ft.filterFactory),yt(this,Y,xt),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const U=gt.prototype,at=xt=>{const{activeElement:Rt}=document;return Rt&&r(xt,et).contains(Rt)&&xt.hasSomethingToControl()},_t=this.TRANSLATE_SMALL,Ft=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],U.selectAll],[["ctrl+z","mac+meta+z"],U.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],U.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],U.delete],[["Escape","mac+Escape"],U.unselectAll],[["ArrowLeft","mac+ArrowLeft"],U.translateSelectedEditors,{args:[-_t,0],checker:at}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],U.translateSelectedEditors,{args:[-Ft,0],checker:at}],[["ArrowRight","mac+ArrowRight"],U.translateSelectedEditors,{args:[_t,0],checker:at}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],U.translateSelectedEditors,{args:[Ft,0],checker:at}],[["ArrowUp","mac+ArrowUp"],U.translateSelectedEditors,{args:[0,-_t],checker:at}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],U.translateSelectedEditors,{args:[0,-Ft],checker:at}],[["ArrowDown","mac+ArrowDown"],U.translateSelectedEditors,{args:[0,_t],checker:at}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],U.translateSelectedEditors,{args:[0,Ft],checker:at}]]))}destroy(){dt(this,jt,je).call(this),dt(this,Mt,Be).call(this),r(this,At)._off("editingaction",r(this,ct)),r(this,At)._off("pagechanging",r(this,ut)),r(this,At)._off("scalechanging",r(this,wt)),r(this,At)._off("rotationchanging",r(this,Et));for(const U of r(this,tt).values())U.destroy();r(this,tt).clear(),r(this,$).clear(),r(this,ot).clear(),yt(this,S,null),r(this,H).clear(),r(this,rt).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",r(this,Y)?r(this,Ct).addHCMFilter(r(this,Y).foreground,r(this,Y).background):"none")}onPageChanging({pageNumber:U}){yt(this,it,U-1)}focusMainContainer(){r(this,et).focus()}findParent(U,at){for(const _t of r(this,tt).values()){const{x:Ft,y:xt,width:Rt,height:Nt}=_t.div.getBoundingClientRect();if(U>=Ft&&U<=Ft+Rt&&at>=xt&&at<=xt+Nt)return _t}return null}disableUserSelect(U=!1){r(this,nt).classList.toggle("noUserSelect",U)}addShouldRescale(U){r(this,ot).add(U)}removeShouldRescale(U){r(this,ot).delete(U)}onScaleChanging({scale:U}){this.commitOrRemove(),this.viewParameters.realScale=U*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const at of r(this,ot))at.onScaleChanging()}onRotationChanging({pagesRotation:U}){this.commitOrRemove(),this.viewParameters.rotation=U}addToAnnotationStorage(U){!U.isEmpty()&&r(this,j)&&!r(this,j).has(U.id)&&r(this,j).setValue(U.id,U)}blur(){if(!this.hasSelection)return;const{activeElement:U}=document;for(const at of r(this,H))if(at.div.contains(U)){yt(this,y,[at,U]),at._focusEventsAllowed=!1;break}}focus(){if(!r(this,y))return;const[U,at]=r(this,y);yt(this,y,null),at.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),at.focus()}copy(U){var _t;if(U.preventDefault(),(_t=r(this,S))==null||_t.commitOrRemove(),!this.hasSelection)return;const at=[];for(const Ft of r(this,H)){const xt=Ft.serialize(!0);xt&&at.push(xt)}at.length!==0&&U.clipboardData.setData("application/pdfjs",JSON.stringify(at))}cut(U){this.copy(U),this.delete()}paste(U){U.preventDefault();const{clipboardData:at}=U;for(const xt of at.items)for(const Rt of r(this,X))if(Rt.isHandlingMimeForPasting(xt.type)){Rt.paste(xt,this.currentLayer);return}let _t=at.getData("application/pdfjs");if(!_t)return;try{_t=JSON.parse(_t)}catch(xt){(0,n.warn)(`paste: "${xt.message}".`);return}if(!Array.isArray(_t))return;this.unselectAll();const Ft=this.currentLayer;try{const xt=[];for(const Ht of _t){const Gt=Ft.deserialize(Ht);if(!Gt)return;xt.push(Gt)}const Rt=()=>{for(const Ht of xt)dt(this,Ot,He).call(this,Ht);dt(this,z,Ue).call(this,xt)},Nt=()=>{for(const Ht of xt)Ht.remove()};this.addCommands({cmd:Rt,undo:Nt,mustExec:!0})}catch(xt){(0,n.warn)(`paste: "${xt.message}".`)}}keydown(U){var at;(at=this.getActive())!=null&&at.shouldGetKeyboardEvents()||gt._keyboardManager.exec(this,U)}onEditingAction(U){["undo","redo","delete","selectAll"].includes(U.name)&&this[U.name]()}setEditingState(U){U?(dt(this,pt,An).call(this),dt(this,Ut,yn).call(this),dt(this,zt,vn).call(this),dt(this,Dt,se).call(this,{isEditing:r(this,V)!==n.AnnotationEditorType.NONE,isEmpty:dt(this,_,pe).call(this),hasSomethingToUndo:r(this,rt).hasSomethingToUndo(),hasSomethingToRedo:r(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(dt(this,Mt,Be).call(this),dt(this,jt,je).call(this),dt(this,st,Sn).call(this),dt(this,Dt,se).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(U){if(!r(this,X)){yt(this,X,U);for(const at of r(this,X))dt(this,Wt,fe).call(this,at.defaultPropertiesToUpdate)}}getId(){return r(this,x).getId()}get currentLayer(){return r(this,tt).get(r(this,it))}getLayer(U){return r(this,tt).get(U)}get currentPageIndex(){return r(this,it)}addLayer(U){r(this,tt).set(U.pageIndex,U),r(this,a)?U.enable():U.disable()}removeLayer(U){r(this,tt).delete(U.pageIndex)}updateMode(U,at=null){if(r(this,V)!==U){if(yt(this,V,U),U===n.AnnotationEditorType.NONE){this.setEditingState(!1),dt(this,It,wn).call(this);return}this.setEditingState(!0),dt(this,Zt,En).call(this),this.unselectAll();for(const _t of r(this,tt).values())_t.updateMode(U);if(at){for(const _t of r(this,$).values())if(_t.annotationElementId===at){this.setSelected(_t),_t.enterInEditMode();break}}}}updateToolbar(U){U!==r(this,V)&&r(this,At).dispatch("switchannotationeditormode",{source:this,mode:U})}updateParams(U,at){if(r(this,X)){if(U===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(U);return}for(const _t of r(this,H))_t.updateParams(U,at);for(const _t of r(this,X))_t.updateDefaultParams(U,at)}}enableWaiting(U=!1){if(r(this,l)!==U){yt(this,l,U);for(const at of r(this,tt).values())U?at.disableClick():at.enableClick(),at.div.classList.toggle("waiting",U)}}getEditors(U){const at=[];for(const _t of r(this,$).values())_t.pageIndex===U&&at.push(_t);return at}getEditor(U){return r(this,$).get(U)}addEditor(U){r(this,$).set(U.id,U)}removeEditor(U){var at;r(this,$).delete(U.id),this.unselect(U),(!U.annotationElementId||!r(this,bt).has(U.annotationElementId))&&((at=r(this,j))==null||at.remove(U.id))}addDeletedAnnotationElement(U){r(this,bt).add(U.annotationElementId),U.deleted=!0}isDeletedAnnotationElement(U){return r(this,bt).has(U)}removeDeletedAnnotationElement(U){r(this,bt).delete(U.annotationElementId),U.deleted=!1}setActiveEditor(U){r(this,S)!==U&&(yt(this,S,U),U&&dt(this,Wt,fe).call(this,U.propertiesToUpdate))}toggleSelected(U){if(r(this,H).has(U)){r(this,H).delete(U),U.unselect(),dt(this,Dt,se).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,H).add(U),U.select(),dt(this,Wt,fe).call(this,U.propertiesToUpdate),dt(this,Dt,se).call(this,{hasSelectedEditor:!0})}setSelected(U){for(const at of r(this,H))at!==U&&at.unselect();r(this,H).clear(),r(this,H).add(U),U.select(),dt(this,Wt,fe).call(this,U.propertiesToUpdate),dt(this,Dt,se).call(this,{hasSelectedEditor:!0})}isSelected(U){return r(this,H).has(U)}unselect(U){U.unselect(),r(this,H).delete(U),dt(this,Dt,se).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,H).size!==0}undo(){r(this,rt).undo(),dt(this,Dt,se).call(this,{hasSomethingToUndo:r(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:dt(this,_,pe).call(this)})}redo(){r(this,rt).redo(),dt(this,Dt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,rt).hasSomethingToRedo(),isEmpty:dt(this,_,pe).call(this)})}addCommands(U){r(this,rt).add(U),dt(this,Dt,se).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:dt(this,_,pe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const U=[...r(this,H)],at=()=>{for(const Ft of U)Ft.remove()},_t=()=>{for(const Ft of U)dt(this,Ot,He).call(this,Ft)};this.addCommands({cmd:at,undo:_t,mustExec:!0})}commitOrRemove(){var U;(U=r(this,S))==null||U.commitOrRemove()}hasSomethingToControl(){return r(this,S)||this.hasSelection}selectAll(){for(const U of r(this,H))U.commit();dt(this,z,Ue).call(this,r(this,$).values())}unselectAll(){if(r(this,S)){r(this,S).commitOrRemove();return}if(this.hasSelection){for(const U of r(this,H))U.unselect();r(this,H).clear(),dt(this,Dt,se).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(U,at,_t=!1){if(_t||this.commitOrRemove(),!this.hasSelection)return;r(this,St)[0]+=U,r(this,St)[1]+=at;const[Ft,xt]=r(this,St),Rt=[...r(this,H)],Nt=1e3;r(this,vt)&&clearTimeout(r(this,vt)),yt(this,vt,setTimeout(()=>{yt(this,vt,null),r(this,St)[0]=r(this,St)[1]=0,this.addCommands({cmd:()=>{for(const Ht of Rt)r(this,$).has(Ht.id)&&Ht.translateInPage(Ft,xt)},undo:()=>{for(const Ht of Rt)r(this,$).has(Ht.id)&&Ht.translateInPage(-Ft,-xt)},mustExec:!1})},Nt));for(const Ht of Rt)Ht.translateInPage(U,at)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),yt(this,w,new Map);for(const U of r(this,H))r(this,w).set(U,{savedX:U.x,savedY:U.y,savedPageIndex:U.parent.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!r(this,w))return!1;this.disableUserSelect(!1);const U=r(this,w);yt(this,w,null);let at=!1;for(const[{x:Ft,y:xt,parent:Rt},Nt]of U)Nt.newX=Ft,Nt.newY=xt,Nt.newPageIndex=Rt.pageIndex,at||(at=Ft!==Nt.savedX||xt!==Nt.savedY||Rt.pageIndex!==Nt.savedPageIndex);if(!at)return!1;const _t=(Ft,xt,Rt,Nt)=>{if(r(this,$).has(Ft.id)){const Ht=r(this,tt).get(Nt);Ht?Ft._setParentAndPosition(Ht,xt,Rt):(Ft.pageIndex=Nt,Ft.x=xt,Ft.y=Rt)}};return this.addCommands({cmd:()=>{for(const[Ft,{newX:xt,newY:Rt,newPageIndex:Nt}]of U)_t(Ft,xt,Rt,Nt)},undo:()=>{for(const[Ft,{savedX:xt,savedY:Rt,savedPageIndex:Nt}]of U)_t(Ft,xt,Rt,Nt)},mustExec:!0}),!0}dragSelectedEditors(U,at){if(r(this,w))for(const _t of r(this,w).keys())_t.drag(U,at)}rebuild(U){if(U.parent===null){const at=this.getLayer(U.pageIndex);at?(at.changeParent(U),at.addOrRebuild(U)):(this.addEditor(U),this.addToAnnotationStorage(U),U.rebuild())}else U.parent.addOrRebuild(U)}isActive(U){return r(this,S)===U}getActive(){return r(this,S)}getMode(){return r(this,V)}get imageManager(){return(0,n.shadow)(this,"imageManager",new m)}};S=new WeakMap,$=new WeakMap,tt=new WeakMap,j=new WeakMap,rt=new WeakMap,it=new WeakMap,bt=new WeakMap,w=new WeakMap,X=new WeakMap,ot=new WeakMap,At=new WeakMap,Ct=new WeakMap,x=new WeakMap,a=new WeakMap,l=new WeakMap,y=new WeakMap,V=new WeakMap,H=new WeakMap,Y=new WeakMap,Q=new WeakMap,lt=new WeakMap,C=new WeakMap,R=new WeakMap,G=new WeakMap,J=new WeakMap,ct=new WeakMap,ut=new WeakMap,wt=new WeakMap,Et=new WeakMap,mt=new WeakMap,St=new WeakMap,vt=new WeakMap,et=new WeakMap,nt=new WeakMap,pt=new WeakSet,An=function(){window.addEventListener("focus",r(this,lt)),window.addEventListener("blur",r(this,Q))},Mt=new WeakSet,Be=function(){window.removeEventListener("focus",r(this,lt)),window.removeEventListener("blur",r(this,Q))},Ut=new WeakSet,yn=function(){window.addEventListener("keydown",r(this,J),{capture:!0})},jt=new WeakSet,je=function(){window.removeEventListener("keydown",r(this,J),{capture:!0})},zt=new WeakSet,vn=function(){document.addEventListener("copy",r(this,C)),document.addEventListener("cut",r(this,R)),document.addEventListener("paste",r(this,G))},st=new WeakSet,Sn=function(){document.removeEventListener("copy",r(this,C)),document.removeEventListener("cut",r(this,R)),document.removeEventListener("paste",r(this,G))},Dt=new WeakSet,se=function(U){Object.entries(U).some(([_t,Ft])=>r(this,mt)[_t]!==Ft)&&r(this,At).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,mt),U)})},Wt=new WeakSet,fe=function(U){r(this,At).dispatch("annotationeditorparamschanged",{source:this,details:U})},Zt=new WeakSet,En=function(){if(!r(this,a)){yt(this,a,!0);for(const U of r(this,tt).values())U.enable()}},It=new WeakSet,wn=function(){if(this.unselectAll(),r(this,a)){yt(this,a,!1);for(const U of r(this,tt).values())U.disable()}},Ot=new WeakSet,He=function(U){const at=r(this,tt).get(U.pageIndex);at?at.addOrRebuild(U):this.addEditor(U)},_=new WeakSet,pe=function(){if(r(this,$).size===0)return!0;if(r(this,$).size===1)for(const U of r(this,$).values())return U.isEmpty();return!1},z=new WeakSet,Ue=function(U){r(this,H).clear();for(const at of U)at.isEmpty()||(r(this,H).add(at),at.select());dt(this,Dt,se).call(this,{hasSelectedEditor:!0})},Jt(gt,"TRANSLATE_SMALL",1),Jt(gt,"TRANSLATE_BIG",10);let N=gt;e.AnnotationEditorUIManager=N},(t,e,s)=>{var bt,w,X,ot,At,Ct,x,a,l,y,V,H,le,Q,ce,C,Ve,G,Se,ct,Ee,wt,ge,mt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=W,e.getColorValues=$,e.getCurrentTransform=tt,e.getCurrentTransformInverse=j,e.getFilenameFromUrl=L,e.getPdfFilenameFromUrl=B,e.getRGB=S,e.getXfaPageViewport=F,e.isDataScheme=A,e.isPdfFile=M,e.isValidFetchUrl=u,e.loadScript=g,e.setLayerDimensions=rt;var n=s(7),i=s(1);const o="http://www.w3.org/2000/svg",d="pdfjs_internal_id_";e.AnnotationPrefix=d;const it=class it{};Jt(it,"CSS",96),Jt(it,"PDF",72),Jt(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let P=it;e.PixelsPerInch=P;class m extends n.BaseFilterFactory{constructor({docId:nt,ownerDocument:pt=globalThis.document}={}){super();K(this,H);K(this,Q);K(this,C);K(this,G);K(this,ct);K(this,wt);K(this,mt);K(this,bt,void 0);K(this,w,void 0);K(this,X,void 0);K(this,ot,void 0);K(this,At,void 0);K(this,Ct,void 0);K(this,x,void 0);K(this,a,void 0);K(this,l,void 0);K(this,y,void 0);K(this,V,0);yt(this,X,nt),yt(this,ot,pt)}addFilter(nt){if(!nt)return"none";let pt=r(this,H,le).get(nt);if(pt)return pt;let Pt,Mt,Bt,Ut;if(nt.length===1){const zt=nt[0],Tt=new Array(256);for(let st=0;st<256;st++)Tt[st]=zt[st]/255;Ut=Pt=Mt=Bt=Tt.join(",")}else{const[zt,Tt,st]=nt,ht=new Array(256),Dt=new Array(256),qt=new Array(256);for(let Wt=0;Wt<256;Wt++)ht[Wt]=zt[Wt]/255,Dt[Wt]=Tt[Wt]/255,qt[Wt]=st[Wt]/255;Pt=ht.join(","),Mt=Dt.join(","),Bt=qt.join(","),Ut=`${Pt}${Mt}${Bt}`}if(pt=r(this,H,le).get(Ut),pt)return r(this,H,le).set(nt,pt),pt;const Lt=`g_${r(this,X)}_transfer_map_${ue(this,V)._++}`,jt=`url(#${Lt})`;r(this,H,le).set(nt,jt),r(this,H,le).set(Ut,jt);const $t=dt(this,G,Se).call(this,Lt);return dt(this,wt,ge).call(this,Pt,Mt,Bt,$t),jt}addHCMFilter(nt,pt){var Tt;const Pt=`${nt}-${pt}`;if(r(this,Ct)===Pt)return r(this,x);if(yt(this,Ct,Pt),yt(this,x,"none"),(Tt=r(this,At))==null||Tt.remove(),!nt||!pt)return r(this,x);const Mt=dt(this,mt,me).call(this,nt);nt=i.Util.makeHexColor(...Mt);const Bt=dt(this,mt,me).call(this,pt);if(pt=i.Util.makeHexColor(...Bt),r(this,Q,ce).style.color="",nt==="#000000"&&pt==="#ffffff"||nt===pt)return r(this,x);const Ut=new Array(256);for(let st=0;st<=255;st++){const ht=st/255;Ut[st]=ht<=.03928?ht/12.92:((ht+.055)/1.055)**2.4}const Lt=Ut.join(","),jt=`g_${r(this,X)}_hcm_filter`,$t=yt(this,a,dt(this,G,Se).call(this,jt));dt(this,wt,ge).call(this,Lt,Lt,Lt,$t),dt(this,C,Ve).call(this,$t);const zt=(st,ht)=>{const Dt=Mt[st]/255,qt=Bt[st]/255,Wt=new Array(ht+1);for(let Kt=0;Kt<=ht;Kt++)Wt[Kt]=Dt+Kt/ht*(qt-Dt);return Wt.join(",")};return dt(this,wt,ge).call(this,zt(0,5),zt(1,5),zt(2,5),$t),yt(this,x,`url(#${jt})`),r(this,x)}addHighlightHCMFilter(nt,pt,Pt,Mt){var qt;const Bt=`${nt}-${pt}-${Pt}-${Mt}`;if(r(this,l)===Bt)return r(this,y);if(yt(this,l,Bt),yt(this,y,"none"),(qt=r(this,a))==null||qt.remove(),!nt||!pt)return r(this,y);const[Ut,Lt]=[nt,pt].map(dt(this,mt,me).bind(this));let jt=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),$t=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),[zt,Tt]=[Pt,Mt].map(dt(this,mt,me).bind(this));$t<jt&&([jt,$t,zt,Tt]=[$t,jt,Tt,zt]),r(this,Q,ce).style.color="";const st=(Wt,Kt,Zt)=>{const ft=new Array(256),It=($t-jt)/Zt,Vt=Wt/255,Ot=(Kt-Wt)/(255*Zt);let O=0;for(let _=0;_<=Zt;_++){const q=Math.round(jt+_*It),z=Vt+_*Ot;for(let Z=O;Z<=q;Z++)ft[Z]=z;O=q+1}for(let _=O;_<256;_++)ft[_]=ft[O-1];return ft.join(",")},ht=`g_${r(this,X)}_hcm_highlight_filter`,Dt=yt(this,a,dt(this,G,Se).call(this,ht));return dt(this,C,Ve).call(this,Dt),dt(this,wt,ge).call(this,st(zt[0],Tt[0],5),st(zt[1],Tt[1],5),st(zt[2],Tt[2],5),Dt),yt(this,y,`url(#${ht})`),r(this,y)}destroy(nt=!1){nt&&(r(this,x)||r(this,y))||(r(this,w)&&(r(this,w).parentNode.parentNode.remove(),yt(this,w,null)),r(this,bt)&&(r(this,bt).clear(),yt(this,bt,null)),yt(this,V,0))}}bt=new WeakMap,w=new WeakMap,X=new WeakMap,ot=new WeakMap,At=new WeakMap,Ct=new WeakMap,x=new WeakMap,a=new WeakMap,l=new WeakMap,y=new WeakMap,V=new WeakMap,H=new WeakSet,le=function(){return r(this,bt)||yt(this,bt,new Map)},Q=new WeakSet,ce=function(){if(!r(this,w)){const nt=r(this,ot).createElement("div"),{style:pt}=nt;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Pt=r(this,ot).createElementNS(o,"svg");Pt.setAttribute("width",0),Pt.setAttribute("height",0),yt(this,w,r(this,ot).createElementNS(o,"defs")),nt.append(Pt),Pt.append(r(this,w)),r(this,ot).body.append(nt)}return r(this,w)},C=new WeakSet,Ve=function(nt){const pt=r(this,ot).createElementNS(o,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),nt.append(pt)},G=new WeakSet,Se=function(nt){const pt=r(this,ot).createElementNS(o,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",nt),r(this,Q,ce).append(pt),pt},ct=new WeakSet,Ee=function(nt,pt,Pt){const Mt=r(this,ot).createElementNS(o,pt);Mt.setAttribute("type","discrete"),Mt.setAttribute("tableValues",Pt),nt.append(Mt)},wt=new WeakSet,ge=function(nt,pt,Pt,Mt){const Bt=r(this,ot).createElementNS(o,"feComponentTransfer");Mt.append(Bt),dt(this,ct,Ee).call(this,Bt,"feFuncR",nt),dt(this,ct,Ee).call(this,Bt,"feFuncG",pt),dt(this,ct,Ee).call(this,Bt,"feFuncB",Pt)},mt=new WeakSet,me=function(nt){return r(this,Q,ce).style.color=nt,S(getComputedStyle(r(this,Q,ce)).getPropertyValue("color"))},e.DOMFilterFactory=m;class b extends n.BaseCanvasFactory{constructor({ownerDocument:et=globalThis.document}={}){super(),this._document=et}_createCanvas(et,nt){const pt=this._document.createElement("canvas");return pt.width=et,pt.height=nt,pt}}e.DOMCanvasFactory=b;async function f(vt,et=!1){if(u(vt,document.baseURI)){const nt=await fetch(vt);if(!nt.ok)throw new Error(nt.statusText);return et?new Uint8Array(await nt.arrayBuffer()):(0,i.stringToBytes)(await nt.text())}return new Promise((nt,pt)=>{const Pt=new XMLHttpRequest;Pt.open("GET",vt,!0),et&&(Pt.responseType="arraybuffer"),Pt.onreadystatechange=()=>{if(Pt.readyState===XMLHttpRequest.DONE){if(Pt.status===200||Pt.status===0){let Mt;if(et&&Pt.response?Mt=new Uint8Array(Pt.response):!et&&Pt.responseText&&(Mt=(0,i.stringToBytes)(Pt.responseText)),Mt){nt(Mt);return}}pt(new Error(Pt.statusText))}},Pt.send(null)})}class I extends n.BaseCMapReaderFactory{_fetchData(et,nt){return f(et,this.isCompressed).then(pt=>({cMapData:pt,compressionType:nt}))}}e.DOMCMapReaderFactory=I;class N extends n.BaseStandardFontDataFactory{_fetchData(et){return f(et,!0)}}e.DOMStandardFontDataFactory=N;class D extends n.BaseSVGFactory{_createSVG(et){return document.createElementNS(o,et)}}e.DOMSVGFactory=D;class k{constructor({viewBox:et,scale:nt,rotation:pt,offsetX:Pt=0,offsetY:Mt=0,dontFlip:Bt=!1}){this.viewBox=et,this.scale=nt,this.rotation=pt,this.offsetX=Pt,this.offsetY=Mt;const Ut=(et[2]+et[0])/2,Lt=(et[3]+et[1])/2;let jt,$t,zt,Tt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:jt=-1,$t=0,zt=0,Tt=1;break;case 90:jt=0,$t=1,zt=1,Tt=0;break;case 270:jt=0,$t=-1,zt=-1,Tt=0;break;case 0:jt=1,$t=0,zt=0,Tt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&(zt=-zt,Tt=-Tt);let st,ht,Dt,qt;jt===0?(st=Math.abs(Lt-et[1])*nt+Pt,ht=Math.abs(Ut-et[0])*nt+Mt,Dt=(et[3]-et[1])*nt,qt=(et[2]-et[0])*nt):(st=Math.abs(Ut-et[0])*nt+Pt,ht=Math.abs(Lt-et[1])*nt+Mt,Dt=(et[2]-et[0])*nt,qt=(et[3]-et[1])*nt),this.transform=[jt*nt,$t*nt,zt*nt,Tt*nt,st-jt*nt*Ut-zt*nt*Lt,ht-$t*nt*Ut-Tt*nt*Lt],this.width=Dt,this.height=qt}get rawDims(){const{viewBox:et}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:et[2]-et[0],pageHeight:et[3]-et[1],pageX:et[0],pageY:et[1]})}clone({scale:et=this.scale,rotation:nt=this.rotation,offsetX:pt=this.offsetX,offsetY:Pt=this.offsetY,dontFlip:Mt=!1}={}){return new k({viewBox:this.viewBox.slice(),scale:et,rotation:nt,offsetX:pt,offsetY:Pt,dontFlip:Mt})}convertToViewportPoint(et,nt){return i.Util.applyTransform([et,nt],this.transform)}convertToViewportRectangle(et){const nt=i.Util.applyTransform([et[0],et[1]],this.transform),pt=i.Util.applyTransform([et[2],et[3]],this.transform);return[nt[0],nt[1],pt[0],pt[1]]}convertToPdfPoint(et,nt){return i.Util.applyInverseTransform([et,nt],this.transform)}}e.PageViewport=k;class T extends i.BaseException{constructor(et,nt=0){super(et,"RenderingCancelledException"),this.extraDelay=nt}}e.RenderingCancelledException=T;function A(vt){const et=vt.length;let nt=0;for(;nt<et&&vt[nt].trim()==="";)nt++;return vt.substring(nt,nt+5).toLowerCase()==="data:"}function M(vt){return typeof vt=="string"&&/\.pdf$/i.test(vt)}function L(vt,et=!1){return et||([vt]=vt.split(/[#?]/,1)),vt.substring(vt.lastIndexOf("/")+1)}function B(vt,et="document.pdf"){if(typeof vt!="string")return et;if(A(vt))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),et;const nt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Pt=nt.exec(vt);let Mt=pt.exec(Pt[1])||pt.exec(Pt[2])||pt.exec(Pt[3]);if(Mt&&(Mt=Mt[0],Mt.includes("%")))try{Mt=pt.exec(decodeURIComponent(Mt))[0]}catch{}return Mt||et}class E{constructor(){Jt(this,"started",Object.create(null));Jt(this,"times",[])}time(et){et in this.started&&(0,i.warn)(`Timer is already running for ${et}`),this.started[et]=Date.now()}timeEnd(et){et in this.started||(0,i.warn)(`Timer has not been started for ${et}`),this.times.push({name:et,start:this.started[et],end:Date.now()}),delete this.started[et]}toString(){const et=[];let nt=0;for(const{name:pt}of this.times)nt=Math.max(pt.length,nt);for(const{name:pt,start:Pt,end:Mt}of this.times)et.push(`${pt.padEnd(nt)} ${Mt-Pt}ms
`);return et.join("")}}e.StatTimer=E;function u(vt,et){try{const{protocol:nt}=et?new URL(vt,et):new URL(vt);return nt==="http:"||nt==="https:"}catch{return!1}}function g(vt,et=!1){return new Promise((nt,pt)=>{const Pt=document.createElement("script");Pt.src=vt,Pt.onload=function(Mt){et&&Pt.remove(),nt(Mt)},Pt.onerror=function(){pt(new Error(`Cannot load script at: ${Pt.src}`))},(document.head||document.documentElement).append(Pt)})}function W(vt){console.log("Deprecated API usage: "+vt)}let v;class c{static toDateObject(et){if(!et||typeof et!="string")return null;v||(v=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const nt=v.exec(et);if(!nt)return null;const pt=parseInt(nt[1],10);let Pt=parseInt(nt[2],10);Pt=Pt>=1&&Pt<=12?Pt-1:0;let Mt=parseInt(nt[3],10);Mt=Mt>=1&&Mt<=31?Mt:1;let Bt=parseInt(nt[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let Ut=parseInt(nt[5],10);Ut=Ut>=0&&Ut<=59?Ut:0;let Lt=parseInt(nt[6],10);Lt=Lt>=0&&Lt<=59?Lt:0;const jt=nt[7]||"Z";let $t=parseInt(nt[8],10);$t=$t>=0&&$t<=23?$t:0;let zt=parseInt(nt[9],10)||0;return zt=zt>=0&&zt<=59?zt:0,jt==="-"?(Bt+=$t,Ut+=zt):jt==="+"&&(Bt-=$t,Ut-=zt),new Date(Date.UTC(pt,Pt,Mt,Bt,Ut,Lt))}}e.PDFDateString=c;function F(vt,{scale:et=1,rotation:nt=0}){const{width:pt,height:Pt}=vt.attributes.style,Mt=[0,0,parseInt(pt),parseInt(Pt)];return new k({viewBox:Mt,scale:et,rotation:nt})}function S(vt){if(vt.startsWith("#")){const et=parseInt(vt.slice(1),16);return[(et&16711680)>>16,(et&65280)>>8,et&255]}return vt.startsWith("rgb(")?vt.slice(4,-1).split(",").map(et=>parseInt(et)):vt.startsWith("rgba(")?vt.slice(5,-1).split(",").map(et=>parseInt(et)).slice(0,3):((0,i.warn)(`Not a valid color format: "${vt}"`),[0,0,0])}function $(vt){const et=document.createElement("span");et.style.visibility="hidden",document.body.append(et);for(const nt of vt.keys()){et.style.color=nt;const pt=window.getComputedStyle(et).color;vt.set(nt,S(pt))}et.remove()}function tt(vt){const{a:et,b:nt,c:pt,d:Pt,e:Mt,f:Bt}=vt.getTransform();return[et,nt,pt,Pt,Mt,Bt]}function j(vt){const{a:et,b:nt,c:pt,d:Pt,e:Mt,f:Bt}=vt.getTransform().invertSelf();return[et,nt,pt,Pt,Mt,Bt]}function rt(vt,et,nt=!1,pt=!0){if(et instanceof k){const{pageWidth:Pt,pageHeight:Mt}=et.rawDims,{style:Bt}=vt,Ut=i.FeatureTest.isCSSRoundSupported,Lt=`var(--scale-factor) * ${Pt}px`,jt=`var(--scale-factor) * ${Mt}px`,$t=Ut?`round(${Lt}, 1px)`:`calc(${Lt})`,zt=Ut?`round(${jt}, 1px)`:`calc(${jt})`;!nt||et.rotation%180===0?(Bt.width=$t,Bt.height=zt):(Bt.width=zt,Bt.height=$t)}pt&&vt.setAttribute("data-main-rotation",et.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,I){return"none"}addHighlightHCMFilter(f,I,N,D){return"none"}destroy(f=!1){}}e.BaseFilterFactory=i;class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,I){if(f<=0||I<=0)throw new Error("Invalid canvas size");const N=this._createCanvas(f,I);return{canvas:N,context:N.getContext("2d")}}reset(f,I,N){if(!f.canvas)throw new Error("Canvas is not specified");if(I<=0||N<=0)throw new Error("Invalid canvas size");f.canvas.width=I,f.canvas.height=N}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,I){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class d{constructor({baseUrl:f=null,isCompressed:I=!0}){this.constructor===d&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=I}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const I=this.baseUrl+f+(this.isCompressed?".bcmap":""),N=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(I,N).catch(D=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(f,I){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=d;class P{constructor({baseUrl:f=null}){this.constructor===P&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${f}`;return this._fetchData(I).catch(N=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(f){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=P;class m{constructor(){this.constructor===m&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,I,N=!1){if(f<=0||I<=0)throw new Error("Invalid SVG dimensions");const D=this._createSVG("svg:svg");return D.setAttribute("version","1.1"),N||(D.setAttribute("width",`${f}px`),D.setAttribute("height",`${I}px`)),D.setAttribute("preserveAspectRatio","none"),D.setAttribute("viewBox",`0 0 ${f} ${I}`),D}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=m},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,o=4294901760,d=65535;class P{constructor(b){this.h1=b?b&4294967295:i,this.h2=b?b&4294967295:i}update(b){let f,I;if(typeof b=="string"){f=new Uint8Array(b.length*2),I=0;for(let W=0,v=b.length;W<v;W++){const c=b.charCodeAt(W);c<=255?f[I++]=c:(f[I++]=c>>>8,f[I++]=c&255)}}else if((0,n.isArrayBuffer)(b))f=b.slice(),I=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const N=I>>2,D=I-N*4,k=new Uint32Array(f.buffer,0,N);let T=0,A=0,M=this.h1,L=this.h2;const B=3432918353,E=461845907,u=B&d,g=E&d;for(let W=0;W<N;W++)W&1?(T=k[W],T=T*B&o|T*u&d,T=T<<15|T>>>17,T=T*E&o|T*g&d,M^=T,M=M<<13|M>>>19,M=M*5+3864292196):(A=k[W],A=A*B&o|A*u&d,A=A<<15|A>>>17,A=A*E&o|A*g&d,L^=A,L=L<<13|L>>>19,L=L*5+3864292196);switch(T=0,D){case 3:T^=f[N*4+2]<<16;case 2:T^=f[N*4+1]<<8;case 1:T^=f[N*4],T=T*B&o|T*u&d,T=T<<15|T>>>17,T=T*E&o|T*g&d,N&1?M^=T:L^=T}this.h1=M,this.h2=L}hexdigest(){let b=this.h1,f=this.h2;return b^=f>>>1,b=b*3981806797&o|b*36045&d,f=f*4283543511&o|((f<<16|b>>>16)*2950163797&o)>>>16,b^=f>>>1,b=b*444984403&o|b*60499&d,f=f*3301882366&o|((f<<16|b>>>16)*3120437893&o)>>>16,b^=f>>>1,(b>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=P},(t,e,s)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:m=globalThis.document,styleElement:b=null}){K(this,d,new Set);this._document=m,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(m){this.nativeFontFaces.add(m),this._document.fonts.add(m)}removeNativeFontFace(m){this.nativeFontFaces.delete(m),this._document.fonts.delete(m)}insertRule(m){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const b=this.styleElement.sheet;b.insertRule(m,b.cssRules.length)}clear(){for(const m of this.nativeFontFaces)this._document.fonts.delete(m);this.nativeFontFaces.clear(),r(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(m){if(!(!m||r(this,d).has(m.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:b,src:f,style:I}=m,N=new FontFace(b,f,I);this.addNativeFontFace(N);try{await N.load(),r(this,d).add(b)}catch{(0,n.warn)(`Cannot load system font: ${m.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(N)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(m){if(m.attached||m.missingFile&&!m.systemFontInfo)return;if(m.attached=!0,m.systemFontInfo){await this.loadSystemFont(m.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=m.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(I){throw(0,n.warn)(`Failed to load font '${f.family}': '${I}'.`),m.disableFontFace=!0,I}}return}const b=m.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const I=this._queueLoadingCallback(f);this._prepareFontLoadEvent(m,I)})}}get isFontLoadingAPISupported(){var b;const m=!!((b=this._document)!=null&&b.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",m)}get isSyncFontLoadingSupported(){let m=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(m=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",m)}_queueLoadingCallback(m){function b(){for((0,n.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;f.length>0&&f[0].done;){const N=f.shift();setTimeout(N.callback,0)}}const{loadingRequests:f}=this,I={done:!1,complete:b,callback:m};return f.push(I),I}get _loadTestFont(){const m=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",m)}_prepareFontLoadEvent(m,b){function f(S,$){return S.charCodeAt($)<<24|S.charCodeAt($+1)<<16|S.charCodeAt($+2)<<8|S.charCodeAt($+3)&255}function I(S,$,tt,j){const rt=S.substring(0,$),it=S.substring($+tt);return rt+j+it}let N,D;const k=this._document.createElement("canvas");k.width=1,k.height=1;const T=k.getContext("2d");let A=0;function M(S,$){if(++A>30){(0,n.warn)("Load test font never loaded."),$();return}if(T.font="30px "+S,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(M.bind(null,S,$))}const L=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=I(B,976,L.length,L);const u=16,g=1482184792;let W=f(B,u);for(N=0,D=L.length-3;N<D;N+=4)W=W-g+f(L,N)|0;N<L.length&&(W=W-g+f(L+"XXX",N)|0),B=I(B,u,4,(0,n.string32)(W));const v=`url(data:font/opentype;base64,${btoa(B)});`,c=`@font-face {font-family:"${L}";src:${v}}`;this.insertRule(c);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const S of[m.loadedName,L]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=S,F.append($)}this._document.body.append(F),M(L,()=>{F.remove(),b.complete()})}}d=new WeakMap,e.FontLoader=i;class o{constructor(m,{isEvalSupported:b=!0,disableFontFace:f=!1,ignoreErrors:I=!1,inspectFont:N=null}){this.compiledGlyphs=Object.create(null);for(const D in m)this[D]=m[D];this.isEvalSupported=b!==!1,this.disableFontFace=f===!0,this.ignoreErrors=I===!0,this._inspectFont=N}createNativeFontFace(){var b;if(!this.data||this.disableFontFace)return null;let m;if(!this.cssFontInfo)m=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),m=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(b=this._inspectFont)==null||b.call(this,this),m}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const m=(0,n.bytesToString)(this.data),b=`url(data:${this.mimetype};base64,${btoa(m)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${b}}`;else{let N=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(N+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${N}src:${b}}`}return(I=this._inspectFont)==null||I.call(this,this,b),f}getPathGenerator(m,b){if(this.compiledGlyphs[b]!==void 0)return this.compiledGlyphs[b];let f;try{f=m.get(this.loadedName+"_path_"+b)}catch(I){if(!this.ignoreErrors)throw I;return(0,n.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[b]=function(N,D){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const I=[];for(const N of f){const D=N.args!==void 0?N.args.join(","):"";I.push("c.",N.cmd,"(",D,`);
`)}return this.compiledGlyphs[b]=new Function("c","size",I.join(""))}return this.compiledGlyphs[b]=function(I,N){for(const D of f)D.cmd==="scale"&&(D.args=[N,-N]),I[D.cmd].apply(I,D.args)}}}e.FontFaceObject=o},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(b){return new Promise((f,I)=>{require$$5.readFile(b,(D,k)=>{if(D||!k){I(new Error(D));return}f(new Uint8Array(k))})})};class o extends n.BaseFilterFactory{}e.NodeFilterFactory=o;class d extends n.BaseCanvasFactory{_createCanvas(f,I){return require$$5.createCanvas(f,I)}}e.NodeCanvasFactory=d;class P extends n.BaseCMapReaderFactory{_fetchData(f,I){return i(f).then(N=>({cMapData:N,compressionType:I}))}}e.NodeCMapReaderFactory=P;class m extends n.BaseStandardFontDataFactory{_fetchData(f){return i(f)}}e.NodeStandardFontDataFactory=m},(t,e,s)=>{var w,We,ot,ze;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),i=s(6),o=s(12),d=s(13);const P=16,m=100,b=4096,f=15,I=10,N=1e3,D=16;function k(x,a){if(x._removeMirroring)throw new Error("Context is already forwarding operations.");x.__originalSave=x.save,x.__originalRestore=x.restore,x.__originalRotate=x.rotate,x.__originalScale=x.scale,x.__originalTranslate=x.translate,x.__originalTransform=x.transform,x.__originalSetTransform=x.setTransform,x.__originalResetTransform=x.resetTransform,x.__originalClip=x.clip,x.__originalMoveTo=x.moveTo,x.__originalLineTo=x.lineTo,x.__originalBezierCurveTo=x.bezierCurveTo,x.__originalRect=x.rect,x.__originalClosePath=x.closePath,x.__originalBeginPath=x.beginPath,x._removeMirroring=()=>{x.save=x.__originalSave,x.restore=x.__originalRestore,x.rotate=x.__originalRotate,x.scale=x.__originalScale,x.translate=x.__originalTranslate,x.transform=x.__originalTransform,x.setTransform=x.__originalSetTransform,x.resetTransform=x.__originalResetTransform,x.clip=x.__originalClip,x.moveTo=x.__originalMoveTo,x.lineTo=x.__originalLineTo,x.bezierCurveTo=x.__originalBezierCurveTo,x.rect=x.__originalRect,x.closePath=x.__originalClosePath,x.beginPath=x.__originalBeginPath,delete x._removeMirroring},x.save=function(){a.save(),this.__originalSave()},x.restore=function(){a.restore(),this.__originalRestore()},x.translate=function(y,V){a.translate(y,V),this.__originalTranslate(y,V)},x.scale=function(y,V){a.scale(y,V),this.__originalScale(y,V)},x.transform=function(y,V,H,Y,Q,lt){a.transform(y,V,H,Y,Q,lt),this.__originalTransform(y,V,H,Y,Q,lt)},x.setTransform=function(y,V,H,Y,Q,lt){a.setTransform(y,V,H,Y,Q,lt),this.__originalSetTransform(y,V,H,Y,Q,lt)},x.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},x.rotate=function(y){a.rotate(y),this.__originalRotate(y)},x.clip=function(y){a.clip(y),this.__originalClip(y)},x.moveTo=function(l,y){a.moveTo(l,y),this.__originalMoveTo(l,y)},x.lineTo=function(l,y){a.lineTo(l,y),this.__originalLineTo(l,y)},x.bezierCurveTo=function(l,y,V,H,Y,Q){a.bezierCurveTo(l,y,V,H,Y,Q),this.__originalBezierCurveTo(l,y,V,H,Y,Q)},x.rect=function(l,y,V,H){a.rect(l,y,V,H),this.__originalRect(l,y,V,H)},x.closePath=function(){a.closePath(),this.__originalClosePath()},x.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class T{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,l,y){let V;return this.cache[a]!==void 0?(V=this.cache[a],this.canvasFactory.reset(V,l,y)):(V=this.canvasFactory.create(l,y),this.cache[a]=V),V}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const l=this.cache[a];this.canvasFactory.destroy(l),delete this.cache[a]}}}function A(x,a,l,y,V,H,Y,Q,lt,C){const[R,G,J,ct,ut,wt]=(0,i.getCurrentTransform)(x);if(G===0&&J===0){const St=Y*R+ut,vt=Math.round(St),et=Q*ct+wt,nt=Math.round(et),pt=(Y+lt)*R+ut,Pt=Math.abs(Math.round(pt)-vt)||1,Mt=(Q+C)*ct+wt,Bt=Math.abs(Math.round(Mt)-nt)||1;return x.setTransform(Math.sign(R),0,0,Math.sign(ct),vt,nt),x.drawImage(a,l,y,V,H,0,0,Pt,Bt),x.setTransform(R,G,J,ct,ut,wt),[Pt,Bt]}if(R===0&&ct===0){const St=Q*J+ut,vt=Math.round(St),et=Y*G+wt,nt=Math.round(et),pt=(Q+C)*J+ut,Pt=Math.abs(Math.round(pt)-vt)||1,Mt=(Y+lt)*G+wt,Bt=Math.abs(Math.round(Mt)-nt)||1;return x.setTransform(0,Math.sign(G),Math.sign(J),0,vt,nt),x.drawImage(a,l,y,V,H,0,0,Bt,Pt),x.setTransform(R,G,J,ct,ut,wt),[Bt,Pt]}x.drawImage(a,l,y,V,H,Y,Q,lt,C);const Et=Math.hypot(R,G),mt=Math.hypot(J,ct);return[Et*lt,mt*C]}function M(x){const{width:a,height:l}=x;if(a>N||l>N)return null;const y=1e3,V=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),H=a+1;let Y=new Uint8Array(H*(l+1)),Q,lt,C;const R=a+7&-8;let G=new Uint8Array(R*l),J=0;for(const mt of x.data){let St=128;for(;St>0;)G[J++]=mt&St?0:255,St>>=1}let ct=0;for(J=0,G[J]!==0&&(Y[0]=1,++ct),lt=1;lt<a;lt++)G[J]!==G[J+1]&&(Y[lt]=G[J]?2:1,++ct),J++;for(G[J]!==0&&(Y[lt]=2,++ct),Q=1;Q<l;Q++){J=Q*R,C=Q*H,G[J-R]!==G[J]&&(Y[C]=G[J]?1:8,++ct);let mt=(G[J]?4:0)+(G[J-R]?8:0);for(lt=1;lt<a;lt++)mt=(mt>>2)+(G[J+1]?4:0)+(G[J-R+1]?8:0),V[mt]&&(Y[C+lt]=V[mt],++ct),J++;if(G[J-R]!==G[J]&&(Y[C+lt]=G[J]?2:4,++ct),ct>y)return null}for(J=R*(l-1),C=Q*H,G[J]!==0&&(Y[C]=8,++ct),lt=1;lt<a;lt++)G[J]!==G[J+1]&&(Y[C+lt]=G[J]?4:8,++ct),J++;if(G[J]!==0&&(Y[C+lt]=4,++ct),ct>y)return null;const ut=new Int32Array([0,H,-1,0,-H,0,0,0,1]),wt=new Path2D;for(Q=0;ct&&Q<=l;Q++){let mt=Q*H;const St=mt+a;for(;mt<St&&!Y[mt];)mt++;if(mt===St)continue;wt.moveTo(mt%H,Q);const vt=mt;let et=Y[mt];do{const nt=ut[et];do mt+=nt;while(!Y[mt]);const pt=Y[mt];pt!==5&&pt!==10?(et=pt,Y[mt]=0):(et=pt&51*et>>4,Y[mt]&=et>>2|et<<2),wt.lineTo(mt%H,mt/H|0),Y[mt]||--ct}while(vt!==mt);--Q}return G=null,Y=null,function(mt){mt.save(),mt.scale(1/a,-1/l),mt.translate(0,-l),mt.fill(wt),mt.beginPath(),mt.restore()}}class L{constructor(a,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,l])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,l){this.x=a,this.y=l}updatePathMinMax(a,l,y){[l,y]=n.Util.applyTransform([l,y],a),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(a,l){const y=n.Util.applyTransform(l,a),V=n.Util.applyTransform(l.slice(2),a);this.minX=Math.min(this.minX,y[0],V[0]),this.minY=Math.min(this.minY,y[1],V[1]),this.maxX=Math.max(this.maxX,y[0],V[0]),this.maxY=Math.max(this.maxY,y[1],V[1])}updateScalingPathMinMax(a,l){n.Util.scaleMinMax(a,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(a,l,y,V,H,Y,Q,lt,C,R){const G=n.Util.bezierBoundingBox(l,y,V,H,Y,Q,lt,C);if(R){R[0]=Math.min(R[0],G[0],G[2]),R[1]=Math.max(R[1],G[0],G[2]),R[2]=Math.min(R[2],G[1],G[3]),R[3]=Math.max(R[3],G[1],G[3]);return}this.updateRectMinMax(a,G)}getPathBoundingBox(a=o.PathType.FILL,l=null){const y=[this.minX,this.minY,this.maxX,this.maxY];if(a===o.PathType.STROKE){l||(0,n.unreachable)("Stroke bounding box must include transform.");const V=n.Util.singularValueDecompose2dScale(l),H=V[0]*this.lineWidth/2,Y=V[1]*this.lineWidth/2;y[0]-=H,y[1]-=Y,y[2]+=H,y[3]+=Y}return y}updateClipFromPath(){const a=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=o.PathType.FILL,l=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(a,l))}}function B(x,a){if(typeof ImageData<"u"&&a instanceof ImageData){x.putImageData(a,0,0);return}const l=a.height,y=a.width,V=l%D,H=(l-V)/D,Y=V===0?H:H+1,Q=x.createImageData(y,D);let lt=0,C;const R=a.data,G=Q.data;let J,ct,ut,wt;if(a.kind===n.ImageKind.GRAYSCALE_1BPP){const Et=R.byteLength,mt=new Uint32Array(G.buffer,0,G.byteLength>>2),St=mt.length,vt=y+7>>3,et=4294967295,nt=n.FeatureTest.isLittleEndian?4278190080:255;for(J=0;J<Y;J++){for(ut=J<H?D:V,C=0,ct=0;ct<ut;ct++){const pt=Et-lt;let Pt=0;const Mt=pt>vt?y:pt*8-7,Bt=Mt&-8;let Ut=0,Lt=0;for(;Pt<Bt;Pt+=8)Lt=R[lt++],mt[C++]=Lt&128?et:nt,mt[C++]=Lt&64?et:nt,mt[C++]=Lt&32?et:nt,mt[C++]=Lt&16?et:nt,mt[C++]=Lt&8?et:nt,mt[C++]=Lt&4?et:nt,mt[C++]=Lt&2?et:nt,mt[C++]=Lt&1?et:nt;for(;Pt<Mt;Pt++)Ut===0&&(Lt=R[lt++],Ut=128),mt[C++]=Lt&Ut?et:nt,Ut>>=1}for(;C<St;)mt[C++]=0;x.putImageData(Q,0,J*D)}}else if(a.kind===n.ImageKind.RGBA_32BPP){for(ct=0,wt=y*D*4,J=0;J<H;J++)G.set(R.subarray(lt,lt+wt)),lt+=wt,x.putImageData(Q,0,ct),ct+=D;J<Y&&(wt=y*V*4,G.set(R.subarray(lt,lt+wt)),x.putImageData(Q,0,ct))}else if(a.kind===n.ImageKind.RGB_24BPP)for(ut=D,wt=y*ut,J=0;J<Y;J++){for(J>=H&&(ut=V,wt=y*ut),C=0,ct=wt;ct--;)G[C++]=R[lt++],G[C++]=R[lt++],G[C++]=R[lt++],G[C++]=255;x.putImageData(Q,0,J*D)}else throw new Error(`bad image kind: ${a.kind}`)}function E(x,a){if(a.bitmap){x.drawImage(a.bitmap,0,0);return}const l=a.height,y=a.width,V=l%D,H=(l-V)/D,Y=V===0?H:H+1,Q=x.createImageData(y,D);let lt=0;const C=a.data,R=Q.data;for(let G=0;G<Y;G++){const J=G<H?D:V;({srcPos:lt}=(0,d.convertBlackAndWhiteToRGBA)({src:C,srcPos:lt,dest:R,width:y,height:J,nonBlackColor:0})),x.putImageData(Q,0,G*D)}}function u(x,a){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const y of l)x[y]!==void 0&&(a[y]=x[y]);x.setLineDash!==void 0&&(a.setLineDash(x.getLineDash()),a.lineDashOffset=x.lineDashOffset)}function g(x){if(x.strokeStyle=x.fillStyle="#000000",x.fillRule="nonzero",x.globalAlpha=1,x.lineWidth=1,x.lineCap="butt",x.lineJoin="miter",x.miterLimit=10,x.globalCompositeOperation="source-over",x.font="10px sans-serif",x.setLineDash!==void 0&&(x.setLineDash([]),x.lineDashOffset=0),!n.isNodeJS){const{filter:a}=x;a!=="none"&&a!==""&&(x.filter="none")}}function W(x,a,l,y){const V=x.length;for(let H=3;H<V;H+=4){const Y=x[H];if(Y===0)x[H-3]=a,x[H-2]=l,x[H-1]=y;else if(Y<255){const Q=255-Y;x[H-3]=x[H-3]*Y+a*Q>>8,x[H-2]=x[H-2]*Y+l*Q>>8,x[H-1]=x[H-1]*Y+y*Q>>8}}}function v(x,a,l){const y=x.length,V=1/255;for(let H=3;H<y;H+=4){const Y=l?l[x[H]]:x[H];a[H]=a[H]*Y*V|0}}function c(x,a,l){const y=x.length;for(let V=3;V<y;V+=4){const H=x[V-3]*77+x[V-2]*152+x[V-1]*28;a[V]=l?a[V]*l[H>>8]>>8:a[V]*H>>16}}function F(x,a,l,y,V,H,Y,Q,lt,C,R){const G=!!H,J=G?H[0]:0,ct=G?H[1]:0,ut=G?H[2]:0,wt=V==="Luminosity"?c:v,mt=Math.min(y,Math.ceil(1048576/l));for(let St=0;St<y;St+=mt){const vt=Math.min(mt,y-St),et=x.getImageData(Q-C,St+(lt-R),l,vt),nt=a.getImageData(Q,St+lt,l,vt);G&&W(et.data,J,ct,ut),wt(et.data,nt.data,Y),a.putImageData(nt,Q,St+lt)}}function S(x,a,l,y){const V=y[0],H=y[1],Y=y[2]-V,Q=y[3]-H;Y===0||Q===0||(F(a.context,l,Y,Q,a.subtype,a.backdrop,a.transferMap,V,H,a.offsetX,a.offsetY),x.save(),x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),x.drawImage(l.canvas,0,0),x.restore())}function $(x,a){const l=n.Util.singularValueDecompose2dScale(x);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const y=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:l[0]<=y||l[1]<=y}const tt=["butt","round","square"],j=["miter","round","bevel"],rt={},it={},Ct=class Ct{constructor(a,l,y,V,H,{optionalContentConfig:Y,markedContentStack:Q=null},lt,C){K(this,w);K(this,ot);this.ctx=a,this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=y,this.canvasFactory=V,this.filterFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Q||[],this.optionalContentConfig=Y,this.cachedCanvases=new T(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=lt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=C,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,l=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):l}beginDrawing({transform:a,viewport:l,transparency:y=!1,background:V=null}){const H=this.ctx.canvas.width,Y=this.ctx.canvas.height,Q=this.ctx.fillStyle;if(this.ctx.fillStyle=V||"#ffffff",this.ctx.fillRect(0,0,H,Y),this.ctx.fillStyle=Q,y){const lt=this.cachedCanvases.getCanvas("transparent",H,Y);this.compositeCtx=this.ctx,this.transparentCanvas=lt.canvas,this.ctx=lt.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(a,l,y,V){const H=a.argsArray,Y=a.fnArray;let Q=l||0;const lt=H.length;if(lt===Q)return Q;const C=lt-Q>I&&typeof y=="function",R=C?Date.now()+f:0;let G=0;const J=this.commonObjs,ct=this.objs;let ut;for(;;){if(V!==void 0&&Q===V.nextBreakPoint)return V.breakIt(Q,y),Q;if(ut=Y[Q],ut!==n.OPS.dependency)this[ut].apply(this,H[Q]);else for(const wt of H[Q]){const Et=wt.startsWith("g_")?J:ct;if(!Et.has(wt))return Et.get(wt,y),Q}if(Q++,Q===lt)return Q;if(C&&++G>I){if(Date.now()>R)return y(),Q;G=0}}}endDrawing(){dt(this,w,We).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const l of a.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);a.clear()}this._cachedBitmapsMap.clear(),dt(this,ot,ze).call(this)}_scaleImage(a,l){const y=a.width,V=a.height;let H=Math.max(Math.hypot(l[0],l[1]),1),Y=Math.max(Math.hypot(l[2],l[3]),1),Q=y,lt=V,C="prescale1",R,G;for(;H>2&&Q>1||Y>2&&lt>1;){let J=Q,ct=lt;H>2&&Q>1&&(J=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q/2),H/=Q/J),Y>2&&lt>1&&(ct=lt>=16384?Math.floor(lt/2)-1||1:Math.ceil(lt)/2,Y/=lt/ct),R=this.cachedCanvases.getCanvas(C,J,ct),G=R.context,G.clearRect(0,0,J,ct),G.drawImage(a,0,0,Q,lt,0,0,J,ct),a=R.canvas,Q=J,lt=ct,C=C==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:Q,paintHeight:lt}}_createMaskCanvas(a){const l=this.ctx,{width:y,height:V}=a,H=this.current.fillColor,Y=this.current.patternFill,Q=(0,i.getCurrentTransform)(l);let lt,C,R,G;if((a.bitmap||a.data)&&a.count>1){const Pt=a.bitmap||a.data.buffer;C=JSON.stringify(Y?Q:[Q.slice(0,4),H]),lt=this._cachedBitmapsMap.get(Pt),lt||(lt=new Map,this._cachedBitmapsMap.set(Pt,lt));const Mt=lt.get(C);if(Mt&&!Y){const Bt=Math.round(Math.min(Q[0],Q[2])+Q[4]),Ut=Math.round(Math.min(Q[1],Q[3])+Q[5]);return{canvas:Mt,offsetX:Bt,offsetY:Ut}}R=Mt}R||(G=this.cachedCanvases.getCanvas("maskCanvas",y,V),E(G.context,a));let J=n.Util.transform(Q,[1/y,0,0,-1/V,0,0]);J=n.Util.transform(J,[1,0,0,1,0,-V]);const ct=n.Util.applyTransform([0,0],J),ut=n.Util.applyTransform([y,V],J),wt=n.Util.normalizeRect([ct[0],ct[1],ut[0],ut[1]]),Et=Math.round(wt[2]-wt[0])||1,mt=Math.round(wt[3]-wt[1])||1,St=this.cachedCanvases.getCanvas("fillCanvas",Et,mt),vt=St.context,et=Math.min(ct[0],ut[0]),nt=Math.min(ct[1],ut[1]);vt.translate(-et,-nt),vt.transform(...J),R||(R=this._scaleImage(G.canvas,(0,i.getCurrentTransformInverse)(vt)),R=R.img,lt&&Y&&lt.set(C,R)),vt.imageSmoothingEnabled=$((0,i.getCurrentTransform)(vt),a.interpolate),A(vt,R,0,0,R.width,R.height,0,0,y,V),vt.globalCompositeOperation="source-in";const pt=n.Util.transform((0,i.getCurrentTransformInverse)(vt),[1,0,0,1,-et,-nt]);return vt.fillStyle=Y?H.getPattern(l,this,pt,o.PathType.FILL):H,vt.fillRect(0,0,y,V),lt&&!Y&&(this.cachedCanvases.delete("fillCanvas"),lt.set(C,St.canvas)),{canvas:St.canvas,offsetX:Math.round(et),offsetY:Math.round(nt)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=tt[a]}setLineJoin(a){this.ctx.lineJoin=j[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,l){const y=this.ctx;y.setLineDash!==void 0&&(y.setLineDash(a),y.lineDashOffset=l)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[l,y]of a)switch(l){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y[0],y[1]);break;case"CA":this.current.strokeAlpha=y;break;case"ca":this.current.fillAlpha=y,this.ctx.globalAlpha=y;break;case"BM":this.ctx.globalCompositeOperation=y;break;case"SMask":this.current.activeSMask=y?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(y);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,l=this.ctx.canvas.height,y="smaskGroupAt"+this.groupLevel,V=this.cachedCanvases.getCanvas(y,a,l);this.suspendedCtx=this.ctx,this.ctx=V.context;const H=this.ctx;H.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,H),k(H,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const l=this.current.activeSMask,y=this.suspendedCtx;S(y,l,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,l,y,V,H,Y){this.ctx.transform(a,l,y,V,H,Y),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,l,y){const V=this.ctx,H=this.current;let Y=H.x,Q=H.y,lt,C;const R=(0,i.getCurrentTransform)(V),G=R[0]===0&&R[3]===0||R[1]===0&&R[2]===0,J=G?y.slice(0):null;for(let ct=0,ut=0,wt=a.length;ct<wt;ct++)switch(a[ct]|0){case n.OPS.rectangle:Y=l[ut++],Q=l[ut++];const Et=l[ut++],mt=l[ut++],St=Y+Et,vt=Q+mt;V.moveTo(Y,Q),Et===0||mt===0?V.lineTo(St,vt):(V.lineTo(St,Q),V.lineTo(St,vt),V.lineTo(Y,vt)),G||H.updateRectMinMax(R,[Y,Q,St,vt]),V.closePath();break;case n.OPS.moveTo:Y=l[ut++],Q=l[ut++],V.moveTo(Y,Q),G||H.updatePathMinMax(R,Y,Q);break;case n.OPS.lineTo:Y=l[ut++],Q=l[ut++],V.lineTo(Y,Q),G||H.updatePathMinMax(R,Y,Q);break;case n.OPS.curveTo:lt=Y,C=Q,Y=l[ut+4],Q=l[ut+5],V.bezierCurveTo(l[ut],l[ut+1],l[ut+2],l[ut+3],Y,Q),H.updateCurvePathMinMax(R,lt,C,l[ut],l[ut+1],l[ut+2],l[ut+3],Y,Q,J),ut+=6;break;case n.OPS.curveTo2:lt=Y,C=Q,V.bezierCurveTo(Y,Q,l[ut],l[ut+1],l[ut+2],l[ut+3]),H.updateCurvePathMinMax(R,lt,C,Y,Q,l[ut],l[ut+1],l[ut+2],l[ut+3],J),Y=l[ut+2],Q=l[ut+3],ut+=4;break;case n.OPS.curveTo3:lt=Y,C=Q,Y=l[ut+2],Q=l[ut+3],V.bezierCurveTo(l[ut],l[ut+1],Y,Q,Y,Q),H.updateCurvePathMinMax(R,lt,C,l[ut],l[ut+1],Y,Q,Y,Q,J),ut+=4;break;case n.OPS.closePath:V.closePath();break}G&&H.updateScalingPathMinMax(R,J),H.setCurrentPoint(Y,Q)}closePath(){this.ctx.closePath()}stroke(a=!0){const l=this.ctx,y=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof y=="object"&&(y!=null&&y.getPattern)?(l.save(),l.strokeStyle=y.getPattern(l,this,(0,i.getCurrentTransformInverse)(l),o.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const l=this.ctx,y=this.current.fillColor,V=this.current.patternFill;let H=!1;V&&(l.save(),l.fillStyle=y.getPattern(l,this,(0,i.getCurrentTransformInverse)(l),o.PathType.FILL),H=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),H&&l.restore(),a&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rt}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,l=this.ctx;if(a===void 0){l.beginPath();return}l.save(),l.beginPath();for(const y of a)l.setTransform(...y.transform),l.translate(y.x,y.y),y.addToPath(l,y.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,l){var R;const y=this.commonObjs.get(a),V=this.current;if(!y)throw new Error(`Can't find font for ${a}`);if(V.fontMatrix=y.fontMatrix||n.FONT_IDENTITY_MATRIX,(V.fontMatrix[0]===0||V.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+a),l<0?(l=-l,V.fontDirection=-1):V.fontDirection=1,this.current.font=y,this.current.fontSize=l,y.isType3Font)return;const H=y.loadedName||"sans-serif",Y=((R=y.systemFontInfo)==null?void 0:R.css)||`"${H}", ${y.fallbackName}`;let Q="normal";y.black?Q="900":y.bold&&(Q="bold");const lt=y.italic?"italic":"normal";let C=l;l<P?C=P:l>m&&(C=m),this.current.fontSizeScale=l/C,this.ctx.font=`${lt} ${Q} ${C}px ${Y}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,l){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=l}setLeadingMoveText(a,l){this.setLeading(-l),this.moveText(a,l)}setTextMatrix(a,l,y,V,H,Y){this.current.textMatrix=[a,l,y,V,H,Y],this.current.textMatrixScale=Math.hypot(a,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,l,y,V){const H=this.ctx,Y=this.current,Q=Y.font,lt=Y.textRenderingMode,C=Y.fontSize/Y.fontSizeScale,R=lt&n.TextRenderingMode.FILL_STROKE_MASK,G=!!(lt&n.TextRenderingMode.ADD_TO_PATH_FLAG),J=Y.patternFill&&!Q.missingFile;let ct;(Q.disableFontFace||G||J)&&(ct=Q.getPathGenerator(this.commonObjs,a)),Q.disableFontFace||J?(H.save(),H.translate(l,y),H.beginPath(),ct(H,C),V&&H.setTransform(...V),(R===n.TextRenderingMode.FILL||R===n.TextRenderingMode.FILL_STROKE)&&H.fill(),(R===n.TextRenderingMode.STROKE||R===n.TextRenderingMode.FILL_STROKE)&&H.stroke(),H.restore()):((R===n.TextRenderingMode.FILL||R===n.TextRenderingMode.FILL_STROKE)&&H.fillText(a,l,y),(R===n.TextRenderingMode.STROKE||R===n.TextRenderingMode.FILL_STROKE)&&H.strokeText(a,l,y)),G&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(H),x:l,y,fontSize:C,addToPath:ct})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const l=a.getImageData(0,0,10,10).data;let y=!1;for(let V=3;V<l.length;V+=4)if(l[V]>0&&l[V]<255){y=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",y)}showText(a){const l=this.current,y=l.font;if(y.isType3Font)return this.showType3Text(a);const V=l.fontSize;if(V===0)return;const H=this.ctx,Y=l.fontSizeScale,Q=l.charSpacing,lt=l.wordSpacing,C=l.fontDirection,R=l.textHScale*C,G=a.length,J=y.vertical,ct=J?1:-1,ut=y.defaultVMetrics,wt=V*l.fontMatrix[0],Et=l.textRenderingMode===n.TextRenderingMode.FILL&&!y.disableFontFace&&!l.patternFill;H.save(),H.transform(...l.textMatrix),H.translate(l.x,l.y+l.textRise),C>0?H.scale(R,-1):H.scale(R,1);let mt;if(l.patternFill){H.save();const pt=l.fillColor.getPattern(H,this,(0,i.getCurrentTransformInverse)(H),o.PathType.FILL);mt=(0,i.getCurrentTransform)(H),H.restore(),H.fillStyle=pt}let St=l.lineWidth;const vt=l.textMatrixScale;if(vt===0||St===0){const pt=l.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(pt===n.TextRenderingMode.STROKE||pt===n.TextRenderingMode.FILL_STROKE)&&(St=this.getSinglePixelWidth())}else St/=vt;if(Y!==1&&(H.scale(Y,Y),St/=Y),H.lineWidth=St,y.isInvalidPDFjsFont){const pt=[];let Pt=0;for(const Mt of a)pt.push(Mt.unicode),Pt+=Mt.width;H.fillText(pt.join(""),0,0),l.x+=Pt*wt*R,H.restore(),this.compose();return}let et=0,nt;for(nt=0;nt<G;++nt){const pt=a[nt];if(typeof pt=="number"){et+=ct*pt*V/1e3;continue}let Pt=!1;const Mt=(pt.isSpace?lt:0)+Q,Bt=pt.fontChar,Ut=pt.accent;let Lt,jt,$t=pt.width;if(J){const Tt=pt.vmetric||ut,st=-(pt.vmetric?Tt[1]:$t*.5)*wt,ht=Tt[2]*wt;$t=Tt?-Tt[0]:$t,Lt=st/Y,jt=(et+ht)/Y}else Lt=et/Y,jt=0;if(y.remeasure&&$t>0){const Tt=H.measureText(Bt).width*1e3/V*Y;if($t<Tt&&this.isFontSubpixelAAEnabled){const st=$t/Tt;Pt=!0,H.save(),H.scale(st,1),Lt/=st}else $t!==Tt&&(Lt+=($t-Tt)/2e3*V/Y)}if(this.contentVisible&&(pt.isInFont||y.missingFile)){if(Et&&!Ut)H.fillText(Bt,Lt,jt);else if(this.paintChar(Bt,Lt,jt,mt),Ut){const Tt=Lt+V*Ut.offset.x/Y,st=jt-V*Ut.offset.y/Y;this.paintChar(Ut.fontChar,Tt,st,mt)}}const zt=J?$t*wt-Mt*C:$t*wt+Mt*C;et+=zt,Pt&&H.restore()}J?l.y-=et:l.x+=et*R,H.restore(),this.compose()}showType3Text(a){const l=this.ctx,y=this.current,V=y.font,H=y.fontSize,Y=y.fontDirection,Q=V.vertical?1:-1,lt=y.charSpacing,C=y.wordSpacing,R=y.textHScale*Y,G=y.fontMatrix||n.FONT_IDENTITY_MATRIX,J=a.length,ct=y.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ut,wt,Et,mt;if(!(ct||H===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...y.textMatrix),l.translate(y.x,y.y),l.scale(R,Y),ut=0;ut<J;++ut){if(wt=a[ut],typeof wt=="number"){mt=Q*wt*H/1e3,this.ctx.translate(mt,0),y.x+=mt*R;continue}const St=(wt.isSpace?C:0)+lt,vt=V.charProcOperatorList[wt.operatorListId];if(!vt){(0,n.warn)(`Type3 character "${wt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=wt,this.save(),l.scale(H,H),l.transform(...G),this.executeOperatorList(vt),this.restore()),Et=n.Util.applyTransform([wt.width,0],G)[0]*H+St,l.translate(Et,0),y.x+=Et*R}l.restore(),this.processingType3=null}}setCharWidth(a,l){}setCharWidthAndBounds(a,l,y,V,H,Y){this.ctx.rect(y,V,H-y,Y-V),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let l;if(a[0]==="TilingPattern"){const y=a[1],V=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),H={createCanvasGraphics:Y=>new Ct(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};l=new o.TilingPattern(a,y,this.ctx,H,V)}else l=this._getPattern(a[1],a[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,l,y){const V=n.Util.makeHexColor(a,l,y);this.ctx.strokeStyle=V,this.current.strokeColor=V}setFillRGBColor(a,l,y){const V=n.Util.makeHexColor(a,l,y);this.ctx.fillStyle=V,this.current.fillColor=V,this.current.patternFill=!1}_getPattern(a,l=null){let y;return this.cachedPatterns.has(a)?y=this.cachedPatterns.get(a):(y=(0,o.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,y)),l&&(y.matrix=l),y}shadingFill(a){if(!this.contentVisible)return;const l=this.ctx;this.save();const y=this._getPattern(a);l.fillStyle=y.getPattern(l,this,(0,i.getCurrentTransformInverse)(l),o.PathType.SHADING);const V=(0,i.getCurrentTransformInverse)(l);if(V){const{width:H,height:Y}=l.canvas,[Q,lt,C,R]=n.Util.getAxialAlignedBoundingBox([0,0,H,Y],V);this.ctx.fillRect(Q,lt,C-Q,R-lt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),l)){const y=l[2]-l[0],V=l[3]-l[1];this.ctx.rect(l[0],l[1],y,V),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;a.isolated||(0,n.info)("TODO: Support non-isolated groups."),a.knockout&&(0,n.warn)("Knockout groups not supported.");const y=(0,i.getCurrentTransform)(l);if(a.matrix&&l.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let V=n.Util.getAxialAlignedBoundingBox(a.bbox,(0,i.getCurrentTransform)(l));const H=[0,0,l.canvas.width,l.canvas.height];V=n.Util.intersect(V,H)||[0,0,0,0];const Y=Math.floor(V[0]),Q=Math.floor(V[1]);let lt=Math.max(Math.ceil(V[2])-Y,1),C=Math.max(Math.ceil(V[3])-Q,1),R=1,G=1;lt>b&&(R=lt/b,lt=b),C>b&&(G=C/b,C=b),this.current.startNewPathAndClipBox([0,0,lt,C]);let J="groupAt"+this.groupLevel;a.smask&&(J+="_smask_"+this.smaskCounter++%2);const ct=this.cachedCanvases.getCanvas(J,lt,C),ut=ct.context;ut.scale(1/R,1/G),ut.translate(-Y,-Q),ut.transform(...y),a.smask?this.smaskStack.push({canvas:ct.canvas,context:ut,offsetX:Y,offsetY:Q,scaleX:R,scaleY:G,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(Y,Q),l.scale(R,G),l.save()),u(l,ut),this.ctx=ut,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,y=this.groupStack.pop();if(this.ctx=y,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const V=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...V);const H=n.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],V);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(H)}}beginAnnotation(a,l,y,V,H){if(dt(this,w,We).call(this),g(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&l.length===4){const Y=l[2]-l[0],Q=l[3]-l[1];if(H&&this.annotationCanvasMap){y=y.slice(),y[4]-=l[0],y[5]-=l[1],l=l.slice(),l[0]=l[1]=0,l[2]=Y,l[3]=Q;const[lt,C]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:R}=this,G=Math.ceil(Y*this.outputScaleX*R),J=Math.ceil(Q*this.outputScaleY*R);this.annotationCanvas=this.canvasFactory.create(G,J);const{canvas:ct,context:ut}=this.annotationCanvas;this.annotationCanvasMap.set(a,ct),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ut,this.ctx.save(),this.ctx.setTransform(lt,0,0,-C,0,Q*C),g(this.ctx)}else g(this.ctx),this.ctx.rect(l[0],l[1],Y,Q),this.ctx.clip(),this.endPath()}this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...y),this.transform(...V)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),dt(this,ot,ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const l=a.count;a=this.getObject(a.data,a),a.count=l;const y=this.ctx,V=this.processingType3;if(V&&(V.compiled===void 0&&(V.compiled=M(a)),V.compiled)){V.compiled(y);return}const H=this._createMaskCanvas(a),Y=H.canvas;y.save(),y.setTransform(1,0,0,1,0,0),y.drawImage(Y,H.offsetX,H.offsetY),y.restore(),this.compose()}paintImageMaskXObjectRepeat(a,l,y=0,V=0,H,Y){if(!this.contentVisible)return;a=this.getObject(a.data,a);const Q=this.ctx;Q.save();const lt=(0,i.getCurrentTransform)(Q);Q.transform(l,y,V,H,0,0);const C=this._createMaskCanvas(a);Q.setTransform(1,0,0,1,C.offsetX-lt[4],C.offsetY-lt[5]);for(let R=0,G=Y.length;R<G;R+=2){const J=n.Util.transform(lt,[l,y,V,H,Y[R],Y[R+1]]),[ct,ut]=n.Util.applyTransform([0,0],J);Q.drawImage(C.canvas,ct,ut)}Q.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const l=this.ctx,y=this.current.fillColor,V=this.current.patternFill;for(const H of a){const{data:Y,width:Q,height:lt,transform:C}=H,R=this.cachedCanvases.getCanvas("maskCanvas",Q,lt),G=R.context;G.save();const J=this.getObject(Y,H);E(G,J),G.globalCompositeOperation="source-in",G.fillStyle=V?y.getPattern(G,this,(0,i.getCurrentTransformInverse)(l),o.PathType.FILL):y,G.fillRect(0,0,Q,lt),G.restore(),l.save(),l.transform(...C),l.scale(1,-1),A(l,R.canvas,0,0,Q,lt,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const l=this.getObject(a);if(!l){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(a,l,y,V){if(!this.contentVisible)return;const H=this.getObject(a);if(!H){(0,n.warn)("Dependent image isn't ready yet");return}const Y=H.width,Q=H.height,lt=[];for(let C=0,R=V.length;C<R;C+=2)lt.push({transform:[l,0,0,y,V[C],V[C+1]],x:0,y:0,w:Y,h:Q});this.paintInlineImageXObjectGroup(H,lt)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:l,width:y,height:V}=a,H=this.cachedCanvases.getCanvas("inlineImage",y,V),Y=H.context;return Y.filter=this.current.transferMaps,Y.drawImage(l,0,0),Y.filter="none",H.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const l=a.width,y=a.height,V=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Q}=V;Q!=="none"&&Q!==""&&(V.filter="none")}V.scale(1/l,-1/y);let H;if(a.bitmap)H=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)H=a;else{const lt=this.cachedCanvases.getCanvas("inlineImage",l,y).context;B(lt,a),H=this.applyTransferMapsToCanvas(lt)}const Y=this._scaleImage(H,(0,i.getCurrentTransformInverse)(V));V.imageSmoothingEnabled=$((0,i.getCurrentTransform)(V),a.interpolate),A(V,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-y,l,y),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,l){if(!this.contentVisible)return;const y=this.ctx;let V;if(a.bitmap)V=a.bitmap;else{const H=a.width,Y=a.height,lt=this.cachedCanvases.getCanvas("inlineImage",H,Y).context;B(lt,a),V=this.applyTransferMapsToCanvas(lt)}for(const H of l)y.save(),y.transform(...H.transform),y.scale(1,-1),A(y,V,H.x,H.y,H.w,H.h,0,-1,1,1),y.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,l){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,l){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const y=this.ctx;this.pendingClip&&(l||(this.pendingClip===it?y.clip("evenodd"):y.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),y.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,i.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const l=Math.abs(a[0]*a[3]-a[2]*a[1]),y=Math.hypot(a[0],a[2]),V=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(y,V)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:l,b:y,c:V,d:H}=this.ctx.getTransform();let Y,Q;if(y===0&&V===0){const lt=Math.abs(l),C=Math.abs(H);if(lt===C)if(a===0)Y=Q=1/lt;else{const R=lt*a;Y=Q=R<1?1/R:1}else if(a===0)Y=1/lt,Q=1/C;else{const R=lt*a,G=C*a;Y=R<1?1/R:1,Q=G<1?1/G:1}}else{const lt=Math.abs(l*H-y*V),C=Math.hypot(l,y),R=Math.hypot(V,H);if(a===0)Y=R/lt,Q=C/lt;else{const G=a*lt;Y=R>G?R/G:1,Q=C>G?C/G:1}}this._cachedScaleForStroking[0]=Y,this._cachedScaleForStroking[1]=Q}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:l}=this,{lineWidth:y}=this.current,[V,H]=this.getScaleForStroking();if(l.lineWidth=y||1,V===1&&H===1){l.stroke();return}const Y=l.getLineDash();if(a&&l.save(),l.scale(V,H),Y.length>0){const Q=Math.max(V,H);l.setLineDash(Y.map(lt=>lt/Q)),l.lineDashOffset/=Q}l.stroke(),a&&l.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};w=new WeakSet,We=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ot=new WeakSet,ze=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const l=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=l}}};let bt=Ct;e.CanvasGraphics=bt;for(const x in n.OPS)bt.prototype[x]!==void 0&&(bt.prototype[n.OPS[x]]=bt.prototype[x])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=D;var n=s(1),i=s(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=o;function d(M,L){if(!L)return;const B=L[2]-L[0],E=L[3]-L[1],u=new Path2D;u.rect(L[0],L[1],B,E),M.clip(u)}class P{constructor(){this.constructor===P&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class m extends P{constructor(L){super(),this._type=L[1],this._bbox=L[2],this._colorStops=L[3],this._p0=L[4],this._p1=L[5],this._r0=L[6],this._r1=L[7],this.matrix=null}_createGradient(L){let B;this._type==="axial"?B=L.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(B=L.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)B.addColorStop(E[0],E[1]);return B}getPattern(L,B,E,u){let g;if(u===o.STROKE||u===o.FILL){const W=B.current.getClippedPathBoundingBox(u,(0,i.getCurrentTransform)(L))||[0,0,0,0],v=Math.ceil(W[2]-W[0])||1,c=Math.ceil(W[3]-W[1])||1,F=B.cachedCanvases.getCanvas("pattern",v,c,!0),S=F.context;S.clearRect(0,0,S.canvas.width,S.canvas.height),S.beginPath(),S.rect(0,0,S.canvas.width,S.canvas.height),S.translate(-W[0],-W[1]),E=n.Util.transform(E,[1,0,0,1,W[0],W[1]]),S.transform(...B.baseTransform),this.matrix&&S.transform(...this.matrix),d(S,this._bbox),S.fillStyle=this._createGradient(S),S.fill(),g=L.createPattern(F.canvas,"no-repeat");const $=new DOMMatrix(E);g.setTransform($)}else d(L,this._bbox),g=this._createGradient(L);return g}}function b(M,L,B,E,u,g,W,v){const c=L.coords,F=L.colors,S=M.data,$=M.width*4;let tt;c[B+1]>c[E+1]&&(tt=B,B=E,E=tt,tt=g,g=W,W=tt),c[E+1]>c[u+1]&&(tt=E,E=u,u=tt,tt=W,W=v,v=tt),c[B+1]>c[E+1]&&(tt=B,B=E,E=tt,tt=g,g=W,W=tt);const j=(c[B]+L.offsetX)*L.scaleX,rt=(c[B+1]+L.offsetY)*L.scaleY,it=(c[E]+L.offsetX)*L.scaleX,bt=(c[E+1]+L.offsetY)*L.scaleY,w=(c[u]+L.offsetX)*L.scaleX,X=(c[u+1]+L.offsetY)*L.scaleY;if(rt>=X)return;const ot=F[g],At=F[g+1],Ct=F[g+2],x=F[W],a=F[W+1],l=F[W+2],y=F[v],V=F[v+1],H=F[v+2],Y=Math.round(rt),Q=Math.round(X);let lt,C,R,G,J,ct,ut,wt;for(let Et=Y;Et<=Q;Et++){if(Et<bt){const nt=Et<rt?0:(rt-Et)/(rt-bt);lt=j-(j-it)*nt,C=ot-(ot-x)*nt,R=At-(At-a)*nt,G=Ct-(Ct-l)*nt}else{let nt;Et>X?nt=1:bt===X?nt=0:nt=(bt-Et)/(bt-X),lt=it-(it-w)*nt,C=x-(x-y)*nt,R=a-(a-V)*nt,G=l-(l-H)*nt}let mt;Et<rt?mt=0:Et>X?mt=1:mt=(rt-Et)/(rt-X),J=j-(j-w)*mt,ct=ot-(ot-y)*mt,ut=At-(At-V)*mt,wt=Ct-(Ct-H)*mt;const St=Math.round(Math.min(lt,J)),vt=Math.round(Math.max(lt,J));let et=$*Et+St*4;for(let nt=St;nt<=vt;nt++)mt=(lt-nt)/(lt-J),mt<0?mt=0:mt>1&&(mt=1),S[et++]=C-(C-ct)*mt|0,S[et++]=R-(R-ut)*mt|0,S[et++]=G-(G-wt)*mt|0,S[et++]=255}}function f(M,L,B){const E=L.coords,u=L.colors;let g,W;switch(L.type){case"lattice":const v=L.verticesPerRow,c=Math.floor(E.length/v)-1,F=v-1;for(g=0;g<c;g++){let S=g*v;for(let $=0;$<F;$++,S++)b(M,B,E[S],E[S+1],E[S+v],u[S],u[S+1],u[S+v]),b(M,B,E[S+v+1],E[S+1],E[S+v],u[S+v+1],u[S+1],u[S+v])}break;case"triangles":for(g=0,W=E.length;g<W;g+=3)b(M,B,E[g],E[g+1],E[g+2],u[g],u[g+1],u[g+2]);break;default:throw new Error("illegal figure")}}class I extends P{constructor(L){super(),this._coords=L[2],this._colors=L[3],this._figures=L[4],this._bounds=L[5],this._bbox=L[7],this._background=L[8],this.matrix=null}_createMeshCanvas(L,B,E){const v=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-v,S=Math.ceil(this._bounds[3])-c,$=Math.min(Math.ceil(Math.abs(F*L[0]*1.1)),3e3),tt=Math.min(Math.ceil(Math.abs(S*L[1]*1.1)),3e3),j=F/$,rt=S/tt,it={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-c,scaleX:1/j,scaleY:1/rt},bt=$+2*2,w=tt+2*2,X=E.getCanvas("mesh",bt,w,!1),ot=X.context,At=ot.createImageData($,tt);if(B){const x=At.data;for(let a=0,l=x.length;a<l;a+=4)x[a]=B[0],x[a+1]=B[1],x[a+2]=B[2],x[a+3]=255}for(const x of this._figures)f(At,x,it);return ot.putImageData(At,2,2),{canvas:X.canvas,offsetX:v-2*j,offsetY:c-2*rt,scaleX:j,scaleY:rt}}getPattern(L,B,E,u){d(L,this._bbox);let g;if(u===o.SHADING)g=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(L));else if(g=n.Util.singularValueDecompose2dScale(B.baseTransform),this.matrix){const v=n.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*v[0],g[1]*v[1]]}const W=this._createMeshCanvas(g,u===o.SHADING?null:this._background,B.cachedCanvases);return u!==o.SHADING&&(L.setTransform(...B.baseTransform),this.matrix&&L.transform(...this.matrix)),L.translate(W.offsetX,W.offsetY),L.scale(W.scaleX,W.scaleY),L.createPattern(W.canvas,"no-repeat")}}class N extends P{getPattern(){return"hotpink"}}function D(M){switch(M[0]){case"RadialAxial":return new m(M);case"Mesh":return new I(M);case"Dummy":return new N}throw new Error(`Unknown IR type: ${M[0]}`)}const k={COLORED:1,UNCOLORED:2},A=class A{constructor(L,B,E,u,g){this.operatorList=L[2],this.matrix=L[3]||[1,0,0,1,0,0],this.bbox=L[4],this.xstep=L[5],this.ystep=L[6],this.paintType=L[7],this.tilingType=L[8],this.color=B,this.ctx=E,this.canvasGraphicsFactory=u,this.baseTransform=g}createPatternCanvas(L){const B=this.operatorList,E=this.bbox,u=this.xstep,g=this.ystep,W=this.paintType,v=this.tilingType,c=this.color,F=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+v);const S=E[0],$=E[1],tt=E[2],j=E[3],rt=n.Util.singularValueDecompose2dScale(this.matrix),it=n.Util.singularValueDecompose2dScale(this.baseTransform),bt=[rt[0]*it[0],rt[1]*it[1]],w=this.getSizeAndScale(u,this.ctx.canvas.width,bt[0]),X=this.getSizeAndScale(g,this.ctx.canvas.height,bt[1]),ot=L.cachedCanvases.getCanvas("pattern",w.size,X.size,!0),At=ot.context,Ct=F.createCanvasGraphics(At);Ct.groupLevel=L.groupLevel,this.setFillAndStrokeStyleToContext(Ct,W,c);let x=S,a=$,l=tt,y=j;return S<0&&(x=0,l+=Math.abs(S)),$<0&&(a=0,y+=Math.abs($)),At.translate(-(w.scale*x),-(X.scale*a)),Ct.transform(w.scale,0,0,X.scale,0,0),At.save(),this.clipBbox(Ct,x,a,l,y),Ct.baseTransform=(0,i.getCurrentTransform)(Ct.ctx),Ct.executeOperatorList(B),Ct.endDrawing(),{canvas:ot.canvas,scaleX:w.scale,scaleY:X.scale,offsetX:x,offsetY:a}}getSizeAndScale(L,B,E){L=Math.abs(L);const u=Math.max(A.MAX_PATTERN_SIZE,B);let g=Math.ceil(L*E);return g>=u?g=u:E=g/L,{scale:E,size:g}}clipBbox(L,B,E,u,g){const W=u-B,v=g-E;L.ctx.rect(B,E,W,v),L.current.updateRectMinMax((0,i.getCurrentTransform)(L.ctx),[B,E,u,g]),L.clip(),L.endPath()}setFillAndStrokeStyleToContext(L,B,E){const u=L.ctx,g=L.current;switch(B){case k.COLORED:const W=this.ctx;u.fillStyle=W.fillStyle,u.strokeStyle=W.strokeStyle,g.fillColor=W.fillStyle,g.strokeColor=W.strokeStyle;break;case k.UNCOLORED:const v=n.Util.makeHexColor(E[0],E[1],E[2]);u.fillStyle=v,u.strokeStyle=v,g.fillColor=v,g.strokeColor=v;break;default:throw new n.FormatError(`Unsupported paint type: ${B}`)}}getPattern(L,B,E,u){let g=E;u!==o.SHADING&&(g=n.Util.transform(g,B.baseTransform),this.matrix&&(g=n.Util.transform(g,this.matrix)));const W=this.createPatternCanvas(B);let v=new DOMMatrix(g);v=v.translate(W.offsetX,W.offsetY),v=v.scale(1/W.scaleX,1/W.scaleY);const c=L.createPattern(W.canvas,"repeat");return c.setTransform(v),c}};Jt(A,"MAX_PATTERN_SIZE",3e3);let T=A;e.TilingPattern=T},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=o,e.convertToRGBA=i,e.grayToRGBA=P;var n=s(1);function i(m){switch(m.kind){case n.ImageKind.GRAYSCALE_1BPP:return o(m);case n.ImageKind.RGB_24BPP:return d(m)}return null}function o({src:m,srcPos:b=0,dest:f,width:I,height:N,nonBlackColor:D=4294967295,inverseDecode:k=!1}){const T=n.FeatureTest.isLittleEndian?4278190080:255,[A,M]=k?[D,T]:[T,D],L=I>>3,B=I&7,E=m.length;f=new Uint32Array(f.buffer);let u=0;for(let g=0;g<N;g++){for(const v=b+L;b<v;b++){const c=b<E?m[b]:255;f[u++]=c&128?M:A,f[u++]=c&64?M:A,f[u++]=c&32?M:A,f[u++]=c&16?M:A,f[u++]=c&8?M:A,f[u++]=c&4?M:A,f[u++]=c&2?M:A,f[u++]=c&1?M:A}if(B===0)continue;const W=b<E?m[b++]:255;for(let v=0;v<B;v++)f[u++]=W&1<<7-v?M:A}return{srcPos:b,destPos:u}}function d({src:m,srcPos:b=0,dest:f,destPos:I=0,width:N,height:D}){let k=0;const T=m.length>>2,A=new Uint32Array(m.buffer,b,T);if(n.FeatureTest.isLittleEndian){for(;k<T-2;k+=3,I+=4){const M=A[k],L=A[k+1],B=A[k+2];f[I]=M|4278190080,f[I+1]=M>>>24|L<<8|4278190080,f[I+2]=L>>>16|B<<16|4278190080,f[I+3]=B>>>8|4278190080}for(let M=k*4,L=m.length;M<L;M+=3)f[I++]=m[M]|m[M+1]<<8|m[M+2]<<16|4278190080}else{for(;k<T-2;k+=3,I+=4){const M=A[k],L=A[k+1],B=A[k+2];f[I]=M|255,f[I+1]=M<<24|L>>>8|255,f[I+2]=L<<16|B>>>16|255,f[I+3]=B<<8|255}for(let M=k*4,L=m.length;M<L;M+=3)f[I++]=m[M]<<24|m[M+1]<<16|m[M+2]<<8|255}return{srcPos:b,destPos:I}}function P(m,b){if(n.FeatureTest.isLittleEndian)for(let f=0,I=m.length;f<I;f++)b[f]=m[f]*65793|4278190080;else for(let f=0,I=m.length;f<I;f++)b[f]=m[f]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var m,Cn,f,Tn,N,we;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},o={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(k){switch(k instanceof Error||typeof k=="object"&&k!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k.name){case"AbortException":return new n.AbortException(k.message);case"MissingPDFException":return new n.MissingPDFException(k.message);case"PasswordException":return new n.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new n.UnknownErrorException(k.message,k.details);default:return new n.UnknownErrorException(k.message,k.toString())}}class P{constructor(T,A,M){K(this,m);K(this,f);K(this,N);this.sourceName=T,this.targetName=A,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=L=>{const B=L.data;if(B.targetName!==this.sourceName)return;if(B.stream){dt(this,f,Tn).call(this,B);return}if(B.callback){const u=B.callbackId,g=this.callbackCapabilities[u];if(!g)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],B.callback===i.DATA)g.resolve(B.data);else if(B.callback===i.ERROR)g.reject(d(B.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[B.action];if(!E)throw new Error(`Unknown action from worker: ${B.action}`);if(B.callbackId){const u=this.sourceName,g=B.sourceName;new Promise(function(W){W(E(B.data))}).then(function(W){M.postMessage({sourceName:u,targetName:g,callback:i.DATA,callbackId:B.callbackId,data:W})},function(W){M.postMessage({sourceName:u,targetName:g,callback:i.ERROR,callbackId:B.callbackId,reason:d(W)})});return}if(B.streamId){dt(this,m,Cn).call(this,B);return}E(B.data)},M.addEventListener("message",this._onComObjOnMessage)}on(T,A){const M=this.actionHandler;if(M[T])throw new Error(`There is already an actionName called "${T}"`);M[T]=A}send(T,A,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:A},M)}sendWithPromise(T,A,M){const L=this.callbackId++,B=new n.PromiseCapability;this.callbackCapabilities[L]=B;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:L,data:A},M)}catch(E){B.reject(E)}return B.promise}sendWithStream(T,A,M,L){const B=this.streamId++,E=this.sourceName,u=this.targetName,g=this.comObj;return new ReadableStream({start:W=>{const v=new n.PromiseCapability;return this.streamControllers[B]={controller:W,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:E,targetName:u,action:T,streamId:B,data:A,desiredSize:W.desiredSize},L),v.promise},pull:W=>{const v=new n.PromiseCapability;return this.streamControllers[B].pullCall=v,g.postMessage({sourceName:E,targetName:u,stream:o.PULL,streamId:B,desiredSize:W.desiredSize}),v.promise},cancel:W=>{(0,n.assert)(W instanceof Error,"cancel must have a valid reason");const v=new n.PromiseCapability;return this.streamControllers[B].cancelCall=v,this.streamControllers[B].isClosed=!0,g.postMessage({sourceName:E,targetName:u,stream:o.CANCEL,streamId:B,reason:d(W)}),v.promise}},M)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}m=new WeakSet,Cn=function(T){const A=T.streamId,M=this.sourceName,L=T.sourceName,B=this.comObj,E=this,u=this.actionHandler[T.action],g={enqueue(W,v=1,c){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=v,F>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),B.postMessage({sourceName:M,targetName:L,stream:o.ENQUEUE,streamId:A,chunk:W},c)},close(){this.isCancelled||(this.isCancelled=!0,B.postMessage({sourceName:M,targetName:L,stream:o.CLOSE,streamId:A}),delete E.streamSinks[A])},error(W){(0,n.assert)(W instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,B.postMessage({sourceName:M,targetName:L,stream:o.ERROR,streamId:A,reason:d(W)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[A]=g,new Promise(function(W){W(u(T.data,g))}).then(function(){B.postMessage({sourceName:M,targetName:L,stream:o.START_COMPLETE,streamId:A,success:!0})},function(W){B.postMessage({sourceName:M,targetName:L,stream:o.START_COMPLETE,streamId:A,reason:d(W)})})},f=new WeakSet,Tn=function(T){const A=T.streamId,M=this.sourceName,L=T.sourceName,B=this.comObj,E=this.streamControllers[A],u=this.streamSinks[A];switch(T.stream){case o.START_COMPLETE:T.success?E.startCall.resolve():E.startCall.reject(d(T.reason));break;case o.PULL_COMPLETE:T.success?E.pullCall.resolve():E.pullCall.reject(d(T.reason));break;case o.PULL:if(!u){B.postMessage({sourceName:M,targetName:L,stream:o.PULL_COMPLETE,streamId:A,success:!0});break}u.desiredSize<=0&&T.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=T.desiredSize,new Promise(function(g){var W;g((W=u.onPull)==null?void 0:W.call(u))}).then(function(){B.postMessage({sourceName:M,targetName:L,stream:o.PULL_COMPLETE,streamId:A,success:!0})},function(g){B.postMessage({sourceName:M,targetName:L,stream:o.PULL_COMPLETE,streamId:A,reason:d(g)})});break;case o.ENQUEUE:if((0,n.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(T.chunk);break;case o.CLOSE:if((0,n.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),dt(this,N,we).call(this,E,A);break;case o.ERROR:(0,n.assert)(E,"error should have stream controller"),E.controller.error(d(T.reason)),dt(this,N,we).call(this,E,A);break;case o.CANCEL_COMPLETE:T.success?E.cancelCall.resolve():E.cancelCall.reject(d(T.reason)),dt(this,N,we).call(this,E,A);break;case o.CANCEL:if(!u)break;new Promise(function(g){var W;g((W=u.onCancel)==null?void 0:W.call(u,d(T.reason)))}).then(function(){B.postMessage({sourceName:M,targetName:L,stream:o.CANCEL_COMPLETE,streamId:A,success:!0})},function(g){B.postMessage({sourceName:M,targetName:L,stream:o.CANCEL_COMPLETE,streamId:A,reason:d(g)})}),u.sinkCapability.reject(d(T.reason)),u.isCancelled=!0,delete this.streamSinks[A];break;default:throw new Error("Unexpected stream case")}},N=new WeakSet,we=async function(T,A){var M,L,B;await Promise.allSettled([(M=T.startCall)==null?void 0:M.promise,(L=T.pullCall)==null?void 0:L.promise,(B=T.cancelCall)==null?void 0:B.promise]),delete this.streamControllers[A]},e.MessageHandler=P},(t,e,s)=>{var o,d;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:m,rawData:b}){K(this,o,void 0);K(this,d,void 0);yt(this,o,m),yt(this,d,b)}getRaw(){return r(this,d)}get(m){return r(this,o).get(m)??null}getAll(){return(0,n.objectFromMap)(r(this,o))}has(m){return r(this,o).has(m)}}o=new WeakMap,d=new WeakMap,e.Metadata=i},(t,e,s)=>{var m,b,f,I,N,D,$e;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),i=s(8);const o=Symbol("INTERNAL");class d{constructor(A,M){K(this,m,!0);this.name=A,this.intent=M}get visible(){return r(this,m)}_setVisible(A,M){A!==o&&(0,n.unreachable)("Internal method `_setVisible` called."),yt(this,m,M)}}m=new WeakMap;class P{constructor(A){K(this,D);K(this,b,null);K(this,f,new Map);K(this,I,null);K(this,N,null);if(this.name=null,this.creator=null,A!==null){this.name=A.name,this.creator=A.creator,yt(this,N,A.order);for(const M of A.groups)r(this,f).set(M.id,new d(M.name,M.intent));if(A.baseState==="OFF")for(const M of r(this,f).values())M._setVisible(o,!1);for(const M of A.on)r(this,f).get(M)._setVisible(o,!0);for(const M of A.off)r(this,f).get(M)._setVisible(o,!1);yt(this,I,this.getHash())}}isVisible(A){if(r(this,f).size===0)return!0;if(!A)return(0,n.warn)("Optional content group not defined."),!0;if(A.type==="OCG")return r(this,f).has(A.id)?r(this,f).get(A.id).visible:((0,n.warn)(`Optional content group not found: ${A.id}`),!0);if(A.type==="OCMD"){if(A.expression)return dt(this,D,$e).call(this,A.expression);if(!A.policy||A.policy==="AnyOn"){for(const M of A.ids){if(!r(this,f).has(M))return(0,n.warn)(`Optional content group not found: ${M}`),!0;if(r(this,f).get(M).visible)return!0}return!1}else if(A.policy==="AllOn"){for(const M of A.ids){if(!r(this,f).has(M))return(0,n.warn)(`Optional content group not found: ${M}`),!0;if(!r(this,f).get(M).visible)return!1}return!0}else if(A.policy==="AnyOff"){for(const M of A.ids){if(!r(this,f).has(M))return(0,n.warn)(`Optional content group not found: ${M}`),!0;if(!r(this,f).get(M).visible)return!0}return!1}else if(A.policy==="AllOff"){for(const M of A.ids){if(!r(this,f).has(M))return(0,n.warn)(`Optional content group not found: ${M}`),!0;if(r(this,f).get(M).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${A.policy}.`),!0}return(0,n.warn)(`Unknown group type ${A.type}.`),!0}setVisibility(A,M=!0){if(!r(this,f).has(A)){(0,n.warn)(`Optional content group not found: ${A}`);return}r(this,f).get(A)._setVisible(o,!!M),yt(this,b,null)}get hasInitialVisibility(){return r(this,I)===null||this.getHash()===r(this,I)}getOrder(){return r(this,f).size?r(this,N)?r(this,N).slice():[...r(this,f).keys()]:null}getGroups(){return r(this,f).size>0?(0,n.objectFromMap)(r(this,f)):null}getGroup(A){return r(this,f).get(A)||null}getHash(){if(r(this,b)!==null)return r(this,b);const A=new i.MurmurHash3_64;for(const[M,L]of r(this,f))A.update(`${M}:${L.visible}`);return yt(this,b,A.hexdigest())}}b=new WeakMap,f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakSet,$e=function(A){const M=A.length;if(M<2)return!0;const L=A[0];for(let B=1;B<M;B++){const E=A[B];let u;if(Array.isArray(E))u=dt(this,D,$e).call(this,E);else if(r(this,f).has(E))u=r(this,f).get(E).visible;else return(0,n.warn)(`Optional content group not found: ${E}`),!0;switch(L){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return L==="And"},e.OptionalContentConfig=P},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class o{constructor({length:b,initialData:f,progressiveDone:I=!1,contentDispositionFilename:N=null,disableRange:D=!1,disableStream:k=!1},T){if((0,n.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=N,(f==null?void 0:f.length)>0){const A=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(A)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!k,this._isRangeSupported=!D,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((A,M)=>{this._onReceiveData({begin:A,chunk:M})}),this._pdfDataRangeTransport.addProgressListener((A,M)=>{this._onProgress({loaded:A,total:M})}),this._pdfDataRangeTransport.addProgressiveReadListener(A=>{this._onReceiveData({chunk:A})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:f}){const I=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const N=this._rangeReaders.some(function(D){return D._begin!==b?!1:(D._enqueue(I),!0)});(0,n.assert)(N,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}_onProgress(b){var f,I,N,D;b.total===void 0?(I=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||I.call(f,{loaded:b.loaded}):(D=(N=this._fullRequestReader)==null?void 0:N.onProgress)==null||D.call(N,{loaded:b.loaded,total:b.total})}_onProgressiveDone(){var b;(b=this._fullRequestReader)==null||b.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const f=this._rangeReaders.indexOf(b);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new d(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,f){if(f<=this._progressiveDataLength)return null;const I=new P(this,b,f);return this._pdfDataRangeTransport.requestDataRange(b,f),this._rangeReaders.push(I),I}cancelAllRequests(b){var f;(f=this._fullRequestReader)==null||f.cancel(b);for(const I of this._rangeReaders.slice(0))I.cancel(b);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=o;class d{constructor(b,f,I=!1,N=null){this._stream=b,this._done=I||!1,this._filename=(0,i.isPdfFile)(N)?N:null,this._queuedChunks=f||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class P{constructor(b,f,I){this._stream=b,this._begin=f,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(20);function o(I,N,D){return{method:"GET",headers:I,signal:D.signal,mode:"cors",credentials:N?"include":"same-origin",redirect:"follow"}}function d(I){const N=new Headers;for(const D in I){const k=I[D];k!==void 0&&N.append(D,k)}return N}function P(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,n.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class m{constructor(N){this.source=N,this.isHttp=/^https?:/i.test(N.url),this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var N;return((N=this._fullRequestReader)==null?void 0:N._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(N,D){if(D<=this._progressiveDataLength)return null;const k=new f(this,N,D);return this._rangeRequestReaders.push(k),k}cancelAllRequests(N){var D;(D=this._fullRequestReader)==null||D.cancel(N);for(const k of this._rangeRequestReaders.slice(0))k.cancel(N)}}e.PDFFetchStream=m;class b{constructor(N){this._stream=N,this._reader=null,this._loaded=0,this._filename=null;const D=N.source;this._withCredentials=D.withCredentials||!1,this._contentLength=D.length,this._headersCapability=new n.PromiseCapability,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._headers=d(this._stream.httpHeaders);const k=D.url;fetch(k,o(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,k);this._reader=T.body.getReader(),this._headersCapability.resolve();const A=B=>T.headers.get(B),{allowRangeRequests:M,suggestedLength:L}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=L||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(A),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._headersCapability.promise;const{value:N,done:D}=await this._reader.read();return D?{value:N,done:D}:(this._loaded+=N.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded,total:this._contentLength}),{value:P(N),done:!1})}cancel(N){var D;(D=this._reader)==null||D.cancel(N),this._abortController.abort()}}class f{constructor(N,D,k){this._stream=N,this._reader=null,this._loaded=0;const T=N.source;this._withCredentials=T.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!T.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${D}-${k-1}`);const A=T.url;fetch(A,o(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,i.validateResponseStatus)(M.status))throw(0,i.createResponseStatusError)(M.status,A);this._readCapability.resolve(),this._reader=M.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._readCapability.promise;const{value:N,done:D}=await this._reader.read();return D?{value:N,done:D}:(this._loaded+=N.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded}),{value:P(N),done:!1})}cancel(N){var D;(D=this._reader)==null||D.cancel(N),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=m,e.extractFilenameFromHeader=P,e.validateRangeRequestCapabilities=d,e.validateResponseStatus=b;var n=s(1),i=s(21),o=s(6);function d({getResponseHeader:f,isHttp:I,rangeChunkSize:N,disableRange:D}){const k={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(f("Content-Length"),10);return!Number.isInteger(T)||(k.suggestedLength=T,T<=2*N)||D||!I||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(k.allowRangeRequests=!0),k}function P(f){const I=f("Content-Disposition");if(I){let N=(0,i.getFilenameFromContentDispositionHeader)(I);if(N.includes("%"))try{N=decodeURIComponent(N)}catch{}if((0,o.isPdfFile)(N))return N}return null}function m(f,I){return f===404||f===0&&I.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+I+'".'):new n.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${I}".`,f)}function b(f){return f===200||f===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(o){let d=!0,P=m("filename\\*","i").exec(o);if(P){P=P[1];let T=N(P);return T=unescape(T),T=D(T),T=k(T),f(T)}if(P=I(o),P){const T=k(P);return f(T)}if(P=m("filename","i").exec(o),P){P=P[1];let T=N(P);return T=k(T),f(T)}function m(T,A){return new RegExp("(?:^|;)\\s*"+T+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function b(T,A){if(T){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const M=new TextDecoder(T,{fatal:!0}),L=(0,n.stringToBytes)(A);A=M.decode(L),d=!1}catch{}}return A}function f(T){return d&&/[\x80-\xff]/.test(T)&&(T=b("utf-8",T),d&&(T=b("iso-8859-1",T))),T}function I(T){const A=[];let M;const L=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(M=L.exec(T))!==null;){let[,E,u,g]=M;if(E=parseInt(E,10),E in A){if(E===0)break;continue}A[E]=[u,g]}const B=[];for(let E=0;E<A.length&&E in A;++E){let[u,g]=A[E];g=N(g),u&&(g=unescape(g),E===0&&(g=D(g))),B.push(g)}return B.join("")}function N(T){if(T.startsWith('"')){const A=T.slice(1).split('\\"');for(let M=0;M<A.length;++M){const L=A[M].indexOf('"');L!==-1&&(A[M]=A[M].slice(0,L),A.length=M+1),A[M]=A[M].replaceAll(/\\(.)/g,"$1")}T=A.join('"')}return T}function D(T){const A=T.indexOf("'");if(A===-1)return T;const M=T.slice(0,A),B=T.slice(A+1).replace(/^[^']*'/,"");return b(M,B)}function k(T){return!T.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(T)?T:T.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,M,L,B){if(L==="q"||L==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,u){return String.fromCharCode(parseInt(u,16))}),b(M,B);try{B=atob(B)}catch{}return b(M,B)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(20);const o=200,d=206;function P(N){const D=N.response;return typeof D!="string"?D:(0,n.stringToBytes)(D).buffer}class m{constructor(D,k={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&k.httpHeaders||Object.create(null),this.withCredentials=k.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,k,T){const A={begin:D,end:k};for(const M in T)A[M]=T[M];return this.request(A)}requestFull(D){return this.request(D)}request(D){const k=new XMLHttpRequest,T=this.currXhrId++,A=this.pendingRequests[T]={xhr:k};k.open("GET",this.url),k.withCredentials=this.withCredentials;for(const M in this.httpHeaders){const L=this.httpHeaders[M];L!==void 0&&k.setRequestHeader(M,L)}return this.isHttp&&"begin"in D&&"end"in D?(k.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),A.expectedStatus=d):A.expectedStatus=o,k.responseType="arraybuffer",D.onError&&(k.onerror=function(M){D.onError(k.status)}),k.onreadystatechange=this.onStateChange.bind(this,T),k.onprogress=this.onProgress.bind(this,T),A.onHeadersReceived=D.onHeadersReceived,A.onDone=D.onDone,A.onError=D.onError,A.onProgress=D.onProgress,k.send(null),T}onProgress(D,k){var A;const T=this.pendingRequests[D];T&&((A=T.onProgress)==null||A.call(T,k))}onStateChange(D,k){var E,u,g;const T=this.pendingRequests[D];if(!T)return;const A=T.xhr;if(A.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),A.readyState!==4||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],A.status===0&&this.isHttp){(E=T.onError)==null||E.call(T,A.status);return}const M=A.status||o;if(!(M===o&&T.expectedStatus===d)&&M!==T.expectedStatus){(u=T.onError)==null||u.call(T,A.status);return}const B=P(A);if(M===d){const W=A.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(W);T.onDone({begin:parseInt(v[1],10),chunk:B})}else B?T.onDone({begin:0,chunk:B}):(g=T.onError)==null||g.call(T,A.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const k=this.pendingRequests[D].xhr;delete this.pendingRequests[D],k.abort()}}class b{constructor(D){this._source=D,this._manager=new m(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const k=this._rangeRequestReaders.indexOf(D);k>=0&&this._rangeRequestReaders.splice(k,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(D,k){const T=new I(this._manager,D,k);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(D){var k;(k=this._fullRequestReader)==null||k.cancel(D);for(const T of this._rangeRequestReaders.slice(0))T.cancel(D)}}e.PDFNetworkStream=b;class f{constructor(D,k){this._manager=D;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._fullRequestId=D.requestFull(T),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=k.disableRange||!1,this._contentLength=k.length,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,k=this._manager.getRequestXhr(D),T=L=>k.getResponseHeader(L),{allowRangeRequests:A,suggestedLength:M}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});A&&(this._isRangeSupported=!0),this._contentLength=M||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,i.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var k;(k=this.onProgress)==null||k.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const D=new n.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(D,k,T){this._manager=D;const A={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(k,T,A),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;(D=this.onClosed)==null||D.call(this,this)}_onDone(D){const k=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunk=k,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,i.createResponseStatusError)(D,this._url);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var k;this.isStreamingSupported||(k=this.onProgress)==null||k.call(this,{loaded:D.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const k=this._queuedChunk;return this._queuedChunk=null,{value:k,done:!1}}if(this._done)return{value:void 0,done:!0};const D=new n.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(20);const o=/^file:\/\/\/[a-zA-Z]:\//;function d(T){const A=require$$5,M=A.parse(T);return M.protocol==="file:"||M.host?M:/^[a-z]:[/\\]/i.test(T)?A.parse(`file:///${T}`):(M.host||(M.protocol="file:"),M)}class P{constructor(A){this.source=A,this.url=d(A.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var A;return((A=this._fullRequestReader)==null?void 0:A._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new D(this):new I(this),this._fullRequestReader}getRangeReader(A,M){if(M<=this._progressiveDataLength)return null;const L=this.isFsUrl?new k(this,A,M):new N(this,A,M);return this._rangeRequestReaders.push(L),L}cancelAllRequests(A){var M;(M=this._fullRequestReader)==null||M.cancel(A);for(const L of this._rangeRequestReaders.slice(0))L.cancel(A)}}e.PDFNodeStream=P;class m{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null;const M=A.source;this._contentLength=M.length,this._loaded=0,this._filename=null,this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var L;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=A.length,(L=this.onProgress)==null||L.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",M=>{this._error(M)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const M=A.source;this._isStreamingSupported=!M.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var L;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=A.length,(L=this.onProgress)==null||L.call(this,{loaded:this._loaded}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",M=>{this._error(M)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(T,A){return{protocol:T.protocol,auth:T.auth,host:T.hostname,port:T.port,path:T.path,method:"GET",headers:A}}class I extends m{constructor(A){super(A);const M=L=>{if(L.statusCode===404){const g=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g,this._headersCapability.reject(g);return}this._headersCapability.resolve(),this._setReadableStream(L);const B=g=>this._readableStream.headers[g.toLowerCase()],{allowRangeRequests:E,suggestedLength:u}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:A.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=u||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const L=require$$5;this._request=L.request(f(this._url,A.httpHeaders),M)}else{const L=require$$5;this._request=L.request(f(this._url,A.httpHeaders),M)}this._request.on("error",L=>{this._storedError=L,this._headersCapability.reject(L)}),this._request.end()}}class N extends b{constructor(A,M,L){super(A),this._httpHeaders={};for(const E in A.httpHeaders){const u=A.httpHeaders[E];u!==void 0&&(this._httpHeaders[E]=u)}this._httpHeaders.Range=`bytes=${M}-${L-1}`;const B=E=>{if(E.statusCode===404){const u=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(E)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(f(this._url,this._httpHeaders),B)}else{const E=require$$5;this._request=E.request(f(this._url,this._httpHeaders),B)}this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class D extends m{constructor(A){super(A);let M=decodeURIComponent(this._url.path);o.test(this._url.href)&&(M=M.replace(/^\//,""));const L=require$$5;L.lstat(M,(B,E)=>{if(B){B.code==="ENOENT"&&(B=new n.MissingPDFException(`Missing PDF "${M}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=E.size,this._setReadableStream(L.createReadStream(M)),this._headersCapability.resolve()})}}class k extends b{constructor(A,M,L){super(A);let B=decodeURIComponent(this._url.path);o.test(this._url.href)&&(B=B.replace(/^\//,""));const E=require$$5;this._setReadableStream(E.createReadStream(B,{start:M,end:L-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),i=s(1);const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",m=["butt","round","square"],b=["miter","round","bevel"],f=function(E,u="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([E],{type:u}));const W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let v=`data:${u};base64,`;for(let c=0,F=E.length;c<F;c+=3){const S=E[c]&255,$=E[c+1]&255,tt=E[c+2]&255,j=S>>2,rt=(S&3)<<4|$>>4,it=c+1<F?($&15)<<2|tt>>6:64,bt=c+2<F?tt&63:64;v+=W[j]+W[rt]+W[it]+W[bt]}return v},I=function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),u=12,g=new Int32Array(256);for(let tt=0;tt<256;tt++){let j=tt;for(let rt=0;rt<8;rt++)j=j&1?3988292384^j>>1&2147483647:j>>1&2147483647;g[tt]=j}function W(tt,j,rt){let it=-1;for(let bt=j;bt<rt;bt++){const w=(it^tt[bt])&255,X=g[w];it=it>>>8^X}return it^-1}function v(tt,j,rt,it){let bt=it;const w=j.length;rt[bt]=w>>24&255,rt[bt+1]=w>>16&255,rt[bt+2]=w>>8&255,rt[bt+3]=w&255,bt+=4,rt[bt]=tt.charCodeAt(0)&255,rt[bt+1]=tt.charCodeAt(1)&255,rt[bt+2]=tt.charCodeAt(2)&255,rt[bt+3]=tt.charCodeAt(3)&255,bt+=4,rt.set(j,bt),bt+=j.length;const X=W(rt,it+4,bt);rt[bt]=X>>24&255,rt[bt+1]=X>>16&255,rt[bt+2]=X>>8&255,rt[bt+3]=X&255}function c(tt,j,rt){let it=1,bt=0;for(let w=j;w<rt;++w)it=(it+(tt[w]&255))%65521,bt=(bt+it)%65521;return bt<<16|it}function F(tt){if(!i.isNodeJS)return S(tt);try{const j=parseInt(process.versions.node)>=8?tt:Buffer.from(tt),rt=require$$5.deflateSync(j,{level:9});return rt instanceof Uint8Array?rt:new Uint8Array(rt)}catch(j){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return S(tt)}function S(tt){let j=tt.length;const rt=65535,it=Math.ceil(j/rt),bt=new Uint8Array(2+j+it*5+4);let w=0;bt[w++]=120,bt[w++]=156;let X=0;for(;j>rt;)bt[w++]=0,bt[w++]=255,bt[w++]=255,bt[w++]=0,bt[w++]=0,bt.set(tt.subarray(X,X+rt),w),w+=rt,X+=rt,j-=rt;bt[w++]=1,bt[w++]=j&255,bt[w++]=j>>8&255,bt[w++]=~j&65535&255,bt[w++]=(~j&65535)>>8&255,bt.set(tt.subarray(X),w),w+=tt.length-X;const ot=c(tt,0,tt.length);return bt[w++]=ot>>24&255,bt[w++]=ot>>16&255,bt[w++]=ot>>8&255,bt[w++]=ot&255,bt}function $(tt,j,rt,it){const bt=tt.width,w=tt.height;let X,ot,At;const Ct=tt.data;switch(j){case i.ImageKind.GRAYSCALE_1BPP:ot=0,X=1,At=bt+7>>3;break;case i.ImageKind.RGB_24BPP:ot=2,X=8,At=bt*3;break;case i.ImageKind.RGBA_32BPP:ot=6,X=8,At=bt*4;break;default:throw new Error("invalid format")}const x=new Uint8Array((1+At)*w);let a=0,l=0;for(let lt=0;lt<w;++lt)x[a++]=0,x.set(Ct.subarray(l,l+At),a),l+=At,a+=At;if(j===i.ImageKind.GRAYSCALE_1BPP&&it){a=0;for(let lt=0;lt<w;lt++){a++;for(let C=0;C<At;C++)x[a++]^=255}}const y=new Uint8Array([bt>>24&255,bt>>16&255,bt>>8&255,bt&255,w>>24&255,w>>16&255,w>>8&255,w&255,X,ot,0,0,0]),V=F(x),H=E.length+u*3+y.length+V.length,Y=new Uint8Array(H);let Q=0;return Y.set(E,Q),Q+=E.length,v("IHDR",y,Y,Q),Q+=u+y.length,v("IDATA",V,Y,Q),Q+=u+V.length,v("IEND",new Uint8Array(0),Y,Q),f(Y,"image/png",rt)}return function(j,rt,it){const bt=j.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:j.kind;return $(j,bt,rt,it)}}();class N{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,g){this.x=u,this.y=g}}function D(E){let u=[];const g=[];for(const W of E){if(W.fn==="save"){u.push({fnId:92,fn:"group",items:[]}),g.push(u),u=u.at(-1).items;continue}W.fn==="restore"?u=g.pop():u.push(W)}return u}function k(E){if(Number.isInteger(E))return E.toString();const u=E.toFixed(10);let g=u.length-1;if(u[g]!=="0")return u;do g--;while(u[g]==="0");return u.substring(0,u[g]==="."?g:g+1)}function T(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${k(E[0])} ${k(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const u=Math.acos(E[0])*180/Math.PI;return`rotate(${k(u)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${k(E[4])} ${k(E[5])})`;return`matrix(${k(E[0])} ${k(E[1])} ${k(E[2])} ${k(E[3])} ${k(E[4])} ${k(E[5])})`}let A=0,M=0,L=0;class B{constructor(u,g,W=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new N,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!W,this._operatorIdMapping=[];for(const v in i.OPS)this._operatorIdMapping[i.OPS[v]]=v}getObject(u,g=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):g}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const g=u.fnArray,W=u.argsArray;for(let v=0,c=g.length;v<c;v++)if(g[v]===i.OPS.dependency)for(const F of W[v]){const S=F.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(tt=>{S.get(F,tt)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(u,g,W,v,c,F){const S=[u,g,W,v,c,F];this.transformMatrix=i.Util.transform(this.transformMatrix,S),this.tgrp=null}getSVG(u,g){this.viewport=g;const W=this._initialize(g);return this.loadDependencies(u).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),W))}convertOpList(u){const g=this._operatorIdMapping,W=u.argsArray,v=u.fnArray,c=[];for(let F=0,S=v.length;F<S;F++){const $=v[F];c.push({fnId:$,fn:g[$],args:W[F]})}return D(c)}executeOpTree(u){for(const g of u){const W=g.fn,v=g.fnId,c=g.args;switch(v|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(c);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case i.OPS.setFont:this.setFont(c);break;case i.OPS.showText:this.showText(c[0]);break;case i.OPS.showSpacedText:this.showText(c[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(c[0],c[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case i.OPS.setHScale:this.setHScale(c[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.setTextRise:this.setTextRise(c[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case i.OPS.setLineWidth:this.setLineWidth(c[0]);break;case i.OPS.setLineJoin:this.setLineJoin(c[0]);break;case i.OPS.setLineCap:this.setLineCap(c[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case i.OPS.setFillColorN:this.setFillColorN(c);break;case i.OPS.shadingFill:this.shadingFill(c[0]);break;case i.OPS.setDash:this.setDash(c[0],c[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case i.OPS.setFlatness:this.setFlatness(c[0]);break;case i.OPS.setGState:this.setGState(c[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.constructPath:this.constructPath(c[0],c[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,i.warn)(`Unimplemented operator ${W}`);break}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,g,W,v,c,F){const S=this.current;S.textMatrix=S.lineMatrix=[u,g,W,v,c,F],S.textMatrixScale=Math.hypot(u,g),S.x=S.lineX=0,S.y=S.lineY=0,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${k(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",k(-S.y)),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtElement.append(S.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=i.IDENTITY_MATRIX,u.lineMatrix=i.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,g){const W=this.current;W.x=W.lineX+=u,W.y=W.lineY+=g,W.xcoords=[],W.ycoords=[],W.tspan=this.svgFactory.createElement("svg:tspan"),W.tspan.setAttributeNS(null,"font-family",W.fontFamily),W.tspan.setAttributeNS(null,"font-size",`${k(W.fontSize)}px`),W.tspan.setAttributeNS(null,"y",k(-W.y))}showText(u){const g=this.current,W=g.font,v=g.fontSize;if(v===0)return;const c=g.fontSizeScale,F=g.charSpacing,S=g.wordSpacing,$=g.fontDirection,tt=g.textHScale*$,j=W.vertical,rt=j?1:-1,it=W.defaultVMetrics,bt=v*g.fontMatrix[0];let w=0;for(const At of u){if(At===null){w+=$*S;continue}else if(typeof At=="number"){w+=rt*At*v/1e3;continue}const Ct=(At.isSpace?S:0)+F,x=At.fontChar;let a,l,y=At.width;if(j){let H;const Y=At.vmetric||it;H=At.vmetric?Y[1]:y*.5,H=-H*bt;const Q=Y[2]*bt;y=Y?-Y[0]:y,a=H/c,l=(w+Q)/c}else a=w/c,l=0;(At.isInFont||W.missingFile)&&(g.xcoords.push(g.x+a),j&&g.ycoords.push(-g.y+l),g.tspan.textContent+=x);const V=j?y*bt-Ct*$:y*bt+Ct*$;w+=V}g.tspan.setAttributeNS(null,"x",g.xcoords.map(k).join(" ")),j?g.tspan.setAttributeNS(null,"y",g.ycoords.map(k).join(" ")):g.tspan.setAttributeNS(null,"y",k(-g.y)),j?g.y-=w:g.x+=w*tt,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${k(g.fontSize)}px`),g.fontStyle!==o.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==o.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const X=g.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(X===i.TextRenderingMode.FILL||X===i.TextRenderingMode.FILL_STROKE?(g.fillColor!==o.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?g.tspan.setAttributeNS(null,"fill","transparent"):g.tspan.setAttributeNS(null,"fill","none"),X===i.TextRenderingMode.STROKE||X===i.TextRenderingMode.FILL_STROKE){const At=1/(g.textMatrixScale||1);this._setStrokeAttributes(g.tspan,At)}let ot=g.textMatrix;g.textRise!==0&&(ot=ot.slice(),ot[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${T(ot)} scale(${k(tt)}, -1)`),g.txtElement.setAttributeNS(d,"xml:space","preserve"),g.txtElement.append(g.tspan),g.txtgrp.append(g.txtElement),this._ensureTransformGroup().append(g.txtElement)}setLeadingMoveText(u,g){this.setLeading(-g),this.moveText(u,g)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const g=f(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${g}); }
`}setFont(u){const g=this.current,W=this.commonObjs.get(u[0]);let v=u[1];g.font=W,this.embedFonts&&!W.missingFile&&!this.embeddedFonts[W.loadedName]&&(this.addFontStyle(W),this.embeddedFonts[W.loadedName]=W),g.fontMatrix=W.fontMatrix||i.FONT_IDENTITY_MATRIX;let c="normal";W.black?c="900":W.bold&&(c="bold");const F=W.italic?"italic":"normal";v<0?(v=-v,g.fontDirection=-1):g.fontDirection=1,g.fontSize=v,g.fontFamily=W.loadedName,g.fontWeight=c,g.fontStyle=F,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",k(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const u=this.current;u.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((g=u.txtElement)!=null&&g.hasChildNodes())&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=m[u]}setLineJoin(u){this.current.lineJoin=b[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,g,W){this.current.strokeColor=i.Util.makeHexColor(u,g,W)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,g,W){this.current.fillColor=i.Util.makeHexColor(u,g,W),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const{width:g,height:W}=this.viewport,v=i.Util.inverseTransform(this.transformMatrix),[c,F,S,$]=i.Util.getAxialAlignedBoundingBox([0,0,g,W],v),tt=this.svgFactory.createElement("svg:rect");tt.setAttributeNS(null,"x",c),tt.setAttributeNS(null,"y",F),tt.setAttributeNS(null,"width",S-c),tt.setAttributeNS(null,"height",$-F),tt.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&tt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(tt)}_makeColorN_Pattern(u){return u[0]==="TilingPattern"?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const g=u[1],W=u[2],v=u[3]||i.IDENTITY_MATRIX,[c,F,S,$]=u[4],tt=u[5],j=u[6],rt=u[7],it=`shading${L++}`,[bt,w,X,ot]=i.Util.normalizeRect([...i.Util.applyTransform([c,F],v),...i.Util.applyTransform([S,$],v)]),[At,Ct]=i.Util.singularValueDecompose2dScale(v),x=tt*At,a=j*Ct,l=this.svgFactory.createElement("svg:pattern");l.setAttributeNS(null,"id",it),l.setAttributeNS(null,"patternUnits","userSpaceOnUse"),l.setAttributeNS(null,"width",x),l.setAttributeNS(null,"height",a),l.setAttributeNS(null,"x",`${bt}`),l.setAttributeNS(null,"y",`${w}`);const y=this.svg,V=this.transformMatrix,H=this.current.fillColor,Y=this.current.strokeColor,Q=this.svgFactory.create(X-bt,ot-w);if(this.svg=Q,this.transformMatrix=v,rt===2){const lt=i.Util.makeHexColor(...g);this.current.fillColor=lt,this.current.strokeColor=lt}return this.executeOpTree(this.convertOpList(W)),this.svg=y,this.transformMatrix=V,this.current.fillColor=H,this.current.strokeColor=Y,l.append(Q.childNodes[0]),this.defs.append(l),`url(#${it})`}_makeShadingPattern(u){switch(typeof u=="string"&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const g=`shading${L++}`,W=u[3];let v;switch(u[1]){case"axial":const c=u[4],F=u[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",g),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",c[0]),v.setAttributeNS(null,"y1",c[1]),v.setAttributeNS(null,"x2",F[0]),v.setAttributeNS(null,"y2",F[1]);break;case"radial":const S=u[4],$=u[5],tt=u[6],j=u[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",g),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",$[0]),v.setAttributeNS(null,"cy",$[1]),v.setAttributeNS(null,"r",j),v.setAttributeNS(null,"fx",S[0]),v.setAttributeNS(null,"fy",S[1]),v.setAttributeNS(null,"fr",tt);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const c of W){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",c[0]),F.setAttributeNS(null,"stop-color",c[1]),v.append(F)}return this.defs.append(v),`url(#${g})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,g){this.current.dashArray=u,this.current.dashPhase=g}constructPath(u,g){const W=this.current;let v=W.x,c=W.y,F=[],S=0;for(const $ of u)switch($|0){case i.OPS.rectangle:v=g[S++],c=g[S++];const tt=g[S++],j=g[S++],rt=v+tt,it=c+j;F.push("M",k(v),k(c),"L",k(rt),k(c),"L",k(rt),k(it),"L",k(v),k(it),"Z");break;case i.OPS.moveTo:v=g[S++],c=g[S++],F.push("M",k(v),k(c));break;case i.OPS.lineTo:v=g[S++],c=g[S++],F.push("L",k(v),k(c));break;case i.OPS.curveTo:v=g[S+4],c=g[S+5],F.push("C",k(g[S]),k(g[S+1]),k(g[S+2]),k(g[S+3]),k(v),k(c)),S+=6;break;case i.OPS.curveTo2:F.push("C",k(v),k(c),k(g[S]),k(g[S+1]),k(g[S+2]),k(g[S+3])),v=g[S+2],c=g[S+3],S+=4;break;case i.OPS.curveTo3:v=g[S+2],c=g[S+3],F.push("C",k(g[S]),k(g[S+1]),k(v),k(c),k(v),k(c)),S+=4;break;case i.OPS.closePath:F.push("Z");break}F=F.join(" "),W.path&&u.length>0&&u[0]!==i.OPS.rectangle&&u[0]!==i.OPS.moveTo?F=W.path.getAttributeNS(null,"d")+F:(W.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(W.path)),W.path.setAttributeNS(null,"d",F),W.path.setAttributeNS(null,"fill","none"),W.element=W.path,W.setCurrentPoint(v,c)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element){this.pendingClip=null;return}const g=`clippath${A++}`,W=this.svgFactory.createElement("svg:clipPath");W.setAttributeNS(null,"id",g),W.setAttributeNS(null,"transform",T(this.transformMatrix));const v=u.element.cloneNode(!0);if(this.pendingClip==="evenodd"?v.setAttributeNS(null,"clip-rule","evenodd"):v.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,W.append(v),this.defs.append(W),u.activeClipUrl){u.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;W.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const g=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",g)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[g,W]of u)switch(g){case"LW":this.setLineWidth(W);break;case"LC":this.setLineCap(W);break;case"LJ":this.setLineJoin(W);break;case"ML":this.setMiterLimit(W);break;case"D":this.setDash(W[0],W[1]);break;case"RI":this.setRenderingIntent(W);break;case"FL":this.setFlatness(W);break;case"Font":this.setFont(W);break;case"CA":this.setStrokeAlpha(W);break;case"ca":this.setFillAlpha(W);break;default:(0,i.warn)(`Unimplemented graphic state operator ${g}`);break}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,g=1){const W=this.current;let v=W.dashArray;g!==1&&v.length>0&&(v=v.map(function(c){return g*c})),u.setAttributeNS(null,"stroke",W.strokeColor),u.setAttributeNS(null,"stroke-opacity",W.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",k(W.miterLimit)),u.setAttributeNS(null,"stroke-linecap",W.lineCap),u.setAttributeNS(null,"stroke-linejoin",W.lineJoin),u.setAttributeNS(null,"stroke-width",k(g*W.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",v.map(k).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",k(g*W.dashPhase)+"px")}eoFill(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var u;(u=this.current.element)==null||u.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(u)}paintImageXObject(u){const g=this.getObject(u);if(!g){(0,i.warn)(`Dependent image with object ID ${u} is not ready yet`);return}this.paintInlineImageXObject(g)}paintInlineImageXObject(u,g){const W=u.width,v=u.height,c=I(u,this.forceDataSchema,!!g),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",k(W)),F.setAttributeNS(null,"height",k(v)),this.current.element=F,this.clip("nonzero");const S=this.svgFactory.createElement("svg:image");S.setAttributeNS(P,"xlink:href",c),S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y",k(-v)),S.setAttributeNS(null,"width",k(W)+"px"),S.setAttributeNS(null,"height",k(v)+"px"),S.setAttributeNS(null,"transform",`scale(${k(1/W)} ${k(-1/v)})`),g?g.append(S):this._ensureTransformGroup().append(S)}paintImageMaskXObject(u){const g=this.getObject(u.data,u);if(g.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const W=this.current,v=g.width,c=g.height,F=W.fillColor;W.maskId=`mask${M++}`;const S=this.svgFactory.createElement("svg:mask");S.setAttributeNS(null,"id",W.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",k(v)),$.setAttributeNS(null,"height",k(c)),$.setAttributeNS(null,"fill",F),$.setAttributeNS(null,"mask",`url(#${W.maskId})`),this.defs.append(S),this._ensureTransformGroup().append($),this.paintInlineImageXObject(g,S)}paintFormXObjectBegin(u,g){if(Array.isArray(u)&&u.length===6&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),g){const W=g[2]-g[0],v=g[3]-g[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",g[0]),c.setAttributeNS(null,"y",g[1]),c.setAttributeNS(null,"width",k(W)),c.setAttributeNS(null,"height",k(v)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const g=this.svgFactory.create(u.width,u.height),W=this.svgFactory.createElement("svg:defs");g.append(W),this.defs=W;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",T(u.transform)),g.append(v),this.svg=v,g}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=B},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const o=[],d={items:o,styles:Object.create(null)};function P(m){var I;if(!m)return;let b=null;const f=m.name;if(f==="#text")b=m.value;else if(s.shouldBuildText(f))(I=m==null?void 0:m.attributes)!=null&&I.textContent?b=m.attributes.textContent:m.value&&(b=m.value);else return;if(b!==null&&o.push({str:b}),!!m.children)for(const N of m.children)P(N)}return P(i),d}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=T,e.updateTextLayer=A;var n=s(1),i=s(6);const o=1e5,d=30,P=.8,m=new Map;function b(M,L){let B;if(L&&n.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(M,M).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=M,B=E.getContext("2d",{alpha:!1})}return B}function f(M,L){const B=m.get(M);if(B)return B;const E=b(d,L);E.font=`${d}px ${M}`;const u=E.measureText("");let g=u.fontBoundingBoxAscent,W=Math.abs(u.fontBoundingBoxDescent);if(g){const c=g/(g+W);return m.set(M,c),E.canvas.width=E.canvas.height=0,c}E.strokeStyle="red",E.clearRect(0,0,d,d),E.strokeText("g",0,0);let v=E.getImageData(0,0,d,d).data;W=0;for(let c=v.length-1-3;c>=0;c-=4)if(v[c]>0){W=Math.ceil(c/4/d);break}E.clearRect(0,0,d,d),E.strokeText("A",0,d),v=E.getImageData(0,0,d,d).data,g=0;for(let c=0,F=v.length;c<F;c+=4)if(v[c]>0){g=d-Math.floor(c/4/d);break}if(E.canvas.width=E.canvas.height=0,g){const c=g/(g+W);return m.set(M,c),c}return m.set(M,P),P}function I(M,L,B){const E=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:L.str!=="",hasEOL:L.hasEOL,fontSize:0};M._textDivs.push(E);const g=n.Util.transform(M._transform,L.transform);let W=Math.atan2(g[1],g[0]);const v=B[L.fontName];v.vertical&&(W+=Math.PI/2);const c=Math.hypot(g[2],g[3]),F=c*f(v.fontFamily,M._isOffscreenCanvasSupported);let S,$;W===0?(S=g[4],$=g[5]-F):(S=g[4]+F*Math.sin(W),$=g[5]-F*Math.cos(W));const tt="calc(var(--scale-factor)*",j=E.style;M._container===M._rootContainer?(j.left=`${(100*S/M._pageWidth).toFixed(2)}%`,j.top=`${(100*$/M._pageHeight).toFixed(2)}%`):(j.left=`${tt}${S.toFixed(2)}px)`,j.top=`${tt}${$.toFixed(2)}px)`),j.fontSize=`${tt}${c.toFixed(2)}px)`,j.fontFamily=v.fontFamily,u.fontSize=c,E.setAttribute("role","presentation"),E.textContent=L.str,E.dir=L.dir,M._fontInspectorEnabled&&(E.dataset.fontName=L.fontName),W!==0&&(u.angle=W*(180/Math.PI));let rt=!1;if(L.str.length>1)rt=!0;else if(L.str!==" "&&L.transform[0]!==L.transform[3]){const it=Math.abs(L.transform[0]),bt=Math.abs(L.transform[3]);it!==bt&&Math.max(it,bt)/Math.min(it,bt)>1.5&&(rt=!0)}rt&&(u.canvasWidth=v.vertical?L.height:L.width),M._textDivProperties.set(E,u),M._isReadableStream&&M._layoutText(E)}function N(M){const{div:L,scale:B,properties:E,ctx:u,prevFontSize:g,prevFontFamily:W}=M,{style:v}=L;let c="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:F}=v,{canvasWidth:S,fontSize:$}=E;(g!==$||W!==F)&&(u.font=`${$*B}px ${F}`,M.prevFontSize=$,M.prevFontFamily=F);const{width:tt}=u.measureText(L.textContent);tt>0&&(c=`scaleX(${S*B/tt})`)}E.angle!==0&&(c=`rotate(${E.angle}deg) ${c}`),c.length>0&&(v.transform=c)}function D(M){if(M._canceled)return;const L=M._textDivs,B=M._capability;if(L.length>o){B.resolve();return}if(!M._isReadableStream)for(const u of L)M._layoutText(u);B.resolve()}class k{constructor({textContentSource:L,container:B,viewport:E,textDivs:u,textDivProperties:g,textContentItemsStr:W,isOffscreenCanvasSupported:v}){var tt;this._textContentSource=L,this._isReadableStream=L instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=u||[],this._textContentItemsStr=W||[],this._isOffscreenCanvasSupported=v,this._fontInspectorEnabled=!!((tt=globalThis.FontInspector)!=null&&tt.enabled),this._reader=null,this._textDivProperties=g||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,v)};const{pageWidth:c,pageHeight:F,pageX:S,pageY:$}=E.rawDims;this._transform=[1,0,0,-1,-S,$+F],this._pageWidth=c,this._pageHeight=F,(0,i.setLayerDimensions)(B,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(L,B){for(const E of L){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),u.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),I(this,E,B)}}_layoutText(L){const B=this._layoutTextParams.properties=this._textDivProperties.get(L);if(this._layoutTextParams.div=L,N(this._layoutTextParams),B.hasText&&this._container.append(L),B.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const L=new n.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:u,done:g})=>{if(g){L.resolve();return}Object.assign(B,u.styles),this._processItems(u.items,B),E()},L.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:u}=this._textContentSource;this._processItems(E,u),L.resolve()}else throw new Error('No "textContentSource" parameter specified.');L.promise.then(()=>{B=null,D(this)},this._capability.reject)}}e.TextLayerRenderTask=k;function T(M){!M.textContentSource&&(M.textContent||M.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),M.textContentSource=M.textContent||M.textContentStream);const{container:L,viewport:B}=M,E=getComputedStyle(L),u=E.getPropertyValue("visibility"),g=parseFloat(E.getPropertyValue("--scale-factor"));u==="visible"&&(!g||Math.abs(g-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const W=new k(M);return W._render(),W}function A({container:M,viewport:L,textDivs:B,textDivProperties:E,isOffscreenCanvasSupported:u,mustRotate:g=!0,mustRescale:W=!0}){if(g&&(0,i.setLayerDimensions)(M,{rotation:L.rotation}),W){const v=b(0,u),F={prevFontSize:null,prevFontFamily:null,div:null,scale:L.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v};for(const S of B)F.properties=E.get(S),F.div=S,N(F)}}},(t,e,s)=>{var f,I,N,D,k,T,A,M,L,B,E,qe,g,Ce,v,Ge,F,Xe;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),o=s(28),d=s(33),P=s(6),m=s(34);const $=class ${constructor({uiManager:j,pageIndex:rt,div:it,accessibilityManager:bt,annotationLayer:w,viewport:X,l10n:ot}){K(this,E);K(this,g);K(this,v);K(this,F);K(this,f,void 0);K(this,I,!1);K(this,N,null);K(this,D,this.pointerup.bind(this));K(this,k,this.pointerdown.bind(this));K(this,T,new Map);K(this,A,!1);K(this,M,!1);K(this,L,!1);K(this,B,void 0);const At=[o.FreeTextEditor,d.InkEditor,m.StampEditor];if(!$._initialized){$._initialized=!0;for(const Ct of At)Ct.initialize(ot)}j.registerEditorTypes(At),yt(this,B,j),this.pageIndex=rt,this.div=it,yt(this,f,bt),yt(this,N,w),this.viewport=X,r(this,B).addLayer(this)}get isEmpty(){return r(this,T).size===0}updateToolbar(j){r(this,B).updateToolbar(j)}updateMode(j=r(this,B).getMode()){dt(this,F,Xe).call(this),j===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),j!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",j===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",j===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",j===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(j){if(!j&&r(this,B).getMode()!==n.AnnotationEditorType.INK)return;if(!j){for(const it of r(this,T).values())if(it.isEmpty()){it.setInBackground();return}}dt(this,g,Ce).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(j){r(this,B).setEditingState(j)}addCommands(j){r(this,B).addCommands(j)}enable(){this.div.style.pointerEvents="auto";const j=new Set;for(const it of r(this,T).values())it.enableEditing(),it.annotationElementId&&j.add(it.annotationElementId);if(!r(this,N))return;const rt=r(this,N).getEditableAnnotations();for(const it of rt){if(it.hide(),r(this,B).isDeletedAnnotationElement(it.data.id)||j.has(it.data.id))continue;const bt=this.deserialize(it);bt&&(this.addOrRebuild(bt),bt.enableEditing())}}disable(){var rt;yt(this,L,!0),this.div.style.pointerEvents="none";const j=new Set;for(const it of r(this,T).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){j.add(it.annotationElementId);continue}(rt=this.getEditableAnnotation(it.annotationElementId))==null||rt.show(),it.remove()}if(r(this,N)){const it=r(this,N).getEditableAnnotations();for(const bt of it){const{id:w}=bt.data;j.has(w)||r(this,B).isDeletedAnnotationElement(w)||bt.show()}}dt(this,F,Xe).call(this),this.isEmpty&&(this.div.hidden=!0),yt(this,L,!1)}getEditableAnnotation(j){var rt;return((rt=r(this,N))==null?void 0:rt.getEditableAnnotation(j))||null}setActiveEditor(j){r(this,B).getActive()!==j&&r(this,B).setActiveEditor(j)}enableClick(){this.div.addEventListener("pointerdown",r(this,k)),this.div.addEventListener("pointerup",r(this,D))}disableClick(){this.div.removeEventListener("pointerdown",r(this,k)),this.div.removeEventListener("pointerup",r(this,D))}attach(j){r(this,T).set(j.id,j);const{annotationElementId:rt}=j;rt&&r(this,B).isDeletedAnnotationElement(rt)&&r(this,B).removeDeletedAnnotationElement(j)}detach(j){var rt;r(this,T).delete(j.id),(rt=r(this,f))==null||rt.removePointerInTextLayer(j.contentDiv),!r(this,L)&&j.annotationElementId&&r(this,B).addDeletedAnnotationElement(j)}remove(j){this.detach(j),r(this,B).removeEditor(j),j.div.contains(document.activeElement)&&setTimeout(()=>{r(this,B).focusMainContainer()},0),j.div.remove(),j.isAttachedToDOM=!1,r(this,M)||this.addInkEditorIfNeeded(!1)}changeParent(j){var rt;j.parent!==this&&(j.annotationElementId&&(r(this,B).addDeletedAnnotationElement(j.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(j),j.annotationElementId=null),this.attach(j),(rt=j.parent)==null||rt.detach(j),j.setParent(this),j.div&&j.isAttachedToDOM&&(j.div.remove(),this.div.append(j.div)))}add(j){if(this.changeParent(j),r(this,B).addEditor(j),this.attach(j),!j.isAttachedToDOM){const rt=j.render();this.div.append(rt),j.isAttachedToDOM=!0}this.moveEditorInDOM(j),j.onceAdded(),r(this,B).addToAnnotationStorage(j)}moveEditorInDOM(j){var it;if(!j.isAttachedToDOM)return;const{activeElement:rt}=document;j.div.contains(rt)&&(j._focusEventsAllowed=!1,setTimeout(()=>{j.div.addEventListener("focusin",()=>{j._focusEventsAllowed=!0},{once:!0}),rt.focus()},0)),(it=r(this,f))==null||it.moveElementInDOM(this.div,j.div,j.contentDiv,!0)}addOrRebuild(j){j.needsToBeRebuilt()?j.rebuild():this.add(j)}addUndoableEditor(j){const rt=()=>j._uiManager.rebuild(j),it=()=>{j.remove()};this.addCommands({cmd:rt,undo:it,mustExec:!1})}getNextId(){return r(this,B).getId()}pasteEditor(j,rt){r(this,B).updateToolbar(j),r(this,B).updateMode(j);const{offsetX:it,offsetY:bt}=dt(this,v,Ge).call(this),w=this.getNextId(),X=dt(this,E,qe).call(this,{parent:this,id:w,x:it,y:bt,uiManager:r(this,B),isCentered:!0,...rt});X&&this.add(X)}deserialize(j){switch(j.annotationType??j.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(j,this,r(this,B));case n.AnnotationEditorType.INK:return d.InkEditor.deserialize(j,this,r(this,B));case n.AnnotationEditorType.STAMP:return m.StampEditor.deserialize(j,this,r(this,B))}return null}addNewEditor(){dt(this,g,Ce).call(this,dt(this,v,Ge).call(this),!0)}setSelected(j){r(this,B).setSelected(j)}toggleSelected(j){r(this,B).toggleSelected(j)}isSelected(j){return r(this,B).isSelected(j)}unselect(j){r(this,B).unselect(j)}pointerup(j){const{isMac:rt}=n.FeatureTest.platform;if(!(j.button!==0||j.ctrlKey&&rt)&&j.target===this.div&&r(this,A)){if(yt(this,A,!1),!r(this,I)){yt(this,I,!0);return}if(r(this,B).getMode()===n.AnnotationEditorType.STAMP){r(this,B).unselectAll();return}dt(this,g,Ce).call(this,j,!1)}}pointerdown(j){if(r(this,A)){yt(this,A,!1);return}const{isMac:rt}=n.FeatureTest.platform;if(j.button!==0||j.ctrlKey&&rt||j.target!==this.div)return;yt(this,A,!0);const it=r(this,B).getActive();yt(this,I,!it||it.isEmpty())}findNewParent(j,rt,it){const bt=r(this,B).findParent(rt,it);return bt===null||bt===this?!1:(bt.changeParent(j),!0)}destroy(){var j,rt;((j=r(this,B).getActive())==null?void 0:j.parent)===this&&r(this,B).setActiveEditor(null);for(const it of r(this,T).values())(rt=r(this,f))==null||rt.removePointerInTextLayer(it.contentDiv),it.setParent(null),it.isAttachedToDOM=!1,it.div.remove();this.div=null,r(this,T).clear(),r(this,B).removeLayer(this)}render({viewport:j}){this.viewport=j,(0,P.setLayerDimensions)(this.div,j);for(const rt of r(this,B).getEditors(this.pageIndex))this.add(rt);this.updateMode()}update({viewport:j}){r(this,B).commitOrRemove(),this.viewport=j,(0,P.setLayerDimensions)(this.div,{rotation:j.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:j,pageHeight:rt}=this.viewport.rawDims;return[j,rt]}};f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakMap,L=new WeakMap,B=new WeakMap,E=new WeakSet,qe=function(j){switch(r(this,B).getMode()){case n.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(j);case n.AnnotationEditorType.INK:return new d.InkEditor(j);case n.AnnotationEditorType.STAMP:return new m.StampEditor(j)}return null},g=new WeakSet,Ce=function(j,rt){const it=this.getNextId(),bt=dt(this,E,qe).call(this,{parent:this,id:it,x:j.offsetX,y:j.offsetY,uiManager:r(this,B),isCentered:rt});return bt&&this.add(bt),bt},v=new WeakSet,Ge=function(){const{x:j,y:rt,width:it,height:bt}=this.div.getBoundingClientRect(),w=Math.max(0,j),X=Math.max(0,rt),ot=Math.min(window.innerWidth,j+it),At=Math.min(window.innerHeight,rt+bt),Ct=(w+ot)/2-j,x=(X+At)/2-rt,[a,l]=this.viewport.rotation%180===0?[Ct,x]:[x,Ct];return{offsetX:a,offsetY:l}},F=new WeakSet,Xe=function(){yt(this,M,!0);for(const j of r(this,T).values())j.isEmpty()&&j.remove();yt(this,M,!1)},Jt($,"_initialized",!1);let b=$;e.AnnotationEditorLayer=b},(t,e,s)=>{var m,b,f,I,N,D,k,T,A,M,xn,B,Pn,u,kn,W,be,c,Ye,S,Rn,tt,Ke;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(5),o=s(4),d=s(29);const rt=class rt extends o.AnnotationEditor{constructor(w){super({...w,name:"freeTextEditor"});K(this,M);K(this,B);K(this,u);K(this,W);K(this,c);K(this,S);K(this,tt);K(this,m,this.editorDivBlur.bind(this));K(this,b,this.editorDivFocus.bind(this));K(this,f,this.editorDivInput.bind(this));K(this,I,this.editorDivKeydown.bind(this));K(this,N,void 0);K(this,D,"");K(this,k,`${this.id}-editor`);K(this,T,void 0);K(this,A,null);yt(this,N,w.color||rt._defaultColor||o.AnnotationEditor._defaultLineColor),yt(this,T,w.fontSize||rt._defaultFontSize)}static get _keyboardManager(){const w=rt.prototype,X=Ct=>Ct.isEmpty(),ot=i.AnnotationEditorUIManager.TRANSLATE_SMALL,At=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],w.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],w.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],w._translateEmpty,{args:[-ot,0],checker:X}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],w._translateEmpty,{args:[-At,0],checker:X}],[["ArrowRight","mac+ArrowRight"],w._translateEmpty,{args:[ot,0],checker:X}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],w._translateEmpty,{args:[At,0],checker:X}],[["ArrowUp","mac+ArrowUp"],w._translateEmpty,{args:[0,-ot],checker:X}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],w._translateEmpty,{args:[0,-At],checker:X}],[["ArrowDown","mac+ArrowDown"],w._translateEmpty,{args:[0,ot],checker:X}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],w._translateEmpty,{args:[0,At],checker:X}]]))}static initialize(w){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(ot=>[ot,w.get(ot)]));const X=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(X.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,X){switch(w){case n.AnnotationEditorParamsType.FREETEXT_SIZE:rt._defaultFontSize=X;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:rt._defaultColor=X;break}}updateParams(w,X){switch(w){case n.AnnotationEditorParamsType.FREETEXT_SIZE:dt(this,M,xn).call(this,X);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:dt(this,B,Pn).call(this,X);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,rt._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,rt._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,T)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,N)]]}_translateEmpty(w,X){this._uiManager.translateSelectedEditors(w,X,!0)}getInitialTranslation(){const w=this.parentScale;return[-rt._internalPadding*w,-(rt._internalPadding+r(this,T))*w]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,I)),this.editorDiv.addEventListener("focus",r(this,b)),this.editorDiv.addEventListener("blur",r(this,m)),this.editorDiv.addEventListener("input",r(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,k)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",r(this,I)),this.editorDiv.removeEventListener("focus",r(this,b)),this.editorDiv.removeEventListener("blur",r(this,m)),this.editorDiv.removeEventListener("input",r(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(w){this._focusEventsAllowed&&(super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var w;if(this.width){dt(this,tt,Ke).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(w=this._initialOptions)!=null&&w.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const w=r(this,D),X=yt(this,D,dt(this,u,kn).call(this).trimEnd());if(w===X)return;const ot=At=>{if(yt(this,D,At),!At){this.remove();return}dt(this,c,Ye).call(this),this._uiManager.rebuild(this),dt(this,W,be).call(this)};this.addCommands({cmd:()=>{ot(X)},undo:()=>{ot(w)},mustExec:!1}),dt(this,W,be).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(w){this.enterInEditMode()}keydown(w){w.target===this.div&&w.key==="Enter"&&(this.enterInEditMode(),w.preventDefault())}editorDivKeydown(w){rt._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}editorDivInput(w){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,X;this.width&&(w=this.x,X=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,k)),this.enableEditing(),rt._l10nPromise.get("editor_free_text2_aria_label").then(At=>{var Ct;return(Ct=this.editorDiv)==null?void 0:Ct.setAttribute("aria-label",At)}),rt._l10nPromise.get("free_text2_default_content").then(At=>{var Ct;return(Ct=this.editorDiv)==null?void 0:Ct.setAttribute("default-content",At)}),this.editorDiv.contentEditable=!0;const{style:ot}=this.editorDiv;if(ot.fontSize=`calc(${r(this,T)}px * var(--scale-factor))`,ot.color=r(this,N),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[At,Ct]=this.parentDimensions;if(this.annotationElementId){const{position:x}=r(this,A);let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[y,V]=this.pageDimensions,[H,Y]=this.pageTranslation;let Q,lt;switch(this.rotation){case 0:Q=w+(x[0]-H)/y,lt=X+this.height-(x[1]-Y)/V;break;case 90:Q=w+(x[0]-H)/y,lt=X-(x[1]-Y)/V,[a,l]=[l,-a];break;case 180:Q=w-this.width+(x[0]-H)/y,lt=X-(x[1]-Y)/V,[a,l]=[-a,-l];break;case 270:Q=w+(x[0]-H-this.height*V)/y,lt=X+(x[1]-Y-this.width*y)/V,[a,l]=[-l,a];break}this.setAt(Q*At,lt*Ct,a,l)}else this.setAt(w*At,X*Ct,this.width*At,this.height*Ct);dt(this,c,Ye).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(w,X,ot){let At=null;if(w instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:x,fontColor:a},rect:l,rotation:y,id:V},textContent:H,textPosition:Y,parent:{page:{pageNumber:Q}}}=w;if(!H||H.length===0)return null;At=w={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:x,value:H.join(`
`),position:Y,pageIndex:Q-1,rect:l,rotation:y,id:V,deleted:!1}}const Ct=super.deserialize(w,X,ot);return yt(Ct,T,w.fontSize),yt(Ct,N,n.Util.makeHexColor(...w.color)),yt(Ct,D,w.value),Ct.annotationElementId=w.id||null,yt(Ct,A,At),Ct}serialize(w=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const X=rt._internalPadding*this.parentScale,ot=this.getRect(X,X),At=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,N)),Ct={annotationType:n.AnnotationEditorType.FREETEXT,color:At,fontSize:r(this,T),value:r(this,D),pageIndex:this.pageIndex,rect:ot,rotation:this.rotation};return w?Ct:this.annotationElementId&&!dt(this,S,Rn).call(this,Ct)?null:(Ct.id=this.annotationElementId,Ct)}};m=new WeakMap,b=new WeakMap,f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakSet,xn=function(w){const X=At=>{this.editorDiv.style.fontSize=`calc(${At}px * var(--scale-factor))`,this.translate(0,-(At-r(this,T))*this.parentScale),yt(this,T,At),dt(this,W,be).call(this)},ot=r(this,T);this.addCommands({cmd:()=>{X(w)},undo:()=>{X(ot)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},B=new WeakSet,Pn=function(w){const X=r(this,N);this.addCommands({cmd:()=>{yt(this,N,this.editorDiv.style.color=w)},undo:()=>{yt(this,N,this.editorDiv.style.color=X)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,kn=function(){const w=this.editorDiv.getElementsByTagName("div");if(w.length===0)return this.editorDiv.innerText;const X=[];for(const ot of w)X.push(ot.innerText.replace(/\r\n?|\n/,""));return X.join(`
`)},W=new WeakSet,be=function(){const[w,X]=this.parentDimensions;let ot;if(this.isAttachedToDOM)ot=this.div.getBoundingClientRect();else{const{currentLayer:At,div:Ct}=this,x=Ct.style.display;Ct.style.display="hidden",At.div.append(this.div),ot=Ct.getBoundingClientRect(),Ct.remove(),Ct.style.display=x}this.rotation%180===this.parentRotation%180?(this.width=ot.width/w,this.height=ot.height/X):(this.width=ot.height/w,this.height=ot.width/X),this.fixAndSetPosition()},c=new WeakSet,Ye=function(){if(this.editorDiv.replaceChildren(),!!r(this,D))for(const w of r(this,D).split(`
`)){const X=document.createElement("div");X.append(w?document.createTextNode(w):document.createElement("br")),this.editorDiv.append(X)}},S=new WeakSet,Rn=function(w){const{value:X,fontSize:ot,color:At,rect:Ct,pageIndex:x}=r(this,A);return w.value!==X||w.fontSize!==ot||w.rect.some((a,l)=>Math.abs(a-Ct[l])>=1)||w.color.some((a,l)=>a!==At[l])||w.pageIndex!==x},tt=new WeakSet,Ke=function(w=!1){if(!this.annotationElementId)return;if(dt(this,W,be).call(this),!w&&(this.width===0||this.height===0)){setTimeout(()=>dt(this,tt,Ke).call(this,!0),0);return}const X=rt._internalPadding*this.parentScale;r(this,A).rect=this.getRect(X,X)},Jt(rt,"_freeTextDefaultContent",""),Jt(rt,"_l10nPromise"),Jt(rt,"_internalPadding",0),Jt(rt,"_defaultColor",null),Jt(rt,"_defaultFontSize",10),Jt(rt,"_type","freetext");let P=rt;e.FreeTextEditor=P},(t,e,s)=>{var l,y,ae,H,Fn,Q,lt,C,R,G,J,ct,ut,wt,Et,mt,St,vt,et,nt,pt,Pt,Je,Bt,Qe,Lt,Ze,$t,zt,Tt,st,ht,Dt,qt,Wt,Kt,Zt,Mn,It,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),i=s(6),o=s(3),d=s(30),P=s(31),m=s(32);const b=1e3,f=9,I=new WeakSet;function N(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class D{static create(O){switch(O.data.annotationType){case n.AnnotationType.LINK:return new T(O);case n.AnnotationType.TEXT:return new A(O);case n.AnnotationType.WIDGET:switch(O.data.fieldType){case"Tx":return new L(O);case"Btn":return O.data.radioButton?new u(O):O.data.checkBox?new E(O):new g(O);case"Ch":return new W(O);case"Sig":return new B(O)}return new M(O);case n.AnnotationType.POPUP:return new v(O);case n.AnnotationType.FREETEXT:return new F(O);case n.AnnotationType.LINE:return new S(O);case n.AnnotationType.SQUARE:return new $(O);case n.AnnotationType.CIRCLE:return new tt(O);case n.AnnotationType.POLYLINE:return new j(O);case n.AnnotationType.CARET:return new it(O);case n.AnnotationType.INK:return new bt(O);case n.AnnotationType.POLYGON:return new rt(O);case n.AnnotationType.HIGHLIGHT:return new w(O);case n.AnnotationType.UNDERLINE:return new X(O);case n.AnnotationType.SQUIGGLY:return new ot(O);case n.AnnotationType.STRIKEOUT:return new At(O);case n.AnnotationType.STAMP:return new Ct(O);case n.AnnotationType.FILEATTACHMENT:return new x(O);default:return new k(O)}}}class k{constructor(O,{isRenderable:_=!1,ignoreBorder:q=!1,createQuadrilaterals:z=!1}={}){K(this,l,!1);this.isRenderable=_,this.data=O.data,this.layer=O.layer,this.linkService=O.linkService,this.downloadManager=O.downloadManager,this.imageResourcesPath=O.imageResourcesPath,this.renderForms=O.renderForms,this.svgFactory=O.svgFactory,this.annotationStorage=O.annotationStorage,this.enableScripting=O.enableScripting,this.hasJSActions=O.hasJSActions,this._fieldObjects=O.fieldObjects,this.parent=O.parent,_&&(this.container=this._createContainer(q)),z&&this._createQuadrilaterals()}_createContainer(O){const{data:_,parent:{page:q,viewport:z}}=this,Z=document.createElement("section");Z.setAttribute("data-annotation-id",_.id),Z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Z.setAttribute("aria-haspopup","dialog"),_.noRotate&&Z.classList.add("norotate");const{pageWidth:gt,pageHeight:kt,pageX:U,pageY:at}=z.rawDims;if(!_.rect||this instanceof v){const{rotation:Nt}=_;return!_.hasOwnCanvas&&Nt!==0&&this.setRotation(Nt,Z),Z}const{width:_t,height:Ft}=N(_.rect),xt=n.Util.normalizeRect([_.rect[0],q.view[3]-_.rect[1]+q.view[1],_.rect[2],q.view[3]-_.rect[3]+q.view[1]]);if(!O&&_.borderStyle.width>0){Z.style.borderWidth=`${_.borderStyle.width}px`;const Nt=_.borderStyle.horizontalCornerRadius,Ht=_.borderStyle.verticalCornerRadius;if(Nt>0||Ht>0){const Xt=`calc(${Nt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;Z.style.borderRadius=Xt}else if(this instanceof u){const Xt=`calc(${_t}px * var(--scale-factor)) / calc(${Ft}px * var(--scale-factor))`;Z.style.borderRadius=Xt}switch(_.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:Z.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:Z.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:Z.style.borderBottomStyle="solid";break}const Gt=_.borderColor||null;Gt?(yt(this,l,!0),Z.style.borderColor=n.Util.makeHexColor(Gt[0]|0,Gt[1]|0,Gt[2]|0)):Z.style.borderWidth=0}Z.style.left=`${100*(xt[0]-U)/gt}%`,Z.style.top=`${100*(xt[1]-at)/kt}%`;const{rotation:Rt}=_;return _.hasOwnCanvas||Rt===0?(Z.style.width=`${100*_t/gt}%`,Z.style.height=`${100*Ft/kt}%`):this.setRotation(Rt,Z),Z}setRotation(O,_=this.container){if(!this.data.rect)return;const{pageWidth:q,pageHeight:z}=this.parent.viewport.rawDims,{width:Z,height:gt}=N(this.data.rect);let kt,U;O%180===0?(kt=100*Z/q,U=100*gt/z):(kt=100*gt/q,U=100*Z/z),_.style.width=`${kt}%`,_.style.height=`${U}%`,_.setAttribute("data-main-rotation",(360-O)%360)}get _commonActions(){const O=(_,q,z)=>{const Z=z.detail[_],gt=Z[0],kt=Z.slice(1);z.target.style[q]=d.ColorConverters[`${gt}_HTML`](kt),this.annotationStorage.setValue(this.data.id,{[q]:d.ColorConverters[`${gt}_rgb`](kt)})};return(0,n.shadow)(this,"_commonActions",{display:_=>{const{display:q}=_.detail,z=q%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:q===1||q===2})},print:_=>{this.annotationStorage.setValue(this.data.id,{noPrint:!_.detail.print})},hidden:_=>{const{hidden:q}=_.detail;this.container.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:q,noView:q})},focus:_=>{setTimeout(()=>_.target.focus({preventScroll:!1}),0)},userName:_=>{_.target.title=_.detail.userName},readonly:_=>{_.target.disabled=_.detail.readonly},required:_=>{this._setRequired(_.target,_.detail.required)},bgColor:_=>{O("bgColor","backgroundColor",_)},fillColor:_=>{O("fillColor","backgroundColor",_)},fgColor:_=>{O("fgColor","color",_)},textColor:_=>{O("textColor","color",_)},borderColor:_=>{O("borderColor","borderColor",_)},strokeColor:_=>{O("strokeColor","borderColor",_)},rotation:_=>{const q=_.detail.rotation;this.setRotation(q),this.annotationStorage.setValue(this.data.id,{rotation:q})}})}_dispatchEventFromSandbox(O,_){const q=this._commonActions;for(const z of Object.keys(_.detail)){const Z=O[z]||q[z];Z==null||Z(_)}}_setDefaultPropertiesFromJS(O){if(!this.enableScripting)return;const _=this.annotationStorage.getRawValue(this.data.id);if(!_)return;const q=this._commonActions;for(const[z,Z]of Object.entries(_)){const gt=q[z];if(gt){const kt={detail:{[z]:Z},target:O};gt(kt),delete _[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:O}=this.data;if(!O)return;const[_,q,z,Z]=this.data.rect;if(O.length===1){const[,{x:Ht,y:Gt},{x:Xt,y:Qt}]=O[0];if(z===Ht&&Z===Gt&&_===Xt&&q===Qt)return}const{style:gt}=this.container;let kt;if(r(this,l)){const{borderColor:Ht,borderWidth:Gt}=gt;gt.borderWidth=0,kt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ht}" stroke-width="${Gt}">`],this.container.classList.add("hasBorder")}const U=z-_,at=Z-q,{svgFactory:_t}=this,Ft=_t.createElement("svg");Ft.classList.add("quadrilateralsContainer"),Ft.setAttribute("width",0),Ft.setAttribute("height",0);const xt=_t.createElement("defs");Ft.append(xt);const Rt=_t.createElement("clipPath"),Nt=`clippath_${this.data.id}`;Rt.setAttribute("id",Nt),Rt.setAttribute("clipPathUnits","objectBoundingBox"),xt.append(Rt);for(const[,{x:Ht,y:Gt},{x:Xt,y:Qt}]of O){const Yt=_t.createElement("rect"),te=(Xt-_)/U,ne=(Z-Gt)/at,ee=(Ht-Xt)/U,re=(Gt-Qt)/at;Yt.setAttribute("x",te),Yt.setAttribute("y",ne),Yt.setAttribute("width",ee),Yt.setAttribute("height",re),Rt.append(Yt),kt==null||kt.push(`<rect vector-effect="non-scaling-stroke" x="${te}" y="${ne}" width="${ee}" height="${re}"/>`)}r(this,l)&&(kt.push("</g></svg>')"),gt.backgroundImage=kt.join("")),this.container.append(Ft),this.container.style.clipPath=`url(#${Nt})`}_createPopup(){const{container:O,data:_}=this;O.setAttribute("aria-haspopup","dialog");const q=new v({data:{color:_.color,titleObj:_.titleObj,modificationDate:_.modificationDate,contentsObj:_.contentsObj,richText:_.richText,parentRect:_.rect,borderStyle:0,id:`popup_${_.id}`,rotation:_.rotation},parent:this.parent,elements:[this]});this.parent.div.append(q.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(O,_=null){const q=[];if(this._fieldObjects){const z=this._fieldObjects[O];if(z)for(const{page:Z,id:gt,exportValues:kt}of z){if(Z===-1||gt===_)continue;const U=typeof kt=="string"?kt:null,at=document.querySelector(`[data-element-id="${gt}"]`);if(at&&!I.has(at)){(0,n.warn)(`_getElementsByName - element not allowed: ${gt}`);continue}q.push({id:gt,exportValue:U,domElement:at})}return q}for(const z of document.getElementsByName(O)){const{exportValue:Z}=z,gt=z.getAttribute("data-element-id");gt!==_&&I.has(z)&&q.push({id:gt,exportValue:Z,domElement:z})}return q}show(){var O;this.container&&(this.container.hidden=!1),(O=this.popup)==null||O.maybeShow()}hide(){var O;this.container&&(this.container.hidden=!0),(O=this.popup)==null||O.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const O=this.getElementsToTriggerPopup();if(Array.isArray(O))for(const _ of O)_.classList.add("highlightArea");else O.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:O,data:{id:_}}=this;this.container.addEventListener("dblclick",()=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("switchannotationeditormode",{source:this,mode:O,editId:_})})}}l=new WeakMap;class T extends k{constructor(_,q=null){super(_,{isRenderable:!0,ignoreBorder:!!(q!=null&&q.ignoreBorder),createQuadrilaterals:!0});K(this,y);K(this,H);this.isTooltipOnly=_.data.isTooltipOnly}render(){const{data:_,linkService:q}=this,z=document.createElement("a");z.setAttribute("data-element-id",_.id);let Z=!1;return _.url?(q.addLinkAttributes(z,_.url,_.newWindow),Z=!0):_.action?(this._bindNamedAction(z,_.action),Z=!0):_.attachment?(this._bindAttachment(z,_.attachment),Z=!0):_.setOCGState?(dt(this,H,Fn).call(this,z,_.setOCGState),Z=!0):_.dest?(this._bindLink(z,_.dest),Z=!0):(_.actions&&(_.actions.Action||_.actions["Mouse Up"]||_.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,_),Z=!0),_.resetForm?(this._bindResetFormAction(z,_.resetForm),Z=!0):this.isTooltipOnly&&!Z&&(this._bindLink(z,""),Z=!0)),this.container.classList.add("linkAnnotation"),Z&&this.container.append(z),this.container}_bindLink(_,q){_.href=this.linkService.getDestinationHash(q),_.onclick=()=>(q&&this.linkService.goToDestination(q),!1),(q||q==="")&&dt(this,y,ae).call(this)}_bindNamedAction(_,q){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeNamedAction(q),!1),dt(this,y,ae).call(this)}_bindAttachment(_,q){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,q.content,q.filename),!1},dt(this,y,ae).call(this)}_bindJSAction(_,q){_.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Z of Object.keys(q.actions)){const gt=z.get(Z);gt&&(_[gt]=()=>{var kt;return(kt=this.linkService.eventBus)==null||kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:q.id,name:Z}}),!1})}_.onclick||(_.onclick=()=>!1),dt(this,y,ae).call(this)}_bindResetFormAction(_,q){const z=_.onclick;if(z||(_.href=this.linkService.getAnchorUrl("")),dt(this,y,ae).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(_.onclick=()=>!1);return}_.onclick=()=>{var Ft;z==null||z();const{fields:Z,refs:gt,include:kt}=q,U=[];if(Z.length!==0||gt.length!==0){const xt=new Set(gt);for(const Rt of Z){const Nt=this._fieldObjects[Rt]||[];for(const{id:Ht}of Nt)xt.add(Ht)}for(const Rt of Object.values(this._fieldObjects))for(const Nt of Rt)xt.has(Nt.id)===kt&&U.push(Nt)}else for(const xt of Object.values(this._fieldObjects))U.push(...xt);const at=this.annotationStorage,_t=[];for(const xt of U){const{id:Rt}=xt;switch(_t.push(Rt),xt.type){case"text":{const Ht=xt.defaultValue||"";at.setValue(Rt,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=xt.defaultValue===xt.exportValues;at.setValue(Rt,{value:Ht});break}case"combobox":case"listbox":{const Ht=xt.defaultValue||"";at.setValue(Rt,{value:Ht});break}default:continue}const Nt=document.querySelector(`[data-element-id="${Rt}"]`);if(Nt){if(!I.has(Nt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Rt}`);continue}}else continue;Nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_t,name:"ResetForm"}})),!1}}}y=new WeakSet,ae=function(){this.container.setAttribute("data-internal-link","")},H=new WeakSet,Fn=function(_,q){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeSetOCGState(q),!1),dt(this,y,ae).call(this)};class A extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_})}render(){this.container.classList.add("textAnnotation");const O=document.createElement("img");return O.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",O.alt="[{{type}} Annotation]",O.dataset.l10nId="text_annotation_type",O.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(O),this.container}}class M extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(O){var _;this.data.hasOwnCanvas&&(((_=O.previousSibling)==null?void 0:_.nodeName)==="CANVAS"&&(O.previousSibling.hidden=!0),O.hidden=!1)}_getKeyModifier(O){const{isWin:_,isMac:q}=n.FeatureTest.platform;return _&&O.ctrlKey||q&&O.metaKey}_setEventListener(O,_,q,z){_.includes("mouse")?O.addEventListener(_,Z=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:z(Z),shift:Z.shiftKey,modifier:this._getKeyModifier(Z)}})}):O.addEventListener(_,Z=>{var gt;(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:q,value:z(Z)}})})}_setEventListeners(O,_,q){var z;for(const[Z,gt]of _)(gt==="Action"||(z=this.data.actions)!=null&&z[gt])&&this._setEventListener(O,Z,gt,q)}_setBackgroundColor(O){const _=this.data.backgroundColor||null;O.style.backgroundColor=_===null?"transparent":n.Util.makeHexColor(_[0],_[1],_[2])}_setTextStyle(O){const _=["left","center","right"],{fontColor:q}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||f,Z=O.style;let gt;const kt=2,U=at=>Math.round(10*at)/10;if(this.data.multiLine){const at=Math.abs(this.data.rect[3]-this.data.rect[1]-kt),_t=Math.round(at/(n.LINE_FACTOR*z))||1,Ft=at/_t;gt=Math.min(z,U(Ft/n.LINE_FACTOR))}else{const at=Math.abs(this.data.rect[3]-this.data.rect[1]-kt);gt=Math.min(z,U(at/n.LINE_FACTOR))}Z.fontSize=`calc(${gt}px * var(--scale-factor))`,Z.color=n.Util.makeHexColor(q[0],q[1],q[2]),this.data.textAlignment!==null&&(Z.textAlign=_[this.data.textAlignment])}_setRequired(O,_){_?O.setAttribute("required",!0):O.removeAttribute("required"),O.setAttribute("aria-required",_)}}class L extends M{constructor(O){const _=O.renderForms||!O.data.hasAppearance&&!!O.data.fieldValue;super(O,{isRenderable:_})}setPropertyOnSiblings(O,_,q,z){const Z=this.annotationStorage;for(const gt of this._getElementsByName(O.name,O.id))gt.domElement&&(gt.domElement[_]=q),Z.setValue(gt.id,{[z]:q})}render(){var z,Z;const O=this.annotationStorage,_=this.data.id;this.container.classList.add("textWidgetAnnotation");let q=null;if(this.renderForms){const gt=O.getValue(_,{value:this.data.fieldValue});let kt=gt.value||"";const U=O.getValue(_,{charLimit:this.data.maxLen}).charLimit;U&&kt.length>U&&(kt=kt.slice(0,U));let at=gt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;at&&this.data.comb&&(at=at.replaceAll(/\s+/g,""));const _t={userValue:kt,formattedValue:at,lastCommittedValue:null,commitKey:1};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=at??kt,this.data.doNotScroll&&(q.style.overflowY="hidden")):(q=document.createElement("input"),q.type="text",q.setAttribute("value",at??kt),this.data.doNotScroll&&(q.style.overflowX="hidden")),this.data.hasOwnCanvas&&(q.hidden=!0),I.add(q),q.setAttribute("data-element-id",_),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=b,this._setRequired(q,this.data.required),U&&(q.maxLength=U),q.addEventListener("input",xt=>{O.setValue(_,{value:xt.target.value}),this.setPropertyOnSiblings(q,"value",xt.target.value,"value"),_t.formattedValue=null}),q.addEventListener("resetform",xt=>{const Rt=this.data.defaultFieldValue??"";q.value=_t.userValue=Rt,_t.formattedValue=null});let Ft=xt=>{const{formattedValue:Rt}=_t;Rt!=null&&(xt.target.value=Rt),xt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",Rt=>{const{target:Nt}=Rt;_t.userValue&&(Nt.value=_t.userValue),_t.lastCommittedValue=Nt.value,_t.commitKey=1}),q.addEventListener("updatefromsandbox",Rt=>{this.showElementAndHideCanvas(Rt.target);const Nt={value(Ht){_t.userValue=Ht.detail.value??"",O.setValue(_,{value:_t.userValue.toString()}),Ht.target.value=_t.userValue},formattedValue(Ht){const{formattedValue:Gt}=Ht.detail;_t.formattedValue=Gt,Gt!=null&&Ht.target!==document.activeElement&&(Ht.target.value=Gt),O.setValue(_,{formattedValue:Gt})},selRange(Ht){Ht.target.setSelectionRange(...Ht.detail.selRange)},charLimit:Ht=>{var Yt;const{charLimit:Gt}=Ht.detail,{target:Xt}=Ht;if(Gt===0){Xt.removeAttribute("maxLength");return}Xt.setAttribute("maxLength",Gt);let Qt=_t.userValue;!Qt||Qt.length<=Gt||(Qt=Qt.slice(0,Gt),Xt.value=_t.userValue=Qt,O.setValue(_,{value:Qt}),(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Qt,willCommit:!0,commitKey:1,selStart:Xt.selectionStart,selEnd:Xt.selectionEnd}}))}};this._dispatchEventFromSandbox(Nt,Rt)}),q.addEventListener("keydown",Rt=>{var Gt;_t.commitKey=1;let Nt=-1;if(Rt.key==="Escape"?Nt=0:Rt.key==="Enter"&&!this.data.multiLine?Nt=2:Rt.key==="Tab"&&(_t.commitKey=3),Nt===-1)return;const{value:Ht}=Rt.target;_t.lastCommittedValue!==Ht&&(_t.lastCommittedValue=Ht,_t.userValue=Ht,(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Ht,willCommit:!0,commitKey:Nt,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}}))});const xt=Ft;Ft=null,q.addEventListener("blur",Rt=>{var Ht;if(!Rt.relatedTarget)return;const{value:Nt}=Rt.target;_t.userValue=Nt,_t.lastCommittedValue!==Nt&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Nt,willCommit:!0,commitKey:_t.commitKey,selStart:Rt.target.selectionStart,selEnd:Rt.target.selectionEnd}})),xt(Rt)}),(Z=this.data.actions)!=null&&Z.Keystroke&&q.addEventListener("beforeinput",Rt=>{var ne;_t.lastCommittedValue=null;const{data:Nt,target:Ht}=Rt,{value:Gt,selectionStart:Xt,selectionEnd:Qt}=Ht;let Yt=Xt,te=Qt;switch(Rt.inputType){case"deleteWordBackward":{const ee=Gt.substring(0,Xt).match(/\w*[^\w]*$/);ee&&(Yt-=ee[0].length);break}case"deleteWordForward":{const ee=Gt.substring(Xt).match(/^[^\w]*\w*/);ee&&(te+=ee[0].length);break}case"deleteContentBackward":Xt===Qt&&(Yt-=1);break;case"deleteContentForward":Xt===Qt&&(te+=1);break}Rt.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Gt,change:Nt||"",willCommit:!1,selStart:Yt,selEnd:te}})}),this._setEventListeners(q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Rt=>Rt.target.value)}if(Ft&&q.addEventListener("blur",Ft),this.data.comb){const Rt=(this.data.rect[2]-this.data.rect[0])/U;q.classList.add("comb"),q.style.letterSpacing=`calc(${Rt}px * var(--scale-factor) - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class B extends M{constructor(O){super(O,{isRenderable:!!O.data.hasOwnCanvas})}}class E extends M{constructor(O){super(O,{isRenderable:O.renderForms})}render(){const O=this.annotationStorage,_=this.data,q=_.id;let z=O.getValue(q,{value:_.exportValue===_.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",O.setValue(q,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Z=document.createElement("input");return I.add(Z),Z.setAttribute("data-element-id",q),Z.disabled=_.readOnly,this._setRequired(Z,this.data.required),Z.type="checkbox",Z.name=_.fieldName,z&&Z.setAttribute("checked",!0),Z.setAttribute("exportValue",_.exportValue),Z.tabIndex=b,Z.addEventListener("change",gt=>{const{name:kt,checked:U}=gt.target;for(const at of this._getElementsByName(kt,q)){const _t=U&&at.exportValue===_.exportValue;at.domElement&&(at.domElement.checked=_t),O.setValue(at.id,{value:_t})}O.setValue(q,{value:U})}),Z.addEventListener("resetform",gt=>{const kt=_.defaultFieldValue||"Off";gt.target.checked=kt===_.exportValue}),this.enableScripting&&this.hasJSActions&&(Z.addEventListener("updatefromsandbox",gt=>{const kt={value(U){U.target.checked=U.detail.value!=="Off",O.setValue(q,{value:U.target.checked})}};this._dispatchEventFromSandbox(kt,gt)}),this._setEventListeners(Z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gt=>gt.target.checked)),this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class u extends M{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const O=this.annotationStorage,_=this.data,q=_.id;let z=O.getValue(q,{value:_.fieldValue===_.buttonValue}).value;typeof z=="string"&&(z=z!==_.buttonValue,O.setValue(q,{value:z}));const Z=document.createElement("input");if(I.add(Z),Z.setAttribute("data-element-id",q),Z.disabled=_.readOnly,this._setRequired(Z,this.data.required),Z.type="radio",Z.name=_.fieldName,z&&Z.setAttribute("checked",!0),Z.tabIndex=b,Z.addEventListener("change",gt=>{const{name:kt,checked:U}=gt.target;for(const at of this._getElementsByName(kt,q))O.setValue(at.id,{value:!1});O.setValue(q,{value:U})}),Z.addEventListener("resetform",gt=>{const kt=_.defaultFieldValue;gt.target.checked=kt!=null&&kt===_.buttonValue}),this.enableScripting&&this.hasJSActions){const gt=_.buttonValue;Z.addEventListener("updatefromsandbox",kt=>{const U={value:at=>{const _t=gt===at.detail.value;for(const Ft of this._getElementsByName(at.target.name)){const xt=_t&&Ft.id===q;Ft.domElement&&(Ft.domElement.checked=xt),O.setValue(Ft.id,{value:xt})}}};this._dispatchEventFromSandbox(U,kt)}),this._setEventListeners(Z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.checked)}return this._setBackgroundColor(Z),this._setDefaultPropertiesFromJS(Z),this.container.append(Z),this.container}}class g extends T{constructor(O){super(O,{ignoreBorder:O.data.hasAppearance})}render(){const O=super.render();O.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(O.title=this.data.alternativeText);const _=O.lastChild;return this.enableScripting&&this.hasJSActions&&_&&(this._setDefaultPropertiesFromJS(_),_.addEventListener("updatefromsandbox",q=>{this._dispatchEventFromSandbox({},q)})),O}}class W extends M{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const O=this.annotationStorage,_=this.data.id,q=O.getValue(_,{value:this.data.fieldValue}),z=document.createElement("select");I.add(z),z.setAttribute("data-element-id",_),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=b;let Z=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",_t=>{const Ft=this.data.defaultFieldValue;for(const xt of z.options)xt.selected=xt.value===Ft});for(const _t of this.data.options){const Ft=document.createElement("option");Ft.textContent=_t.displayValue,Ft.value=_t.exportValue,q.value.includes(_t.exportValue)&&(Ft.setAttribute("selected",!0),Z=!1),z.append(Ft)}let gt=null;if(Z){const _t=document.createElement("option");_t.value=" ",_t.setAttribute("hidden",!0),_t.setAttribute("selected",!0),z.prepend(_t),gt=()=>{_t.remove(),z.removeEventListener("input",gt),gt=null},z.addEventListener("input",gt)}const kt=_t=>{const Ft=_t?"value":"textContent",{options:xt,multiple:Rt}=z;return Rt?Array.prototype.filter.call(xt,Nt=>Nt.selected).map(Nt=>Nt[Ft]):xt.selectedIndex===-1?null:xt[xt.selectedIndex][Ft]};let U=kt(!1);const at=_t=>{const Ft=_t.target.options;return Array.prototype.map.call(Ft,xt=>({displayValue:xt.textContent,exportValue:xt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",_t=>{const Ft={value(xt){gt==null||gt();const Rt=xt.detail.value,Nt=new Set(Array.isArray(Rt)?Rt:[Rt]);for(const Ht of z.options)Ht.selected=Nt.has(Ht.value);O.setValue(_,{value:kt(!0)}),U=kt(!1)},multipleSelection(xt){z.multiple=!0},remove(xt){const Rt=z.options,Nt=xt.detail.remove;Rt[Nt].selected=!1,z.remove(Nt),Rt.length>0&&Array.prototype.findIndex.call(Rt,Gt=>Gt.selected)===-1&&(Rt[0].selected=!0),O.setValue(_,{value:kt(!0),items:at(xt)}),U=kt(!1)},clear(xt){for(;z.length!==0;)z.remove(0);O.setValue(_,{value:null,items:[]}),U=kt(!1)},insert(xt){const{index:Rt,displayValue:Nt,exportValue:Ht}=xt.detail.insert,Gt=z.children[Rt],Xt=document.createElement("option");Xt.textContent=Nt,Xt.value=Ht,Gt?Gt.before(Xt):z.append(Xt),O.setValue(_,{value:kt(!0),items:at(xt)}),U=kt(!1)},items(xt){const{items:Rt}=xt.detail;for(;z.length!==0;)z.remove(0);for(const Nt of Rt){const{displayValue:Ht,exportValue:Gt}=Nt,Xt=document.createElement("option");Xt.textContent=Ht,Xt.value=Gt,z.append(Xt)}z.options.length>0&&(z.options[0].selected=!0),O.setValue(_,{value:kt(!0),items:at(xt)}),U=kt(!1)},indices(xt){const Rt=new Set(xt.detail.indices);for(const Nt of xt.target.options)Nt.selected=Rt.has(Nt.index);O.setValue(_,{value:kt(!0)}),U=kt(!1)},editable(xt){xt.target.disabled=!xt.detail.editable}};this._dispatchEventFromSandbox(Ft,_t)}),z.addEventListener("input",_t=>{var xt;const Ft=kt(!0);O.setValue(_,{value:Ft}),_t.preventDefault(),(xt=this.linkService.eventBus)==null||xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:U,changeEx:Ft,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],_t=>_t.target.value)):z.addEventListener("input",function(_t){O.setValue(_,{value:kt(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class v extends k{constructor(O){var Z,gt,kt;const{data:_,elements:q}=O,z=!!((Z=_.titleObj)!=null&&Z.str||(gt=_.contentsObj)!=null&&gt.str||(kt=_.richText)!=null&&kt.str);super(O,{isRenderable:z}),this.elements=q}render(){this.container.classList.add("popupAnnotation");const O=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),_=[];for(const q of this.elements)q.popup=O,_.push(q.data.id),q.addHighlightArea();return this.container.setAttribute("aria-controls",_.join(",")),this.container}}class c{constructor({container:O,color:_,elements:q,titleObj:z,modificationDate:Z,contentsObj:gt,richText:kt,parent:U,rect:at,parentRect:_t,open:Ft}){K(this,Pt);K(this,Bt);K(this,Lt);K(this,Q,null);K(this,lt,dt(this,Lt,Ze).bind(this));K(this,C,dt(this,Bt,Qe).bind(this));K(this,R,dt(this,Pt,Je).bind(this));K(this,G,null);K(this,J,null);K(this,ct,null);K(this,ut,null);K(this,wt,null);K(this,Et,null);K(this,mt,!1);K(this,St,null);K(this,vt,null);K(this,et,null);K(this,nt,null);K(this,pt,!1);yt(this,J,O),yt(this,nt,z),yt(this,ct,gt),yt(this,et,kt),yt(this,wt,U),yt(this,G,_),yt(this,vt,at),yt(this,Et,_t),yt(this,ut,q);const xt=i.PDFDateString.toDateObject(Z);xt&&yt(this,Q,U.l10n.get("annotation_date_string",{date:xt.toLocaleDateString(),time:xt.toLocaleTimeString()})),this.trigger=q.flatMap(Rt=>Rt.getElementsToTriggerPopup());for(const Rt of this.trigger)Rt.addEventListener("click",r(this,R)),Rt.addEventListener("mouseenter",r(this,C)),Rt.addEventListener("mouseleave",r(this,lt));r(this,J).hidden=!0,Ft&&dt(this,Pt,Je).call(this)}render(){if(r(this,St))return;const{page:{view:O},viewport:{rawDims:{pageWidth:_,pageHeight:q,pageX:z,pageY:Z}}}=r(this,wt),gt=yt(this,St,document.createElement("div"));if(gt.className="popup",r(this,G)){const Yt=gt.style.outlineColor=n.Util.makeHexColor(...r(this,G));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?gt.style.backgroundColor=`color-mix(in srgb, ${Yt} 30%, white)`:gt.style.backgroundColor=n.Util.makeHexColor(...r(this,G).map(ne=>Math.floor(.7*(255-ne)+ne)))}const kt=document.createElement("span");kt.className="header";const U=document.createElement("h1");if(kt.append(U),{dir:U.dir,str:U.textContent}=r(this,nt),gt.append(kt),r(this,Q)){const Yt=document.createElement("span");Yt.classList.add("popupDate"),r(this,Q).then(te=>{Yt.textContent=te}),kt.append(Yt)}const at=r(this,ct),_t=r(this,et);if(_t!=null&&_t.str&&(!(at!=null&&at.str)||at.str===_t.str))m.XfaLayer.render({xfaHtml:_t.html,intent:"richText",div:gt}),gt.lastChild.classList.add("richText","popupContent");else{const Yt=this._formatContents(at);gt.append(Yt)}let Ft=!!r(this,Et),xt=Ft?r(this,Et):r(this,vt);for(const Yt of r(this,ut))if(!xt||n.Util.intersect(Yt.data.rect,xt)!==null){xt=Yt.data.rect,Ft=!0;break}const Rt=n.Util.normalizeRect([xt[0],O[3]-xt[1]+O[1],xt[2],O[3]-xt[3]+O[1]]),Nt=5,Ht=Ft?xt[2]-xt[0]+Nt:0,Gt=Rt[0]+Ht,Xt=Rt[1],{style:Qt}=r(this,J);Qt.left=`${100*(Gt-z)/_}%`,Qt.top=`${100*(Xt-Z)/q}%`,r(this,J).append(gt)}_formatContents({str:O,dir:_}){const q=document.createElement("p");q.classList.add("popupContent"),q.dir=_;const z=O.split(/(?:\r\n?|\n)/);for(let Z=0,gt=z.length;Z<gt;++Z){const kt=z[Z];q.append(document.createTextNode(kt)),Z<gt-1&&q.append(document.createElement("br"))}return q}forceHide(){yt(this,pt,this.isVisible),r(this,pt)&&(r(this,J).hidden=!0)}maybeShow(){r(this,pt)&&(yt(this,pt,!1),r(this,J).hidden=!1)}get isVisible(){return r(this,J).hidden===!1}}Q=new WeakMap,lt=new WeakMap,C=new WeakMap,R=new WeakMap,G=new WeakMap,J=new WeakMap,ct=new WeakMap,ut=new WeakMap,wt=new WeakMap,Et=new WeakMap,mt=new WeakMap,St=new WeakMap,vt=new WeakMap,et=new WeakMap,nt=new WeakMap,pt=new WeakMap,Pt=new WeakSet,Je=function(){yt(this,mt,!r(this,mt)),r(this,mt)?(dt(this,Bt,Qe).call(this),r(this,J).addEventListener("click",r(this,R))):(dt(this,Lt,Ze).call(this),r(this,J).removeEventListener("click",r(this,R)))},Bt=new WeakSet,Qe=function(){r(this,St)||this.render(),this.isVisible?r(this,mt)&&r(this,J).classList.add("focused"):(r(this,J).hidden=!1,r(this,J).style.zIndex=parseInt(r(this,J).style.zIndex)+1e3)},Lt=new WeakSet,Ze=function(){r(this,J).classList.remove("focused"),!(r(this,mt)||!this.isVisible)&&(r(this,J).hidden=!0,r(this,J).style.zIndex=parseInt(r(this,J).style.zIndex)-1e3)};class F extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0}),this.textContent=O.data.textContent,this.textPosition=O.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const O=document.createElement("div");O.classList.add("annotationTextContent"),O.setAttribute("role","comment");for(const _ of this.textContent){const q=document.createElement("span");q.textContent=_,O.append(q)}this.container.append(O)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=F;class S extends k{constructor(_){var z,Z,gt;const q=!!(_.data.popupRef||(z=_.data.titleObj)!=null&&z.str||(Z=_.data.contentsObj)!=null&&Z.str||(gt=_.data.richText)!=null&&gt.str);super(_,{isRenderable:q,ignoreBorder:!0});K(this,$t,null)}render(){this.container.classList.add("lineAnnotation");const _=this.data,{width:q,height:z}=N(_.rect),Z=this.svgFactory.create(q,z,!0),gt=yt(this,$t,this.svgFactory.createElement("svg:line"));return gt.setAttribute("x1",_.rect[2]-_.lineCoordinates[0]),gt.setAttribute("y1",_.rect[3]-_.lineCoordinates[1]),gt.setAttribute("x2",_.rect[2]-_.lineCoordinates[2]),gt.setAttribute("y2",_.rect[3]-_.lineCoordinates[3]),gt.setAttribute("stroke-width",_.borderStyle.width||1),gt.setAttribute("stroke","transparent"),gt.setAttribute("fill","transparent"),Z.append(gt),this.container.append(Z),_.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,$t)}addHighlightArea(){this.container.classList.add("highlightArea")}}$t=new WeakMap;class $ extends k{constructor(_){var z,Z,gt;const q=!!(_.data.popupRef||(z=_.data.titleObj)!=null&&z.str||(Z=_.data.contentsObj)!=null&&Z.str||(gt=_.data.richText)!=null&&gt.str);super(_,{isRenderable:q,ignoreBorder:!0});K(this,zt,null)}render(){this.container.classList.add("squareAnnotation");const _=this.data,{width:q,height:z}=N(_.rect),Z=this.svgFactory.create(q,z,!0),gt=_.borderStyle.width,kt=yt(this,zt,this.svgFactory.createElement("svg:rect"));return kt.setAttribute("x",gt/2),kt.setAttribute("y",gt/2),kt.setAttribute("width",q-gt),kt.setAttribute("height",z-gt),kt.setAttribute("stroke-width",gt||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),_.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class tt extends k{constructor(_){var z,Z,gt;const q=!!(_.data.popupRef||(z=_.data.titleObj)!=null&&z.str||(Z=_.data.contentsObj)!=null&&Z.str||(gt=_.data.richText)!=null&&gt.str);super(_,{isRenderable:q,ignoreBorder:!0});K(this,Tt,null)}render(){this.container.classList.add("circleAnnotation");const _=this.data,{width:q,height:z}=N(_.rect),Z=this.svgFactory.create(q,z,!0),gt=_.borderStyle.width,kt=yt(this,Tt,this.svgFactory.createElement("svg:ellipse"));return kt.setAttribute("cx",q/2),kt.setAttribute("cy",z/2),kt.setAttribute("rx",q/2-gt/2),kt.setAttribute("ry",z/2-gt/2),kt.setAttribute("stroke-width",gt||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),_.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class j extends k{constructor(_){var z,Z,gt;const q=!!(_.data.popupRef||(z=_.data.titleObj)!=null&&z.str||(Z=_.data.contentsObj)!=null&&Z.str||(gt=_.data.richText)!=null&&gt.str);super(_,{isRenderable:q,ignoreBorder:!0});K(this,st,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const _=this.data,{width:q,height:z}=N(_.rect),Z=this.svgFactory.create(q,z,!0);let gt=[];for(const U of _.vertices){const at=U.x-_.rect[0],_t=_.rect[3]-U.y;gt.push(at+","+_t)}gt=gt.join(" ");const kt=yt(this,st,this.svgFactory.createElement(this.svgElementName));return kt.setAttribute("points",gt),kt.setAttribute("stroke-width",_.borderStyle.width||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),Z.append(kt),this.container.append(Z),_.popupRef||this._createPopup(kt,_),this.container}getElementsToTriggerPopup(){return r(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap;class rt extends j{constructor(O){super(O),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class bt extends k{constructor(_){var z,Z,gt;const q=!!(_.data.popupRef||(z=_.data.titleObj)!=null&&z.str||(Z=_.data.contentsObj)!=null&&Z.str||(gt=_.data.richText)!=null&&gt.str);super(_,{isRenderable:q,ignoreBorder:!0});K(this,ht,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const _=this.data,{width:q,height:z}=N(_.rect),Z=this.svgFactory.create(q,z,!0);for(const gt of _.inkLists){let kt=[];for(const at of gt){const _t=at.x-_.rect[0],Ft=_.rect[3]-at.y;kt.push(`${_t},${Ft}`)}kt=kt.join(" ");const U=this.svgFactory.createElement(this.svgElementName);r(this,ht).push(U),U.setAttribute("points",kt),U.setAttribute("stroke-width",_.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),_.popupRef||this._createPopup(U,_),Z.append(U)}return this.container.append(Z),this.container}getElementsToTriggerPopup(){return r(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap,e.InkAnnotationElement=bt;class w extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class X extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ot extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class At extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ct extends k{constructor(O){var q,z,Z;const _=!!(O.data.popupRef||(q=O.data.titleObj)!=null&&q.str||(z=O.data.contentsObj)!=null&&z.str||(Z=O.data.richText)!=null&&Z.str);super(O,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}e.StampAnnotationElement=Ct;class x extends k{constructor(_){var Z;super(_,{isRenderable:!0});K(this,Dt,null);const{filename:q,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(q,!0),this.content=z,(Z=this.linkService.eventBus)==null||Z.dispatch("fileattachmentannotation",{source:this,filename:q,content:z})}render(){var z,Z;this.container.classList.add("fileAttachmentAnnotation");const{data:_}=this;let q;return _.hasAppearance||_.fillAlpha===0?q=document.createElement("div"):(q=document.createElement("img"),q.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(q.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),q.classList.add("popupTriggerArea"),q.addEventListener("dblclick",this._download.bind(this)),yt(this,Dt,q),!_.popupRef&&((z=_.titleObj)!=null&&z.str||(Z=_.contentsObj)!=null&&Z.str||_.richText)&&this._createPopup(),this.container.append(q),this.container}getElementsToTriggerPopup(){return r(this,Dt)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var _;(_=this.downloadManager)==null||_.openOrDownloadData(this.container,this.content,this.filename)}}Dt=new WeakMap;class a{constructor({div:O,accessibilityManager:_,annotationCanvasMap:q,l10n:z,page:Z,viewport:gt}){K(this,Zt);K(this,It);K(this,qt,null);K(this,Wt,null);K(this,Kt,new Map);this.div=O,yt(this,qt,_),yt(this,Wt,q),this.l10n=z,this.page=Z,this.viewport=gt,this.zIndex=0,this.l10n||(this.l10n=P.NullL10n)}async render(O){const{annotations:_}=O,q=this.div;(0,i.setLayerDimensions)(q,this.viewport);const z=new Map,Z={data:null,layer:q,linkService:O.linkService,downloadManager:O.downloadManager,imageResourcesPath:O.imageResourcesPath||"",renderForms:O.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:O.annotationStorage||new o.AnnotationStorage,enableScripting:O.enableScripting===!0,hasJSActions:O.hasJSActions,fieldObjects:O.fieldObjects,parent:this,elements:null};for(const gt of _){if(gt.noHTML)continue;const kt=gt.annotationType===n.AnnotationType.POPUP;if(kt){const _t=z.get(gt.id);if(!_t)continue;Z.elements=_t}else{const{width:_t,height:Ft}=N(gt.rect);if(_t<=0||Ft<=0)continue}Z.data=gt;const U=D.create(Z);if(!U.isRenderable)continue;if(!kt&&gt.popupRef){const _t=z.get(gt.popupRef);_t?_t.push(U):z.set(gt.popupRef,[U])}U.annotationEditorType>0&&r(this,Kt).set(U.data.id,U);const at=U.render();gt.hidden&&(at.style.visibility="hidden"),dt(this,Zt,Mn).call(this,at,gt.id)}dt(this,It,tn).call(this),await this.l10n.translate(q)}update({viewport:O}){const _=this.div;this.viewport=O,(0,i.setLayerDimensions)(_,{rotation:O.rotation}),dt(this,It,tn).call(this),_.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Kt).values())}getEditableAnnotation(O){return r(this,Kt).get(O)}}qt=new WeakMap,Wt=new WeakMap,Kt=new WeakMap,Zt=new WeakSet,Mn=function(O,_){var z;const q=O.firstChild||O;q.id=`${i.AnnotationPrefix}${_}`,this.div.append(O),(z=r(this,qt))==null||z.moveElementInDOM(this.div,O,q,!1)},It=new WeakSet,tn=function(){if(!r(this,Wt))return;const O=this.div;for(const[_,q]of r(this,Wt)){const z=O.querySelector(`[data-annotation-id="${_}"]`);if(!z)continue;const{firstChild:Z}=z;Z?Z.nodeName==="CANVAS"?Z.replaceWith(q):Z.before(q):z.append(q)}r(this,Wt).clear()},e.AnnotationLayer=a},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function n(o){return Math.max(0,Math.min(255,255*o))}class i{static CMYK_G([d,P,m,b]){return["G",1-Math.min(1,.3*d+.59*m+.11*P+b)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=n(d),[d,d,d]}static G_HTML([d]){const P=s(d);return`#${P}${P}${P}`}static RGB_G([d,P,m]){return["G",.3*d+.59*P+.11*m]}static RGB_rgb(d){return d.map(n)}static RGB_HTML(d){return`#${d.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,P,m,b]){return["RGB",1-Math.min(1,d+b),1-Math.min(1,m+b),1-Math.min(1,P+b)]}static CMYK_rgb([d,P,m,b]){return[n(1-Math.min(1,d+b)),n(1-Math.min(1,m+b)),n(1-Math.min(1,P+b))]}static CMYK_HTML(d){const P=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(P)}static RGB_CMYK([d,P,m]){const b=1-d,f=1-P,I=1-m,N=Math.min(b,f,I);return["CMYK",b,f,I,N]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};s.print_progress_percent="{{progress}}%";function n(d,P){switch(d){case"find_match_count":d=`find_match_count[${P.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${P.limit===1?"one":"other"}]`;break}return s[d]||""}function i(d,P){return P?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(m,b)=>b in P?P[b]:"{{"+b+"}}"):d}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,P=null,m=n(d,P)){return i(m,P)},async translate(d){}};e.NullL10n=o},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class i{static setupStorage(d,P,m,b,f){const I=b.getValue(P,{value:null});switch(m.name){case"textarea":if(I.value!==null&&(d.textContent=I.value),f==="print")break;d.addEventListener("input",N=>{b.setValue(P,{value:N.target.value})});break;case"input":if(m.attributes.type==="radio"||m.attributes.type==="checkbox"){if(I.value===m.attributes.xfaOn?d.setAttribute("checked",!0):I.value===m.attributes.xfaOff&&d.removeAttribute("checked"),f==="print")break;d.addEventListener("change",N=>{b.setValue(P,{value:N.target.checked?N.target.getAttribute("xfaOn"):N.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&d.setAttribute("value",I.value),f==="print")break;d.addEventListener("input",N=>{b.setValue(P,{value:N.target.value})})}break;case"select":if(I.value!==null){d.setAttribute("value",I.value);for(const N of m.children)N.attributes.value===I.value?N.attributes.selected=!0:N.attributes.hasOwnProperty("selected")&&delete N.attributes.selected}d.addEventListener("input",N=>{const D=N.target.options,k=D.selectedIndex===-1?"":D[D.selectedIndex].value;b.setValue(P,{value:k})});break}}static setAttributes({html:d,element:P,storage:m=null,intent:b,linkService:f}){const{attributes:I}=P,N=d instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${b}`);for(const[D,k]of Object.entries(I))if(k!=null)switch(D){case"class":k.length&&d.setAttribute(D,k.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",k);break;case"style":Object.assign(d.style,k);break;case"textContent":d.textContent=k;break;default:(!N||D!=="href"&&D!=="newWindow")&&d.setAttribute(D,k)}N&&f.addLinkAttributes(d,I.href,I.newWindow),m&&I.dataId&&this.setupStorage(d,I.dataId,P,m)}static render(d){var T;const P=d.annotationStorage,m=d.linkService,b=d.xfaHtml,f=d.intent||"display",I=document.createElement(b.name);b.attributes&&this.setAttributes({html:I,element:b,intent:f,linkService:m});const N=[[b,-1,I]],D=d.div;if(D.append(I),d.viewport){const A=`matrix(${d.viewport.transform.join(",")})`;D.style.transform=A}f!=="richText"&&D.setAttribute("class","xfaLayer xfaFont");const k=[];for(;N.length>0;){const[A,M,L]=N.at(-1);if(M+1===A.children.length){N.pop();continue}const B=A.children[++N.at(-1)[1]];if(B===null)continue;const{name:E}=B;if(E==="#text"){const g=document.createTextNode(B.value);k.push(g),L.append(g);continue}const u=(T=B==null?void 0:B.attributes)!=null&&T.xmlns?document.createElementNS(B.attributes.xmlns,E):document.createElement(E);if(L.append(u),B.attributes&&this.setAttributes({html:u,element:B,storage:P,intent:f,linkService:m}),B.children&&B.children.length>0)N.push([B,-1,u]);else if(B.value){const g=document.createTextNode(B.value);n.XfaText.shouldBuildText(E)&&k.push(g),u.append(g)}}for(const A of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:k}}static update(d){const P=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=P,d.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{var m,b,f,I,N,D,k,T,A,M,L,B,E,u,g,W,In,c,On,S,Dn,tt,Ln,rt,en,bt,Nn,X,nn,At,Bn,x,jn,l,Hn,V,Un,Y,Vn,lt,ie,R,sn,J,Te,ut,xe,Et,he,St,rn,et,Pe,pt,Wn,Mt,an,Ut,zn,jt,$n,zt,on,st,ke,Dt,de;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),i=s(4),o=s(29),d=s(5);const Wt=class Wt extends i.AnnotationEditor{constructor(ft){super({...ft,name:"inkEditor"});K(this,W);K(this,c);K(this,S);K(this,tt);K(this,rt);K(this,bt);K(this,X);K(this,At);K(this,x);K(this,l);K(this,V);K(this,Y);K(this,lt);K(this,R);K(this,J);K(this,ut);K(this,Et);K(this,St);K(this,et);K(this,jt);K(this,zt);K(this,st);K(this,Dt);K(this,m,0);K(this,b,0);K(this,f,this.canvasContextMenu.bind(this));K(this,I,this.canvasPointermove.bind(this));K(this,N,this.canvasPointerleave.bind(this));K(this,D,this.canvasPointerup.bind(this));K(this,k,this.canvasPointerdown.bind(this));K(this,T,new Path2D);K(this,A,!1);K(this,M,!1);K(this,L,!1);K(this,B,null);K(this,E,0);K(this,u,0);K(this,g,null);this.color=ft.color||null,this.thickness=ft.thickness||null,this.opacity=ft.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ft){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(It=>[It,ft.get(It)]))}static updateDefaultParams(ft,It){switch(ft){case n.AnnotationEditorParamsType.INK_THICKNESS:Wt._defaultThickness=It;break;case n.AnnotationEditorParamsType.INK_COLOR:Wt._defaultColor=It;break;case n.AnnotationEditorParamsType.INK_OPACITY:Wt._defaultOpacity=It/100;break}}updateParams(ft,It){switch(ft){case n.AnnotationEditorParamsType.INK_THICKNESS:dt(this,W,In).call(this,It);break;case n.AnnotationEditorParamsType.INK_COLOR:dt(this,c,On).call(this,It);break;case n.AnnotationEditorParamsType.INK_OPACITY:dt(this,S,Dn).call(this,It);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Wt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Wt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Wt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Wt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Wt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Wt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(dt(this,J,Te).call(this),dt(this,ut,xe).call(this)),this.isAttachedToDOM||(this.parent.add(this),dt(this,Et,he).call(this)),dt(this,Dt,de).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,B).disconnect(),yt(this,B,null),super.remove())}setParent(ft){!this.parent&&ft?this._uiManager.removeShouldRescale(this):this.parent&&ft===null&&this._uiManager.addShouldRescale(this),super.setParent(ft)}onScaleChanging(){const[ft,It]=this.parentDimensions,Vt=this.width*ft,Ot=this.height*It;this.setDimensions(Vt,Ot)}enableEditMode(){r(this,A)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",r(this,k)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,k)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,A)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),yt(this,A,!0),this.div.classList.add("disabled"),dt(this,Dt,de).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ft){this._focusEventsAllowed&&(super.focusin(ft),this.enableEditMode())}canvasPointerdown(ft){ft.button!==0||!this.isInEditMode()||r(this,A)||(this.setInForeground(),ft.preventDefault(),ft.type!=="mouse"&&this.div.focus(),dt(this,bt,Nn).call(this,ft.offsetX,ft.offsetY))}canvasContextMenu(ft){ft.preventDefault()}canvasPointermove(ft){ft.preventDefault(),dt(this,X,nn).call(this,ft.offsetX,ft.offsetY)}canvasPointerup(ft){ft.preventDefault(),dt(this,R,sn).call(this,ft)}canvasPointerleave(ft){dt(this,R,sn).call(this,ft)}get isResizable(){return!this.isEmpty()&&r(this,A)}render(){if(this.div)return this.div;let ft,It;this.width&&(ft=this.x,It=this.y),super.render(),Wt._l10nPromise.get("editor_ink2_aria_label").then(q=>{var z;return(z=this.div)==null?void 0:z.setAttribute("aria-label",q)});const[Vt,Ot,O,_]=dt(this,tt,Ln).call(this);if(this.setAt(Vt,Ot,0,0),this.setDims(O,_),dt(this,J,Te).call(this),this.width){const[q,z]=this.parentDimensions;this.setAspectRatio(this.width*q,this.height*z),this.setAt(ft*q,It*z,this.width*q,this.height*z),yt(this,L,!0),dt(this,Et,he).call(this),this.setDims(this.width*q,this.height*z),dt(this,lt,ie).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return dt(this,ut,xe).call(this),this.div}setDimensions(ft,It){const Vt=Math.round(ft),Ot=Math.round(It);if(r(this,E)===Vt&&r(this,u)===Ot)return;yt(this,E,Vt),yt(this,u,Ot),this.canvas.style.visibility="hidden";const[O,_]=this.parentDimensions;this.width=ft/O,this.height=It/_,this.fixAndSetPosition(),r(this,A)&&dt(this,St,rn).call(this,ft,It),dt(this,Et,he).call(this),dt(this,lt,ie).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ft,It,Vt){var Ft,xt,Rt;if(ft instanceof o.InkAnnotationElement)return null;const Ot=super.deserialize(ft,It,Vt);Ot.thickness=ft.thickness,Ot.color=n.Util.makeHexColor(...ft.color),Ot.opacity=ft.opacity;const[O,_]=Ot.pageDimensions,q=Ot.width*O,z=Ot.height*_,Z=Ot.parentScale,gt=ft.thickness/2;yt(Ot,A,!0),yt(Ot,E,Math.round(q)),yt(Ot,u,Math.round(z));const{paths:kt,rect:U,rotation:at}=ft;for(let{bezier:Nt}of kt){Nt=dt(Ft=Wt,Ut,zn).call(Ft,Nt,U,at);const Ht=[];Ot.paths.push(Ht);let Gt=Z*(Nt[0]-gt),Xt=Z*(Nt[1]-gt);for(let Yt=2,te=Nt.length;Yt<te;Yt+=6){const ne=Z*(Nt[Yt]-gt),ee=Z*(Nt[Yt+1]-gt),re=Z*(Nt[Yt+2]-gt),Yn=Z*(Nt[Yt+3]-gt),hn=Z*(Nt[Yt+4]-gt),dn=Z*(Nt[Yt+5]-gt);Ht.push([[Gt,Xt],[ne,ee],[re,Yn],[hn,dn]]),Gt=hn,Xt=dn}const Qt=dt(this,pt,Wn).call(this,Ht);Ot.bezierPath2D.push(Qt)}const _t=dt(xt=Ot,zt,on).call(xt);return yt(Ot,b,Math.max(i.AnnotationEditor.MIN_SIZE,_t[2]-_t[0])),yt(Ot,m,Math.max(i.AnnotationEditor.MIN_SIZE,_t[3]-_t[1])),dt(Rt=Ot,St,rn).call(Rt,q,z),Ot}serialize(){if(this.isEmpty())return null;const ft=this.getRect(0,0),It=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:It,thickness:this.thickness,opacity:this.opacity,paths:dt(this,jt,$n).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ft),pageIndex:this.pageIndex,rect:ft,rotation:this.rotation}}};m=new WeakMap,b=new WeakMap,f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakMap,L=new WeakMap,B=new WeakMap,E=new WeakMap,u=new WeakMap,g=new WeakMap,W=new WeakSet,In=function(ft){const It=this.thickness;this.addCommands({cmd:()=>{this.thickness=ft,dt(this,Dt,de).call(this)},undo:()=>{this.thickness=It,dt(this,Dt,de).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,On=function(ft){const It=this.color;this.addCommands({cmd:()=>{this.color=ft,dt(this,lt,ie).call(this)},undo:()=>{this.color=It,dt(this,lt,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Dn=function(ft){ft/=100;const It=this.opacity;this.addCommands({cmd:()=>{this.opacity=ft,dt(this,lt,ie).call(this)},undo:()=>{this.opacity=It,dt(this,lt,ie).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},tt=new WeakSet,Ln=function(){const{parentRotation:ft,parentDimensions:[It,Vt]}=this;switch(ft){case 90:return[0,Vt,Vt,It];case 180:return[It,Vt,It,Vt];case 270:return[It,0,Vt,It];default:return[0,0,It,Vt]}},rt=new WeakSet,en=function(){const{ctx:ft,color:It,opacity:Vt,thickness:Ot,parentScale:O,scaleFactor:_}=this;ft.lineWidth=Ot*O/_,ft.lineCap="round",ft.lineJoin="round",ft.miterLimit=10,ft.strokeStyle=`${It}${(0,d.opacityToHex)(Vt)}`},bt=new WeakSet,Nn=function(ft,It){this.canvas.addEventListener("contextmenu",r(this,f)),this.canvas.addEventListener("pointerleave",r(this,N)),this.canvas.addEventListener("pointermove",r(this,I)),this.canvas.addEventListener("pointerup",r(this,D)),this.canvas.removeEventListener("pointerdown",r(this,k)),this.isEditing=!0,r(this,L)||(yt(this,L,!0),dt(this,Et,he).call(this),this.thickness||(this.thickness=Wt._defaultThickness),this.color||(this.color=Wt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Wt._defaultOpacity)),this.currentPath.push([ft,It]),yt(this,M,!1),dt(this,rt,en).call(this),yt(this,g,()=>{dt(this,l,Hn).call(this),r(this,g)&&window.requestAnimationFrame(r(this,g))}),window.requestAnimationFrame(r(this,g))},X=new WeakSet,nn=function(ft,It){const[Vt,Ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&ft===Vt&&It===Ot)return;const O=this.currentPath;let _=r(this,T);if(O.push([ft,It]),yt(this,M,!0),O.length<=2){_.moveTo(...O[0]),_.lineTo(ft,It);return}O.length===3&&(yt(this,T,_=new Path2D),_.moveTo(...O[0])),dt(this,V,Un).call(this,_,...O.at(-3),...O.at(-2),ft,It)},At=new WeakSet,Bn=function(){if(this.currentPath.length===0)return;const ft=this.currentPath.at(-1);r(this,T).lineTo(...ft)},x=new WeakSet,jn=function(ft,It){yt(this,g,null),ft=Math.min(Math.max(ft,0),this.canvas.width),It=Math.min(Math.max(It,0),this.canvas.height),dt(this,X,nn).call(this,ft,It),dt(this,At,Bn).call(this);let Vt;if(this.currentPath.length!==1)Vt=dt(this,Y,Vn).call(this);else{const z=[ft,It];Vt=[[z,z.slice(),z.slice(),z]]}const Ot=r(this,T),O=this.currentPath;this.currentPath=[],yt(this,T,new Path2D);const _=()=>{this.allRawPaths.push(O),this.paths.push(Vt),this.bezierPath2D.push(Ot),this.rebuild()},q=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(dt(this,J,Te).call(this),dt(this,ut,xe).call(this)),dt(this,Dt,de).call(this))};this.addCommands({cmd:_,undo:q,mustExec:!0})},l=new WeakSet,Hn=function(){if(!r(this,M))return;yt(this,M,!1);const ft=Math.ceil(this.thickness*this.parentScale),It=this.currentPath.slice(-3),Vt=It.map(_=>_[0]),Ot=It.map(_=>_[1]);Math.min(...Vt)-ft,Math.max(...Vt)+ft,Math.min(...Ot)-ft,Math.max(...Ot)+ft;const{ctx:O}=this;O.save(),O.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _ of this.bezierPath2D)O.stroke(_);O.stroke(r(this,T)),O.restore()},V=new WeakSet,Un=function(ft,It,Vt,Ot,O,_,q){const z=(It+Ot)/2,Z=(Vt+O)/2,gt=(Ot+_)/2,kt=(O+q)/2;ft.bezierCurveTo(z+2*(Ot-z)/3,Z+2*(O-Z)/3,gt+2*(Ot-gt)/3,kt+2*(O-kt)/3,gt,kt)},Y=new WeakSet,Vn=function(){const ft=this.currentPath;if(ft.length<=2)return[[ft[0],ft[0],ft.at(-1),ft.at(-1)]];const It=[];let Vt,[Ot,O]=ft[0];for(Vt=1;Vt<ft.length-2;Vt++){const[U,at]=ft[Vt],[_t,Ft]=ft[Vt+1],xt=(U+_t)/2,Rt=(at+Ft)/2,Nt=[Ot+2*(U-Ot)/3,O+2*(at-O)/3],Ht=[xt+2*(U-xt)/3,Rt+2*(at-Rt)/3];It.push([[Ot,O],Nt,Ht,[xt,Rt]]),[Ot,O]=[xt,Rt]}const[_,q]=ft[Vt],[z,Z]=ft[Vt+1],gt=[Ot+2*(_-Ot)/3,O+2*(q-O)/3],kt=[z+2*(_-z)/3,Z+2*(q-Z)/3];return It.push([[Ot,O],gt,kt,[z,Z]]),It},lt=new WeakSet,ie=function(){if(this.isEmpty()){dt(this,et,Pe).call(this);return}dt(this,rt,en).call(this);const{canvas:ft,ctx:It}=this;It.setTransform(1,0,0,1,0,0),It.clearRect(0,0,ft.width,ft.height),dt(this,et,Pe).call(this);for(const Vt of this.bezierPath2D)It.stroke(Vt)},R=new WeakSet,sn=function(ft){this.canvas.removeEventListener("pointerleave",r(this,N)),this.canvas.removeEventListener("pointermove",r(this,I)),this.canvas.removeEventListener("pointerup",r(this,D)),this.canvas.addEventListener("pointerdown",r(this,k)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",r(this,f))},10),dt(this,x,jn).call(this,ft.offsetX,ft.offsetY),this.addToAnnotationStorage(),this.setInBackground()},J=new WeakSet,Te=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Wt._l10nPromise.get("editor_ink_canvas_aria_label").then(ft=>{var It;return(It=this.canvas)==null?void 0:It.setAttribute("aria-label",ft)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ut=new WeakSet,xe=function(){yt(this,B,new ResizeObserver(ft=>{const It=ft[0].contentRect;It.width&&It.height&&this.setDimensions(It.width,It.height)})),r(this,B).observe(this.div)},Et=new WeakSet,he=function(){if(!r(this,L))return;const[ft,It]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ft),this.canvas.height=Math.ceil(this.height*It),dt(this,et,Pe).call(this)},St=new WeakSet,rn=function(ft,It){const Vt=dt(this,st,ke).call(this),Ot=(ft-Vt)/r(this,b),O=(It-Vt)/r(this,m);this.scaleFactor=Math.min(Ot,O)},et=new WeakSet,Pe=function(){const ft=dt(this,st,ke).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ft,this.translationY*this.scaleFactor+ft)},pt=new WeakSet,Wn=function(ft){const It=new Path2D;for(let Vt=0,Ot=ft.length;Vt<Ot;Vt++){const[O,_,q,z]=ft[Vt];Vt===0&&It.moveTo(...O),It.bezierCurveTo(_[0],_[1],q[0],q[1],z[0],z[1])}return It},Mt=new WeakSet,an=function(ft,It,Vt){const[Ot,O,_,q]=It;switch(Vt){case 0:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]+=Ot,ft[z+1]=q-ft[z+1];break;case 90:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=ft[z+1]+Ot,ft[z+1]=gt+O}break;case 180:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]=_-ft[z],ft[z+1]+=O;break;case 270:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=_-ft[z+1],ft[z+1]=q-gt}break;default:throw new Error("Invalid rotation")}return ft},Ut=new WeakSet,zn=function(ft,It,Vt){const[Ot,O,_,q]=It;switch(Vt){case 0:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]-=Ot,ft[z+1]=q-ft[z+1];break;case 90:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=ft[z+1]-O,ft[z+1]=gt-Ot}break;case 180:for(let z=0,Z=ft.length;z<Z;z+=2)ft[z]=_-ft[z],ft[z+1]-=O;break;case 270:for(let z=0,Z=ft.length;z<Z;z+=2){const gt=ft[z];ft[z]=q-ft[z+1],ft[z+1]=_-gt}break;default:throw new Error("Invalid rotation")}return ft},jt=new WeakSet,$n=function(ft,It,Vt,Ot){var Z,gt;const O=[],_=this.thickness/2,q=ft*It+_,z=ft*Vt+_;for(const kt of this.paths){const U=[],at=[];for(let _t=0,Ft=kt.length;_t<Ft;_t++){const[xt,Rt,Nt,Ht]=kt[_t],Gt=ft*xt[0]+q,Xt=ft*xt[1]+z,Qt=ft*Rt[0]+q,Yt=ft*Rt[1]+z,te=ft*Nt[0]+q,ne=ft*Nt[1]+z,ee=ft*Ht[0]+q,re=ft*Ht[1]+z;_t===0&&(U.push(Gt,Xt),at.push(Gt,Xt)),U.push(Qt,Yt,te,ne,ee,re),at.push(Qt,Yt),_t===Ft-1&&at.push(ee,re)}O.push({bezier:dt(Z=Wt,Mt,an).call(Z,U,Ot,this.rotation),points:dt(gt=Wt,Mt,an).call(gt,at,Ot,this.rotation)})}return O},zt=new WeakSet,on=function(){let ft=1/0,It=-1/0,Vt=1/0,Ot=-1/0;for(const O of this.paths)for(const[_,q,z,Z]of O){const gt=n.Util.bezierBoundingBox(..._,...q,...z,...Z);ft=Math.min(ft,gt[0]),Vt=Math.min(Vt,gt[1]),It=Math.max(It,gt[2]),Ot=Math.max(Ot,gt[3])}return[ft,Vt,It,Ot]},st=new WeakSet,ke=function(){return r(this,A)?Math.ceil(this.thickness*this.parentScale):0},Dt=new WeakSet,de=function(ft=!1){if(this.isEmpty())return;if(!r(this,A)){dt(this,lt,ie).call(this);return}const It=dt(this,zt,on).call(this),Vt=dt(this,st,ke).call(this);yt(this,b,Math.max(i.AnnotationEditor.MIN_SIZE,It[2]-It[0])),yt(this,m,Math.max(i.AnnotationEditor.MIN_SIZE,It[3]-It[1]));const Ot=Math.ceil(Vt+r(this,b)*this.scaleFactor),O=Math.ceil(Vt+r(this,m)*this.scaleFactor),[_,q]=this.parentDimensions;this.width=Ot/_,this.height=O/q,this.setAspectRatio(Ot,O);const z=this.translationX,Z=this.translationY;this.translationX=-It[0],this.translationY=-It[1],dt(this,Et,he).call(this),dt(this,lt,ie).call(this),yt(this,E,Ot),yt(this,u,O),this.setDims(Ot,O);const gt=ft?Vt/this.scaleFactor/2:0;this.translate(z-this.translationX-gt,Z-this.translationY-gt)},K(Wt,pt),K(Wt,Mt),K(Wt,Ut),Jt(Wt,"_defaultColor",null),Jt(Wt,"_defaultOpacity",1),Jt(Wt,"_defaultThickness",1),Jt(Wt,"_l10nPromise"),Jt(Wt,"_type","ink");let P=Wt;e.InkEditor=P},(t,e,s)=>{var m,b,f,I,N,D,k,T,A,M,L,_e,E,Ae,g,Re,v,ln,F,qn,$,Gn,j,cn,it,Fe,w,Xn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),i=s(4),o=s(6),d=s(29);const ot=class ot extends i.AnnotationEditor{constructor(x){super({...x,name:"stampEditor"});K(this,L);K(this,E);K(this,g);K(this,v);K(this,F);K(this,$);K(this,j);K(this,it);K(this,w);K(this,m,null);K(this,b,null);K(this,f,null);K(this,I,null);K(this,N,null);K(this,D,null);K(this,k,null);K(this,T,null);K(this,A,!1);K(this,M,!1);yt(this,I,x.bitmapUrl),yt(this,N,x.bitmapFile)}static get supportedTypes(){const x=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",x.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(x){return this.supportedTypes.includes(x)}static paste(x,a){a.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:x.getAsFile()})}remove(){var x,a;r(this,b)&&(yt(this,m,null),this._uiManager.imageManager.deleteId(r(this,b)),(x=r(this,D))==null||x.remove(),yt(this,D,null),(a=r(this,k))==null||a.disconnect(),yt(this,k,null)),super.remove()}rebuild(){if(!this.parent){r(this,b)&&dt(this,g,Re).call(this);return}super.rebuild(),this.div!==null&&(r(this,b)&&dt(this,g,Re).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(r(this,f)||r(this,m)||r(this,I)||r(this,N))}get isResizable(){return!0}render(){if(this.div)return this.div;let x,a;if(this.width&&(x=this.x,a=this.y),super.render(),this.div.hidden=!0,r(this,m)?dt(this,v,ln).call(this):dt(this,g,Re).call(this),this.width){const[l,y]=this.parentDimensions;this.setAt(x*l,a*y,this.width*l,this.height*y)}return this.div}static deserialize(x,a,l){if(x instanceof d.StampAnnotationElement)return null;const y=super.deserialize(x,a,l),{rect:V,bitmapUrl:H,bitmapId:Y,isSvg:Q}=x;Y&&l.imageManager.isValidId(Y)?yt(y,b,Y):yt(y,I,H),yt(y,A,Q);const[lt,C]=y.pageDimensions;return y.width=(V[2]-V[0])/lt,y.height=(V[3]-V[1])/C,y}serialize(x=!1,a=null){if(this.isEmpty())return null;const l={annotationType:n.AnnotationEditorType.STAMP,bitmapId:r(this,b),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,A)};if(x)return l.bitmapUrl=dt(this,it,Fe).call(this,!0),l;if(a===null)return l;a.stamps||(a.stamps=new Map);const y=r(this,A)?(l.rect[2]-l.rect[0])*(l.rect[3]-l.rect[1]):null;if(!a.stamps.has(r(this,b)))a.stamps.set(r(this,b),{area:y,serialized:l}),l.bitmap=dt(this,it,Fe).call(this,!1);else if(r(this,A)){const V=a.stamps.get(r(this,b));y>V.area&&(V.area=y,V.serialized.bitmap.close(),V.serialized.bitmap=dt(this,it,Fe).call(this,!1))}return l}};m=new WeakMap,b=new WeakMap,f=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,k=new WeakMap,T=new WeakMap,A=new WeakMap,M=new WeakMap,L=new WeakSet,_e=function(x,a=!1){if(!x){this.remove();return}yt(this,m,x.bitmap),a||(yt(this,b,x.id),yt(this,A,x.isSvg)),dt(this,v,ln).call(this)},E=new WeakSet,Ae=function(){yt(this,f,null),this._uiManager.enableWaiting(!1),r(this,D)&&this.div.focus()},g=new WeakSet,Re=function(){if(r(this,b)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(r(this,b)).then(a=>dt(this,L,_e).call(this,a,!0)).finally(()=>dt(this,E,Ae).call(this));return}if(r(this,I)){const a=r(this,I);yt(this,I,null),this._uiManager.enableWaiting(!0),yt(this,f,this._uiManager.imageManager.getFromUrl(a).then(l=>dt(this,L,_e).call(this,l)).finally(()=>dt(this,E,Ae).call(this)));return}if(r(this,N)){const a=r(this,N);yt(this,N,null),this._uiManager.enableWaiting(!0),yt(this,f,this._uiManager.imageManager.getFromFile(a).then(l=>dt(this,L,_e).call(this,l)).finally(()=>dt(this,E,Ae).call(this)));return}const x=document.createElement("input");x.type="file",x.accept=ot.supportedTypesStr,yt(this,f,new Promise(a=>{x.addEventListener("change",async()=>{if(!x.files||x.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(x.files[0]);dt(this,L,_e).call(this,l)}a()}),x.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>dt(this,E,Ae).call(this))),x.click()},v=new WeakSet,ln=function(){const{div:x}=this;let{width:a,height:l}=r(this,m);const[y,V]=this.pageDimensions,H=.75;if(this.width)a=this.width*y,l=this.height*V;else if(a>H*y||l>H*V){const C=Math.min(H*y/a,H*V/l);a*=C,l*=C}const[Y,Q]=this.parentDimensions;this.setDims(a*Y/y,l*Q/V),this._uiManager.enableWaiting(!1);const lt=yt(this,D,document.createElement("canvas"));x.append(lt),x.hidden=!1,dt(this,j,cn).call(this,a,l),dt(this,w,Xn).call(this),r(this,M)||(this.parent.addUndoableEditor(this),yt(this,M,!0))},F=new WeakSet,qn=function(x,a){var H;const[l,y]=this.parentDimensions;this.width=x/l,this.height=a/y,this.setDims(x,a),(H=this._initialOptions)!=null&&H.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,r(this,T)!==null&&clearTimeout(r(this,T)),yt(this,T,setTimeout(()=>{yt(this,T,null),dt(this,j,cn).call(this,x,a)},200))},$=new WeakSet,Gn=function(x,a){const{width:l,height:y}=r(this,m);let V=l,H=y,Y=r(this,m);for(;V>2*x||H>2*a;){const Q=V,lt=H;V>2*x&&(V=V>=16384?Math.floor(V/2)-1:Math.ceil(V/2)),H>2*a&&(H=H>=16384?Math.floor(H/2)-1:Math.ceil(H/2));const C=new OffscreenCanvas(V,H);C.getContext("2d").drawImage(Y,0,0,Q,lt,0,0,V,H),Y=C.transferToImageBitmap()}return Y},j=new WeakSet,cn=function(x,a){x=Math.ceil(x),a=Math.ceil(a);const l=r(this,D);if(!l||l.width===x&&l.height===a)return;l.width=x,l.height=a;const y=r(this,A)?r(this,m):dt(this,$,Gn).call(this,x,a),V=l.getContext("2d");V.filter=this._uiManager.hcmFilter,V.drawImage(y,0,0,y.width,y.height,0,0,x,a)},it=new WeakSet,Fe=function(x){if(x){if(r(this,A)){const y=this._uiManager.imageManager.getSvgUrl(r(this,b));if(y)return y}const a=document.createElement("canvas");return{width:a.width,height:a.height}=r(this,m),a.getContext("2d").drawImage(r(this,m),0,0),a.toDataURL()}if(r(this,A)){const[a,l]=this.pageDimensions,y=Math.round(this.width*a*o.PixelsPerInch.PDF_TO_CSS_UNITS),V=Math.round(this.height*l*o.PixelsPerInch.PDF_TO_CSS_UNITS),H=new OffscreenCanvas(y,V);return H.getContext("2d").drawImage(r(this,m),0,0,r(this,m).width,r(this,m).height,0,0,y,V),H.transferToImageBitmap()}return structuredClone(r(this,m))},w=new WeakSet,Xn=function(){yt(this,k,new ResizeObserver(x=>{const a=x[0].contentRect;a.width&&a.height&&dt(this,F,qn).call(this,a.width,a.height)})),r(this,k).observe(this.div)},Jt(ot,"_type","stamp");let P=ot;e.StampEditor=P}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return P.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return m.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),P=__w_pdfjs_require__(29),m=__w_pdfjs_require__(14),b=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const _hoisted_1={key:0,tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},_hoisted_2={class:"relative w-full max-w-md max-h-full"},_hoisted_3={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},_hoisted_4=createBaseVNode("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[createBaseVNode("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),_hoisted_5=createBaseVNode("span",{class:"sr-only"},"Close modal",-1),_hoisted_6=[_hoisted_4,_hoisted_5],_hoisted_7={class:"px-6 py-6 lg:px-8"},_hoisted_8=createBaseVNode("h3",{class:"mb-4 text-xl font-medium text-gray-900 dark:text-white"},"PDF為密碼保護",-1),_hoisted_9={class:"space-y-6",action:"#"},_hoisted_10=createBaseVNode("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Password",-1),_hoisted_11={key:0,tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},_hoisted_12=createBaseVNode("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[createBaseVNode("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),_hoisted_13=createBaseVNode("span",{class:"sr-only"},"Close modal",-1),_hoisted_14=[_hoisted_12,_hoisted_13],_hoisted_15=createBaseVNode("h3",{class:"mb-4 text-xl font-medium text-gray-900 dark:text-white"},"無法處理檔案",-1),_hoisted_16=createBaseVNode("div",{class:"text-white"}," 請確認是否為星展銀行的信用卡帳單 ",-1),_hoisted_17={class:"flex w-full flex-col items-center min-h-[calc(100dvh)] bg-white dark:bg-gray-900 transition-all duration-200 overflow-x-auto relative"},_hoisted_18={class:"flex items-center mt-4 w-9/12 lg:w-auto self-start lg:self-center ml-2 lg:ml-0"},_hoisted_19={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},_hoisted_20=createBaseVNode("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1),_hoisted_21=[_hoisted_20],_hoisted_22={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},_hoisted_23=createBaseVNode("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1),_hoisted_24=[_hoisted_23],_hoisted_25={class:"w-full flex flex-col lg:flex-row mt-6 items-start lg:items-start px-4 pb-6"},_hoisted_26={key:0,class:"w-full lg:w-auto p-4 bg-white border border-gray-200 rounded-lg shadow lg:p-5 dark:bg-gray-800 dark:border-gray-700"},_hoisted_27=createBaseVNode("div",{class:"flex items-center justify-between mb-4"},[createBaseVNode("h5",{class:"text-xl font-bold leading-none text-gray-900 dark:text-white"},"Summary")],-1),_hoisted_28={class:"flow-root"},_hoisted_29={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-700"},_hoisted_30={class:"py-2 sm:py-3"},_hoisted_31={class:"flex items-center space-x-6"},_hoisted_32={class:"flex-1 min-w-0"},_hoisted_33={class:"text-sm font-medium text-gray-900 truncate dark:text-white"},_hoisted_34={class:"ml-2 inline-flex items-center text-base font-semibold text-gray-900 dark:text-white"},_hoisted_35={key:0,class:"mt-6 lg:mt-auto lg:ml-4 flex flex-col space-y-4 max-w-full"},_hoisted_36={class:"relative shadow-md rounded-lg border border-gray-200 dark:border-gray-700 overflow-x-auto"},_hoisted_37={class:"w-full border-collapse border-spacing-1 min-w-min text-sm text-left text-gray-500 dark:text-gray-400"},_hoisted_38={class:"p-4 lg:p-6 text-lg font-semibold text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800"},_hoisted_39={class:"mt-1 text-sm font-normal text-gray-500 dark:text-gray-400"},_hoisted_40={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},_hoisted_41={scope:"col",class:"px-4 py-3 whitespace-nowrap"},_hoisted_42={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-xs lg:text-sm last:border-b-0"},_hoisted_43={scope:"row",class:"px-4 lg:px-6 py-3 lg:py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white max-w-full overflow-hidden text-ellipsis"},_hoisted_44={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_45={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_46={class:"px-4 lg:px-6 py-3 lg:py-4"},_hoisted_47={class:"px-4 lg:px-6 py-3 lg:py-4 text-center"},_hoisted_48={class:"px-4 lg:px-6 py-3 lg:py-4 text-center"},_sfc_main=defineComponent({__name:"App",setup(t){pdfExports.GlobalWorkerOptions.workerSrc=new URL("/dbs-tw-statement-sorter/assets/js/pdf.worker.min.js",self.location).toString();const e=ref(null);ref(null);const s=B=>{const E=B.target;E.files&&E.files.length>0&&(e.value=E)},n=ref([]),i=ref({}),o=ref([]),d=ref(!1),P=()=>{let B=!1,E=!1,u=0,g=0,W="",v="";o.value=[];let c={};for(let F=0;F<n.value.length;F++){let S=n.value[F];if(S==="正卡"||S==="附卡"){W=`${n.value[F-2]} ${S} ${n.value[F+2]} ${n.value[F+4]}`,v=`card_${n.value[F+4]}`;continue}if(S==="您本期的消費明細如下"){B=!0;continue}else if(S==="續下頁"){B=!1;continue}const $=/^(\d{4}\/\d{2}\/\d{2})\s+(\d{4}\/\d{2}\/\d{2})$/,tt=/^(\d{4}\/\d{2}\/\d{2})\s+(\d{4}\/\d{2}\/\d{2})\s+([\w\s,\/\.\-\*]+)\s+(.*)$/,j=/^(\d{4}\/\d{2}\/\d{2})$/,rt=()=>{o.value.push(c),i.value[v]===void 0&&(i.value[v]={groupName:W,transactions:[],totalAmount:0});const it=i.value[v];it.transactions.push(c),it.totalAmount+=c.amount,c={},E=!1};if(B){if(S.includes(",")&&(S=S.replace(",","")),S.match($)){u=1,g=F,E=!0;let it=S.match($);c.transactionDate=(it==null?void 0:it[1])??"",c.settlementDate=(it==null?void 0:it[2])??""}if(S.match(tt)){u=2,g=F,E=!0;let it=S.match(tt);c.transactionDate=(it==null?void 0:it[1])??"",c.settlementDate=(it==null?void 0:it[2])??"",c.description=S.replace((it==null?void 0:it[1])??"","").replace((it==null?void 0:it[2])??"","")}if(E)switch(u){case 1:if(F===g+2)c.description=S;else if(F===g+4)c.description+=S;else if(F>g+5&&F<g+12){let it=parseFloat(S);isNaN(it)?c.description+=S:(c.amount=parseFloat(S),rt())}break;case 2:if(F===g+2){if(S.match(j))continue;if(S.includes("/")){let it=S.split("/");it.length>1&&(c.foreignCurrency=it[1],c.foreignAmount=parseFloat(it[0]))}else c.amount=parseFloat(S),rt()}else if(F===g+4)if(S.includes("/")){let it=S.split("/");it.length>1&&(c.foreignCurrency=it[1],c.foreignAmount=parseFloat(it[0]))}else c.amount=parseInt(S),rt();else F===g+6&&(c.amount=parseFloat(S),rt());break}}}d.value=!0},m=ref(!1),b=ref(!1),f=async B=>{var W,v;if(d.value=!1,n.value=[],o.value=[],i.value={},!((v=(W=e.value)==null?void 0:W.files)!=null&&v[0])){console.log("No file selected.");return}const E=e.value.files[0],u=new FileReader;u.onload=async c=>{var S;if(!((S=c.target)!=null&&S.result)){console.log("Failed to read the file.");return}const F=c.target.result;try{const tt=await pdfExports.getDocument({data:F,password:B}).promise,j=tt.numPages;for(let rt=1;rt<=j;rt++){const bt=await(await tt.getPage(rt)).getTextContent();n.value.push(...bt.items.map(w=>w.str))}P(),console.log(o.value),console.log(i.value),m.value=!1}catch($){console.error($),m.value=!0}},u.readAsArrayBuffer(E);const g=watch(()=>d.value,c=>{c&&(o.value.length===0&&(b.value=!0),g())})},I=()=>{b.value=!1,d.value=!1},N=ref(null),D=ref(null),k=ref(!1),T=ref(!0),A=()=>{T.value=!T.value},M=async()=>{await f(),m.value&&(k.value=!0)},L=()=>{D.value&&(f(D.value),k.value=!1)};return(B,E)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["flex w-full flex-col items-center min-h-[calc(100dvh)]",[T.value?"dark":""]])},[createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[k.value?(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:E[0]||(E[0]=u=>k.value=!1)},_hoisted_6),createBaseVNode("div",_hoisted_7,[_hoisted_8,createBaseVNode("form",_hoisted_9,[createBaseVNode("div",null,[_hoisted_10,withDirectives(createBaseVNode("input",{type:"password",name:"password",id:"password",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",placeholder:"pdf password",ref_key:"pw",ref:N,"onUpdate:modelValue":E[1]||(E[1]=u=>D.value=u)},null,512),[[vModelText,D.value]])]),createBaseVNode("button",{type:"button",class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:L},"Submit")])])])])])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[b.value?(openBlock(),createElementBlock("div",_hoisted_11,[createBaseVNode("div",{class:"relative w-full max-w-md max-h-full"},[createBaseVNode("div",{class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},[createBaseVNode("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:I},_hoisted_14),createBaseVNode("div",{class:"px-6 py-6 lg:px-8"},[_hoisted_15,createBaseVNode("form",{class:"space-y-6",action:"#"},[_hoisted_16,createBaseVNode("button",{type:"button",class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:I},"OK")])])])])])):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",_hoisted_17,[createBaseVNode("div",_hoisted_18,[createBaseVNode("input",{class:"shrink block text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"file_input",type:"file",onChange:s},null,32),createBaseVNode("div",{class:"shrink-0"},[createBaseVNode("button",{type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 ml-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:M}," 讀取 ")]),createBaseVNode("button",{onClick:A,class:"border border-gray-200 dark:border-gray-700 dark:text-slate-100 text-gray-600 bg-white dark:bg-slate-800 rounded-full absolute right-2 top-2 p-1"},[createVNode(Transition,{name:"fade",mode:"out-in"},{default:withCtx(()=>[T.value?(openBlock(),createElementBlock("svg",_hoisted_19,_hoisted_21)):(openBlock(),createElementBlock("svg",_hoisted_22,_hoisted_24))]),_:1})])]),createBaseVNode("div",_hoisted_25,[createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[Object.keys(i.value).length?(openBlock(),createElementBlock("div",_hoisted_26,[_hoisted_27,createBaseVNode("div",_hoisted_28,[createBaseVNode("ul",_hoisted_29,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,u=>(openBlock(),createElementBlock("li",_hoisted_30,[createBaseVNode("div",_hoisted_31,[createBaseVNode("div",_hoisted_32,[createBaseVNode("p",_hoisted_33,toDisplayString(u.groupName),1)]),createBaseVNode("div",_hoisted_34," $"+toDisplayString(u.totalAmount.toLocaleString()),1)])]))),256))])])])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"scalefade"},{default:withCtx(()=>[Object.keys(i.value).length?(openBlock(),createElementBlock("div",_hoisted_35,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,u=>(openBlock(),createElementBlock("div",_hoisted_36,[createBaseVNode("table",_hoisted_37,[createBaseVNode("caption",_hoisted_38,[createTextVNode(toDisplayString(u.groupName)+" ",1),createBaseVNode("p",_hoisted_39,"$"+toDisplayString(u.totalAmount.toLocaleString()),1)]),createBaseVNode("thead",_hoisted_40,[(openBlock(),createElementBlock(Fragment,null,renderList(["消費明細","消費日","入帳日","外幣幣別","外幣金額","消費金額"],g=>createBaseVNode("th",_hoisted_41,toDisplayString(g),1)),64))]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.transactions,g=>(openBlock(),createElementBlock("tr",_hoisted_42,[createBaseVNode("th",_hoisted_43,toDisplayString(g.description),1),createBaseVNode("td",_hoisted_44,toDisplayString(g.transactionDate),1),createBaseVNode("td",_hoisted_45,toDisplayString(g.settlementDate),1),createBaseVNode("td",_hoisted_46,toDisplayString(g.foreignCurrency),1),createBaseVNode("td",_hoisted_47,toDisplayString(g.foreignAmount?`$${g.foreignAmount.toLocaleString()}`:""),1),createBaseVNode("td",_hoisted_48,"$"+toDisplayString(g.amount.toLocaleString()),1)]))),256))])])]))),256))])):createCommentVNode("",!0)]),_:1})])])],2))}});createApp(_sfc_main).mount("#app");
